<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.325ac96c469a210d078c.css" data-identity="gatsby-global-css">#top-menu{background-color:#3178c6;clear:both;display:flex;height:3rem;justify-content:space-between;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:101}#top-menu>.left{display:flex;flex-direction:row;padding-bottom:env(safe-area-inset-bottom)}#top-menu>.right{display:flex;flex-direction:row-reverse;justify-self:flex-end}#top-menu .nav{display:inline-block;text-decoration:none}#top-menu ul{margin:0;padding:0}#top-menu #home-page-logo{font-size:1.5rem;font-weight:600;padding-top:.7rem;width:200px}@media screen and (-ms-high-contrast:active){#top-menu #home-page-logo svg path{fill:blue}}#top-menu #home-page-logo svg{margin-left:1rem;margin-right:.6rem}#top-menu #home-page-logo span{margin-right:.2rem;position:relative;text-decoration:none;top:-.3rem}#top-menu .nav-item{display:inline-block;font-size:1rem;font-weight:600;text-decoration:none}#top-menu .nav-item a{display:block;padding:.95rem .5em .7em}#top-menu .nav-item a:hover{opacity:.8}#top-menu .nav-item a.active,#top-menu .nav-item a:focus{text-decoration:underline}#top-menu a{color:#fff;text-decoration:none}#beta-notification-menu,.gatsby-noscript{background-color:#c63131;color:#fff;padding:.4rem 0;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}#beta-notification-menu a,.gatsby-noscript a{color:#fff}form.search{background-color:#235a97;border-radius:3px 0 0 3px;display:inline-block;height:3rem;padding-left:1rem}form.search svg{margin-right:.3rem;position:relative;top:.1rem}@media screen and (-ms-high-contrast:black-on-white){form.search svg path{fill:#000}}form.search:focus-within{background-color:#358ef1}@media screen and (-ms-high-contrast:black-on-white){form.search:focus-within{border:2px solid #fff}}@media screen and (-ms-high-contrast:white-on-black){form.search:focus-within{border:2px solid #000}}form.search input{-webkit-appearance:none;background-color:#235a97;border:none;border-radius:0;color:#fff;font-size:1rem;font-weight:600;height:3rem;vertical-align:initial!important;width:150px}form.search input:focus-within{background-color:#358ef1}form.search input:-ms-input-placeholder{color:#fff}form.search input::placeholder{color:#fff}#like-dislike-subnav,.page-popup{transition:opacity .2s linear}.page-popup{background:#222;border-radius:5px;border-radius:4px;bottom:20px;box-shadow:0 1.6px 3.6px 0 rgba(0,0,0,.432),0 .3px .9px 0 rgba(0,0,0,.408);color:#fff;position:fixed;right:20px;z-index:2}.page-popup p{font-size:14px;padding:0 10px}.page-popup div{display:flex}.page-popup div button{background-color:#235a97;border:none;border-radius:0;color:#fff;flex:1 1;flex-grow:1}.page-popup div button.focus,.page-popup div button:hover{background-color:#104261}.page-popup div button.first{border-right:1px solid #fff}.page-popup svg{fill:#fff}#top-menu nav ul .show-only-medium{display:none}#top-menu nav ul .hide-only-medium{display:inline}#top-menu nav ul .show-only-largest,#top-menu nav ul .show-only-small{display:none}@media(max-width:800px){#top-menu nav ul .show-only-small{display:block!important}#top-menu nav ul .show-small{display:inline!important}#top-menu nav ul .hide-only-medium{display:none}#top-menu nav ul .show-only-large{display:none!important}}@media(min-width:767px)and (max-width:900px){#top-menu nav ul .show-only-medium{display:inline!important}#top-menu nav ul .hide-only-medium{display:none!important}}@media(min-width:900px){#top-menu nav ul .show-only-large{display:inline-block!important}}@media(min-width:1050px){#top-menu nav ul .show-only-largest{display:inline-block!important}}@media(max-width:790px){#site-wrapper{margin-bottom:-1px}#my-lang-quick-jump,.hide-small{display:none!important}#top-menu{bottom:0;display:flex;flex-direction:column-reverse;height:auto;left:0;position:fixed;right:0}#top-menu .nav-item{display:block}#top-menu.up{transform:translate(0);transition-timing-function:ease;transition:transform .3s}#top-menu.down{transform:translateY(8.2rem);transition-timing-function:ease;transition:transform .6s}}@media(max-width:790px)and (prefers-reduced-motion:reduce){#top-menu.down,#top-menu.up{transition:none}}@media(max-width:790px){#top-menu #home-page-logo{width:auto}#top-menu .below-small nav{flex-grow:1}#top-menu .below-small nav ul{display:flex}#top-menu .below-small nav ul li{flex:1 1;text-align:center}.above-small .search-section{width:100%}.above-small form.search{display:flex;width:calc(100% - 1rem)}.above-small form.search svg{position:relative;top:1rem}.above-small form.search input{width:200%}#top-menu .ds-dropdown-menu{bottom:140%;left:0!important;margin-left:-34px;min-width:0;right:-180px!important;top:auto!important}#top-menu .ds-dropdown-menu:before{bottom:-7px;left:40px;top:auto;transform:rotate(135deg)}}.skip-to-main{clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px}.skip-to-main:focus{clip:auto;background-color:#faf9f8;border:1px dashed #000;color:#000;height:auto;overflow:auto;padding:20px;position:absolute;text-align:center;width:100%;z-index:999999}#small-device-button-sidebar{display:none}nav#sidebar{background-color:var(--sidebar-background-color);color:var(--alt-text-color);min-width:16rem}nav#sidebar ul{margin:0;padding:0;position:-webkit-sticky;position:sticky;top:0}nav#sidebar ul li{border-bottom:1px solid var(--sidebar-item-border-color);font-size:1rem;font-weight:400;list-style:none;min-height:2.5rem;padding:0}nav#sidebar ul li button{-webkit-appearance:none;background-color:transparent;border:none;color:var(--alt-text-color);cursor:pointer;display:block;font-size:1rem;font-weight:500;height:2.5rem;padding-left:1rem;position:relative;text-align:left;width:100%}nav#sidebar ul li button .closed path,nav#sidebar ul li button .open path{stroke:var(--text-color)}nav#sidebar ul li button:active,nav#sidebar ul li button:focus{background-color:var(--sidebar-active-button-background-color);color:var(--alt-text-color)}nav#sidebar ul li button span{position:absolute;right:20px}nav#sidebar ul li ul ul{margin-left:.2rem}nav#sidebar ul li.highlighted{background-color:var(--sidebar-list-active-background-color)}nav#sidebar ul li.highlighted svg path{stroke:#3178c6}nav#sidebar ul li.closed span.open,nav#sidebar ul li.closed ul,nav#sidebar ul li.open>button>span.closed{display:none}nav#sidebar ul li.open>ul{background-color:var(--sidebar-list-background-color)}nav#sidebar ul li.open.highlighted ul{background-color:var(--sidebar-list-active-background-color)}nav#sidebar ul li ul{margin:0;padding:0}nav#sidebar ul li ul a{color:var(--alt-text-color);display:block;flex-grow:1;padding-bottom:.5rem;padding-left:1rem;padding-top:.5rem;text-decoration:none}nav#sidebar ul li ul li{list-style:none}nav#sidebar ul li ul li a{font-weight:300;margin-right:-.5rem}nav#sidebar ul li ul li:hover{margin-right:-.3rem;padding-left:.3rem;transition:padding-left .1s ease-out}@media(prefers-reduced-motion:reduce){nav#sidebar ul li ul li:hover{transition:none}}nav#sidebar ul li ul li a:focus,nav#sidebar ul li ul li a:hover{border-left:2px solid var(--sidebar-link-border-color)}nav#sidebar ul li ul li.highlight a{border-left:2px solid #3178c6;color:#3178c6;font-weight:500;margin-left:.5rem;margin-right:-.5rem}@media(min-width:800px){nav#sidebar>ul{max-height:calc(100vh - 10px);overflow-x:hidden;overflow-y:auto}}@media(max-width:800px){button#small-device-button-sidebar{-webkit-appearance:none;background-color:#c4c4c4;border:none;border-radius:6px;bottom:120px;display:flex;left:20px;margin-bottom:env(safe-area-inset-bottom);padding:10px;position:fixed;transition-timing-function:ease;transition:left .3s;z-index:100}}@media(max-width:800px)and (prefers-reduced-motion:reduce){button#small-device-button-sidebar{transition:none}}@media(max-width:800px){button#small-device-button-sidebar.hidden{left:-80px}button#small-device-button-sidebar:active{background-color:#575757}nav#sidebar{-webkit-overflow-scrolling:touch;height:100%;margin-left:-800px;overflow-x:hidden;overflow-y:scroll;position:fixed;transition-timing-function:ease;transition:margin-left .3s;width:90%;z-index:99}nav#sidebar ul{padding-bottom:200px}}@media(max-width:800px)and (prefers-reduced-motion:reduce){nav#sidebar{transition:none}}@media(max-width:800px){nav#sidebar.show{margin-left:0}nav#sidebar>ul>li,nav#sidebar>ul>li>button{font-size:1.3rem}}#site-footer{background-color:#3178c6;color:#fff;padding-bottom:3rem;padding-top:1rem}@media(max-width:800px){#site-footer{padding-bottom:9rem}}#site-footer a{color:#fff}#site-footer section{margin:0 auto;max-width:1040px;padding-left:.5rem;padding-right:.5rem;padding-top:1rem}#site-footer h3{font-size:20px;font-style:normal;font-weight:600;margin-top:1px}#site-footer ul{display:flex;flex-wrap:wrap;padding:0}#site-footer ul li{font-weight:600;list-style:none;width:13rem}#site-footer ul li a{font-size:16px}#site-footer ul li p{font-size:14px;margin-top:2px;width:74%}#site-footer ul li span.link-prefix{left:-30px;position:absolute;text-align:right;width:26px}@media(max-width:800px){#site-footer ul li{margin-left:10px}#site-footer ul li p{width:100%}}#site-footer section#customize{border-bottom:1px solid rgba(255,255,255,.3);padding-top:2px}#site-footer section#customize article{display:flex;flex-direction:row}#site-footer section#customize article h3{width:240px}@media(max-width:800px){#site-footer section#customize article{flex-direction:column;margin-bottom:1rem}#site-footer section#customize article label{margin-left:8px}}#site-footer section#customize article label{display:flex;flex-direction:row}#site-footer section#customize article label p{margin:6px 8px 0 0;padding:0}#site-footer section#customize .switch-wrap{display:inline-block;height:20px;margin-right:1rem;padding:5px}#site-footer section#customize .switch-wrap select{background-color:#00273f;color:#fff}#site-footer section#community{border-top:1px solid rgba(255,255,255,.3);display:flex;padding-top:2rem}@media(max-width:800px){#site-footer section#community{flex-direction:column-reverse}#site-footer section#community article#logos{margin:3rem auto 0;text-align:center}}#site-footer section#community article>ul{display:flex;flex-wrap:wrap}#site-footer section#community article>ul>li{margin-bottom:.8rem;word-break:break-all}@media(min-width:800px){#site-footer section#community article>ul>li{width:50%}}#site-footer section#community #logos{margin-right:40px;width:200px}#site-footer section#community #logos svg{margin-bottom:-.8rem}@media screen and (-ms-high-contrast:black-on-white){#site-footer section#community #logos img{filter:invert(100%)}#site-footer section#community #logos svg path{fill:#000}}#site-footer section#community #logos svg.typescript-long{margin-left:8px;position:relative;top:2px}#site-footer section#community #logos img#microsoft-logo{margin-bottom:-.8rem;margin-top:1rem}#site-footer section#community #community-links,#site-footer section#community #using-typescript{flex:1 1}@media(max-width:800px){#playground-samples-popover{display:none}#community-links ul,#using-typescript ul{margin-left:12px}}.popover-container{position:relative}.popover-container .examples{overflow-y:auto}.popover-container .examples>div.section-content .section-list{width:300px}.popover-container.allow-hover #playground-samples-popover{bottom:-10px;opacity:0}.popover-container.allow-hover:hover #playground-samples-popover{bottom:-5px;opacity:1;visibility:visible}.popover-container.allow-hover:hover .footer-icon:after{content:"▼"}.popover-container .footer-icon:after{content:"⊙"}#playground-samples-popover{bottom:0;color:#000;left:-252px;margin:0 auto;opacity:1;position:absolute;right:-320px;transition:bottom .3s ease,opacity .2s linear,visibility 0s linear;visibility:hidden;z-index:123}#playground-samples-popover .section-content{display:flex}#playground-samples-popover .section-content .section-list li{margin-top:4px}#playground-samples-popover .section-content .example-indicator{margin-top:0}#playground-samples-popover .arrow-down{border-left:10px solid transparent;border-right:10px solid transparent;border-top:14px solid var(--footer-arrow-color);height:0;margin:0 auto 20px;position:relative;right:179px;width:0}#playground-samples-popover .navbar-sub{border-bottom:1px solid #235a97;border-radius:0}#playground-samples-popover .navbar-sub div.info{color:#000;padding:20px;width:320px}#playground-samples-popover a{color:#3178c6;text-decoration:none}.examples{background-color:var(--playground-dropdown-bg);box-shadow:0 6px 12px rgba(0,0,0,.175);color:var(--text-color);height:450px;padding:20px}.examples a{color:var(--link-color)}.examples button.section-name{background-color:transparent;border:none;color:var(--text-color);font-size:2rem;font-weight:600;height:2.8rem;margin-right:1rem;margin-top:0;padding-bottom:.05rem;padding-top:0;text-decoration:none}.examples button.section-name.selected{border-bottom:2px solid #3178c6}.examples>ol{padding-left:0}.examples>ol li{display:inline-block;margin-bottom:20px;padding:0;width:auto}.examples>ol li:hover{background-color:transparent}.examples ol{list-style:none;padding-left:0;padding-right:20px}.examples>div.section-content{display:flex;flex-wrap:wrap}.examples>div.section-content>p>a{color:#3178c6;display:inline-block;padding:0}.examples>div.section-content .section-list{display:flex;flex-direction:column;margin-top:1.5em;width:280px}.examples>div.section-content .section-list h4{font-size:16px;font-weight:600;margin:0 0 8px}.examples>div.section-content .section-list ol li{margin:0;padding:0;position:relative;width:auto!important}.examples>div.section-content .section-list ol li .section-list a{border-bottom:none;display:block;font-size:14px;margin-left:-8px;padding:4px 4px 4px 10px;text-decoration:none}.examples>div.section-content .section-list ol li .section-list a:hover{color:#000}.examples>div.section-content .section-list ol li .section-list a.highlight{border-left:2px solid #235a97;padding-left:8px}.examples>div.section-content .section-list ol li .example-indicator{border-radius:.5rem;height:.5rem;margin-top:.3rem;position:absolute;right:.8rem;top:.75rem;width:.5rem}.examples>div.section-content .section-list ol li .example-indicator.done{background-color:#235a97}.examples>div.section-content .section-list ol li .example-indicator.changed{border:1px solid #235a97}@font-face{font-family:Cascadia Mono-SemiLight;font-style:normal;font-weight:400;src:url(/fonts/CascadiaMono-SemiLight.woff2) format("woff2")}@font-face{font-family:Cascadia Code-SemiLight;font-style:normal;font-weight:400;src:url(/fonts/CascadiaCode-SemiLight.woff2) format("woff2")}@font-face{font-family:JetBrains Mono-Regular;font-style:normal;font-weight:400;src:url(/fonts/JetBrainsMono-Regular.woff2) format("woff2")}@font-face{font-family:FiraCode-Regular;font-style:normal;font-weight:400;src:url(/fonts/FiraCode-Regular.woff2) format("woff2")}@font-face{font-family:Dank Mono Regular;font-style:normal;font-weight:400;src:url(/fonts/DankMono-Regular.woff2) format("woff2")}@font-face{font-family:SourceCode Pro Regular;font-style:normal;font-weight:400;src:url(/fonts/SourceCodePro-Regular.woff2) format("woff2")}@font-face{font-family:OpenDyslexicMono Regular;font-style:normal;font-weight:400;src:url(/fonts/OpenDyslexicMono-Regular.woff) format("woff")}@font-face{font-family:OpenDyslexic Regular;font-style:normal;font-weight:400;src:url(/fonts/OpenDyslexic-Regular.woff) format("woff")}@font-face{font-family:Leelawadee UI Web;font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-light.woff) format("woff")}@font-face{font-family:Leelawadee UI Web;font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semilight.woff) format("woff")}@font-face{font-family:Leelawadee UI Web;font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-regular.woff) format("woff")}@font-face{font-family:Leelawadee UI Web;font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-semibold.woff) format("woff")}@font-face{font-family:Leelawadee UI Web;font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/leelawadeeui-thai/leelawadeeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Arabic)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Arabic)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Arabic)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Arabic)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Arabic)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-arabic/segoeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Cyrillic)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Cyrillic)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Cyrillic)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Cyrillic)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Cyrillic)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-cyrillic/segoeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (East European)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (East European)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (East European)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (East European)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (East European)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-easteuropean/segoeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Greek)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Greek)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Greek)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Greek)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Greek)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-greek/segoeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Hebrew)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Hebrew)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Hebrew)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Hebrew)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Hebrew)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-hebrew/segoeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Vietnamese)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Vietnamese)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Vietnamese)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Vietnamese)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (Vietnamese)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-vietnamese/segoeui-bold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (West European)";font-style:normal;font-weight:100;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-light.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-light.woff) format("woff")}@font-face{font-family:"Segoe UI Web (West European)";font-style:normal;font-weight:300;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semilight.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semilight.woff) format("woff")}@font-face{font-family:"Segoe UI Web (West European)";font-style:normal;font-weight:400;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-regular.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-regular.woff) format("woff")}@font-face{font-family:"Segoe UI Web (West European)";font-style:normal;font-weight:600;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semibold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-semibold.woff) format("woff")}@font-face{font-family:"Segoe UI Web (West European)";font-style:normal;font-weight:700;src:url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-bold.woff2) format("woff2"),url(https://static2.sharepointonline.com/files/fabric/assets/fonts/segoeui-westeuropean/segoeui-bold.woff) format("woff")}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}body button,body input,body textarea{font-family:inherit}[lang^=ar] body,body[lang^=ar],body [lang^=ar]{font-family:"Segoe UI Web (Arabic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=bg] body,body[lang^=bg],body [lang^=bg]{font-family:"Segoe UI Web (Cyrillic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=cs] body,body[lang^=cs],body [lang^=cs]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=el] body,body[lang^=el],body [lang^=el]{font-family:"Segoe UI Web (Greek)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=et] body,body[lang^=et],body [lang^=et]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=he] body,body[lang^=he],body [lang^=he]{font-family:"Segoe UI Web (Hebrew)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=hi] body,body[lang^=hi],body [lang^=hi]{font-family:Nirmala UI,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=hr] body,[lang^=hu] body,body[lang^=hr],body [lang^=hr],body[lang^=hu],body [lang^=hu]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=ja] body,body[lang^=ja],body [lang^=ja]{font-family:Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,Meiryo,Hiragino Sans,Source Han Sans,Noto Sans CJK JP,sans-serif}[lang^=kk] body,body[lang^=kk],body [lang^=kk]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=ko] body,body[lang^=ko],body [lang^=ko]{font-family:Malgun Gothic,Gulim,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=lo] body,body[lang^=lo],body [lang^=lo]{font-family:Leelawadee UI Web,Lao UI,DokChampa,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=lt] body,[lang^=lv] body,[lang^=pl] body,body[lang^=lt],body [lang^=lt],body[lang^=lv],body [lang^=lv],body[lang^=pl],body [lang^=pl]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=ru] body,body[lang^=ru],body [lang^=ru]{font-family:"Segoe UI Web (Cyrillic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=sk] body,[lang^=sr-latn] body,body[lang^=sk],body [lang^=sk],body[lang^=sr-latn],body [lang^=sr-latn]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=th] body,body[lang^=th],body [lang^=th]{font-family:Leelawadee UI Web,Kmer UI,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=tr] body,body[lang^=tr],body [lang^=tr]{font-family:"Segoe UI Web (East European)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=uk] body,body[lang^=uk],body [lang^=uk]{font-family:"Segoe UI Web (Cyrillic)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=vi] body,body[lang^=vi],body [lang^=vi]{font-family:"Segoe UI Web (Vietnamese)",Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=zh-hans] body,body[lang^=zh-hans],body [lang^=zh-hans]{font-family:Microsoft Yahei UI,Verdana,Simsun,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}[lang^=zh-hant] body,body[lang^=zh-hant],body [lang^=zh-hant]{font-family:Microsoft Jhenghei UI,Pmingliu,Segoe UI,-apple-system,BlinkMacSystemFont,Roboto,Helvetica Neue,sans-serif}.dark-theme{--background-color:#262626;--text-color:#fff;--border-color:#444;--background-minor-highlight-color:#343434;--inline-code-background-color:rgb(58,58,92,0.7);--link-color:#719af4;--pure-background:#000;--raised-background-color:#313131;--alt-text-color:#fff;--raised-box-shadow:0 1.6px 3.6px 0 hsla(0,0%,100%,0.132),0 0.3px 0.9px 0 hsla(0,0%,100%,0.108);--sidebar-background-color:#2a2a2b;--sidebar-list-active-background-color:#28323a;--sidebar-list-background-color:#353434;--sidebar-link-border-color:#fff;--sidebar-item-border-color:#3e3e3e;--sidebar-active-button-background-color:#4e4e4f;--playground-divider:#f2f2f2;--playground-dropdown-bg:#313131;--playground-dropdown-shadow:0 6px 12px hsla(0,0%,58%,0.175);--playground-dropdown-border:#000;--playground-toolbar-hover-bg:#262626;--playground-dragbar-bg:#28323a;--playground-dragbar-border:#fff;--playground-pre-color:#fff;--table-border-color:#545454;--playground-pre-bg:#1e1e1e;--blue-tinged-bg:#2c3841;--blue-tinged-strong:#273f52;--footer-arrow-color:$ts-light-bg-grey-highlight-color;--fade-gradient:linear-gradient(0deg,#313131,rgba(49,49,49,0.2))}html,html.light-theme{--background-color:#faf9f8;--pure-background:#fff;--text-color:#333;--border-color:#eee;--background-minor-highlight-color:#fcfcfc;--inline-code-background-color:#f1f1fe;--link-color:#235a97;--raised-background-color:#fff;--alt-text-color:#000;--raised-box-shadow:0 1.6px 3.6px 0 rgba(0,0,0,0.132),0 0.3px 0.9px 0 rgba(0,0,0,0.108);--sidebar-background-color:#eee;--sidebar-list-active-background-color:#e3e8ec;--sidebar-list-background-color:#e4e4e4;--sidebar-link-border-color:#000;--sidebar-item-border-color:#dfdfdf;--sidebar-active-button-background-color:#dfdfdf;--playground-divider:#4e4e4f;--playground-dropdown-bg:#fff;--playground-dropdown-shadow:0 6px 12px rgba(0,0,0,0.175);--playground-dropdown-border:#f2f2f2;--playground-toolbar-hover-bg:#f2f2f2;--playground-dragbar-bg:#fff;--playground-dragbar-border:#c4c4c4;--playground-pre-color:#000;--playground-pre-bg:#f7f7f7;--footer-arrow-color:$ts-dark-bg-for-foreground-color;--table-border-color:#f1f1f1;--blue-tinged-bg:#e6f2fb;--blue-tinged-strong:#cce4f6;--fade-gradient:linear-gradient(0deg,#fff,hsla(0,0%,100%,0.2));-webkit-font-smoothing:antialiased;background-color:var(--background-color);color:var(--text-color);font-family:var(--body-font);font-size:16px;line-height:1.4}html{--code-font:"Cascadia Mono-SemiLight",Menlo,Monaco,Consolas,monospace;--body-font:"Segoe UI Web (West European)","Segoe UI",-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}html.font-cascadia-ligatures{--code-font:"Cascadia Code-SemiLight",Menlo,Monaco,Consolas,monospace}html.font-consolas{--code-font:Consolas,monospace}html.font-dank-mono{--code-font:"Dank Mono Regular",Menlo,Monaco,Consolas,monospace}html.font-jetbrains-mono{--code-font:"JetBrains Mono-Regular",Menlo,Monaco,Consolas,monospace}html.font-fira-code{--code-font:"FiraCode-Regular",Menlo,Monaco,Consolas,monospace}html.font-sf-mono{--code-font:"SF Mono",Menlo,Monaco,Consolas,monospace}html.font-source-code-pro{--code-font:"SourceCode Pro Regular",Menlo,Monaco,Consolas,monospace}html.font-open-dyslexic{--code-font:"OpenDyslexicMono Regular",Menlo,Monaco,Consolas,monospace;--body-font:"OpenDyslexic Regular","Segoe UI Web (West European)","Segoe UI",-apple-system,BlinkMacSystemFont,Roboto,"Helvetica Neue",sans-serif}.raised{background-color:var(--raised-background-color);box-shadow:var(--raised-box-shadow);color:var(--alt-text-color)}.raised a{color:var(--link-color)}.raised h1,.raised h2,.raised h3{line-height:normal;margin-bottom:1.5rem;margin-top:2rem}.raised li,.raised p{line-height:1.4rem}.raised ul{padding-left:10px}.raised ul li{margin-bottom:10px;margin-left:10px}.raised h1>code,.raised h2>code,.raised h3>code{background-color:var(--inline-code-background-color);font-size:.95em;margin-left:.2em;margin-right:.2em;padding:2px 4px}.raised li>code,.raised p>code{background-color:var(--inline-code-background-color);font-family:var(--code-font);font-size:.9rem;padding:2px 4px}.raised td{padding:4px}.dark-theme .raised .markdown .anchor.before svg path{fill:#fff}h2,h3{font-weight:400}.main-content-block{margin:1rem auto;max-width:960px;padding:.4rem 2rem 2rem}.main-content-block.headline{max-width:calc(960px + 4rem)}body{margin:0}#___gatsby,body,html{height:100%}#site-wrapper{display:flex;flex-direction:column}.dark-theme{color-scheme:dark}
/*! mscc v0.4.2 - Copyright 2020 Microsoft Corporation */.cc-banner{font-size:12px;position:relative}.cc-banner .hide{display:none}.cc-banner a,.cc-banner div,.cc-banner span,.cc-banner svg{margin:0;padding:0;text-decoration:none}.cc-banner .cc-v-center{display:inline;line-height:2em;vertical-align:middle}.cc-banner[dir=rtl] .cc-float-left,.cc-float-right{float:right}.cc-banner[dir=rtl] .cc-float-right,.cc-float-left{float:left}.cc-banner{background:#f2f2f2;color:#231f20;display:none;font-family:Segoe UI,Helvetica Neue,Helvetica,Arial,sans-serif;margin:0;padding:0 1em;text-align:center}@media(min-width:768px){.cc-banner{font-size:13px;padding:0 1.65em}}.cc-banner>.cc-container{display:inline-block;padding:.75em 0;text-align:left;width:100%}[dir=rtl].cc-banner>.cc-container{text-align:right}@media(min-width:1084px){.cc-banner{padding:0}.cc-banner>.cc-container{max-width:1600px;width:90%}}.cc-banner.active{display:block}.cc-banner .cc-icon{height:1.846em;width:1.846em}.cc-banner .cc-text{margin-left:.5em;margin-right:1.5em}[dir=rtl].cc-banner .cc-text{margin-left:1.5em;margin-right:.5em}.cc-banner .cc-link{color:#0067b8;text-decoration:none}.cc-banner .cc-link:focus,.cc-banner .cc-link:hover{text-decoration:underline}.cc-banner .cc-link:focus{background:content-box rgba(0,120,215,.1);outline:0}@media screen and (-ms-high-contrast:active){.cc-banner{border-bottom:1px solid}}#branding>h1,#branding>h2{font-weight:400;text-align:center}#branding>h1{font-size:3rem;margin-bottom:0;margin-top:5rem}#branding>h2{font-size:1.5rem;margin-bottom:2rem;margin-top:6rem}#branding>h2.subnav{margin-top:0}#branding .headline{padding:2rem}#branding .headline,#branding .subheadline{align-items:center;display:flex;justify-content:center}#branding .subheadline{flex-direction:column;max-width:400px;padding-bottom:5rem;position:relative}#branding .subheadline p.attached-bottom{border-top:1px solid #d3d3d3;bottom:0;height:2.8rem;left:0;padding:1rem;position:absolute;right:0;text-align:left}#branding .recommendations p{margin-top:0;padding:0 1rem 1rem}.navbar-sub{clear:both;display:flex;height:3rem;justify-content:space-between;position:relative}.navbar-sub>ul{display:flex;margin:0;padding:0}.navbar-sub li.name{font-size:1.2rem;font-weight:600;width:200px}.navbar-sub li.name span{padding-left:1rem;padding-top:.7rem}.navbar-sub li{display:flex;font-size:1rem;font-weight:600;list-style:none}.navbar-sub li.divider{background-color:var(--playground-divider);height:1px;margin:9px 0;overflow:hidden}.navbar-sub li .example-indicator{top:1.25em!important}.navbar-sub li a{color:var(--text-color);display:block;padding:.95rem .75rem .5rem .7rem;text-decoration:none}.navbar-sub li.dropdown.open .dropdown-dialog,.navbar-sub li.dropdown.open ul{display:block}.navbar-sub li.dropdown .dropdown-dialog,.navbar-sub li.dropdown ul{display:none;float:left;left:0;position:absolute;top:100%;z-index:1}.navbar-sub li.dropdown ul.dropdown-menu{-webkit-background-clip:padding-box;background-clip:padding-box;background-color:var(--playground-dropdown-bg);border:1px solid var(--playground-dropdown-border);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,.175);font-size:14px;list-style:none;margin:2px 0 0;max-height:calc(100vh - 150px);min-width:300px;overflow-y:auto;padding:5px 0;text-align:left;z-index:99}.navbar-sub li.dropdown ul.dropdown-menu.versions{min-width:5rem}.navbar-sub li.dropdown ul.dropdown-menu.versions li{margin-bottom:0;margin-left:0}.navbar-sub li.dropdown ul.dropdown-menu.versions li.beta{border-bottom:1px solid #f2f2f2;color:#3178c6}.navbar-sub li.dropdown ul.dropdown-menu.versions li.nightly{border-top:1px solid #f2f2f2}.navbar-sub li.dropdown ul.dropdown-menu.versions a{margin:0;padding:10px;text-align:center}.navbar-sub li.dropdown ul.dropdown-menu a{display:block;width:100%}.navbar-sub li.dropdown ul.dropdown-menu li:hover{background-color:#f5f5f5;color:#262626;text-decoration:none}.navbar-sub li.dropdown .dropdown-dialog{overflow-y:scroll;padding:2rem;width:800px}.navbar-sub li.dropdown .dropdown-dialog h3{font-size:2em;font-weight:600;height:2em;margin:0}.navbar-sub li.dropdown .dropdown-dialog a{color:var(--link-color);padding-bottom:.2rem;padding-left:0}.navbar-sub li.dropdown .dropdown-dialog #config-container p{margin:0 0 8px 4px}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container{display:flex;flex-wrap:wrap}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div{max-width:400px;min-width:200px}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div ol{margin:0;padding:0}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div li{margin-bottom:.5rem}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div input{margin-top:.4rem}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div label{font-weight:400}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div label:hover a.compiler_info_link{display:block}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div label a.compiler_info_link{display:none;padding:0;position:absolute;right:10px;text-align:center;top:0}.navbar-sub li.dropdown .dropdown-dialog #config-container #boolean-options-container>div label>span{font-family:var(--code-font);margin-left:4px}.navbar-sub li.dropdown .dropdown-dialog #compiler-dropdowns{display:flex;margin:1.5rem 0}.navbar-sub li.dropdown .dropdown-dialog #compiler-dropdowns label{font-family:var(--code-font);margin-right:.5rem;width:33%}.navbar-sub li.dropdown .dropdown-dialog #compiler-dropdowns label select{margin-left:1rem}.navbar-sub li.dropdown .dropdown-dialog #compiler-dropdowns label span.compiler-flag-blurb{display:block;font-family:var(--body-font);font-weight:400}main>nav{position:relative}main>nav .dropdown-dialog{background-color:var(--playground-dropdown-bg);padding-left:0}main>nav>ul li.disabled{opacity:.5}main>nav>ul li.active.open,main>nav>ul li.active:hover{background-color:var(--playground-dropdown-bg)}main>nav>ul li.active.open .caret{transform:scaleY(-1)}main>nav>ul li.active.name:hover{background-color:transparent}main>nav .examples{box-shadow:none;height:auto}button.examples-close{position:absolute;right:20px;top:20px}main #editor-toolbar>ul>li{margin-bottom:0;margin-left:0;position:relative}main #editor-toolbar>ul>li>a{padding-top:.8rem}@media(prefers-color-scheme:dark){main #editor-toolbar>ul>li>a:hover{border-bottom:1px solid #fff}}main #editor-toolbar>ul>li .dropdown-menu{left:4px}main #editor-toolbar li:hover{background-color:var(--playground-toolbar-hover-bg)}.caret{border-left:4px solid transparent;border-right:4px solid transparent;border-top:4px solid;display:inline-block;height:0;margin-left:2px;vertical-align:middle;width:0}#editor-toolbar>ul>li>a:first-child{padding-left:1rem}#playground-container{display:flex;height:800px}#playground-container ol{padding:0}#playground-container #navigation-container{background-color:var(--blue-tinged-bg);overflow-y:auto}#playground-container #navigation-container h4{margin-left:12px;margin-top:12px}#playground-container #navigation-container ul{padding:0}#playground-container #navigation-container ul li{border-radius:0 3px 3px 0;cursor:pointer;font-size:14px;font-weight:600;height:22px;line-height:22px;list-style:none;margin:0;overflow:hidden;padding-left:12px;text-overflow:ellipsis;white-space:nowrap}#playground-container #navigation-container ul li a{display:block;text-decoration:none}#playground-container #navigation-container ul li a svg{margin-right:8px}#playground-container #navigation-container ul li.selectable:hover{background-color:#ffffff50}#playground-container #navigation-container ul li.selectable.selected{background-color:var(--blue-tinged-strong)}#playground-container #navigation-container ul li.selectable.selected a{color:var(--text-color)}#playground-container #navigation-container ul li.selectable.selected path{stroke:var(--text-color)}#playground-container #navigation-container ul li hr{margin-left:0;margin-top:10px;width:60px}#playground-container #story-container{font-size:.9rem;overflow-y:auto;padding:0 20px 20px}#playground-container #story-container .highlight pre{background-color:#f7f7f7;border-radius:3px;font-size:85%;line-height:1.45;overflow:auto;padding:16px}#playground-container #story-container details[open]{border-left:2px solid var(--blue-tinged-strong);padding-left:1rem}#playground-container #story-container details[open] summary{margin-left:-.5rem}#playground-container #story-container summary:hover{background-color:var(--background-minor-highlight-color);cursor:pointer}#playground-container #story-container kbd{background-color:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 2px #fff;color:#333;display:inline-block;font-family:Arial,Helvetica,sans-serif;font-size:11px;line-height:1.4;margin:0 .1em;padding:.1em .6em;text-shadow:0 1px 0 #fff}#playground-container #story-container .highlight{font-size:14px;margin-bottom:16px}#playground-container #story-container .pl-c{color:#969896}#playground-container #story-container .pl-c1,#playground-container #story-container .pl-s .pl-v{color:#0086b3}#playground-container #story-container .pl-e,#playground-container #story-container .pl-en{color:#795da3}#playground-container #story-container .pl-s .pl-s1,#playground-container #story-container .pl-smi{color:#333}#playground-container #story-container .pl-ent{color:#63a35c}#playground-container #story-container .pl-k{color:#a71d5d}#playground-container #story-container .pl-pds,#playground-container #story-container .pl-s,#playground-container #story-container .pl-s .pl-pse .pl-s1,#playground-container #story-container .pl-sr,#playground-container #story-container .pl-sr .pl-cce,#playground-container #story-container .pl-sr .pl-sra,#playground-container #story-container .pl-sr .pl-sre{color:#183691}#playground-container #story-container .pl-v{color:#ed6a43}#playground-container #story-container .pl-id{color:#b52a1d}#playground-container #story-container .pl-ii{background-color:#b52a1d;color:#f8f8f8}#playground-container #story-container .pl-sr .pl-cce{color:#63a35c;font-weight:700}#playground-container #story-container .pl-ml{color:#693a17}#playground-container #story-container .pl-mh,#playground-container #story-container .pl-mh .pl-en,#playground-container #story-container .pl-ms{color:#1d3e81;font-weight:700}#playground-container #story-container .pl-mq{color:teal}#playground-container #story-container .pl-mi{color:#333;font-style:italic}#playground-container #story-container .pl-mb{color:#333;font-weight:700}#playground-container #story-container .pl-md{background-color:#ffecec;color:#bd2c00}#playground-container #story-container .pl-mi1{background-color:#eaffea;color:#55a532}#playground-container #story-container .pl-mdr{color:#795da3;font-weight:700}#playground-container #story-container .pl-mo{color:#1d3e81}#playground-container #editor-container{-webkit-font-smoothing:subpixel-antialiased;background-color:var(--playground-dropdown-bg);display:flex;flex-direction:column;flex-grow:1;position:relative;width:calc(100% - 360px)}#playground-container #editor-container .editor-section{display:flex;flex-direction:column}#playground-container #editor-container #monaco-editor-embed{height:100%}#playground-container #editor-container #editor-toolbar{border-bottom:1px solid #c4c4c4;height:3rem;margin-bottom:10px;margin-right:-2px;position:relative}#playground-container #editor-container #editor-toolbar ul.right{background-color:var(--playground-dropdown-bg);position:absolute;right:0}#playground-container .playground-dragbar{background-color:var(--playground-dragbar-bg);border-left:1px solid var(--playground-dragbar-border);cursor:col-resize;margin-left:2px;padding:3px}#playground-container .playground-dragbar.left{background-color:var(--blue-tinged-bg);border-left:none;border-right:1px solid var(--playground-dragbar-border);margin-left:0}#playground-container .playground-dragbar:hover{background-color:var(--blue-tinged-tinged-strong)}#playground-container .playground-dragbar.selected{background-color:var(--blue-tinged-strong)}#playground-container .playground-sidebar{background-color:var(--playground-dropdown-bg);display:flex;flex-basis:320px;flex-direction:column;max-width:320px;overflow-x:hidden;overflow-y:hidden;padding:0 1em 0 .5rem;width:320px;z-index:1}@media(max-width:800px){#playground-container .playground-sidebar{flex-basis:300px;max-width:300px;width:300px}}#playground-container .playground-sidebar .playground-plugin-container{flex:1 1;flex-grow:1;flex-shrink:1;height:100%;max-width:100%;overflow-x:hidden;overflow-y:auto;position:relative;width:100%}#playground-container .playground-sidebar .playground-plugin-container #restart-required{border:1px solid #3178c6;display:none;padding:5px 10px;position:absolute;right:0;text-align:center;top:-2px}#playground-container .playground-sidebar .playground-plugin-container pre{background-color:var(--pure-background);border:none;color:var(--text-color);overflow-x:auto;padding:0 10px;width:100%}#playground-container .playground-sidebar .playground-plugin-container pre code{font-family:var(--code-font);font-size:14px;line-height:19px}#playground-container .playground-sidebar .playground-plugin-tabview{align-items:center;display:flex;flex-wrap:wrap;justify-content:center;margin-bottom:10px;overflow-x:auto;overflow-y:hidden;padding-bottom:6px}@media(max-width:800px){#playground-container .playground-sidebar .playground-plugin-tabview{justify-content:flex-start}}#playground-container .playground-sidebar .playground-plugin-tabview button{background:none;border:none;color:inherit;cursor:pointer;font-family:var(--body-font);font-size:14px;font-weight:600;margin:14px 2px 5px;padding-top:0;position:relative}#playground-container .playground-sidebar .playground-plugin-tabview button .plugin-tab-notification{background-color:#c63131;border-radius:20px;color:#fff;height:20px;padding:0 4px;position:absolute;right:-10px;text-align:right;top:-8px}#playground-container .playground-sidebar .playground-plugin-tabview button:disabled{opacity:.4}#playground-container .playground-sidebar .playground-plugin-tabview button.active{border-bottom:1px solid var(--link-color)}#playground-container .playground-sidebar .playground-plugin-tabview button:focus{color:var(--link-color)}#playground-container .playground-sidebar .playground-settings-container,#playground-container .playground-sidebar pre{margin:0}.playground-plugin-container #log-tools{align-items:center;border-bottom:1px solid var(--playground-dragbar-border);border-top:1px solid var(--playground-dragbar-border);display:flex;margin-top:1px;padding:3px}.playground-plugin-container #log-tools svg{stroke:var(--text-color);cursor:pointer;padding-right:5px}.playground-plugin-container #log-container{font-family:var(--code-font);height:95%;line-height:1.5rem;overflow:auto;white-space:pre-wrap}.playground-plugin-container #log-container #log{margin-top:1rem}.playground-plugin-container #log-container .log-warn{color:orange}.playground-plugin-container #log-container .log-error{color:red}.playground-plugin-container #log-container .log-info{color:skyblue}.playground-plugin-container #log-container .log-log{color:silver}.playground-plugin-container #log-container .log-error,.playground-plugin-container #log-container .log-warn{font-weight:700}.playground-plugin-container #log-container hr{background:#fff;border:0;border-bottom:1px dashed #ccc}.playground-plugin-container #log-container .comma{color:#777}.playground-plugin-container div.ast{font-family:var(--code-font);font-size:.8rem;line-height:.3rem}.playground-plugin-container div.ast li{list-style-type:none;margin-bottom:4px;margin-left:0;position:relative}.playground-plugin-container div.ast li span.ast-node-number{color:blue}.playground-plugin-container div.ast li span.ast-node-string{color:green}.playground-plugin-container div.ast li span.ast-node-boolean{color:red}.playground-plugin-container div.ast li span.ast-node-undefined{color:brown}.playground-plugin-container div.ast .ast-children>div.ast-tree-start{display:block;margin-left:12px;min-height:1rem}.playground-plugin-container div.ast div.ast-tree-start{display:inline-block}.playground-plugin-container div.ast div.ast-tree-start ul.ast-tree{border-left:1px solid #d3d3d3;display:none;margin-left:12px;margin-top:4px;padding-top:0}.playground-plugin-container div.ast div.ast-tree-start.open>a.node-name{top:4px}.playground-plugin-container div.ast div.ast-tree-start a.node-name{color:purple;font-weight:700;margin-left:10px;position:relative;text-decoration:none;top:0}.playground-plugin-container div.ast div.ast-tree-start a.node-name:hover{cursor:pointer;text-decoration:underline}.playground-plugin-container div.ast div.ast-tree-start a.node-name:before{display:block;height:1em;left:-.8em;padding:0 .1em;position:absolute}.playground-plugin-container div.ast div.ast-tree-start.open,.playground-plugin-container div.ast div.ast-tree-start.open>ul{display:block}.playground-plugin-container div.ast div.ast-tree-start>a:not(:last-child):before{content:"+"}.playground-plugin-container div.ast div.ast-tree-start.open>a:not(:last-child):before{content:"-"}.playground-plugin-container ul.compiler-diagnostics{font-family:var(--code-font);margin:0;padding:0}.playground-plugin-container ul.compiler-diagnostics li.diagnostic{cursor:pointer;font-size:.85rem;list-style:none;margin:0 0 1rem;padding-left:1rem;white-space:pre-wrap}.playground-plugin-container ul.compiler-diagnostics .error{border-left:2px solid red}.playground-plugin-container #empty-message-container{align-items:center;display:flex;flex-direction:column;height:80%;justify-content:center}.playground-plugin-container .playground-options input[type=checkbox]{margin-right:6px}.playground-plugin-container .playground-options.tight li{margin-bottom:.2rem}.playground-plugin-container .playground-options.tight span{margin-right:1rem}.playground-plugin-container .playground-options li{list-style:none;margin-bottom:1rem}.playground-plugin-container .playground-options li span{font-weight:600}.playground-plugin-container .briefly-highlight{animation:highlight 1s ease 1}@keyframes highlight{0%{background-color:#ff0}to{background-color:inherit}}span.right{float:right}.warning{font-size:.8}input[type=text],input[type=url]{font-size:1.1rem;padding:.2rem;width:80%}input.good{border-color:#086f56}#playground-container .playground-plugins{margin:1rem 0}#playground-container .playground-plugins.featured{border:1px solid #d3d3d3}#playground-container .playground-plugins.featured li{border-bottom:1px solid #d3d3d3}#playground-container .playground-plugins li{padding:10px 0}#playground-container .playground-plugins li div{display:flex;flex-direction:row;position:relative}#playground-container .playground-plugins input{display:block;height:100%;margin:0 8px;position:absolute}#playground-container .playground-plugins label{padding-left:30px;padding-right:10px}#playground-container .playground-plugins label span{font-weight:600}.custom-modules li a{border:1px solid #000;display:inline-block;height:1rem;line-height:1rem;text-align:center;text-decoration:none;width:1rem}.custom-modules li a:hover{background-color:#fcb7b7;color:red}.highlight-error{background-color:#fcb7b7}.highlight-info{background-color:#d3d3d3}.underscore-neutral{border-bottom:1px solid green}#popover-background{background-color:rgba(0,0,0,.75);height:100%;left:0;position:fixed;top:0;width:100%;z-index:100}#popover-modal{background-color:#fff;color:#000;display:flex;flex-direction:column;height:70%;left:50%;padding:20px;position:fixed;top:50%;transform:translate(-50%,-50%);width:80%;z-index:101}#popover-modal.smaller{height:40%;min-width:320px;padding:0;width:40%}#popover-modal textarea{font-family:var(--code-font);padding:8px}#popover-modal .close{position:absolute;right:20px;top:20px}#popover-modal pre{max-height:90%;overflow:auto}#popover-modal .window-title{background-color:#eee;font-size:32px;text-align:center}#popover-modal .window-title.warning{background:repeating-linear-gradient(45deg,#d63131,#d63131 10px,#c63131 0,#c63131 20px);color:#fff}#loader{align-items:center;display:flex;flex-direction:column;justify-content:center;padding-bottom:200px;padding-top:200px}#loader p{text-align:center}#loader .lds-grid{display:inline-block;height:80px;position:relative;width:80px}#loader .lds-grid div{animation:lds-grid 1.2s linear infinite;background:#3178c6;border-radius:50%;height:16px;position:absolute;width:16px}#loader .lds-grid div:first-child{animation-delay:0s;left:8px;top:8px}#loader .lds-grid div:nth-child(2){animation-delay:-.4s;left:32px;top:8px}#loader .lds-grid div:nth-child(3){animation-delay:-.8s;left:56px;top:8px}#loader .lds-grid div:nth-child(4){animation-delay:-.4s;left:8px;top:32px}#loader .lds-grid div:nth-child(5){animation-delay:-.8s;left:32px;top:32px}#loader .lds-grid div:nth-child(6){animation-delay:-1.2s;left:56px;top:32px}#loader .lds-grid div:nth-child(7){animation-delay:-.8s;left:8px;top:56px}#loader .lds-grid div:nth-child(8){animation-delay:-1.2s;left:32px;top:56px}#loader .lds-grid div:nth-child(9){animation-delay:-1.6s;left:56px;top:56px}@keyframes lds-grid{0%,to{opacity:1}50%{opacity:.5}}#flash-bg{align-items:center;bottom:0;display:flex;justify-content:center;left:0;pointer-events:none;position:fixed;right:0;top:0;z-index:42}#flash-bg p{background-color:rgba(0,0,0,.8);border-radius:1em;color:#fff;font-size:1.5rem;padding:.5em 1.5em;transform:translateZ(0);transition:opacity .1s ease-in-out}.monaco-list{background-color:var(--background-color)}#dev .navbar-sub .active{text-decoration:underline}#dev .content{display:flex}@media(max-width:800px){#dev .content{flex-direction:column}}#dev pre{background-color:#f9f9f9;margin-right:0;overflow-x:scroll}#dev pre,#dev pre .mtk5{color:#000}#dev .split-fifty{display:flex;flex-direction:row;width:100%}@media(max-width:800px){#dev .split-fifty{flex-direction:column}}#dev .split-fifty>div,#dev .split-fifty>p{flex:1 1}#dev .split-fivehundred{width:calc(100% - 500px)}@media(max-width:900px){#dev .split-fivehundred{width:100%}}#dev .fivehundred{margin-left:20px;width:500px}@media(max-width:900px){#dev .fivehundred{margin-left:0;padding-left:20px;text-align:center;width:100%}}#dev .split-code{display:flex}#dev .split-code>p{flex:1 1;padding-right:1rem;width:30%}#dev .split-code>pre{flex:3 1;overflow-x:scroll}#dev #example-buttons div.button{background-color:#faf9f8;color:#000;cursor:pointer;display:inline-block;margin:10px;padding:8px 12px;text-decoration:none}#dev #example-buttons div.button:active,#dev #example-buttons div.button:hover{background-color:#dfdfdf}#dev #twoslash-failure{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background-color:rgba(255,255,255,.5);bottom:0;left:0;padding:10px;position:absolute;right:0;top:0}#dev #twoslash-failure .err-content{border:2px solid #c63131;padding:20px}#dev #twoslash-failure .err-content p{font-family:Menlo,Monaco,Consolas,Courier New,monospace;white-space:pre-wrap}.cheatsheets .row{justify-content:center;margin-bottom:2rem}.cheatsheets .row p{flex:1 1;margin:10px;max-width:320px}.cheatsheets .sheet-container{align-items:center;display:flex;flex-wrap:wrap;justify-content:center}.cheatsheets .sheet{position:relative}.cheatsheets .sheet img{border:1px solid #000;box-shadow:0 4px 20px -6px rgba(0,0,0,.25);max-width:360px;transition:all .15s ease}.cheatsheets .sheet:active,.cheatsheets .sheet:hover{z-index:100}.cheatsheets .sheet:active img,.cheatsheets .sheet:hover img{border-color:#3178c6;box-shadow:0 4px 20px -2px rgba(0,0,0,.25);margin:-2px;z-index:100}.cheatsheets .sheet:active .description,.cheatsheets .sheet:hover .description{display:block}.cheatsheets .sheet.cs-1{transform:rotate(-1.1deg)}.cheatsheets .sheet.cs-2{transform:rotate(1.2deg)}.cheatsheets .sheet.cs-3{margin-top:-40px;transform:rotate(3deg)}.cheatsheets .sheet.cs-4{margin-top:-40px;transform:rotate(-2deg)}.cheatsheets .sheet .description{background-color:rgba(0,0,0,.5);box-sizing:border-box;color:#fff;display:none;font-size:2.5rem;height:100%;padding-top:30%;position:absolute;text-align:center;top:0;width:100%}.cheatsheets .fluid-button{border:1px solid #000;color:#000;margin:3rem auto 0;max-width:260px}@media(max-width:800px){.cheatsheets .cs-2{margin-top:-40px}}@media(min-width:768px){.cheatsheets .sheet-container{margin:0;min-height:550px}.cheatsheets .cs-1 .description{padding-top:20%}}@media(min-width:1200px){.cheatsheets .sheet-container{margin:0 -80px;min-height:780px}.cheatsheets .sheet img{max-width:550px}.cheatsheets .cs-1 .description{padding-top:30%}}.community{padding:0}.community.centered{text-align:center}.community.centered h2{margin-top:120px}.community .sidebar{background-color:rgba(204,207,233,.1)}.community .next-steps-container{background-color:#fff}.community .banner-text{margin-top:20px}.community .callouts{display:flex;flex-wrap:wrap;margin:20px 0}.community .callouts .callout{display:flex;line-height:1.4rem;margin-bottom:10px;margin-top:20px;width:48%}@media(max-width:800px){.community .callouts .callout{width:90%}}.community .callouts h3{font-size:1rem;margin:0 0 10px;padding:0}.community .callouts .icon{background-position:50%;background-repeat:no-repeat;background-size:auto 3.2rem;display:block;height:5rem;margin:0 20px 20px;min-width:5rem;transition:background-color .2s ease-out;width:5rem}@media screen and (-ms-high-contrast:active){.community .callouts .icon{-ms-high-contrast-adjust:none}}.community .callouts .icon.high-contrast-only{font-size:1.8rem}.community .callouts .icon.img-circle{border-radius:50%}.community .callouts .icon.discord{background-color:#7289da;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJwcmVmaXhfX0xheWVyXzEiIHZpZXdCb3g9IjAgMCAyNDUgMjQwIj48cGF0aCBkPSJNMTA0LjQgMTAzLjljLTUuNyAwLTEwLjIgNS0xMC4yIDExLjFzNC42IDExLjEgMTAuMiAxMS4xYzUuNyAwIDEwLjItNSAxMC4yLTExLjEuMS02LjEtNC41LTExLjEtMTAuMi0xMS4xem0zNi41IDBjLTUuNyAwLTEwLjIgNS0xMC4yIDExLjFzNC42IDExLjEgMTAuMiAxMS4xYzUuNyAwIDEwLjItNSAxMC4yLTExLjFzLTQuNS0xMS4xLTEwLjItMTEuMXoiIGNsYXNzPSJwcmVmaXhfX3N0MCIvPjxwYXRoIGQ9Ik0xODkuNSAyMGgtMTM0QzQ0LjIgMjAgMzUgMjkuMiAzNSA0MC42djEzNS4yYzAgMTEuNCA5LjIgMjAuNiAyMC41IDIwLjZoMTEzLjRsLTUuMy0xOC41IDEyLjggMTEuOSAxMi4xIDExLjIgMjEuNSAxOVY0MC42YzAtMTEuNC05LjItMjAuNi0yMC41LTIwLjZ6bS0zOC42IDEzMC42cy0zLjYtNC4zLTYuNi04LjFjMTMuMS0zLjcgMTguMS0xMS45IDE4LjEtMTEuOS00LjEgMi43LTggNC42LTExLjUgNS45LTUgMi4xLTkuOCAzLjUtMTQuNSA0LjMtOS42IDEuOC0xOC40IDEuMy0yNS45LS4xLTUuNy0xLjEtMTAuNi0yLjctMTQuNy00LjMtMi4zLS45LTQuOC0yLTcuMy0zLjQtLjMtLjItLjYtLjMtLjktLjUtLjItLjEtLjMtLjItLjQtLjMtMS44LTEtMi44LTEuNy0yLjgtMS43czQuOCA4IDE3LjUgMTEuOGMtMyAzLjgtNi43IDguMy02LjcgOC4zLTIyLjEtLjctMzAuNS0xNS4yLTMwLjUtMTUuMiAwLTMyLjIgMTQuNC01OC4zIDE0LjQtNTguMyAxNC40LTEwLjggMjguMS0xMC41IDI4LjEtMTAuNWwxIDEuMmMtMTggNS4yLTI2LjMgMTMuMS0yNi4zIDEzLjFzMi4yLTEuMiA1LjktMi45YzEwLjctNC43IDE5LjItNiAyMi43LTYuMy42LS4xIDEuMS0uMiAxLjctLjIgNi4xLS44IDEzLTEgMjAuMi0uMiA5LjUgMS4xIDE5LjcgMy45IDMwLjEgOS42IDAgMC03LjktNy41LTI0LjktMTIuN2wxLjQtMS42czEzLjctLjMgMjguMSAxMC41YzAgMCAxNC40IDI2LjEgMTQuNCA1OC4zIDAgMC04LjUgMTQuNS0zMC42IDE1LjJ6IiBjbGFzcz0icHJlZml4X19zdDAiLz48L3N2Zz4=)}.community .callouts .icon.stackoverflow{background-color:#5016d9;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE0IDU1VjM1LjhoMy41bC0uMSAxNS40aDIzVjM1LjlINDRWNTVIMTR6bTUuNi0xMC4xaDE4djMuOGgtMTh2LTMuOHptLjEtM0wyMCAzOGwxOC4xIDEuNy0uNCAzLjktMTgtMS43em0uOS03LjkgMS4xLTMuOCAxNy41IDQuOS0xLjEgMy44TDIwLjYgMzR6bTMuMy05LjMgMi0zLjQgMTUuNSA5LjQtMi4xIDMuNC0xNS40LTkuNHptNy43LTkuNCAzLjItMi4zIDEwLjYgMTQuOC0zLjIgMi4zLTEwLjYtMTQuOHptMTEuNi01LjdMNDcgOWwzIDE3LjktMy45LjYtMi45LTE3Ljl6Ii8+PC9zdmc+)}.community .callouts .icon.blog{background-color:#d9a216;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI2LjMgMTcuNmMxMS4xIDAgMjAuMSA5IDIwLjEgMjAuMWgtNC4zYzAtNC4yLTEuNi04LjItNC42LTExLjJzLTctNC42LTExLjItNC42di00LjN6bTAtOC42QzQyLjEgOSA1NSAyMS45IDU1IDM3LjhoLTQuM2MwLTMuMy0uNi02LjUtMS45LTkuNS0xLjItMi45LTMtNS41LTUuMi03LjgtMi4yLTIuMi00LjktNC03LjgtNS4yLTMtMS4zLTYuMi0xLjktOS41LTEuOVY5em04LjUgMjAuMmMyIDIgMi45IDQuNSAyLjkgNy4xLTIuOSA0LjMtMi45IDEwLjEtMi45IDEwLjEtMTEuNSAwLTIwLjEgOC42LTIwLjEgOC42bC0uNi0uNi0xLTEgMTIuNy0xMi43aC40YzEuNiAwIDIuOS0xLjMgMi45LTIuOXMtMS4zLTIuOS0yLjktMi45LTIuOSAxLjMtMi45IDIuOXYuNEwxMC43IDUwLjkgOSA0OS4zczguNi04LjYgOC42LTIwLjFjMCAwIDUuNyAwIDEwLjEtMi45IDIuNiAwIDUuMS45IDcuMSAyLjl6Ii8+PC9zdmc+)}.community .callouts .icon.uservoice{background-color:#1a2833;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTM0LjkgOUM0NiA5IDU1IDE0LjYgNTUgMjEuNWMwIDQuNC0zLjYgOC4yLTkuMSAxMC40IDEuMiAyLjMgMy4yIDQuNyA1LjMgNy45LTQuMy0xLjUtMTAuNy0yLjktMTQuNC01LjlMMzUgMzRjLTExLjEgMC0yMC4xLTUuNi0yMC4xLTEyLjUtLjItNi45IDguOS0xMi41IDIwLTEyLjV6bTQuOCAyOS43YzAgNS44LTYuOSAxMC41LTE1LjMgMTAuNWgtMS4yYy0zLjEgMi45LTcuNCA1LjgtMTIuMyA1LjggMS4xLTIuMiAzLjUtNC41IDUtNy41LTQuMi0xLjktNi45LTUuMS02LjktOC44IDAtMy43IDIuNy02LjkgNi45LTguOCAzLjYgMy41IDkuOSA1LjggMTcuMSA1LjhsMS44LS4xYzEuNCAxLjEgMyAxLjkgNC45IDIuN3YuNHoiLz48L3N2Zz4=)}.community .callouts .icon.twitter{background-color:#00a0d1;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NCA2NCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTU2IDE3LjRjLTEuOC44LTMuNyAxLjMtNS43IDEuNSAyLTEuMiAzLjYtMy4xIDQuMy01LjMtMS45IDEuMS00IDEuOS02LjMgMi4zLTEuOC0xLjktNC40LTMuMS03LjItMy4xLTUuNCAwLTkuOCA0LjMtOS44IDkuNyAwIC44LjEgMS41LjMgMi4yLTguMi0uNC0xNS40LTQuMy0yMC4zLTEwLjEtLjggMS40LTEuMyAzLjEtMS4zIDQuOSAwIDMuNCAxLjcgNi4zIDQuNCA4LTEuNi0uMS0zLjEtLjUtNC41LTEuMnYuMWMwIDQuNyAzLjQgOC42IDcuOSA5LjUtLjguMi0xLjcuMy0yLjYuMy0uNiAwLTEuMy0uMS0xLjktLjIgMS4zIDMuOCA0LjkgNi42IDkuMiA2LjctMy40IDIuNi03LjYgNC4xLTEyLjIgNC4xLS44IDAtMS42IDAtMi4zLS4xIDQuNCAyLjcgOS41IDQuMyAxNS4xIDQuMyAxOC4xIDAgMjgtMTQuNyAyOC0yNy41di0xLjNjMS45LTEuMiAzLjYtMi45IDQuOS00Ljh6Ii8+PC9zdmc+)}.community .callouts .icon.definitelytyped{background-color:#0077d2;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADIEAYAAAD9yHLdAAAcLElEQVR4nOzdCVxU9d4G8N+ZlWWGdQZwTxKVXMilUssltbLFrKtppJbVrdS0MhfULMUyRTMtvXrtZjfNbrlWLmkuZe6aCqgY7isqIDvMMMxy3vM/UPpamo0w/zPD8+WDv1kOw0MBD2fOmXM05LaE4ampEXOkC2pyDR0i3yQ8f5b9S0KtWu4/LgAAVDKRxNJ95RfXRkv/2Emc9ihR0oy4Fjt3uvugws0vmjAs9UDd4dIFDblGjSr/2P795CkErXc3AAAAcCCKPaV/XSRu7cqukWrSLKlQPoiLW//rzT7ETRQIK45WLaULWhLX3lP+MeY57mYGAAAFEqmX/K84fZ00d5DfqMekQtkWF+tafL0PuUGBJIxMTYl/Wl5G+HxP+bK6E5WdGQAAFEcqkkXHpXmBLjwvFUjSorhHHOOuXUj1x49LGJG6v1UrQnEAAFRX0u//fg2kWYNqfv5fouH703rRHdcudFWBJAxJ/aXuTPk29dq7CcUBAFDdqUjoK62JaL52jHth+h/vvMKftKPiCds4AADgDyZKfZHQLXW55ve9d1VX7Y7L9qoawzEdAAAoE3t5xoPSbE7RoxdeuVHeWP5uZ5JXVcZt4pcPAAAUTiSxuFiaZeQwDWJPYUkl8oKVdyoAAFA8aU3EYJCmjjTt48sLRKi5g3cqAADwGtKKx5On/mQ3XgAAgBsSiTr9CwUCAABuqLcHBQIAAH+XQEKgAQUCAABuQYEAAIBbUCAAAOAWFAgAALgFBQIAAG5BgQAAgFtQIAAA4BYUCAAAuAUFAgAAbkGBAACAW1AgAADgFhQIAAC4BQUCAABuQYEAAIBbUCAAAOAWFAgAALgFBQIAAG5BgQAAgFtQIAAA4BYUCAAAuAUFAgAAbkGBAACAW1AgAADgFhQIAAC4BQUCAABuQYEAAIBbUCAAAOAWFAgAALgFBQIAAG5BgQAAgFtQIAAA4BYUCAAAuAUFAgAAbkGBAACAW1AgAADgFhQIAAC4BQUCAABuQYEAAIBbUCAAAOAWFAgAALgFBQIAAG5BgQAAgFs0vAMoxfzCJ8pq5BCFtw8YoLmTdxrPs9mc48TFRKU/ODeJJiLLgLIMcTbRZcFqdMUSZR8uTrKnEJ3+PvfftvNEJ/xy/l0mzWP5edvtTxKVtXM6xQm8vwrP69690QWDgejFs61GhIbyTgPe5sgnmV9bSogS7vkhOasju0UTp/6Gd6qbhwKp0G1+43eCZxDVTAkJ0a3knYaLlTTwqms/Su+9/t/9Y6+ZMtdBsYgtd+5/efNsq6ViuZwzryyS6FCvzL2lpfKcVPo40Z7PzxVYLEQHG2e2sN0ufZxLvIMOV+0X5Am33x7eS68n6rGyeXMUCPxdu7udmKpKZJeyjh3uzKZhVOBueRoCt7KpWi6M4Jfvr6BA4Jaomgl9aBlRvWZhfaTfo1SPwojNzhQTY2QLbKf4q5fPH2JZ49hAtCh5//k86Z65ObtWXpZ+UA4fvtzMbufxFQAogauNS/6DrXB+kXzd8p71OTZNjrD72NRo1Nu4hbsubAMBjwr5KOBRzQNEQ7bc94r5MlFa2og1sbFEqX6v2WPGEL399v3Z5iyihm+Fx+m+5Z0WgBfHOIeDzcxZ2U3YLMgv+oFNcTF7qlkpsAYCitDcWnO6/xppUk3yl65PaPRg4xpDib5elByTK/0AjUn+ITjzHaKz0wtq27/inRbAU8SnyrctFhUXy9dLNlnkp7pMHcIasqnrp/2OVzasgYBCqY4I6fQr0TN9W64K6ymtqRx6M6hRLtG83CdTan1CFNvYXKrfxzslgKe53nGx7ZOU3SBHfoorf3vhMDadd7te93waFAh4BcM6/RzVRaKXQ+9ZFz6bKHns64ENk4je2tBJNEvXNc1VKmEp75QAniLWFtuyWVyvZBSbWX0vl7Fpa1tW5rkUKBDwSvr+mknSOgq917VbUg1pjWTbgFdCo/cStf+49jC/fmwJURRr8U4J4CnOns532MxempPDZt68ghfk2xu53q66z4oCAZ9wz7B6IwPXEm0ZOiSy4QGikfVaJxnfYPfY2trb8U4H4Gklj1omsXnpx6w72LRa2G71lQ0FAj5pauunpkcPIlrc8+m5tY4TRQ6xR5ZMZPeUjmavQ5HskN4AfJy0Jt6JzZwu+V3lOTRf3lbi2OJsfeuPjgIB37SMhpO05tF72T3roqKINqx/w9VsN5Gxe3Fx4WS2wOWU3ANsOjc6nXyjAnjAUlHeRmhNsI5mM3N09kk2LWus37v/oCgQqBaaHakz3HCOKGXm+7p2ydL1h82DdTp2z6WD2YPZzMst+A+b9hhHKs+kAJ4gLhHT2MyNy2/B5uX78wawaX/r73z/o0CgWomOjohgrzdZ9erwES31RCEpAfU08qp9icXyGJuZP2VHsJn3eoG8EV6U8MsL4BmlX5TKa+aZg8q//4uLS+r99UehQKBaqveoyeSXRLS7f2J2m4VEdWaEW/zuv3qJkpGWvWxeDM2azWbhp8Xd2HR97Tro+bwAnpWfX7iLzWxzrvzCxTKbfcofl0KBQLXW8EBUXsAZos8Ov5TYtPDPlnAdqjhGUbei/7J50VFeKMW7Soo9lxOAD1uy7Us2s17NWc1mYUHxcPmOJdIbDmWiFMfiLq2wvELUt9+cmAPPe/7zq9WqC8JOIv/WOqvqZaIQVcBd2gVEkV8Gz9B1kv5izzBl+o8likmKigp4jSiuft0+xjZEDfwiWwcEeD5vZev6SdNm4SaiWcuffTZWWsN4Pf+L0vQN8lGDl4hvXr2k2Kn80BL5VFhE9JVj/frjdxJtn7a3/rlVXKJXqS+TB2c2T5f+v/8vqmvAAH45+n03d+xB6fMfPXoxvmQgvxyVrXi6Ld/JniL9gUJ4Z/kLE8o3whdSxcEeE6x7UCCKYbGUTXHeTfTLqJMNCwo4hbijYpYf9XMZ3V5x/VzFHCS9r6KLVH7U3Jm0lajO/PAD/t2Inn++46Fa0i/SIa92za+zm8g8JyiofCO1dxmS8+CDdUdIhbDi2OD8fKKve+6UvuDry5ydn1+6SJqUn1TK6/9bFbL0KNM6e8oXu/LMkTbhvFAsFXpKypmkwnieSSrZKKk4HuEdwh2OrY678RQW3KJzL+Y0t64jmqha8czxKUQ13hhyefNmou7h03smSwWyIn3vo1kdiOw9nE+Kb/BOe/MmH++zPkZa4wqfZfhAN4l3GgBlQoFApXI2cr3D9lpanZvsn7WKqGfszNDkt4jazpyQuHsZ0YlPs2LZiaWU7rZRpuP+AUTz+78c02QZ7zQAyoQCAY/YF31qasF8otjZI6dt70o0dsyS6cekv+xtXziecLl4p7u+HsEtiyIiiB6zthgUMZh3GgBlQYGAR9lTnV+7xhNNnrIy+WRrolZJ4y7u3EmU+WNBQdki3umub3RCd3P9x3inAFAWFAhwlZZ2PoadKafL6cnv/9Ke7WVz6RWLAjcq3lu3YUrICKInYlpNiXyVdxoAZUCBgCKkvXg+ozidqHXx25t2tiQ6uSor07qAd6qrDKfeVIdo9o8D9sT2ItIcVTdT9eYdCoAvFAgoSlEraxuHtCbSu9uszNS3iAp3WveWnxtaGWrVDv2HfgpRj34t+5tP8E4DwBcKBBRpn658o3sv8eNxqSFE4iGKZa98VYq+e+99qeY/eKcA4AsFAoq24d6DpsvLieZ9tWnWudq801zx4LpmI8IXEoXdZ/heG8c7DQAfKBDwCu8MW778eClRaYJ9rGsT7zREgQ/o71ffRvRSWafDtX3wFegANwMFAl4h21xYVGYnGjJ3wYJf5/JOc8XL47o0rfOm9IM0QpghLOWdBsCzUCDgVeYXbb7//EtEabHnfyjexTsNUXR382V2fpGmL9X50MDhIJgAPKFAwCt9tnHL3Ixfeae4ov3IRrmhG3mnAPAsFAh4pcV373zzEnudyE/SmwK0OxzTOuRe3ikAPAsFAl4p40LeJ6VjiFbW2R+c3ZF3GqKWc+q/G4RT30I1gwIBrzbn8sYNZ6fzTkHUaGvUmcBtREFB/n6arbzTAHgGCgS82qZLaYdzuxDljSvZ4Ijkl0OYKAiUSHTfy40OhKbyywHgSSgQ8GqOJ51O1xKiX9qf7FxwB+80RO2CY8aGPME7BYBnoEDAJ6Q0PJNfdJh3CqKWrW67LWg/7xQAnoECAZ9wODFjafF9vFMQNRtSZ77hA94pADwDBQI+4YQ561+WZ3inIKp1POyi3yoi3XeaeFUG7zQAVQsFAj7h7PicyNLZvFMQCQIto95E5kFGo24h7zQAVQsFAj4hc1DBOdtY6cJ4WkJpvNMQhVkMn2jDeacAqFooEPAJtkX2u1wuory4kkfsMbzTEBl6+iWrR/JOAVC1UCDgU3KfLi62K+AMhoFf6fXqi7xTAFQtFAj4lOJHbGOcTt4piDSZarXQjXcKgKqFAgGfYrc7vxJ78k4h/WCphD5CIu8UAFULBQI+RatVxwvLeacgEkWxlxI25gNUJRQI+BT/53TH1H14pyByDHXWFNfyTgFQtVAg4FPCnYYE7Ru8UxCV6uwnndt5pwCoWigQ8Ak6neaiahlRWGPDKG0+7zRERXVLf3K+zjsFQNXS8A4AUBkisoOW6voSCUEURp14pyEqrGPVOu7inQKgamENBHxC3c9M9f07805xRXZE0YyyCN4pAKoWCgR8wu2PR6zyV8CJnEpG2EY7NxIVdbO2cNzNOw1A1UKBgE9o8lStWMMB3imI0iZkrC/GU1dQTaBAwCfcqa13wfgQ7xREqRfP7Csq5J0CwDNQIODVNBrVRKEJ0V0No6ODFfCLe+/dp+oWKqDIADwBBQJe7f7EJneENyYKW2gwaqN5pyHakp4+L68m7xQAnoECAa82eHGX3DpTeKcgys0pecl+kuhI3sXUkhLeaQA8AwUCXilqaPAM/TGiHimtH45owjsNUfKXp7sWtSUSY8U0cQLvNACegQIBr9RnVxtjVBf5FLI/0/280xDtaXby2YLavFMAeBYKBLzSgBodNtX6D+8UV2w9nb4C2z6gusGhTMCrxDdv+2KNHKI7Z9drYPyQdxoi6157A9fbRDvOHYvJWyzfFE5bOYcC8BCsgYBXCF4f0FobTzRP/eLoJnOkG+pIbwqwNG33c5caExWMt4Q7UBxQzaBAwCuMbfB4v2gtkXG/3271Nt5piMQPqBZNJ/ro5XW3n6nPOw0AHygQULS41+t+FtSd6M1hD4fW+5h3miv2dTrVpfA80f6y098XFvFOA8AHCgQUKfrbiMcDVhN9P3LUIy13EWm+VasFBZxp8Ddf19iZePE93ikA+EKBgKIIiYIgTCBaOHDg0WbSd2fNWiEb9S15p7rCeZ/rbVGU8n23bcCF3bzTAPCFvbBAEUzvG2N13xIten9QdLOVRPcWNYwPMfNO9UeT569adSqJKLtxYdOyFrzTAPCFNRDgyt9ft109kWjV5uFCy+NEDxU1jzcpsDgubszfbislSmy6fMVxBa0RAfCENRDg4oG1zYpMA4nmOV4YccdSovqPmV/1b8071fVNN35f47STyOFwvcOewgIAFAh4iF9/7TPqPkRTVvbpHJNK9NobDx2v9yyRkC40JQUXR0ZG3gpbG6LZ5g2rzi7nnQZAWVAgUCXCLIYHtB2I+i5o16TmAKkw3npoWN3dRA3yIx8JqCcv0pQS+Wa8kZJ023HnaaInJn/YI/k8kW2hfYXrEO9UAMqCAoFKUaNLSDu9nujVTg8crXuCaEjyg+PrHiUKHuh/WsMO8THQuw7wMbvveuGslHvv/lPPFcznnQZAmVAg8KdUM1XLhKVEpn5GI9s7ql6Iyeq3mqjR1KjTgWuIWsy+7T7jeKK2y2L8QusStdp827tBdYh0YzSDhfLdW2dy/hLc8svIk1MKHyR6f/DKlidnSTf8U3o/zTkUgEKhQBSikaNGjcDTRCk93te26+25zyv8XP5Ekl83XRzbRhG037+eJk8qjtmGPdo3pG+Q19XNhU+v+oAx0nsbeab/ftsF6b2t5zJXhQvBedtsXxA9kDjl5C9riQr/aT3k2Mg7FYCyoUAUwu+U9jvVu0RxVJeMfCLk0fd8PjFP1gVlZa5/EPXrMXfKwZVEBcMsIY4I3qkAvAMKBKolewNnQ7EnUbdaU5/dt45oy5b0kNw1vFMBeBe8kBCqFdsXjidcLqJnT83devCgXBzpud/wTgXgnbAGAtVCyR7bfucBooePTVu1r5RoqyvdkDeLdyoA74YCAZ929oOcIaULifp+O2fRgVyibduPxOfF8k4F4BtQIOCTttyfvjzvNWmNY8/UUfuMRBZLWb6zA+9UAL4FBQI+oeCQNc6xhWjagdWpp7sQzYxf1/h0vlQcm8vGOhVwBkMAX4QCAa92+HBGRskIol6HPy5MsRP92jejX/HqijtRHABVCgUCXuXYpEuXLJ9Laxo91+SeHkr02ZGfT5xfTuTs47oXR8kF8CwUCChacbGtjXMj0djHFw869h+iWR3X288slO6Ipc1Uo2IhFAcAFygQUAT7SedX4gdEWwOOHMkzEP0vYEebixeJFu/Y1fvSJqlIfird4HhbWvAn6X0z57AAIEOBABeXzUXz7Q2IFozeGp+xQVqz2LR+99nTRGfWXr5s7S4vcpzqVyzcjltMALgBFAhUKpdLXEzjiU48nhltkb67UvzPNC5aT7Rnzwm/gjSiHQXHvs1bS7T3sVNbC/sTlY1w/OQ6WvHB3blGB4C/CQUCN+TcKFWCSJQ1vnBYWTLRyalZr1oXSAWxMquDRVpDOLjpXFBxEtH+GacDC1sS7dp1vCB/GJFlja2d01nxIHdf86D50vuXVH5UXwDwWgJRQkJqKvZfibRrv3HWIFLvKapbLJ+61NnY9TbvVJ7jqimeFT+Uvuppru1ibakAjtoWsf8eJaG2/c5AaYGldFh6g2rGvDnonE5HpNWqm6s8eJqBa2V3KmxSFklktzu3uabzywH/HwrkD8SO1JHN3PR8LZvWfdYv+CYCAFAiPIX1B8LP9DOb4UtCdrBptfptYLPg06JgNh1fOa59SgYAoBrC4dyvr3f53j/+z/k9y2bkENPtbAZMDUjiGQsAQBlQIDdN6CM0ZTPs42D5bN+mo2HyKU+132ia88wFAMAHCsRtfp31/dmMHGrOZtPwQWAA30QAAJ6EAqk0ITOD5G0kZlP4JTZ1HXU4YREA+DAUSKXT++lasGnuF34nm0FG4wfyHROEpzjGAgCoZCiQKiMkkrzffFCwQd5vPWJM+GNs6lvo+/LMBQBQOVAgHqO7XTuaTXN22I9shmQEGfkmAgC4FSgQbgz3BBrYjJxrzmLTr79fP76JAAD+DhQId9pJmjg2TT+FbmIz9KOQZDaF3kITnrkAAG4Mr0RXnMBp/o+wqd+ii2azYEJRCJtWa2mpvMBScSm3cAAAv0OBKJamg3ovm+E/yv1BVkvpPjZzhfzNbIqi2IlPMgAABk9heQ3/AL9WbEZ1jpCPihu4JuAtvokAoHpDgXgd9RHVu2yGvhL8GZvmp8LD5duXqyfyzAUA1Q0KxOvpd7LzNRBFfGmSp+FM4FQ2hfPCTp65AMDXoUB8hnqP6iM2Q+4NmsGm+Xj4AjZVE1WdeeYCAF+FAvFZun7a79iMioqYwKbRYDjAprBUmMAvFQD4DhSIz1NNFPqwGRxifIjNyKbmNDY172mwDx4A3AIUSLWjeUC9jc2IbNMkNoNeNK5lU7VLtYxnLgDwNvgbtNpSLRfkE2MFkXxEFQqI8WvI5uX38raz6RjncHALBwBeAGsgUEETpznKZmSkeTabwf8MOsSmapkqkWcuAFAqgSghITVVFHkHAaVyucQObObMzT3Cpq1HWQrfRACgDFgDgb+gUglb2DR9Ed6ezdANwefZVKvVy3nmAgDeUCBwk4RdJG9kD3w+4C42I+aYBrOpn6zfwTMXAPCCAgE3qd9Vyd895n+F9WQzLD2kSL69GdZMAKoHFAhUkoCu/vJeXFHNI+TDzfsn+U/hmwgAqhYKBCqZ8DP9zGZ4fIj8Asbw8FD5ePSaUZrbOMYCgEqHAoGq0k56k/j7+/mzGTnWJJ8QKzAwYDfPWABQWVAg4CFCU0FgMzQ0+Ak2Taaw5mxqNdr3eOYCAHehQIATPz99NpuRUaZ/sWlca5jGNxEA/D0oEFCI4JeMH7JpHlx+gizdaN1evokA4MZQIKAw+pUVJ8h6PNzKZtCHxvKDdU3AYegBlAUFAkrVW3ojViAGI5sRK8OfYVPfT/8dz1gA8BsUCHgJXZa2I5vmzWED2QwJCf5BvqOT9AYAHKBAwEsZDAED2IyaaJYPBeo3x28l10AA1Q4KBLyc5pnyw9Cb3g99hc2w0FD5PCdCoqo3z1wAvg8FAj4mINAvic3IOSaTfH21/yr5jqeEpzjGAvBBOCMh+CiNVv0Nm2ED5SOpkH+4TS6SXCFPfkGjKOIsOAC3BmsgUE34r9bLBRI1NGIzm4EBAeUnxrpDegMAN6BAoJpRr1A9zWZoWPDDbJpfNcXKt6erJ/LMBeB9UCBQzekna+UTYkWsMsm7CRsCAwPZFAThPM9cAMqHAgGQqT8qXzMJCQ0KYtNsCpe3oagmqjrzzAWgSPJOKSgQgD+l02vfZ7NGl/ITZBnHG/LYFJYKS3nmAlAC1THhqCMSBQJwQ0IfoSmbwfON8sb2yKHmLDa132ia88wFwJO6g3rRyS2sQEQSS6284wB4B41GLZ+/JMJmms1m8A/lB3tUZah28cwF4EliK9Hw6aflBULrRvOOA+BdhBGCfMpe44sVB3vsb9rHplaLE2SB79MladXrzrECcZI49VH5NlHsyTcUgLfSHK1YM5lTvjdXyPqgAjZVv6qW8cwFUJnUtdU/7S4i+s9bHV8+uFi4ckfCqNTkn9k54gRSdTBxywfgU1wdxA5s5vyaJx/3wZZs+5JvIgA3sL2u0ogCuvjXv+esVCDGDgf2PHL1RnSRxEkJFZfG88kI4GtUW4QtbJo6hsWxGRoSHMym+j71bp65AP4O9QRVnSXjfyuO3269qkCSpsW1XP8ZydtEpu/jkBDAhwnLaAabgYaAADYjV5keZ9NPr9fxzAVwI8J81fNlbYn09+j+PeLza+/9s914d5B+FNuvRFoj+bJllecDqJZUzVTyT5/JHCafAz4sNETeXVj9tFrNMxcAIzwq6DKfIdIZNC3apUhrHvM6djhn/MNS13+AhPjUJRr2Wtza1PDz1cTKRuj7adUFBgDp77bx5U8g53XNf5BNS31rNN9EUJ38tsah1ZcXx3+Fzt/vK73e0jd4IWHSV3G9HU8SOeI17/XbKd3gIvFFtl+JtGaSsb7ygwMAOxEWJbIZpg6R/7wLHxj2MpvaXzTteeYCH1WxcVydpn5zSS8i/wT94gYb/qo4fnODNZDrSfhHaoqmq3ShAQmjX5BvEhO6y48lGAx///EA4K+JoigfNTj/jUL5BYslIy0WvonAm/22O65+nH7ta9uu3Th+s9wokGslDE3dqp8sXdBTQPs4+THVT54iee2mY1+SN8rftkK+XQh8/tY/HwAQWS2l8s72OV3yG8s3LBVxjC74/cyb5ceqkg858sXJrdKv4aZi10+lP0F0M7V71z312+s4bvWT/V8AAAD//9ud87xmEBwjAAAAAElFTkSuQmCC)}.community .callouts .icon.bug{background-color:#4d4d4d;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzlFQkFERkU4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzlFQkFERkQ4NkJCMTFFM0FBNTJFRTMzNTJEMUJDNDYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJFOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJGOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Kk5lQwAABYxJREFUeNrkm29oVXUYx3+7bM3V1FnbqlltrtXWtYRa1nqxooY5E7EhKWGuaTDBagol9SIMDCKICASj+cISw/DPi16ZBakrUBnoC7nNoTMWy6I1c+LmVq6t78N9jpyu555znt855+536IHPi939/jzP95zznN+/kzc1NaUitirwJJgPasF94DZQDG7hMqNgBFwEZ5kU+AH0R+lcXgQCJMBT4EXwLKgM2N7P4FvwJegCk6YKUA5eB23grogu2C/gc7AN/GGKABTsZtAOZqjc2DjYAT5kUfSNBNCkAGwGo1PTZ6PsQ4FuHLp3QD3YDR5QZtgZsAac1ElYokcGbATHDApesS/kUwf7GEkOKAK7wAvKbNsPXgZjYQowG3wNnlDxsONgCbgchgAU/GHwiIqXUT5o8hLBKwfcDA7FMHgrUR/iGLQEoGTyBWhQ8bUGjiFPR4A3QIuKv7VwLKIcQMnue5Dv0fjT/IwtAM3g+RyMBmkU+BXf3qc5Rx3xqDPBE7LjfkaCheCcj1HYKYe6JeBt8GcEo75L3HaJQ7+nfNQ/x7H9p67TFX4L1Pi4EocdfhsGH4BPwVbwqu0xGwI/8vT2N/77Gv+vAJSCO3n6PJ//Vjz72w62cPtORnfAwx7+1nBsW93ugGow7vOKtPkYa9eDl0Clxji9kuvW+yjb5tPncY7xet3MhjoFt2RzgIlU2DQL/O6017W/Be4BawXJqMCgTH+ToOxajvWG1+AmYVBlBglQKrxwmzIFoB9XCzt91CABpL6sti62JcBiXtKS2GMGCSD1pZxjvi7AKmED9PraYJAAG2yvVL+2yi7AImHl90C3QQJ03/B+97ZF1lCYVlN6BBV/BffykNQkoyF4H5grqJOkO6BR2NF2A4O35gifCOs0JjTW9vYaPPPbJ11LJAFqBRVoDf68wQLQI3BBUL424XPiY1lvDOb/ZwRla0iAOYIKv8dAgEFB2VtJgJmCChMxEEAyHigmAQoFFWbFQIDZgrKF0p2hmTEQQOQjCTAmKD8vBgJUCcqOkQBXBBXosEORwcEXKdmBjCskwICgQr5h0+BMW6i8V7LtNkAC9As7WWqwAM8Jy/cnhBMhspVKvq2eC0uwbxLrSWhMa+dpdJQLW6mRpLtpOlyuMcL7CTwErhoSPG2ApjQEuD3BQ0fp0ZJqlT6pZYpt0wieYh60nuWDGp2+At4xIPgt7IvU0jHzBkFdgD27HWDGNGyGFHHfulaXuTN0IkBjZ8EykJeDwKmPFtAXwN8TTltjrVkKfwcawXJW3G3v8DTYCKoiCLwGvAl6QthpbnU6J5jP2f1uh1Wgxbbxwv0qvT/vtZRGA6wuzs50+Pkb8JdgQtPMq1VJld7bnxtSzhjgJD5hzwEW611OZK6xlSvzeYbAsl3Cx4PK7ozodOl6t93hfJByqbzOVnYh+MdHhxfBLI1bnuoMhRx8imPMKgDR5LG/nrSVfddHpx8HeO4/ClmApsw+snXsdk7gYMat+r5Hp0sDCLAkxOA7nfrI1nGxx2tmQUb5x8FuzgvD4Dw4wNm2MIAA1SEF38cx+RaAeBCMZGlwb44GOyUhBD/CsTj24TatpddXq3L+RIVmXnE4QzjJMaSylvBxFdqzKHsVrDD8Dmj36sOvIx0unewHDRENg4MI0BH2FyP0RcZOlzW3Ib7VLvPqDK0z1PEq7bDmLVwCLgnr0AhvnUp/0eJp0k9m6HO4fUp2nGZODgUY5PzUJVlHkxg1TEfnjxqY8I6yb12SSjqLm7T9/Ax4TaW/+JxuIx862KcL4toBk1QFT1omXZLRHQHaL3Npl/r8jH3QjiGsbJ3kGd/fDo6WBWi31KG9a9xXMgzfw35tVfCR9l52dk8Ibe7htnq57YowfY7i4+lYWUL9z+1fAQYACqstE4NCc18AAAAASUVORK5CYII=)}.community .community-callout-headline{margin-top:0}.community h3.centered-highlight{background-color:rgba(204,207,233,.1);padding:20px;text-align:center}.community .upcoming-event{min-width:330px}.community .upcoming-event img{width:50px}.community .upcoming-event .event-info{position:relative}.community .upcoming-event .meetup-text{max-height:300px;overflow-y:auto;padding-bottom:20px}.community .upcoming-event .meetup-gradient{background:var(--raised-background-color);background:var(--fade-gradient);height:30px;position:absolute;top:290px;width:100%}.community .events>h4{padding-left:20px}.topContents{background:#152740;border:none}.resultsBackground{background-color:var(--background-color)}.resultsArea{padding:0 1rem}.resultsArea,.searchArea{margin:auto;max-width:1040px}.searchArea{padding:8rem 1rem 2rem}.searchArea.searchAreaSearching{padding:2rem 1rem}@media(max-width:900px){.searchArea{padding-top:3rem}}.searchBar{align-items:center;border-bottom:2px solid #f2f2f2;display:flex;flex-direction:row;padding-bottom:.5rem}input#search-box-top:focus{outline:none}.searchInput{-webkit-appearance:none;background:none;border:none;color:#fff;font-size:36px;font-weight:500;letter-spacing:-.02em;padding-bottom:.25rem;text-shadow:0 4px 4px rgba(0,0,0,.25);width:100%}.searchInput::-ms-clear,.searchInput::-ms-reveal{display:none;height:0;width:0}.searchInput::-webkit-search-cancel-button,.searchInput::-webkit-search-decoration,.searchInput::-webkit-search-results-button,.searchInput::-webkit-search-results-decoration{display:none}.searchInput:focus{outline:none}.searchInput:-ms-input-placeholder{color:#fff}.searchInput::placeholder{color:#fff}.resultsCount{color:rgba(255,255,255,.8);display:block;font-size:20px;margin-right:1rem;white-space:nowrap}@media(max-width:480px){.resultsCount{height:0;overflow:hidden;width:0}}.magnifier{background:no-repeat 50% url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 39 40'%3E%3Ccircle cx='16.882' cy='16.882' r='14.882' stroke='%23FAF9F8' stroke-width='4'/%3E%3Cline x1='27.48' x2='37.48' y1='27.655' y2='38.655' stroke='%23FAF9F8' stroke-width='4'/%3E%3C/svg%3E");height:40px;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:49px}.closer{background:no-repeat 50% url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 26 26'%3E%3Cpath fill='%23fff' fill-rule='evenodd' d='M26 13c0 7.18-5.82 13-13 13S0 20.18 0 13 5.82 0 13 0s13 5.82 13 13zm-16 0L5 8l2.828-2.828 5 5L18 5l2.828 2.828L15.657 13l5.171 5.172L18 21l-5.172-5.172-5 5L5 18l5-5z' clip-rule='evenodd'/%3E%3C/svg%3E");border:none;cursor:pointer;height:28px;margin-top:2px;width:28px}.description{color:#fff;font-size:18px}#search-by-algolia{margin:2rem;text-align:center}#search-by-algolia .text{fill:var(--text-color)}.resultRow td{background-color:var(--raised-background-color);border:solid var(--table-border-color);border-width:0 1px 1px 0;padding:.5rem}.resultRow td:last-of-type{border-right-width:0}.resultRow.resultRowExactMatch{box-shadow:var(--raised-box-shadow)}.resultRow .downloads,.resultRow .via{text-align:center}.resultRow .downloads{font-weight:700;width:3.5rem}.resultRow .resultLink{color:inherit;text-decoration:none}.resultRow .downloadsHundredThousand:after,.resultRow .downloadsMillion:after{content:" ";display:block;height:1px;margin-left:15%;width:70%}.resultRow .downloadsMillion:after{background:#3178c6}.resultRow .downloadsHundredThousand:after{background:#c6bf31}.resultRow .via{width:2.5rem}.resultRow .typeImage{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}.resultRow .typeImage:after{box-sizing:border-box;height:20px;text-align:right;width:20px}.resultRow .dt:after{align-items:flex-end;border:1px solid #000;border-radius:4px;content:"DT";display:flex;font-size:7px;font-weight:700;justify-content:flex-end;padding-right:2px;vertical-align:bottom}.resultRow .in:after{background:50% no-repeat url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 22 24'%3E%3Cpath fill='%23F3F3F3' stroke='%23000' d='M1 17.133V6.448L11 1l10 5.448v11.104L11 23 1 17.133z'/%3E%3C/svg%3E");content:" "}.resultRow .resultName{font-weight:700}.resultRow .resultName:after{content:" ";display:block}.resultRow .updated{width:10rem}@media(max-width:800px){.resultRow .updated{width:7.5rem}}@media(max-width:480px){.resultRow .downloads,.resultRow .updated{display:none}}.resultRow .install{width:20rem}.resultRow .install:after{background:linear-gradient(270deg,var(--raised-background-color) 0,hsla(0,0%,100%,0) 196.67%);bottom:0;content:"";position:absolute;right:0;top:0;width:15px}@media(max-width:800px){.resultRow .install{display:none}}.resultRow .pre{align-items:center;background-color:var(--raised-background-color);border:0;bottom:0;color:var(--alt-text-color);display:flex;justify-content:left;left:0;margin:0 0 0 .5rem;overflow-x:hidden;padding:0;position:absolute;right:0;top:0}.resultRow .copyInstall{background:var(--raised-background-color);border:1px solid var(--text-color);border-radius:3px;color:var(--alt-text-color);cursor:pointer;float:right;font-size:10px;margin-right:.5rem;opacity:0;position:relative;transition:opacity .2s}.resultRow .copyInstall:focus,.resultRow .copyInstall:hover,.resultRow .install:hover .copyInstall{opacity:1}.resultRow .code-line{display:block}.resultRow .code-line:before{-webkit-touch-callout:none;content:"> "}.loading,.resultRow .code-line:before{-webkit-user-select:none;-ms-user-select:none;user-select:none}.loading{font-size:4rem;padding:10rem 1rem}.empty,.loading{text-align:center}.empty{padding:5rem 0}.empty:before{align-items:flex-end;background:#3178c6;border-radius:1rem;box-sizing:border-box;color:#fff;content:":(";display:flex;font-size:7.5rem;font-weight:700;height:15rem;justify-content:flex-end;margin:0 auto 3rem;padding:1rem 1.5rem;width:15rem}.resultsTable{border-radius:2px;border-spacing:0;font-size:14px;margin:0 0 1rem;max-width:1040px;width:100%}.resultsTable th{font-weight:400;padding:1.5rem 0 .5rem;text-align:left}.resultsTable th.popular{font-weight:700;padding-top:2rem}.resultsTable td{box-sizing:border-box;position:relative}.headRow th{padding-top:.5rem}.afterTop th{padding-top:2rem}@media(max-width:480px){.dlsHead,.updatedHead{display:none}}@media(max-width:800px){.installHead{display:none}}.installers{float:right}.installer{background:none;border:0;color:var(--foreground-color);cursor:pointer}.installerSelected{border-bottom:1px solid #3178c6}.resultsRaised{background-color:var(--raised-background-color);box-shadow:var(--raised-box-shadow);color:var(--alt-text-color)}.row,.split-row{display:flex;flex-direction:row;flex-wrap:wrap}.split-row{align-items:center;justify-content:center}.split-row .first{margin-left:0}.col1{flex:1 1;min-width:250px;padding:1rem}.col2{flex:2 1}.col1.first{margin-left:20px}.col1.last{margin-right:0}@media(max-width:800px){.container>.row{flex-direction:column}}.version-bar{background-color:#262626;color:#fff;margin:0;padding:.7rem 2rem;text-align:center}.version-bar p{margin:0}.version-bar p a{color:#719af4}.grey-box{background-color:#d8d8d8;box-sizing:border-box;margin-right:20px;padding:18px}.grey-box a{color:#000}.clicky-grey-button.first,.grey-box.first{margin-left:20px}.clicky-grey-button.last,.grey-box.last{margin-right:0}.split-row>.clicky-grey-button{flex:1 1}@media(max-width:800px){main #index-2 h2{font-size:1.8rem;padding-left:20px;padding-right:20px}main #index-2 div.headline-diagram{height:400px;max-width:100%;overflow-x:hidden}main #index-2 .split-row>a{margin-left:20px!important;min-width:80%}main #index-2 .grey-box{margin-right:0}main #index-2 .illustration{display:none}main #index-2 ul.dropdown{margin-top:12px}main #index-2 .headline-diagram div.editor.front{margin:20px auto;position:static}main #index-2 .headline-diagram .text{overflow-x:scroll}main #index-2 #m-stories div.copy{margin:20px auto 0;position:static;text-align:center}main #index-2 #m-stories div.copy a.migration-button{margin:0 auto}main #index-2 .small_full_width{width:100%}main #index-2 .github-bar{display:none}main #index-2 .get-started-section{flex-direction:column}main #index-2 .get-started-section a.get-started{background-image:none!important;height:auto!important;margin:0 auto}main #index-2 img{max-width:100%}main #index-2 h3{text-align:center}}@media(max-width:900px){.tag-container .twoslash-annotation.left{bottom:0;left:0;position:static;top:auto!important}.tag-container .twoslash-annotation.left svg{transform:rotate(44deg) scaleX(-1) translateX(-20px)!important}.tag-container .twoslash-annotation.right{display:none}}.show-only-small{display:none}@media(max-width:480px){.show-only-small{display:block!important}#index div.headline-diagram div.editor.front{max-width:300px}}#index-2 h1{font-size:2.5rem;font-weight:200;line-height:2.8rem;margin-top:0;padding-right:40px}#index-2 h1 strong{font-weight:600}#index-2 h2{font-size:2.5rem;font-weight:500;line-height:2.5rem;margin-top:0;text-align:center}#index-2 h3{font-size:1.6rem;font-weight:400;line-height:1.6rem;margin-bottom:2.5rem;margin-top:0}#index-2 p{font-size:1.2rem}#index-2 .col1{min-width:230px}@media(max-width:360px){#index-2 .col1{max-width:calc(100% - 2rem)}}#index-2 .darkblue{background-color:#00273f;color:#fff}#index-2 .blue{background-color:#3178c6;color:#fff}#index-2 .purple{background-color:#4e086f;color:#fff}#index-2 .dark-green{background-color:#086e12;color:#fff}#index-2 .white{background-color:#fff;color:#000}#index-2 .white .col1 h3{text-align:center}#index-2 .white .col1>p,#index-2 .white .col2>p{font-size:1.2rem}#index-2 .light-grey{background-color:#faf9f8;color:#000}#index-2 .grey{background-color:#d8d8d8;padding-bottom:0}#index-2 .grey div.container{padding:1rem}#index-2 .headline{min-height:420px}#index-2 .headline .col1{padding-bottom:3rem}#index-2 .headline p{padding-right:20px}#index-2 .headline .container{font-size:1rem;padding-bottom:0}#index-2 .container{max-width:1080px;padding-bottom:40px;padding-top:64px}#index-2 .container,#index-2 .container .half{display:flex;flex-direction:column;margin:0 auto;position:relative}#index-2 .container .half{max-width:780px}@media(max-width:360px){#index-2 .container .half{max-width:100%}}#index-2 .headline-diagram{display:relative}@media screen and (-ms-high-contrast:active){#index-2 .headline-diagram{border:2px solid #fff}}#index-2 .headline-diagram pre .code-container{overflow:hidden}#index-2 .headline-diagram pre .code-container a{display:none}#index-2 .headline-diagram .editor{border:2px solid #7fa2c9;border-radius:4px;width:540px}#index-2 .headline-diagram .editor ul.editor-tabs{display:flex;flex-direction:row;font-size:14px;margin:0;padding:0}#index-2 .headline-diagram .editor ul.editor-tabs li{list-style:none;padding:10px}#index-2 .headline-diagram .editor ul.editor-tabs li a{color:#fff;text-decoration:none}#index-2 .headline-diagram .editor ul.editor-tabs li.selected{text-decoration:underline}#index-2 .headline-diagram .editor .min-dark{display:none}#index-2 .headline-diagram .editor.front{border-radius:8px;width:96%}@media screen and (-ms-high-contrast:active){#index-2 .headline-diagram .editor.front{border:none}}#index-2 .headline-diagram .editor .error{border-left:0!important}#index-2 .headline-diagram .editor .editor-inner{position:relative}#index-2 .headline-diagram .editor .titlebar{border-bottom:2px solid #172e38;display:flex;flex-direction:row;height:2rem}#index-2 .headline-diagram .editor .titlebar .lang{display:none;margin-left:6px;margin-top:3px}#index-2 .headline-diagram .editor .titlebar .window-name{display:none;margin-left:10px;padding-top:5px}#index-2 .headline-diagram .editor .line-error{background-color:#c63131;height:20px;left:0;position:absolute;width:22px}#index-2 .headline-diagram .editor .underline-error{background:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3'%3E%3Cg fill='%23c94824'%3E%3Cpolygon points='5.5 0 2.5 3 1.1 3 4.1 0'/%3E%3Cpolygon points='4 0 6 2 6 .6 5.4 0'/%3E%3Cpolygon points='0 2 1 3 2.4 3 0 .6'/%3E%3C/g%3E%3C/svg%3E") repeat-x 0 100%;padding-bottom:3px}#index-2 .headline-diagram .editor .error-message{color:#444d80;font-family:var(--code-font);font-size:.8rem}#index-2 .headline-diagram .editor .error-behind{opacity:0}#index-2 .headline-diagram .editor .inline-completions{position:relative}#index-2 .headline-diagram .editor .inline-completions ul.dropdown{background-color:#fff;border-left:4px solid #4b9edd;color:gray;display:inline-block;font-family:var(--code-font);font-size:.8rem;margin:0;padding:0;position:absolute;width:240px}#index-2 .headline-diagram .editor .inline-completions ul.dropdown:before{background-color:#fff;content:" ";left:-3px;position:absolute;top:-16px;width:2px}#index-2 .headline-diagram .editor .inline-completions ul.dropdown li{border-bottom:1px solid #000;height:1rem;overflow-x:hidden;padding-left:4px}#index-2 .headline-diagram .editor .inline-completions ul.dropdown li span.result-found{color:#4b9edd}#index-2 .headline-diagram .editor .inline-completions ul.dropdown li span.result{color:#000;display:inline-block;width:100px}#index-2 .headline-diagram .editor .did-you-mean,#index-2 .headline-diagram .editor .did-you-mean-icon{position:absolute}#index-2 .headline-diagram .editor .content{display:flex;flex-direction:row}#index-2 .headline-diagram .editor .content svg{margin:12px auto}#index-2 .headline-diagram .editor .content svg path{fill:#fff}#index-2 .headline-diagram .editor .content .text{background-color:#235a97;border-top:1px solid #7fa2c9;flex-grow:1;flex-shrink:1;font-family:var(--code-font);font-size:.8rem;height:260px;line-height:.95rem;overflow-x:auto;position:relative}#index-2 .headline-diagram .editor .content .text pre{background-color:#235a97;border:none;margin:0}#index-2 .headline-diagram .editor .content .text pre code{font-size:14px;line-height:16px}#index-2 .headline-diagram .editor .content .text pre .error{background-color:#ff000026;color:#ffc5c5}#index-2 .headline-diagram .editor .content .text .language-id{display:none}#index-2 .headline-diagram .editor .highlight{color:#9ed5ff}#index-2 .headline-diagram .back .content .text>div{padding-right:200px}#index-2 .next-headline-button{align-items:center;background-color:#fff;bottom:20px;color:#000;cursor:pointer;display:flex;flex-direction:row;height:30px;justify-content:center;margin-bottom:20px;padding:3px;position:absolute;right:15px;text-decoration:none;width:30px}@media screen and (-ms-high-contrast:active){#index-2 .next-headline-button{border:2px solid gray}}#index-2 .next-headline-button.focus,#index-2 .next-headline-button:hover{background-color:#eee}#index-2 .next-headline-button:active{background-color:#ddd}#index-2 .next-headline-button .fluid-button-title{font-weight:600}#index-2 .next-headline-button svg path{fill:#000}@media screen and (-ms-high-contrast:active){#index-2 .next-headline-button svg path{fill:#ff0}}#index-2 a.get-started{align-items:flex-end;background-color:#fff;box-shadow:0 4px 20px -6px rgba(0,0,0,.25);box-sizing:border-box;color:#000;cursor:pointer;display:flex;margin:0 auto;max-width:244px;padding:1rem;text-decoration:none;width:100%}@media screen and (-ms-high-contrast:active){#index-2 a.get-started{border:2px solid gray}}#index-2 a.get-started.focus,#index-2 a.get-started:hover{background-color:#eee}#index-2 a.get-started:active{background-color:#ddd}#index-2 a.get-started .fluid-button-title{font-weight:600}#index-2 a.get-started.short{background:#3178c6;background-position-y:bottom -180px;border:1px solid #fff;color:#fff;height:260px}#index-2 a.get-started.short.handbook{background-image:url(/images/index/get-started-handbook-blue.svg)}#index-2 a.get-started.short.playground{background-image:url(/images/index/get-started-playground-blue.svg)}#index-2 a.get-started.short.download{background-image:url(/images/index/get-started-download-blue.svg);background-position:100% 100%;background-repeat:no-repeat}#index-2 a.get-started.short svg path{stroke:#fff}#index-2 a.get-started.short:active{background-color:#156fb4}#index-2 a.get-started.short:hover{border-width:2px;box-shadow:0 4px 20px -2px rgba(0,0,0,.25);max-width:246px}#index-2 a.get-started.tall{background:#fff;border:1px solid #000;color:#000;height:342px;margin-bottom:2px}#index-2 a.get-started.tall:hover{border-color:#3178c6;border-width:2px;box-shadow:0 4px 20px -2px rgba(0,0,0,.25);height:344px;margin-bottom:0;max-width:246px}#index-2 a.get-started.tall:active{background-color:#eee}#index-2 a.get-started .fluid-button-title{font-size:1.4rem}#index-2 a.get-started svg{margin-bottom:10px;margin-left:20px}#index-2 a.get-started:active{box-shadow:0 4px 10px 0 rgba(0,0,0,.25);margin-top:1px}#index-2 a.get-started.handbook{background-image:url(/images/index/get-started-handbook.svg);background-position:0 100%;background-repeat:no-repeat}#index-2 a.get-started.playground{background-image:url(/images/index/get-started-playground.svg);background-position:bottom;background-repeat:no-repeat}#index-2 a.get-started.download{background-image:url(/images/index/get-started-download.svg);background-position:100% 100%;background-repeat:no-repeat}#index-2 .call-to-action{display:flex;justify-content:center}#index-2 .call-to-action a.flat-button{background-color:#fff;color:#000;cursor:pointer;display:block;font-size:1.2rem;height:1.4rem;line-height:1.4rem;padding:1rem;text-align:center;text-decoration:none}@media screen and (-ms-high-contrast:active){#index-2 .call-to-action a.flat-button{border:2px solid gray}}#index-2 .call-to-action a.flat-button.focus,#index-2 .call-to-action a.flat-button:hover{background-color:#eee}#index-2 .call-to-action a.flat-button:active{background-color:#ddd}#index-2 .call-to-action a.flat-button .fluid-button-title{font-weight:600}#index-2 .call-to-action a.flat-button:first-child{margin-right:2rem}#index-2 .call-to-action .handbook-preview{background-color:#1a1a1a;padding:4rem}#index-2 .call-to-action .inline-buttons{background-color:#1a1a1a;display:flex;justify-content:center}#index-2 .call-to-action .inline-buttons a{background-color:#1a1a1a;border-left:4px solid #00273f;color:#fff;flex:1 1;margin:0!important}#index-2 .call-to-action .inline-buttons a:first-child{border-left:none}#index-2 .call-to-action .inline-buttons a:active,#index-2 .call-to-action .inline-buttons a:hover{color:#000}#index-2 .cta-redirects{overflow-y:hidden}#index-2 .cta-redirects>div{margin-bottom:-18%;position:relative}#index-2 .cta-redirects>div a{bottom:55%;position:absolute}#index-2 .release-info{display:flex;flex-direction:row;position:relative;width:100%}#index-2 .release-info .needle,#index-2 .release-info .needle-head{background-color:#000;height:68px;margin-top:-8px;position:absolute;width:2px}#index-2 .release-info .needle-head{background-color:transparent;border-left:4px solid transparent;border-right:4px solid transparent;border-top:6px solid #000;height:0;margin-left:-4px;margin-top:-14px}#index-2 .release-info>div>div{display:flex;flex-direction:row}#index-2 .bar{height:50px;margin-left:-1px;width:100%}#index-2 .separator{background-color:#000;height:12px;margin-top:50px;width:1px}@media screen and (-ms-high-contrast:active){#index-2 .needle-head{opacity:0}#index-2 .release-info .needle{border:1px solid #000;height:80px}#index-2 .beta>div,#index-2 .rc>div,#index-2 .release>div,#index-2 form.search:focus{border:1px solid #000}}#index-2 .release{width:55%}#index-2 .release .bar{background-color:#c4c4c4}#index-2 .beta{width:28%}#index-2 .beta .bar{background-color:#3178c6}#index-2 .rc{width:17%}#index-2 .rc .bar{background-color:#235a97}#index-2 .migrations{overflow:hidden}#index-2 .migrations.github #migration_title{color:#fff}#index-2 .migrations strong{color:#187abf}#index-2 .migrations .container{padding-bottom:0}#index-2 #m-stories{min-height:370px;position:relative}#index-2 #m-stories .controls a{align-items:center;background-color:#c4c4c4;color:#000;display:flex;height:2rem;justify-content:center;line-height:2.5rem;position:absolute;text-align:center;top:70%;width:2rem;z-index:2}#index-2 #m-stories .controls a:hover{background-color:#eee}#index-2 #m-stories .controls a:active{background-color:#ddd;top:calc(70% + 1px)}#index-2 #m-stories .controls a.left{left:0}#index-2 #m-stories .controls a.right{right:0}#index-2 #m-stories .copy{background:#faf9f8;background:linear-gradient(90deg,#faf9f8 48%,#faf9f820)}#index-2 #m-stories .copy p{font-size:1rem}#index-2 #m-stories .airbnb .fg,#index-2 #m-stories .goog .illustration .fg{padding-top:40px}#index-2 #m-stories .copy{padding-left:20px;padding-right:30px;position:absolute;transition:opacity .2s ease-out;width:260px}#index-2 #m-stories .copy p{padding:1rem 0}#index-2 #m-stories .copy a.migration-button{border:1px solid #000;color:#000;display:block;padding:8px 0;text-align:center;text-decoration:none;width:60%}#index-2 #m-stories .copy a.migration-button:focus,#index-2 #m-stories .copy a.migration-button:hover{background-color:#fff;color:#000}#index-2 #m-stories .illustration .bg{position:absolute;right:20px}#index-2 #m-stories .illustration .fg{font-size:1.4rem;line-height:1.6rem;position:absolute;right:70px;width:370px}#index-2 .oss{width:100%}#index-2 .oss .icons{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;margin:0 auto;max-width:800px}@media screen and (-ms-high-contrast:black-on-white){#index-2 .oss .icons svg path{fill:#000}}@media screen and (-ms-high-contrast:white-on-black){#index-2 .oss .icons svg path{fill:#fff}}#index-2 .oss .icons svg{margin:0 auto}#index-2 .oss .icons a{color:#fff;display:flex;flex:1 1;flex-direction:column;height:145px;justify-content:space-between;margin:20px;max-width:140px;text-align:center;width:140px}#index-2 .oss .icons a p{padding-bottom:0}#index-2 .github-bar{opacity:0;position:absolute;transition:opacity .3s ease-out}#index-2 .github-bar.left{left:-200px}#index-2 .github-bar.right{right:-200px}#index-2 ul#videos{margin:0;padding:0}#index-2 ul#videos li{border-left:2px solid transparent;list-style:none;margin:0;padding:0}#index-2 ul#videos li.active{border-color:#000}#index-2 ul#videos li a{color:#000;display:block;font-size:1rem;margin-left:6px;text-decoration:none}#index-2 ul#videos li span{font-size:.8rem;font-style:italic}#index-2 .installation-panel .flat-button{background-color:#fff;color:#000;cursor:pointer;display:block;margin-top:20px;padding:1rem;text-decoration:none}@media screen and (-ms-high-contrast:active){#index-2 .installation-panel .flat-button{border:2px solid gray}}#index-2 .installation-panel .flat-button.focus,#index-2 .installation-panel .flat-button:hover{background-color:#eee}#index-2 .installation-panel .flat-button:active{background-color:#ddd}#index-2 .installation-panel .flat-button .fluid-button-title{font-weight:600}#index-2 .installation-panel .flat-button button{background-color:transparent;border:none;float:right}#index-2 .installation-panel .flat-button svg{float:right;height:.9em;margin-top:3px;opacity:.5;transition:opacity .2s linear;width:.9em}#index-2 .installation-panel .flat-button:hover svg{opacity:1}#index-2 .installation-panel .tooltip{background-color:#3f3f3f;border-radius:2px;color:#fff;display:none;font-family:var(--code-font);font-size:14px;padding:5px 8px;pointer-events:none;text-align:center;white-space:pre-wrap;z-index:100}#index-2 #adopt-gradually-content.fancy-scroll{height:1400px}#index-2 #adopt-gradually-content.fancy-scroll #adopt-step-slider{height:580px;position:-webkit-sticky;position:sticky;top:80px}#index-2 #adopt-gradually-content.fancy-scroll #adopt-step-blurb,#index-2 #adopt-gradually-content.fancy-scroll #global-stepper{bottom:64px;left:0;margin:0 auto;max-width:480px;position:absolute;right:0}#index-2 #adopt-gradually-content.fancy-scroll #global-stepper{bottom:32px;display:flex}#index-2 #adopt-gradually-content.fancy-scroll #global-stepper>div{opacity:.2;transition:opacity .2s}#index-2 #adopt-gradually-content.fancy-scroll #global-stepper>div.active{opacity:1}#index-2 #adopt-gradually-content.fancy-scroll .adopt-step{left:0;margin-left:auto;margin-right:auto;padding-top:200px;position:absolute;right:0;top:0;transition:opacity .2s}#index-2 #adopt-gradually-content.fancy-scroll .adopt-step .adopt-step-stepper,#index-2 #adopt-gradually-content.fancy-scroll .adopt-step>div>p,#index-2 #global-stepper{display:none}#index-2 .adopt-step{margin:20px auto;max-width:480px;padding-top:120px}#index-2 .adopt-step pre{margin-bottom:10px}#index-2 .adopt-step>p{font-size:1rem;font-weight:700;margin:10px 0}#index-2 .adopt-step .tag-container p{font-size:1rem}#index-2 .adopt-step-stepper{display:flex;margin-bottom:80px}#index-2 .adopt-step-stepper div{border:1px solid #000;display:inline-block;flex:1 1;height:13px;margin-left:10px;position:relative}#index-2 .adopt-step-stepper div.yellow,#index-2 .adopt-step-stepper div.yellow-hint-blue,#index-2 .adopt-step-stepper div.yellow-lot-blue{background-color:#ffe200}#index-2 .adopt-step-stepper div.yellow-hint-blue:after,#index-2 .adopt-step-stepper div.yellow-lot-blue:after{background-color:#3178c6;content:"";height:13px;left:0;position:absolute;width:20%}#index-2 .adopt-step-stepper div.yellow-lot-blue:after{width:60%}#index-2 .adopt-step-stepper div.first{margin-left:0}#index-2 .via-delete .highlight{background-color:#fffdfd}#index-2 .via-delete .dim{opacity:1}.yellow{background-color:#f1dd3f;color:#000;margin-bottom:-110px}.yellow .col1{align-self:stretch;width:50%}.yellow .col1 pre{height:220px;overflow:hidden}.yellow .col1 pre code{font-size:14px;line-height:16px}.yellow a{color:#000}.darkblue.dt{position:relative}.darkblue.dt .dark-blue-trans-bg{background-color:rgba(0,39,62,.77)}.darkblue.dt .dark-blue-trans-bg a{color:#fff}.darkblue.dt .dt-background{bottom:20px;font-family:var(--code-font);font-size:1.2rem;left:20px;opacity:.2;overflow:hidden;position:absolute;top:20px;width:80%}.flex-column{flex-direction:column}.fluid-button{background-color:#fff;color:#000;display:flex;padding:.5rem 1rem;text-decoration:none}.fluid-button .fluid-button-title{font-weight:600}.fluid-button div.fluid-button-icon{align-items:center;border-left:2px solid #000;display:flex;justify-content:center;margin-left:1rem;margin-right:-1rem;min-width:4rem;text-align:center}.fluid-button.focus,.fluid-button:hover{background-color:#eee}.fluid-button:active{background-color:#ddd}.cta .cta-back a{left:20px;position:relative;top:20px;width:60px}.transparent-button{border:1px solid #fff;color:#fff;cursor:pointer;left:20px;padding:10px;position:absolute;text-decoration:none;top:40px;width:80px}.transparent-button svg{margin-right:8px}.transparent-button.focus,.transparent-button:hover{background-color:#ffffff10}.transparent-button:active{background-color:#ffffff20;border:1px solid #ffffff60}.flow-links{display:flex;flex-wrap:wrap}.clicky-grey-button{background-color:#d8d8d8;color:#000;display:flex;flex-direction:column-reverse;height:10rem;margin-bottom:20px;margin-right:20px;padding:18px;position:relative;text-decoration:none;width:16rem}.clicky-grey-button.white-theme{background-color:#fff;border:1px solid #000}.clicky-grey-button.white-theme:hover{background-color:#eee}.clicky-grey-button.white-theme:active{background-color:#f2f2f2;margin-bottom:19px}@media screen and (-ms-high-contrast:active){.clicky-grey-button{border:1px solid gray}.clicky-grey-button svg path{fill:#fff}}.clicky-grey-button.headline{height:200px;width:300px}.clicky-grey-button.links{height:26rem}.clicky-grey-button.focus,.clicky-grey-button:hover{background-color:#ccc}.clicky-grey-button:active{background-color:#ddd}.clicky-grey-button p{color:#000}.clicky-grey-button div{color:#000;font-size:1.6rem;font-weight:400;line-height:1.6rem;margin-bottom:.2rem;text-decoration:none}.clicky-grey-button div:hover{text-decoration:none}.clicky-grey-button p{margin-bottom:0;margin-top:0}.clicky-grey-button a{text-decoration:none}.clicky-grey-button .badge{background-color:#666;position:absolute;right:10px;top:10px}.columns{display:flex;flex-direction:row;flex-wrap:wrap;margin:0 -2.6rem}.columns.wide{justify-content:space-between}.columns.wide .item{min-width:240px}.columns .item{flex:1 1;margin:.6rem;padding:1rem}.columns .item h4{margin-top:0}.columns .item ul{padding:0}.columns .item ul ul{margin-left:.5rem}.columns .item li{list-style:none;margin-left:0}@media(max-width:800px){.columns{flex-direction:column;margin:0}}div#like-dislike-subnav div{font-size:14px;padding-left:4px;padding-top:16px}div#like-dislike-subnav div button{align-items:center;background:none;border:none;color:var(--text-color);display:inline-flex;flex-direction:row}div#like-dislike-subnav div button svg{fill:var(--text-color);color:var(--text-color);margin-right:4px}#beta{background:repeating-linear-gradient(45deg,#9b9a4e,#9b9a4e 10px,#6e6a33 0,#6e6a33 20px);background-color:"#c63131";color:#fff;padding:4px 4px 6px;text-align:center;text-shadow:0 2px 4px #000}#doc-layout{display:flex;flex-direction:row}#handbook-content{margin:auto;max-width:1200px;min-width:0;padding:0 2rem}@media(max-width:480px){#handbook-content{padding:0}}#handbook-content>h1{font-size:3.5rem;font-weight:400;letter-spacing:0;line-height:3.5rem}@media(max-width:800px){#handbook-content>h1{font-size:2.5rem;margin-left:1rem;margin-right:1rem}}#handbook-content article{display:flex;width:100%}#handbook-content .whitespace,#handbook-content .whitespace-tight{margin:0 auto 1rem;overflow:hidden;padding:2rem}#handbook-content .whitespace-tight{padding:1.2rem 2rem}#handbook-content aside{display:none;flex-shrink:0;margin-left:20px;width:13rem}@media(min-width:1000px){#handbook-content aside{display:block}}#handbook-content aside nav{margin-bottom:1rem;position:-webkit-sticky;position:sticky;top:30px}#handbook-content aside nav.deprecated{top:7rem}#handbook-content aside h5{font-size:16px;font-weight:600;margin:0}#handbook-content aside ul{padding:0}#handbook-content aside ul li{list-style:none}#handbook-content aside ul a{border-left:2px solid transparent;color:var(--alt-text-color);display:block;font-size:14px;font-weight:400;overflow:hidden;padding-left:8px;text-decoration:none;text-overflow:ellipsis;white-space:nowrap}#handbook-content aside ul a:active,#handbook-content aside ul a:hover{border-left:2px solid rgba(0,120,212,.3)}#handbook-content aside ul a.current{border-left:2px solid #0078d4}#handbook-content aside .like-dislike-subnav #dislike-button,#handbook-content aside .like-dislike-subnav #like-button{cursor:pointer}#handbook-content .preamble a{color:var(--text-color)}#handbook-content .justify-between{justify-content:space-between}#handbook-content a.navigation-link{flex:1 1;text-decoration:none}#handbook-content .prev-next{flex:1 1}#handbook-content .prev-next .arrow{align-items:center;display:flex;flex-direction:row;justify-content:center;margin-right:20px}#handbook-content .prev-next h3,#handbook-content .prev-next header,#handbook-content .prev-next p{margin:0;padding:0}#handbook-content .prev-next header{font-size:.8rem;margin-bottom:.5rem}#handbook-content .prev-next p{margin-bottom:.4rem}#handbook-content .prev-next header,#handbook-content .prev-next p{color:var(--text-color)}#handbook-content .prev-next:hover h3,#handbook-content .prev-next:hover svg path{fill:var(--text-color);color:var(--text-color)}#handbook-content .prev-next .nav-content{flex:1 1;padding-right:1rem}#handbook-content .prev-next.next{flex-direction:row-reverse;padding-left:1rem;padding-right:0;text-align:right}#handbook-content .prev-next.next .arrow{margin-left:20px;margin-right:0}#handbook-content .prev-next.next svg{transform:scaleX(-1)}#handbook-content .vertical-line{background-color:#e3e3e3;flex-basis:2px;flex-grow:0;flex-shrink:0;height:80px;min-width:2px}#handbook-content .docs-footer{border-top:1px solid var(--border-color);display:flex;flex-direction:row-reverse;height:2rem;margin:0 -2rem;padding:0}#handbook-content .docs-footer h5{font-weight:400;margin:0;padding:.5rem 1rem 0 0}#handbook-content .docs-footer button{align-items:center;background:none;border:none;border-left:1px solid var(--border-color);color:var(--text-color);cursor:pointer;display:inline-flex;flex-direction:row;padding:0 1rem}#handbook-content .docs-footer button:hover{background-color:var(--border-color)}#handbook-content .docs-footer button svg{fill:var(--text-color);color:var(--text-color);margin-right:4px}#handbook-content #deprecated-header{align-items:center;background-color:#fff4cf;color:#000;display:flex;justify-content:space-between;margin:0 -2rem;padding:1rem 2rem 1rem 0;position:-webkit-sticky;position:sticky;top:0;z-index:1}#handbook-content #deprecated-header [id]:before{height:110px;margin-top:-110px}@media(max-width:800px){#handbook-content #deprecated-header{flex-direction:column;margin:0;padding:1rem}#handbook-content #deprecated-header h3{font-size:.8rem}#handbook-content #deprecated-header #deprecated-icon{margin-right:1rem}#handbook-content #deprecated-header #deprecated-action{margin-top:1rem}}#handbook-content #deprecated-header #deprecated-content{align-items:center;display:flex}#handbook-content #deprecated-header #deprecated-content #deprecated-icon{text-align:center;width:2rem}#handbook-content #deprecated-header h3{font-size:1.5rem;font-weight:400;margin-bottom:.5rem;margin-top:0}#handbook-content #deprecated-header p{margin-bottom:.2rem;margin-top:0}#handbook-content #deprecated-header #deprecated-action{flex-shrink:0}#handbook-content #deprecated-header #deprecated-action a{background-color:#fff;border:1px solid #000;color:#000;padding:.2rem .5rem;text-decoration:none}#handbook-content #deprecated-header #deprecated-action a:hover{background-color:#eee}#handbook-content .markdown table.cli-option{display:table}#handbook-content .markdown table.cli-option tr{width:100%}#handbook-content .markdown table.cli-option tr p{margin:0;padding:0}#handbook-content .markdown table.cli-option tr code{word-wrap:normal}#handbook-content .markdown table.cli-option tr.odd{background-color:var(--background-color)!important}#handbook-content .markdown table.cli-option tr.even{background-color:var(--background-minor-highlight-color)!important}#handbook-content .markdown table.cli-option ul{margin:0;padding:0}#handbook-content .markdown table.cli-option ul li{list-style:none;margin:0 0 8px}#handbook-content .markdown table.cli-option tr.option-description td{border-top:none;margin-top:0}.circle-bg{background-color:#719af4;color:#000;display:inline-block;line-height:31px;margin-right:3px;margin-top:12px;position:relative;text-align:center}.circle-bg,.circle-bg img{border-radius:16px;height:32px;width:32px}.circle-bg img{left:0;position:absolute;top:0}.bottom-section-content{flex:1 1;padding:1rem 2rem}@media(max-width:480px){.small-columns{flex-direction:column!important}}.inline-popup{background:var(--background-color);border-radius:2px;box-shadow:0 30px 90px -20px rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);font-size:14px;line-height:20px;max-width:400px;min-width:300px;padding:0;position:absolute;transition:opacity .5s;z-index:110}.inline-popup .inline-popup-container{display:flex}.inline-popup .inline-popup-container a.inline-popup-extract{color:var(--text-color);display:block;margin:16px;max-height:140px;overflow:hidden;position:relative;text-decoration:none}.inline-popup .inline-popup-container a.inline-popup-extract h5{margin-top:0}.inline-popup .inline-popup-container a.inline-popup-extract:after{background-color:transparent;bottom:0;content:" ";height:20px;pointer-events:none;position:absolute;width:25%}.inline-popup .inline-popup-container a.inline-popup-extract div{margin:0}.inline-popup .inline-popup-container a.inline-popup-extract div code{background-color:var(--inline-code-background-color);border-radius:2px;padding:2px 4px}.inline-popup.popup-fade-in{animation:.1s ease forwards}pre{background-color:#fff;border-bottom:1px solid #999;border-left:1px solid #999;color:#000;margin-bottom:3rem;padding:12px;position:relative}pre,pre.shiki{overflow-x:auto}pre.shiki:hover .dim{opacity:1}pre.shiki div.dim{opacity:.9}pre.shiki div.dim,pre.shiki div.highlight{margin:0;padding:0}pre.shiki div.highlight{background-color:#f1f8ff;opacity:1}pre.shiki div.line{min-height:1rem}pre.shiki .language-id{display:none}pre.twoslash{border-color:#719af4}pre.twoslash:hover data-lsp{border-color:#747474}pre.twoslash data-lsp:hover:before{background-color:#3f3f3f;border-radius:2px;color:#fff;content:attr(lsp);font-family:JetBrains Mono,Menlo,Monaco,Consolas,Courier New,monospace;font-size:14px;padding:5px 8px;position:absolute;text-align:left;transform:translateY(1rem);white-space:pre-wrap;z-index:100}pre .code-container{overflow:auto}pre .code-container>a{border:1px solid #719af4;border-radius:4px;bottom:8px;color:#719af4;opacity:0;padding:0 8px;position:absolute;right:8px;text-decoration:none;transition-timing-function:ease;transition:opacity .3s}@media(prefers-reduced-motion:reduce){pre .code-container>a{transition:none}}pre .code-container>a:hover{background-color:#719af4;color:#fff}pre .code-container:hover a{opacity:1}pre code{-webkit-overflow-scrolling:touch;font-family:JetBrains Mono,Menlo,Monaco,Consolas,Courier New,monospace;font-size:15px;white-space:pre}pre code a{text-decoration:none}pre .query{color:#137998;display:inline-block;margin-bottom:10px}pre .error,pre .error-behind{display:block;margin-bottom:4px;margin-left:-14px;margin-top:8px;padding:6px 6px 6px 14px;white-space:pre-wrap;width:calc(100% - 20px)}pre .error{align-items:center;background-color:#fee;border-left:2px solid #bf1818;color:#000;display:flex;margin-right:-2px;position:absolute}pre .error .code{display:none}pre .error-behind{color:#fee;-webkit-user-select:none;-ms-user-select:none;user-select:none;visibility:transparent}pre .arrow{background-color:#eee;border-left:1px solid #eee;border-top:1px solid #eee;height:8px;margin-left:.1rem;position:relative;top:-7px;transform:translateY(25%) rotate(45deg);width:8px}pre .popover{background-color:#eee;border-radius:3px;display:inline-block;margin-bottom:10px;margin-top:10px;padding:0 .5rem .6rem}pre .inline-completions ul.dropdown{background-color:#e7e7e7;border-left:4px solid #4b9edd;color:#333;display:inline-block;font-family:var(--code-font);font-size:.8rem;margin:0;padding:0;position:absolute;width:240px}pre .inline-completions ul.dropdown:before{background-color:#4b9edd;content:" ";left:-3px;position:absolute;top:-1.2rem;width:2px}pre .inline-completions ul.dropdown li{margin-bottom:4px;overflow-x:hidden;padding-left:4px}pre .inline-completions ul.dropdown li.deprecated{text-decoration:line-through}pre .inline-completions ul.dropdown li span.result-found{color:#2265a5}pre .inline-completions ul.dropdown li span.result{color:#000;display:inline-block;width:100px}.dark-theme .markdown pre{background-color:#d8d8d8;border-color:#ddd;filter:invert(98%) hue-rotate(180deg)}data-lsp{border-bottom:1px dotted transparent;transition-timing-function:ease;transition:border-color .3s}@media(prefers-reduced-motion:reduce){data-lsp{transition:none}}.tag-container{position:relative}.tag-container .twoslash-annotation{color:#187abf;font-family:JetBrains Mono,Menlo,Monaco,Consolas,Courier New,monospace;position:absolute;right:-210px;width:200px}.tag-container .twoslash-annotation svg{float:left;margin-left:-44px}.tag-container .twoslash-annotation.left{left:-200px;right:auto}.tag-container .twoslash-annotation.left svg{float:right;margin-right:-5px}.markdown{scroll-behavior:smooth}.markdown h1,.markdown h2,.markdown h3{display:flex;flex-wrap:wrap;font-weight:400;line-height:1.3}.markdown h1 a,.markdown h2 a,.markdown h3 a{padding-right:10px!important}.markdown h1[id]:before,.markdown h2[id]:before,.markdown h3[id]:before{content:"";display:block;height:30px;margin-top:-30px;visibility:hidden}.markdown h1{word-wrap:break-word;font-size:2rem;margin-bottom:12px;margin-top:0;word-break:break-word}.markdown h2{font-size:1.75rem;margin-bottom:12px;margin-top:32px}.markdown h3{font-size:1.1875rem;margin-bottom:18px;margin-top:30px}.markdown pre{clear:both;top:10px}.markdown blockquote{background-color:var(--inline-code-background-color);border-left:2px solid var(--border-color);font-size:.8rem;margin:auto;padding:.1rem 2rem}.markdown blockquote.bg-reading{border-left:none;float:right;margin-left:.5rem}.markdown .language-id{display:none}.markdown table{border-collapse:separate;border-spacing:0;display:block;font-size:.875rem;max-width:100%;overflow-x:auto;table-layout:auto;width:100%}.markdown table.data{display:table}.markdown table.data td,.markdown table.data th,.markdown table.data tr{text-align:center}.markdown table td,.markdown table th{word-wrap:break-word;border:0;border-top:1px solid var(--border-color);display:table-cell;line-height:1.5;padding:.75rem 1rem;text-align:left;vertical-align:top}.markdown table tr:nth-child(2n){background-color:var(--background-minor-highlight-color)}.markdown table th{border-top:none}.markdown img{max-width:100%}.markdown table.full-width-table{display:table;width:100%}.markdown .blue-tick{color:#3178c6;font-size:1.2rem;font-weight:700}.markdown .black-tick{color:#086f56;font-size:1.2rem}.markdown .red-cross{color:#c63131;font-size:1.2rem}#glossary ul.filterable-quicklinks{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center}#glossary ul.filterable-quicklinks li{background-color:#e0e0e0;cursor:pointer;list-style:none;margin:.1rem;padding:.3rem;text-decoration:none}@media screen and (-ms-high-contrast:active){#glossary ul.filterable-quicklinks li{border:2px solid gray}}#glossary ul.filterable-quicklinks li.focus,#glossary ul.filterable-quicklinks li:hover{background-color:#cecece}#glossary ul.filterable-quicklinks li:active{background-color:#adadad}#glossary ul.filterable-quicklinks li a{color:#000;text-decoration:none}#glossary ul.filterable-quicklinks li a:visited{color:#505050}#dt .darkblue{background-color:#152740;color:#fff;min-height:392px;overflow:hidden;padding:50px;position:relative;text-align:center}#dt .darkblue h1,#dt .darkblue h2{font-weight:400}#dt .darkblue h1{font-size:5rem}#dt .darkblue h2{font-size:2rem;margin:0 auto;max-width:600px}#dt .darkblue .dt-background{speak:none;font-family:var(--code-font);font-size:1.2rem;left:0;opacity:.25;pointer-events:none;position:absolute;right:-20px;text-align:justify;top:-10px}#dt .white .container{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:center;padding:80px 20px}#dt .white .container a.dt-info-button{background-color:#152740;color:#fff;flex:1 1;height:300px;margin:0 2% 20px;max-width:250px;min-width:200px;text-decoration:none}@media(min-width:800px){#dt .white .container a.dt-info-button{max-width:300px}}#dt .white .container a.dt-info-button:hover{background-color:#0c1625;margin-top:1px}#dt .white .container a.dt-info-button:active{background-color:#000;margin-top:2px}#dt .white .container a.dt-info-button p{margin-bottom:10px;margin-left:10px}#dt .white .container a.dt-info-button .above{border-bottom:1px solid rgba(255,255,255,.25);padding-top:40px}#dt .white .container a.dt-info-button .below{font-size:1.8rem}.cropper{background-color:#f9f6f6;display:block;height:500px;overflow:hidden;position:relative}.cropper img{margin-left:-50px}.cropper p{background:#fff;background:linear-gradient(0deg,#fff,hsla(0,0%,100%,.5));bottom:0;font-size:3rem;left:0;line-height:3rem;margin:0;padding-bottom:.8rem;padding-left:.8rem;position:absolute;width:100%}.dev-tools h3{margin:.6rem 0 0 1rem}@media(max-width:800px){.navbar-sub.dev-tools{height:auto}.navbar-sub.dev-tools .nav{flex-direction:column}}.tsconfig{margin-bottom:6rem}@media(max-width:480px){.tsconfig.raised{margin:0;padding:.5rem}.tsconfig.raised #full-option-list{padding:10px}.tsconfig.raised .indent{padding:1rem}}.tsconfig.button{margin-bottom:2rem}.tsconfig.button>a{display:block}.tsconfig.button svg{margin-right:.3rem;margin-top:.8rem}.tsconfig.button svg path{stroke:var(--text-color)}.tsconfig.button.open svg{transform:rotate(270deg)}.tsconfig.button.closed a{color:var(--text-color);text-decoration:none}.tsconfig .tsconfig-quick-nav{margin-left:-1rem;padding-left:1rem}.tsconfig .tsconfig-quick-nav.grouped{border-left:1px solid var(--text-color);margin-bottom:3rem}.tsconfig .tsconfig-quick-nav h4{font-weight:400;margin-bottom:.1rem}.tsconfig .tsconfig-quick-nav h4 a{color:var(--text-color)}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category{align-items:flex-start;display:flex}@media(max-width:900px){.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category{flex-direction:column}}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category h5{flex:0 0 auto;width:160px}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category ol{flex:1 1 auto;max-width:100%}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category li{display:inline-block;list-style:none;margin-left:8px}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category li a{color:var(--text-color);text-decoration:none}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category li a:hover{text-decoration:underline}.tsconfig .tsconfig-quick-nav .tsconfig-quick-nav-category li span{opacity:.8}.tsconfig article{width:100%}.tsconfig a[id]:before{content:"";display:block;height:80px;margin-top:-80px;scroll-margin-top:121px;visibility:hidden}.tsconfig .indent{padding:2rem}.tsconfig div#full-option-list{display:flex;flex-flow:row wrap}.tsconfig div#full-option-list div.tsconfig-nav-top{flex:auto;margin:0 8px 8px 0;width:30%}@media(max-width:480px){.tsconfig div#full-option-list div.tsconfig-nav-top{width:46%}.tsconfig div#full-option-list div.tsconfig-nav-top h5{overflow-x:hidden}}.tsconfig div#full-option-list div.tsconfig-nav-top h5 a{color:var(--text-color);font-size:2rem;font-weight:400;text-decoration:none}.tsconfig div#full-option-list div.tsconfig-nav-top ul{margin:0;padding:0}.tsconfig div#full-option-list div.tsconfig-nav-top li{font-family:var(--code-font);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tsconfig div#full-option-list div.tsconfig-nav-top li a{color:var(--text-color)}.tsconfig nav{background-color:var(--raised-background-color);border-bottom:1px solid #d3d3d3;flex-direction:row;padding-bottom:10px;padding-top:4px;position:-webkit-sticky;position:sticky;top:0;z-index:99999}.tsconfig nav,.tsconfig nav ul{display:flex;justify-content:center}.tsconfig nav ul{flex-wrap:wrap;margin:0}@media(max-width:800px){.tsconfig nav{position:static}.tsconfig nav ul{flex-wrap:wrap}.tsconfig nav li{min-width:120px}}.tsconfig nav a{text-decoration:none}.tsconfig nav a.current{border-bottom:1px solid #3178c6}.tsconfig nav li{display:block;margin:6px}.tsconfig .category{margin-bottom:40px;margin-top:80px}.tsconfig .category>h2>a:focus{background-color:#000;color:#fff;outline:none}.tsconfig .compiler-option{margin-bottom:80px}.tsconfig .compiler-option>h3{margin-bottom:0;offset-anchor:-30px;overflow-x:hidden}@media(max-width:800px){.tsconfig .compiler-option>h3{display:block;overflow-y:hidden}}.tsconfig .compiler-option>h3>a{scroll-margin-top:65px}.tsconfig .compiler-option>h3>a:focus{background-color:#000;color:#fff;outline:none}.tsconfig .compiler-option .compiler-content{display:flex}.tsconfig .compiler-option .compiler-content .markdown{word-wrap:break-word;border-right:1px solid gray;flex-shrink:1;padding-right:20px;width:calc(100% - 250px)}@media(max-width:480px){.tsconfig .compiler-option .compiler-content .markdown{border-right:none;padding-right:0}}.tsconfig .compiler-option .compiler-content ul.compiler-option-md{float:right;margin-left:20px;max-width:220px;min-width:200px;overflow-x:hidden;padding:0;width:220px}.tsconfig .compiler-option .compiler-content ul.compiler-option-md span{display:block;font-weight:600;width:100px}.tsconfig .compiler-option .compiler-content ul.compiler-option-md li{list-style:none;margin-bottom:12px}.tsconfig .compiler-option .compiler-content ul.compiler-option-md li ul{margin-bottom:18px;padding:0}.tsconfig .compiler-option .compiler-content ul.compiler-option-md li li{margin:0 0 12px}.tsconfig .compiler-option .compiler-content ul.compiler-option-md tr{padding:10px 0}.tsconfig .compiler-option .compiler-content ul.compiler-option-md li>p{display:inline-block;margin:0}@media(max-width:800px){.tsconfig .compiler-option .compiler-content{flex-direction:column}.tsconfig .compiler-option .compiler-content .markdown{width:100%}.tsconfig .compiler-option .compiler-content ul.compiler-option-md{margin-left:0;width:100%}}</style><meta name="generator" content="Gatsby 3.8.1"/><link rel="icon" href="/favicon-32x32.png?v=8944a05a8b601855de116c8a56d3b3ae" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3178C6"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=8944a05a8b601855de116c8a56d3b3ae"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><title data-react-helmet="true">TypeScript: Documentation - Overview</title><link data-react-helmet="true" rel="preload" href="/css/docsearch.css" as="style"/><link data-react-helmet="true" rel="preconnect" href="https://consentdeliveryfd.azurefd.net/"/><meta data-react-helmet="true" name="description" content="All TypeScript release notes"/><meta data-react-helmet="true" property="og:title" content="Documentation - Overview"/><meta data-react-helmet="true" property="og:description" content="All TypeScript release notes"/><meta data-react-helmet="true" property="twitter:site" content="typescriptlang"/><script data-react-helmet="true" src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CArray.prototype.forEach%2CNodeList.prototype.forEach"></script><style data-react-helmet="true">
pre data-err {
  background:url("data:image/svg+xml,%3Csvg%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%20viewBox%3D'0%200%206%203'%20enable-background%3D'new%200%200%206%203'%20height%3D'3'%20width%3D'6'%3E%3Cg%20fill%3D'%23c94824'%3E%3Cpolygon%20points%3D'5.5%2C0%202.5%2C3%201.1%2C3%204.1%2C0'%2F%3E%3Cpolygon%20points%3D'4%2C0%206%2C2%206%2C0.6%205.4%2C0'%2F%3E%3Cpolygon%20points%3D'0%2C2%201%2C3%202.4%2C3%200%2C0.6'%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E") repeat-x 0 100%;
  padding-bottom: 3px;
}</style><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link as="script" rel="preload" href="/webpack-runtime-382a80b19bc26b994491.js"/><link as="script" rel="preload" href="/framework-b8146448489de1f5eca3.js"/><link as="script" rel="preload" href="/app-20c8180fcdcce256ed84.js"/><link as="script" rel="preload" href="/commons-396fac08efb475b6d85a.js"/><link as="script" rel="preload" href="/28b1c059e7c205a6d05b694b6e39ba5800dfd976-52db51740532ecd0447c.js"/><link as="script" rel="preload" href="/5cdb9a1faef7e97fcc6849d7148df5c633719a46-1fdbcd888937ad650ed7.js"/><link as="script" rel="preload" href="/183c9096950fb71588bafdbe7cf620580aa8ae09-cf408be6dfca9d86be22.js"/><link as="script" rel="preload" href="/component---src-templates-documentation-tsx-eca476b99748f6719550.js"/><link as="fetch" rel="preload" href="/page-data/docs/handbook/release-notes/overview.html/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>
(function() {

  let hasLocalStorage = false
  try {
    hasLocalStorage = typeof localStorage !== "undefined"
  } catch (error) {}

  const systemIsDark = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const hasSetColorTheme = hasLocalStorage && localStorage.getItem("force-color-theme")
  const customThemeOverride = hasLocalStorage && localStorage.getItem("force-color-theme")

  if (!hasSetColorTheme && systemIsDark) {
    document.documentElement.classList.add("dark-theme")
  } else if (customThemeOverride) {
    document.documentElement.classList.add(customThemeOverride.replace("force-", "") + "-theme")
  }

  const customFontOverride = hasLocalStorage && localStorage.getItem("force-font") || "cascadia"
  document.documentElement.classList.add('font-' + customFontOverride)
})()
  </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="ms-Fabric"><div id="cookie-banner" class="openx"></div><header dir="ltr"><a class="skip-to-main" href="#site-content" tabindex="0">Skip to main content</a><div id="top-menu" class="up"><div class="left below-small"><a id="home-page-logo" aria-label="TypeScript Home Page" href="/"><svg fill="none" height="26" viewBox="0 0 27 26" width="27" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m.98608 0h24.32332c.5446 0 .9861.436522.9861.975v24.05c0 .5385-.4415.975-.9861.975h-24.32332c-.544597 0-.98608-.4365-.98608-.975v-24.05c0-.538478.441483-.975.98608-.975zm13.63142 13.8324v-2.1324h-9.35841v2.1324h3.34111v9.4946h2.6598v-9.4946zm1.0604 9.2439c.4289.2162.9362.3784 1.5218.4865.5857.1081 1.2029.1622 1.8518.1622.6324 0 1.2331-.0595 1.8023-.1784.5691-.1189 1.0681-.3149 1.497-.5879s.7685-.6297 1.0187-1.0703.3753-.9852.3753-1.6339c0-.4703-.0715-.8824-.2145-1.2365-.1429-.3541-.3491-.669-.6186-.9447-.2694-.2757-.5925-.523-.9692-.7419s-.8014-.4257-1.2743-.6203c-.3465-.1406-.6572-.2771-.9321-.4095-.275-.1324-.5087-.2676-.7011-.4054-.1925-.1379-.3409-.2838-.4454-.4379-.1045-.154-.1567-.3284-.1567-.523 0-.1784.0467-.3392.1402-.4824.0935-.1433.2254-.2663.3959-.369s.3794-.1824.6269-.2392c.2474-.0567.5224-.0851.8248-.0851.22 0 .4523.0162.697.0486.2447.0325.4908.0825.7382.15.2475.0676.4881.1527.7218.2555.2337.1027.4495.2216.6475.3567v-2.4244c-.4015-.1514-.84-.2636-1.3157-.3365-.4756-.073-1.0214-.1095-1.6373-.1095-.6268 0-1.2207.0662-1.7816.1987-.5609.1324-1.0544.3392-1.4806.6203s-.763.6392-1.0104 1.0743c-.2475.4352-.3712.9555-.3712 1.5609 0 .7731.2268 1.4326.6805 1.9785.4537.546 1.1424 1.0082 2.0662 1.3866.363.146.7011.2892 1.0146.4298.3134.1405.5842.2865.8124.4378.2282.1514.4083.3162.5403.4946s.198.3811.198.6082c0 .1676-.0413.323-.1238.4662-.0825.1433-.2076.2676-.3753.373s-.3766.1879-.6268.2473c-.2502.0595-.5431.0892-.8785.0892-.5719 0-1.1383-.0986-1.6992-.2959-.5608-.1973-1.0805-.4933-1.5589-.8879z" fill="#fff" fill-rule="evenodd"></path></svg><span class="hide-small">TypeScript</span></a><nav role="navigation"><ul><li class="nav-item hide-small"><a href="/download">Download</a></li><li class="nav-item"><a href="/docs/"><span>Docs</span></a></li><li class="nav-item show-only-large"><a href="/docs/handbook/intro.html">Handbook</a></li><li class="nav-item"><a href="/community">Community</a></li><li class="nav-item show-only-largest"><a to="/play" href="/play">Playground</a></li><li class="nav-item"><a href="/tools">Tools</a></li></ul></nav></div><div class="right above-small"><div class="search-section"><div id="my-lang-quick-jump" style="display:none" class="nav-item"><a href="">in En</a></div><div class="nav-item"><form id="search-form" class="search top-nav" role="search"><svg fill="none" height="16" viewBox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="m10.5 0c.5052 0 .9922.0651042 1.4609.195312.4688.130209.9063.315105 1.3125.554688.4063.239583.7761.52865 1.1094.86719.3386.33333.6276.70312.8672 1.10937s.4245.84375.5547 1.3125.1953.95573.1953 1.46094-.0651.99219-.1953 1.46094-.3151.90625-.5547 1.3125-.5286.77864-.8672 1.11718c-.3333.33334-.7031.61978-1.1094.85938-.4062.2396-.8437.4245-1.3125.5547-.4687.1302-.9557.1953-1.4609.1953-.65104 0-1.27604-.1094-1.875-.3281-.59375-.2188-1.14062-.5339-1.64062-.94534l-6.132818 6.12504c-.098958.0989-.216145.1484-.351562.1484s-.252604-.0495-.351562-.1484c-.0989588-.099-.148438-.2162-.148438-.3516s.0494792-.2526.148438-.3516l6.125002-6.13278c-.41146-.5-.72656-1.04687-.94532-1.64062-.21874-.59896-.32812-1.22396-.32812-1.875 0-.50521.0651-.99219.19531-1.46094s.31511-.90625.55469-1.3125.52604-.77604.85938-1.10937c.33854-.33854.71093-.627607 1.11718-.86719s.84375-.424479 1.3125-.554688c.46875-.1302078.95573-.195312 1.46094-.195312zm0 10c.6198 0 1.2031-.11719 1.75-.35156.5469-.23959 1.0234-.5625 1.4297-.96875.4062-.40625.7265-.88281.9609-1.42969.2396-.54688.3594-1.13021.3594-1.75s-.1198-1.20312-.3594-1.75c-.2344-.54688-.5547-1.02344-.9609-1.42969-.4063-.40625-.8828-.72656-1.4297-.96093-.5469-.23959-1.1302-.35938-1.75-.35938-.61979 0-1.20312.11979-1.75.35938-.54688.23437-1.02344.55468-1.42969.96093s-.72916.88281-.96875 1.42969c-.23437.54688-.35156 1.13021-.35156 1.75s.11719 1.20312.35156 1.75c.23959.54688.5625 1.02344.96875 1.42969s.88281.72916 1.42969.96875c.54688.23437 1.13021.35156 1.75.35156z" fill="#fff"></path></svg><span><input type="search" id="search-box-top" placeholder="Search Docs" aria-label="Search the TypeScript site"/></span><input type="submit" style="display:none"/></form></div></div></div></div><div id="site-content"></div></header><main role="main"><section id="doc-layout"><button id="small-device-button-sidebar"><svg fill="none" height="26" viewBox="0 0 26 26" width="26" xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path d="m0 1c0-.552285.447715-1 1-1h24c.5523 0 1 .447715 1 1v3h-26z"></path><path d="m0 11h13 13v4h-26z"></path><path d="m0 22h26v3c0 .5523-.4477 1-1 1h-24c-.552284 0-1-.4477-1-1z"></path></g></svg></button><div class="page-popup" id="page-helpful-popup" style="opacity:0;display:none"><p>Was this page helpful?</p><div><button class="first" id="like-button-popup" title="Like this page"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 2.29429C10.3913 1.31699 11.6841 0.866721 12.4829 1.70385C12.6455 1.87427 12.8081 2.05843 12.9176 2.22265C13.2379 2.70316 13.3725 3.33595 13.4218 3.95232C13.4721 4.58045 13.438 5.25457 13.3738 5.86484C13.3093 6.47746 13.2129 7.03959 13.1328 7.44777C13.1294 7.46547 13.1259 7.48288 13.1225 7.5H14.006C15.8777 7.5 17.2924 9.19514 16.9576 11.0367L16.2737 14.7984C15.8017 17.3943 13.2078 19.0291 10.6622 18.3348L5.06251 16.8076C4.14894 16.5585 3.45455 15.8145 3.26885 14.886L2.91581 13.1208C2.63809 11.7322 3.69991 10.5624 4.82905 10.1161C5.15163 9.98861 5.44337 9.82679 5.66974 9.62597C7.37583 8.11245 7.99442 6.90287 9.05406 4.77695C9.4084 4.06605 9.77205 3.10054 10.052 2.29429ZM12.0165 7.87862L12.0169 7.87707L12.0187 7.86973L12.0262 7.83863C12.0328 7.81079 12.0426 7.76903 12.0549 7.71494C12.0793 7.60669 12.1135 7.4493 12.1515 7.25536C12.2277 6.86666 12.3188 6.33504 12.3793 5.76016C12.4401 5.18293 12.4685 4.5758 12.425 4.03206C12.3806 3.47655 12.2652 3.04684 12.0855 2.77735C12.0264 2.6887 11.9138 2.55604 11.7594 2.39421C11.5605 2.18576 11.1314 2.23428 10.9967 2.62228C10.7141 3.43609 10.3334 4.45194 9.94904 5.22305C8.88216 7.36349 8.19326 8.72408 6.33336 10.374C5.99304 10.6759 5.58878 10.8911 5.19665 11.0461C4.31631 11.3941 3.75035 12.1945 3.89639 12.9247L4.24943 14.6899C4.36085 15.247 4.77748 15.6934 5.32562 15.8428L10.9254 17.3701C12.9052 17.91 14.9227 16.6385 15.2898 14.6195L15.9738 10.8578C16.197 9.63009 15.2538 8.5 14.006 8.5H12.5015C12.3476 8.5 12.2022 8.42906 12.1074 8.30771C12.0127 8.18638 11.9792 8.02796 12.0165 7.87862C12.0165 7.87858 12.0165 7.87866 12.0165 7.87862Z"></path></svg></button><button id="dislike-button-popup" title="Dislike this page"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7773C13.2379 17.2968 13.3725 16.664 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970948 10.6622 1.66518L5.06251 3.19238C4.14894 3.44154 3.45455 4.18546 3.26885 5.11401L2.91581 6.87918C2.63809 8.26779 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.223C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5234 12.2652 16.9532 12.0855 17.2226C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31012C4.36085 4.753 4.77748 4.30664 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38052L15.9738 9.14222C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z"></path></svg></button></div></div><noscript><style>
          nav#sidebar > ul > li.closed ul {
            display: block !important;
           }
        </style></noscript><nav id="sidebar"><ul><li class="closed"><button aria-label="Get Started expand">Get Started<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/typescript-from-scratch.html">TS for the New Programmer</a></li><li><a href="/docs/handbook/typescript-in-5-minutes.html">TypeScript for JS Programmers</a></li><li><a href="/docs/handbook/typescript-in-5-minutes-oop.html">TS for Java/C# Programmers</a></li><li><a href="/docs/handbook/typescript-in-5-minutes-func.html">TS for Functional Programmers</a></li><li><a href="/docs/handbook/typescript-tooling-in-5-minutes.html">TypeScript Tooling in 5 minutes</a></li></ul></li><li class="closed"><button aria-label="Handbook expand">Handbook<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/intro.html">The TypeScript Handbook</a></li><li><a href="/docs/handbook/2/basic-types.html">The Basics</a></li><li><a href="/docs/handbook/2/everyday-types.html">Everyday Types</a></li><li><a href="/docs/handbook/2/narrowing.html">Narrowing</a></li><li><a href="/docs/handbook/2/functions.html">More on Functions</a></li><li><a href="/docs/handbook/2/objects.html">Object Types</a></li><li class="closed"><button aria-label="Type Manipulation expand">Type Manipulation<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/2/types-from-types.html">Creating Types from Types</a></li><li><a href="/docs/handbook/2/generics.html">Generics</a></li><li><a href="/docs/handbook/2/keyof-types.html">Keyof Type Operator</a></li><li><a href="/docs/handbook/2/typeof-types.html">Typeof Type Operator</a></li><li><a href="/docs/handbook/2/indexed-access-types.html">Indexed Access Types</a></li><li><a href="/docs/handbook/2/conditional-types.html">Conditional Types</a></li><li><a href="/docs/handbook/2/mapped-types.html">Mapped Types</a></li><li><a href="/docs/handbook/2/template-literal-types.html">Template Literal Types</a></li></ul></li><li><a href="/docs/handbook/2/classes.html">Classes</a></li><li><a href="/docs/handbook/2/modules.html">Modules</a></li></ul></li><li class="closed"><button aria-label="Reference expand">Reference<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/utility-types.html">Utility Types</a></li><li><a href="/cheatsheets">Cheat Sheets</a></li><li><a href="/docs/handbook/decorators.html">Decorators</a></li><li><a href="/docs/handbook/declaration-merging.html">Declaration Merging</a></li><li><a href="/docs/handbook/enums.html">Enums</a></li><li><a href="/docs/handbook/iterators-and-generators.html">Iterators and Generators</a></li><li><a href="/docs/handbook/jsx.html">JSX</a></li><li><a href="/docs/handbook/mixins.html">Mixins</a></li><li><a href="/docs/handbook/esm-node.html">ECMAScript Modules in Node.js</a></li><li><a href="/docs/handbook/modules.html">Modules</a></li><li><a href="/docs/handbook/module-resolution.html">Module Resolution</a></li><li><a href="/docs/handbook/namespaces.html">Namespaces</a></li><li><a href="/docs/handbook/namespaces-and-modules.html">Namespaces and Modules</a></li><li><a href="/docs/handbook/symbols.html">Symbols</a></li><li><a href="/docs/handbook/triple-slash-directives.html">Triple-Slash Directives</a></li><li><a href="/docs/handbook/type-compatibility.html">Type Compatibility</a></li><li><a href="/docs/handbook/type-inference.html">Type Inference</a></li><li><a href="/docs/handbook/variable-declarations.html">Variable Declaration</a></li></ul></li><li class="closed"><button aria-label="Tutorials expand">Tutorials<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/asp-net-core.html">ASP.NET Core</a></li><li><a href="/docs/handbook/gulp.html">Gulp</a></li><li><a href="/docs/handbook/dom-manipulation.html">DOM Manipulation</a></li><li><a href="/docs/handbook/migrating-from-javascript.html">Migrating from JavaScript</a></li><li><a href="/docs/handbook/babel-with-typescript.html">Using Babel with TypeScript</a></li></ul></li><li class="open highlighted"><button aria-expanded="true" aria-label="What&#x27;s New close">What&#x27;s New<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li aria-current="page" class="highlight"><a aria-current="page" class="" href="/docs/handbook/release-notes/overview.html">Overview</a></li><li><a href="/docs/handbook/release-notes/typescript-4-7.html">TypeScript 4.7</a></li><li><a href="/docs/handbook/release-notes/typescript-4-6.html">TypeScript 4.6</a></li><li><a href="/docs/handbook/release-notes/typescript-4-5.html">TypeScript 4.5</a></li><li><a href="/docs/handbook/release-notes/typescript-4-4.html">TypeScript 4.4</a></li><li><a href="/docs/handbook/release-notes/typescript-4-3.html">TypeScript 4.3</a></li><li><a href="/docs/handbook/release-notes/typescript-4-2.html">TypeScript 4.2</a></li><li><a href="/docs/handbook/release-notes/typescript-4-1.html">TypeScript 4.1</a></li><li><a href="/docs/handbook/release-notes/typescript-4-0.html">TypeScript 4.0</a></li><li><a href="/docs/handbook/release-notes/typescript-3-9.html">TypeScript 3.9</a></li><li><a href="/docs/handbook/release-notes/typescript-3-8.html">TypeScript 3.8</a></li><li><a href="/docs/handbook/release-notes/typescript-3-7.html">TypeScript 3.7</a></li><li><a href="/docs/handbook/release-notes/typescript-3-6.html">TypeScript 3.6</a></li><li><a href="/docs/handbook/release-notes/typescript-3-5.html">TypeScript 3.5</a></li><li><a href="/docs/handbook/release-notes/typescript-3-4.html">TypeScript 3.4</a></li><li><a href="/docs/handbook/release-notes/typescript-3-3.html">TypeScript 3.3</a></li><li><a href="/docs/handbook/release-notes/typescript-3-2.html">TypeScript 3.2</a></li><li><a href="/docs/handbook/release-notes/typescript-3-1.html">TypeScript 3.1</a></li><li><a href="/docs/handbook/release-notes/typescript-3-0.html">TypeScript 3.0</a></li><li><a href="/docs/handbook/release-notes/typescript-2-9.html">TypeScript 2.9</a></li><li><a href="/docs/handbook/release-notes/typescript-2-8.html">TypeScript 2.8</a></li><li><a href="/docs/handbook/release-notes/typescript-2-7.html">TypeScript 2.7</a></li><li><a href="/docs/handbook/release-notes/typescript-2-6.html">TypeScript 2.6</a></li><li><a href="/docs/handbook/release-notes/typescript-2-5.html">TypeScript 2.5</a></li><li><a href="/docs/handbook/release-notes/typescript-2-4.html">TypeScript 2.4</a></li><li><a href="/docs/handbook/release-notes/typescript-2-3.html">TypeScript 2.3</a></li><li><a href="/docs/handbook/release-notes/typescript-2-2.html">TypeScript 2.2</a></li><li><a href="/docs/handbook/release-notes/typescript-2-1.html">TypeScript 2.1</a></li><li><a href="/docs/handbook/release-notes/typescript-2-0.html">TypeScript 2.0</a></li><li><a href="/docs/handbook/release-notes/typescript-1-8.html">TypeScript 1.8</a></li><li><a href="/docs/handbook/release-notes/typescript-1-7.html">TypeScript 1.7</a></li><li><a href="/docs/handbook/release-notes/typescript-1-6.html">TypeScript 1.6</a></li><li><a href="/docs/handbook/release-notes/typescript-1-5.html">TypeScript 1.5</a></li><li><a href="/docs/handbook/release-notes/typescript-1-4.html">TypeScript 1.4</a></li><li><a href="/docs/handbook/release-notes/typescript-1-3.html">TypeScript 1.3</a></li><li><a href="/docs/handbook/release-notes/typescript-1-1.html">TypeScript 1.1</a></li></ul></li><li class="closed"><button aria-label="Declaration Files expand">Declaration Files<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/declaration-files/introduction.html">Introduction</a></li><li><a href="/docs/handbook/declaration-files/by-example.html">Declaration Reference</a></li><li><a href="/docs/handbook/declaration-files/library-structures.html">Library Structures</a></li><li class="closed"><button aria-label=".d.ts Templates expand">.d.ts Templates<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/declaration-files/templates/module-d-ts.html">Modules .d.ts</a></li><li><a href="/docs/handbook/declaration-files/templates/module-plugin-d-ts.html">Module: Plugin</a></li><li><a href="/docs/handbook/declaration-files/templates/module-class-d-ts.html">Module: Class</a></li><li><a href="/docs/handbook/declaration-files/templates/module-function-d-ts.html">Module: Function</a></li><li><a href="/docs/handbook/declaration-files/templates/global-d-ts.html">Global .d.ts</a></li><li><a href="/docs/handbook/declaration-files/templates/global-modifying-module-d-ts.html">Global: Modifying Module</a></li></ul></li><li><a href="/docs/handbook/declaration-files/do-s-and-don-ts.html">Do&#x27;s and Don&#x27;ts</a></li><li><a href="/docs/handbook/declaration-files/deep-dive.html">Deep Dive</a></li><li><a href="/docs/handbook/declaration-files/publishing.html">Publishing</a></li><li><a href="/docs/handbook/declaration-files/consumption.html">Consumption</a></li></ul></li><li class="closed"><button aria-label="JavaScript expand">JavaScript<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/intro-to-js-ts.html">JS Projects Utilizing TypeScript</a></li><li><a href="/docs/handbook/type-checking-javascript-files.html">Type Checking JavaScript Files</a></li><li><a href="/docs/handbook/jsdoc-supported-types.html">JSDoc Reference</a></li><li><a href="/docs/handbook/declaration-files/dts-from-js.html">Creating .d.ts Files from .js files</a></li></ul></li><li class="closed"><button aria-label="Project Configuration expand">Project Configuration<span class="open"><svg fill="none" height="9" viewBox="0 0 14 9" width="14" xmlns="http://www.w3.org/2000/svg"><path d="m1 1 6 6 6-6" stroke="#000" stroke-width="2"></path></svg></span><span class="closed"><svg fill="none" height="14" viewBox="0 0 9 14" width="9" xmlns="http://www.w3.org/2000/svg"><path d="m1 13 6-6-6-6" stroke="#000" stroke-width="2"></path></svg></span></button><ul><li><a href="/docs/handbook/tsconfig-json.html">What is a tsconfig.json</a></li><li><a href="/docs/handbook/compiler-options-in-msbuild.html">Compiler Options in MSBuild</a></li><li><a href="/tsconfig">TSConfig Reference</a></li><li><a href="/docs/handbook/compiler-options.html">tsc CLI Options</a></li><li><a href="/docs/handbook/project-references.html">Project References</a></li><li><a href="/docs/handbook/integrating-with-build-tools.html">Integrating with Build Tools</a></li><li><a href="/docs/handbook/configuring-watch.html">Configuring Watch</a></li><li><a href="/docs/handbook/nightly-builds.html">Nightly Builds</a></li></ul></li></ul></nav><div id="handbook-content" role="article"><h1>Overview</h1><article><div class="whitespace raised"><div class="markdown"><p>This overview page contains a shortened version of all the release notes for TypeScript. Because this page is so big. code samples have their interactive elements disabled.</p>
<h2 id="typescript-42" style="position:relative;"><a href="#typescript-42" aria-label="typescript 42 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 4.2</h2>
<h3 id="smarter-type-alias-preservation" style="position:relative;"><a href="#smarter-type-alias-preservation" aria-label="smarter type alias preservation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Smarter Type Alias Preservation</h3>
<p>TypeScript has a way to declare new names for types called type aliases.
If you’re writing a set of functions that all work on <code>string | number | boolean</code>, you can write a type alias to avoid repeating yourself over and over again.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">BasicPrimitive</span><span style="color: #000000"> = </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div></code></div></pre>
<p>In TypeScript 4.2, our internals are a little smarter.
We keep track of how types were constructed by keeping around parts of how they were originally written and constructed over time.
We also keep track of, and differentiate, type aliases to instances of other aliases!</p>
<p>Being able to print back the types based on how you used them in your code means that as a TypeScript user, you can avoid some unfortunately humongous types getting displayed, and that often translates to getting better <code>.d.ts</code> file output, error messages, and in-editor type displays in quick info and signature help.
This can help TypeScript feel a little bit more approachable for newcomers.</p>
<p>For more information, check out <a href="https://github.com/microsoft/TypeScript/pull/42149">the first pull request that improves various cases around preserving union type aliases</a>, along with <a href="https://github.com/microsoft/TypeScript/pull/42284">a second pull request that preserves indirect aliases</a>.</p>
<h2 id="leadingmiddle-rest-elements-in-tuple-types" style="position:relative;"><a href="#leadingmiddle-rest-elements-in-tuple-types" aria-label="leadingmiddle rest elements in tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Leading/Middle Rest Elements in Tuple Types</h2>
<p>In TypeScript, tuple types are meant to model arrays with specific lengths and element types.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// A tuple that stores a pair of numbers</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">: [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">] = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #008000">// A tuple that stores a string, a number, and a boolean</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000">: [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">] = [</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">];</span></div></code></div></pre>
<p>In TypeScript 4.2, rest elements specifically been expanded in how they can be used.
In prior versions, TypeScript only allowed <code>...rest</code> elements at the very last position of a tuple type.</p>
<p>However, now rest elements can occur <em>anywhere</em> within a tuple - with only a few restrictions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">: [...</span><span style="color: #1C6277">string</span><span style="color: #000000">[], </span><span style="color: #1C6277">number</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000"> = [</span><span style="color: #098658">123</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000"> = [</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">123</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000"> = [</span><span style="color: #A31515">"hello!"</span><span style="color: #000000">, </span><span style="color: #A31515">"hello!"</span><span style="color: #000000">, </span><span style="color: #A31515">"hello!"</span><span style="color: #000000">, </span><span style="color: #098658">123</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">bar</span><span style="color: #000000">: [</span><span style="color: #1C6277">boolean</span><span style="color: #000000">, ...</span><span style="color: #1C6277">string</span><span style="color: #000000">[], </span><span style="color: #1C6277">boolean</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #001080">bar</span><span style="color: #000000"> = [</span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">bar</span><span style="color: #000000"> = [</span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #A31515">"some text"</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">bar</span><span style="color: #000000"> = [</span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #A31515">"some"</span><span style="color: #000000">, </span><span style="color: #A31515">"separated"</span><span style="color: #000000">, </span><span style="color: #A31515">"text"</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">];</span></div></code></div></pre>
<p>Even though JavaScript doesn’t have any syntax to model leading rest parameters, we were still able to declare <code>doStuff</code> as a function that takes leading arguments by declaring the <code>...args</code> rest parameter with <em>a tuple type that uses a leading rest element</em>.
This can help model lots of existing JavaScript out there!</p>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/41544">see the original pull request</a>.</p>
<h3 id="stricter-checks-for-the-in-operator" style="position:relative;"><a href="#stricter-checks-for-the-in-operator" aria-label="stricter checks for the in operator permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stricter Checks For The <code>in</code> Operator</h3>
<p>In JavaScript, it is a runtime error to use a non-object type on the right side of the <code>in</code> operator.
TypeScript 4.2 ensures this can be caught at design-time.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2361</span></div><div class='line'><span style="color: #A31515">"foo"</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This check is fairly conservative for the most part, so if you have received an error about this, it is likely an issue in the code.</p>
<p>A big thanks to our external contributor <a href="https://github.com/jonhue">Jonas Hübotter</a> for <a href="https://github.com/microsoft/TypeScript/pull/41928">their pull request</a>!</p>
<h3 id="--nopropertyaccessfromindexsignature" style="position:relative;"><a href="#--nopropertyaccessfromindexsignature" aria-label="  nopropertyaccessfromindexsignature permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--noPropertyAccessFromIndexSignature</code></h3>
<p>Back when TypeScript first introduced index signatures, you could only get properties declared by them with “bracketed” element access syntax like <code>person["name"]</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">SomeType</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/** This is an index signature. */</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">propName</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">doStuff</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">SomeType</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">value</span><span style="color: #000000">[</span><span style="color: #A31515">"someProperty"</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This ended up being cumbersome in situations where we need to work with objects that have arbitrary properties.
For example, imagine an API where it’s common to misspell a property name by adding an extra <code>s</code> character at the end.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Options</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/** File patterns to be excluded. */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">exclude</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">[];</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">   * It handles any extra properties that we haven't declared as type 'any'.</span></div><div class='line'><span style="color: #008000">   */</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">processOptions</span><span style="color: #000000">(</span><span style="color: #001080">opts</span><span style="color: #000000">: </span><span style="color: #1C6277">Options</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Notice we're *intentionally* accessing `excludes`, not `exclude`</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">excludes</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #A31515">"The option `excludes` is not valid. Did you mean `exclude`?"</span></div><div class='line'><span style="color: #000000">    );</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>To make these types of situations easier, a while back, TypeScript made it possible to use “dotted” property access syntax like <code>person.name</code> when a type had a string index signature.
This also made it easier to transition existing JavaScript code over to TypeScript.</p>
<p>In some cases, users would prefer to explicitly opt into the index signature - they would prefer to get an error message when a dotted property access doesn’t correspond to a specific property declaration.</p>
<p>That’s why TypeScript introduces a new flag called <a href="/tsconfig#noPropertyAccessFromIndexSignature"><code>noPropertyAccessFromIndexSignature</code></a>.
Under this mode, you’ll be opted in to TypeScript’s older behavior that issues an error.
This new setting is not under the <a href="/tsconfig#strict"><code>strict</code></a> family of flags, since we believe users will find it more useful on certain codebases than others.</p>
<p>You can understand this feature in more detail by reading up on the corresponding <a href="https://github.com/microsoft/TypeScript/pull/40171/">pull request</a>.
We’d also like to extend a big thanks to <a href="https://github.com/Kingwl">Wenlu Wang</a> who sent us this pull request!</p>
<h3 id="abstract-construct-signatures" style="position:relative;"><a href="#abstract-construct-signatures" aria-label="abstract construct signatures permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>abstract</code> Construct Signatures</h3>
<p>TypeScript allows us to mark a class as <em>abstract</em>.
This tells TypeScript that the class is only meant to be extended from, and that certain members need to be filled in by any subclass to actually create an instance.</p>
<p>TypeScript 4.2 allows you to specify an <code>abstract</code> modifier on constructor signatures.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line dim'><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Shape</span><span style="color: #000000"> {</span></div><div class='line dim'><span style="color: #000000">  </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #795E26">getArea</span><span style="color: #000000">(): </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line dim'><span style="color: #000000">}</span></div><div class='line dim'><span style="color: #008000">// ---cut---</span></div><div class='line dim'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">HasArea</span><span style="color: #000000"> {</span></div><div class='line highlight'><span style="color: #000000">    </span><span style="color: #795E26">getArea</span><span style="color: #000000">(): </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line dim'><span style="color: #000000">}</span></div><div class='line'></div><div class='line dim'><span style="color: #008000">// Works!</span></div><div class='line dim'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">Ctor</span><span style="color: #000000">: </span><span style="color: #1C6277">abstract</span><span style="color: #000000"> </span><span style="color: #AF00DB">new</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">HasArea</span><span style="color: #000000"> = </span><span style="color: #001080">Shape</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Adding the <code>abstract</code> modifier to a construct signature signals that you can pass in <code>abstract</code> constructors.
It doesn’t stop you from passing in other classes/constructor functions that are “concrete” - it really just signals that there’s no intent to run the constructor directly, so it’s safe to pass in either class type.</p>
<p>This feature allows us to write <em>mixin factories</em> in a way that supports abstract classes.
For example, in the following code snippet, we’re able to use the mixin function <code>withStyles</code> with the <code>abstract</code> class <code>SuperClass</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">SuperClass</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #795E26">someMethod</span><span style="color: #000000">(): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">badda</span><span style="color: #000000">() {}</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">AbstractConstructor</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">abstract</span><span style="color: #000000"> </span><span style="color: #AF00DB">new</span><span style="color: #000000"> (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">withStyles</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">AbstractConstructor</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">object</span><span style="color: #000000">&gt;&gt;(</span><span style="color: #001080">Ctor</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">StyledClass</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Ctor</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #795E26">getStyles</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">            </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">        }</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">StyledClass</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">SubClass</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #795E26">withStyles</span><span style="color: #000000">(</span><span style="color: #001080">SuperClass</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">someMethod</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">someMethod</span><span style="color: #000000">()</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Note that <code>withStyles</code> is demonstrating a specific rule, where a class (like <code>StyledClass</code>) that extends a value that’s generic and bounded by an abstract constructor (like <code>Ctor</code>) has to also be declared <code>abstract</code>.
This is because there’s no way to know if a class with <em>more</em> abstract members was passed in, and so it’s impossible to know whether the subclass implements all the abstract members.</p>
<p>You can read up more on abstract construct signatures <a href="https://github.com/microsoft/TypeScript/pull/36392">on its pull request</a>.</p>
<h3 id="understanding-your-project-structure-with---explainfiles" style="position:relative;"><a href="#understanding-your-project-structure-with---explainfiles" aria-label="understanding your project structure with   explainfiles permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Understanding Your Project Structure With <code>--explainFiles</code></h3>
<p>A surprisingly common scenario for TypeScript users is to ask “why is TypeScript including this file?“.
Inferring the files of your program turns out to be a complicated process, and so there are lots of reasons why a specific combination of <code>lib.d.ts</code> got used, why certain files in <code>node_modules</code> are getting included, and why certain files are being included even though we thought specifying <code>exclude</code> would keep them out.</p>
<p>That’s why TypeScript now provides an <a href="/tsconfig#explainFiles"><code>explainFiles</code></a> flag.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">sh</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc --explainFiles</span></div></code></div></pre>
<p>When using this option, the TypeScript compiler will give some very verbose output about why a file ended up in your program.
To read it more easily, you can forward the output to a file, or pipe it to a program that can easily view it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">sh</div><div class='code-container'><code><div class='line'><span style="color: #008000"># Forward output to a text file</span></div><div class='line'><span style="color: #000000">tsc --explainFiles &gt; expanation.txt</span></div><div class='line'></div><div class='line'><span style="color: #008000"># Pipe output to a utility program like `less`, or an editor like VS Code</span></div><div class='line'><span style="color: #000000">tsc --explainFiles | less</span></div><div class='line'></div><div class='line'><span style="color: #000000">tsc --explainFiles | code -</span></div></code></div></pre>
<p>Typically, the output will start out by listing out reasons for including <code>lib.d.ts</code> files, then for local files, and then <code>node_modules</code> files.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">TS_Compiler_Directory/4.2.2/lib/lib.es5.d.ts
  Library referenced via 'es5' from file 'TS_Compiler_Directory/4.2.2/lib/lib.es2015.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.es2015.d.ts
  Library referenced via 'es2015' from file 'TS_Compiler_Directory/4.2.2/lib/lib.es2016.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.es2016.d.ts
  Library referenced via 'es2016' from file 'TS_Compiler_Directory/4.2.2/lib/lib.es2017.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.es2017.d.ts
  Library referenced via 'es2017' from file 'TS_Compiler_Directory/4.2.2/lib/lib.es2018.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.es2018.d.ts
  Library referenced via 'es2018' from file 'TS_Compiler_Directory/4.2.2/lib/lib.es2019.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.es2019.d.ts
  Library referenced via 'es2019' from file 'TS_Compiler_Directory/4.2.2/lib/lib.es2020.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.es2020.d.ts
  Library referenced via 'es2020' from file 'TS_Compiler_Directory/4.2.2/lib/lib.esnext.d.ts'
TS_Compiler_Directory/4.2.2/lib/lib.esnext.d.ts
  Library 'lib.esnext.d.ts' specified in compilerOptions

... More Library References...

foo.ts
  Matched by include pattern '**/*' in 'tsconfig.json'</span></div></code></div></pre>
<p>Right now, we make no guarantees about the output format - it might change over time.
On that note, we’re interested in improving this format if you have any suggestions!</p>
<p>For more information, <a href="https://github.com/microsoft/TypeScript/pull/40011">check out the original pull request</a>!</p>
<h3 id="improved-uncalled-function-checks-in-logical-expressions" style="position:relative;"><a href="#improved-uncalled-function-checks-in-logical-expressions" aria-label="improved uncalled function checks in logical expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved Uncalled Function Checks in Logical Expressions</h3>
<p>Thanks to further improvements from <a href="https://github.com/a-tarasyuk">Alex Tarasyuk</a>, TypeScript’s uncalled function checks now apply within <code>&#x26;&#x26;</code> and <code>||</code> expressions.</p>
<p>Under <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a>, the following code will now error.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">shouldDisplayElement</span><span style="color: #000000">(</span><span style="color: #001080">element</span><span style="color: #000000">: </span><span style="color: #1C6277">Element</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getVisibleItems</span><span style="color: #000000">(</span><span style="color: #001080">elements</span><span style="color: #000000">: </span><span style="color: #1C6277">Element</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">elements</span><span style="color: #000000">.</span><span style="color: #795E26">filter</span><span style="color: #000000">((</span><span style="color: #001080">e</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">shouldDisplayElement</span><span style="color: #000000"> && </span><span style="color: #001080">e</span><span style="color: #000000">.</span><span style="color: #001080">children</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//                          ~~~~~~~~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// This condition will always return true since the function is always defined.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Did you mean to call it instead.</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/issues/40197">check out the pull request here</a>.</p>
<h3 id="destructured-variables-can-be-explicitly-marked-as-unused" style="position:relative;"><a href="#destructured-variables-can-be-explicitly-marked-as-unused" aria-label="destructured variables can be explicitly marked as unused permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Destructured Variables Can Be Explicitly Marked as Unused</h3>
<p>Thanks to another pull request from <a href="https://github.com/a-tarasyuk">Alex Tarasyuk</a>, you can now mark destructured variables as unused by prefixing them with an underscore (the <code>_</code> character).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> [</span><span style="color: #001080">_first</span><span style="color: #000000">, </span><span style="color: #001080">second</span><span style="color: #000000">] = </span><span style="color: #795E26">getValues</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Previously, if <code>_first</code> was never used later on, TypeScript would issue an error under <a href="/tsconfig#noUnusedLocals"><code>noUnusedLocals</code></a>.
Now, TypeScript will recognize that <code>_first</code> was intentionally named with an underscore because there was no intent to use it.</p>
<p>For more details, take a look at <a href="https://github.com/microsoft/TypeScript/pull/41378">the full change</a>.</p>
<h3 id="relaxed-rules-between-optional-properties-and-string-index-signatures" style="position:relative;"><a href="#relaxed-rules-between-optional-properties-and-string-index-signatures" aria-label="relaxed rules between optional properties and string index signatures permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relaxed Rules Between Optional Properties and String Index Signatures</h3>
<p>String index signatures are a way of typing dictionary-like objects, where you want to allow access with arbitrary keys:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">movieWatchCount</span><span style="color: #000000">: { [</span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">number</span><span style="color: #000000"> } = {};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">watchMovie</span><span style="color: #000000">(</span><span style="color: #001080">title</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">movieWatchCount</span><span style="color: #000000">[</span><span style="color: #001080">title</span><span style="color: #000000">] = (</span><span style="color: #001080">movieWatchCount</span><span style="color: #000000">[</span><span style="color: #001080">title</span><span style="color: #000000">] ?? </span><span style="color: #098658">0</span><span style="color: #000000">) + </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Of course, for any movie title not yet in the dictionary, <code>movieWatchCount[title]</code> will be <code>undefined</code> (TypeScript 4.1 added the option <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-1.html#checked-indexed-accesses---nouncheckedindexedaccess"><code>noUncheckedIndexedAccess</code></a> to include <code>undefined</code> when reading from an index signature like this).
Even though it’s clear that there must be some strings not present in <code>movieWatchCount</code>, previous versions of TypeScript treated optional object properties as unassignable to otherwise compatible index signatures, due to the presence of <code>undefined</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">WesAndersonWatchCount</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"Fantastic Mr. Fox"</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"The Royal Tenenbaums"</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"Moonrise Kingdom"</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"The Grand Budapest Hotel"</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">wesAndersonWatchCount</span><span style="color: #000000">: </span><span style="color: #1C6277">WesAndersonWatchCount</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">movieWatchCount</span><span style="color: #000000">: { [</span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">number</span><span style="color: #000000"> } = </span><span style="color: #001080">wesAndersonWatchCount</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//    ~~~~~~~~~~~~~~~ error!</span></div><div class='line'><span style="color: #008000">// Type 'WesAndersonWatchCount' is not assignable to type '{ [key: string]: number; }'.</span></div><div class='line'><span style="color: #008000">//    Property '"Fantastic Mr. Fox"' is incompatible with index signature.</span></div><div class='line'><span style="color: #008000">//      Type 'number | undefined' is not assignable to type 'number'.</span></div><div class='line'><span style="color: #008000">//        Type 'undefined' is not assignable to type 'number'. (2322)</span></div></code></div></pre>
<p>TypeScript 4.2 allows this assignment. However, it does <em>not</em> allow the assignment of non-optional properties with <code>undefined</code> in their types, nor does it allow writing <code>undefined</code> to a specific key:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2322</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">BatmanWatchCount</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"Batman Begins"</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"The Dark Knight"</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"The Dark Knight Rises"</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">batmanWatchCount</span><span style="color: #000000">: </span><span style="color: #1C6277">BatmanWatchCount</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Still an error in TypeScript 4.2.</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">movieWatchCount</span><span style="color: #000000">: { [</span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">number</span><span style="color: #000000"> } = </span><span style="color: #001080">batmanWatchCount</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Still an error in TypeScript 4.2.</span></div><div class='line'><span style="color: #008000">// Index signatures don't implicitly allow explicit `undefined`.</span></div><div class='line'><span style="color: #001080">movieWatchCount</span><span style="color: #000000">[</span><span style="color: #A31515">"It's the Great Pumpkin, Charlie Brown"</span><span style="color: #000000">] = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span></div></code></div></pre>
<p>The new rule also does not apply to number index signatures, since they are assumed to be array-like and dense:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2322</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">sortOfArrayish</span><span style="color: #000000">: { [</span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">numberKeys</span><span style="color: #000000">: { </span><span style="color: #098658">42</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #001080">sortOfArrayish</span><span style="color: #000000"> = </span><span style="color: #001080">numberKeys</span><span style="color: #000000">;</span></div></code></div></pre>
<p>You can get a better sense of this change <a href="https://github.com/microsoft/TypeScript/pull/41921">by reading up on the original PR</a>.</p>
<h3 id="declare-missing-helper-function" style="position:relative;"><a href="#declare-missing-helper-function" aria-label="declare missing helper function permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declare Missing Helper Function</h3>
<p>Thanks to <a href="https://github.com/microsoft/TypeScript/pull/41215">a community pull request</a> from <a href="https://github.com/a-tarasyuk">Alexander Tarasyuk</a>, we now have a quick fix for declaring new functions and methods based on the call-site!</p>
<p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2021/01/addMissingFunction-4.2.gif" alt="An un-declared function foo being called, with a quick fix scaffolding out the new contents of the file"></p>
<h3 id="breaking-changes" style="position:relative;"><a href="#breaking-changes" aria-label="breaking changes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking Changes</h3>
<p>We always strive to minimize breaking changes in a release.
TypeScript 4.2 contains some breaking changes, but we believe they should be manageable in an upgrade.</p>
<h4 id="libdts-updates" style="position:relative;"><a href="#libdts-updates" aria-label="libdts updates permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>lib.d.ts</code> Updates</h4>
<p>As with every TypeScript version, declarations for <code>lib.d.ts</code> (especially the declarations generated for web contexts), have changed.
There are various changes, though <code>Intl</code> and <code>ResizeObserver</code>’s may end up being the most disruptive.</p>
<h4 id="noimplicitany-errors-apply-to-loose-yield-expressions" style="position:relative;"><a href="#noimplicitany-errors-apply-to-loose-yield-expressions" aria-label="noimplicitany errors apply to loose yield expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>noImplicitAny</code> Errors Apply to Loose <code>yield</code> Expressions</h4>
<p>When the value of a <code>yield</code> expression is captured, but TypeScript can’t immediately figure out what type you intend for it to receive (i.e. the <code>yield</code> expression isn’t contextually typed), TypeScript will now issue an implicit <code>any</code> error.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 7057</span></div><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g1</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">value</span><span style="color: #000000"> = </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g2</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// No error.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// The result of `yield 1` is unused.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g3</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// No error.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// `yield 1` is contextually typed by 'string'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">value</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g4</span><span style="color: #000000">(): </span><span style="color: #1C6277">Generator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">void</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// No error.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// TypeScript can figure out the type of `yield 1`</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// from the explicit return type of `g3`.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">value</span><span style="color: #000000"> = </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>See more details in <a href="https://github.com/microsoft/TypeScript/pull/41348">the corresponding changes</a>.</p>
<h4 id="expanded-uncalled-function-checks" style="position:relative;"><a href="#expanded-uncalled-function-checks" aria-label="expanded uncalled function checks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Expanded Uncalled Function Checks</h4>
<p>As described above, uncalled function checks will now operate consistently within <code>&#x26;&#x26;</code> and <code>||</code> expressions when using <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a>.
This can be a source of new breaks, but is typically an indication of a logic error in existing code.</p>
<h4 id="type-arguments-in-javascript-are-not-parsed-as-type-arguments" style="position:relative;"><a href="#type-arguments-in-javascript-are-not-parsed-as-type-arguments" aria-label="type arguments in javascript are not parsed as type arguments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type Arguments in JavaScript Are Not Parsed as Type Arguments</h4>
<p>Type arguments were already not allowed in JavaScript, but in TypeScript 4.2, the parser will parse them in a more spec-compliant way.
So when writing the following code in a JavaScript file:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #795E26">f</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #098658">100</span><span style="color: #000000">);</span></div></code></div></pre>
<p>TypeScript will parse it as the following JavaScript:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #001080">f</span><span style="color: #000000"> &lt; </span><span style="color: #0070C1">T</span><span style="color: #000000"> &gt; </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This may impact you if you were leveraging TypeScript’s API to parse type constructs in JavaScript files, which may have occurred when trying to parse Flow files.</p>
<p>See <a href="https://github.com/microsoft/TypeScript/pull/41928">the pull request</a> for more details on what’s checked.</p>
<h3 id="tuple-size-limits-for-spreads" style="position:relative;"><a href="#tuple-size-limits-for-spreads" aria-label="tuple size limits for spreads permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tuple size limits for spreads</h3>
<p>Tuple types can be made by using any sort of spread syntax (<code>...</code>) in TypeScript.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Tuple types with spread elements</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NumStr</span><span style="color: #000000"> = [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NumStrNumStr</span><span style="color: #000000"> = [...</span><span style="color: #1C6277">NumStr</span><span style="color: #000000">, ...</span><span style="color: #1C6277">NumStr</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Array spread expressions</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">numStr</span><span style="color: #000000"> = [</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">] </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">numStrNumStr</span><span style="color: #000000"> = [...</span><span style="color: #001080">numStr</span><span style="color: #000000">, ...</span><span style="color: #001080">numStr</span><span style="color: #000000">] </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Sometimes these tuple types can accidentally grow to be huge, and that can make type-checking take a long time.
Instead of letting the type-checking process hang (which is especially bad in editor scenarios), TypeScript has a limiter in place to avoid doing all that work.</p>
<p>You can <a href="https://github.com/microsoft/TypeScript/pull/42448">see this pull request</a> for more details.</p>
<h4 id="dts-extensions-cannot-be-used-in-import-paths" style="position:relative;"><a href="#dts-extensions-cannot-be-used-in-import-paths" aria-label="dts extensions cannot be used in import paths permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>.d.ts</code> Extensions Cannot Be Used In Import Paths</h4>
<p>In TypeScript 4.2, it is now an error for your import paths to contain <code>.d.ts</code> in the extension.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// must be changed something like</span></div><div class='line'><span style="color: #008000">//   - "./foo"</span></div><div class='line'><span style="color: #008000">//   - "./foo.js"</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Foo</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./foo.d.ts"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Instead, your import paths should reflect whatever your loader will do at runtime.
Any of the following imports might be usable instead.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Foo</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./foo"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Foo</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./foo.js"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Foo</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./foo/index.js"</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="reverting-template-literal-inference" style="position:relative;"><a href="#reverting-template-literal-inference" aria-label="reverting template literal inference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reverting Template Literal Inference</h3>
<p>This change removed a feature from TypeScript 4.2 beta.
If you haven’t yet upgraded past our last stable release, you won’t be affected, but you may still be interested in the change.</p>
<p>The beta version of TypeScript 4.2 included a change in inference to template strings.
In this change, template string literals would either be given template string types or simplify to multiple string literal types.
These types would then <em>widen</em> to <code>string</code> when assigning to mutable variables.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">yourName</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// 'bar' is constant.</span></div><div class='line'><span style="color: #008000">// It has type '`hello ${string}`'.</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">bar</span><span style="color: #000000"> = </span><span style="color: #A31515">`hello </span><span style="color: #0000FF">${</span><span style="color: #001080">yourName</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// 'baz' is mutable.</span></div><div class='line'><span style="color: #008000">// It has type 'string'.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">baz</span><span style="color: #000000"> = </span><span style="color: #A31515">`hello </span><span style="color: #0000FF">${</span><span style="color: #001080">yourName</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This is similar to how string literal inference works.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// 'bar' has type '"hello"'.</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">bar</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// 'baz' has type 'string'.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">baz</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>For that reason, we believed that making template string expressions have template string types would be “consistent”;
however, from what we’ve seen and heard, that isn’t always desirable.</p>
<p>In response, we’ve reverted this feature (and potential breaking change).
If you <em>do</em> want a template string expression to be given a literal-like type, you can always add <code>as const</code> to the end of it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">yourName</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// 'bar' has type '`hello ${string}`'.</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">bar</span><span style="color: #000000"> = </span><span style="color: #A31515">`hello </span><span style="color: #0000FF">${</span><span style="color: #001080">yourName</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//                              ^^^^^^^^</span></div><div class='line'></div><div class='line'><span style="color: #008000">// 'baz' has type 'string'.</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">baz</span><span style="color: #000000"> = </span><span style="color: #A31515">`hello </span><span style="color: #0000FF">${</span><span style="color: #001080">yourName</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="typescript-41" style="position:relative;"><a href="#typescript-41" aria-label="typescript 41 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 4.1</h2>
<h3 id="template-literal-types" style="position:relative;"><a href="#template-literal-types" aria-label="template literal types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Template Literal Types</h3>
<p>String literal types in TypeScript allow us to model functions and APIs that expect a set of specific strings.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2345</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">setVerticalAlignment</span><span style="color: #000000">(</span><span style="color: #001080">color</span><span style="color: #000000">: </span><span style="color: #A31515">"top"</span><span style="color: #000000"> | </span><span style="color: #A31515">"middle"</span><span style="color: #000000"> | </span><span style="color: #A31515">"bottom"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">setVerticalAlignment</span><span style="color: #000000">(</span><span style="color: #A31515">"middel"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>This is pretty nice because string literal types can basically spell-check our string values.</p>
<p>We also like that string literals can be used as property names in mapped types.
In this sense, they’re also usable as building blocks:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Options</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #A31515">"noImplicitAny"</span><span style="color: #000000"> | </span><span style="color: #A31515">"strictNullChecks"</span><span style="color: #000000"> | </span><span style="color: #A31515">"strictFunctionTypes"</span><span style="color: #000000">]?: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #008000">// same as</span></div><div class='line'><span style="color: #008000">//   type Options = {</span></div><div class='line'><span style="color: #008000">//       noImplicitAny?: boolean,</span></div><div class='line'><span style="color: #008000">//       strictNullChecks?: boolean,</span></div><div class='line'><span style="color: #008000">//       strictFunctionTypes?: boolean</span></div><div class='line'><span style="color: #008000">//   };</span></div></code></div></pre>
<p>But there’s another place that that string literal types could be used as building blocks: building other string literal types.</p>
<p>That’s why TypeScript 4.1 brings the template literal string type.
It has the same syntax as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literal strings in JavaScript</a>, but is used in type positions.
When you use it with concrete literal types, it produces a new string literal type by concatenating the contents.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">World</span><span style="color: #000000"> = </span><span style="color: #A31515">"world"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Greeting</span><span style="color: #000000"> = </span><span style="color: #A31515">`hello </span><span style="color: #0000FF">${</span><span style="color: #1C6277">World</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//   ^?</span></div></code></div></pre>
<p>What happens when you have unions in substitution positions?
It produces the set of every possible string literal that could be represented by each union member.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Color</span><span style="color: #000000"> = </span><span style="color: #A31515">"red"</span><span style="color: #000000"> | </span><span style="color: #A31515">"blue"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Quantity</span><span style="color: #000000"> = </span><span style="color: #A31515">"one"</span><span style="color: #000000"> | </span><span style="color: #A31515">"two"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">SeussFish</span><span style="color: #000000"> = </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #1C6277">Quantity</span><span style="color: #000000FF"> </span><span style="color: #000000">|</span><span style="color: #000000FF"> </span><span style="color: #1C6277">Color</span><span style="color: #0000FF">}</span><span style="color: #A31515"> fish`</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//   ^?</span></div></code></div></pre>
<p>This can be used beyond cute examples in release notes.
For example, several libraries for UI components have a way to specify both vertical and horizontal alignment in their APIs, often with both at once using a single string like <code>"bottom-right"</code>.
Between vertically aligning with <code>"top"</code>, <code>"middle"</code>, and <code>"bottom"</code>, and horizontally aligning with <code>"left"</code>, <code>"center"</code>, and <code>"right"</code>, there are 9 possible strings where each of the former strings is connected with each of the latter strings using a dash.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2345</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">VerticalAlignment</span><span style="color: #000000"> = </span><span style="color: #A31515">"top"</span><span style="color: #000000"> | </span><span style="color: #A31515">"middle"</span><span style="color: #000000"> | </span><span style="color: #A31515">"bottom"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">HorizontalAlignment</span><span style="color: #000000"> = </span><span style="color: #A31515">"left"</span><span style="color: #000000"> | </span><span style="color: #A31515">"center"</span><span style="color: #000000"> | </span><span style="color: #A31515">"right"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Takes</span></div><div class='line'><span style="color: #008000">//   | "top-left"    | "top-center"    | "top-right"</span></div><div class='line'><span style="color: #008000">//   | "middle-left" | "middle-center" | "middle-right"</span></div><div class='line'><span style="color: #008000">//   | "bottom-left" | "bottom-center" | "bottom-right"</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">setAlignment</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #1C6277">VerticalAlignment</span><span style="color: #0000FF">}</span><span style="color: #A31515">-</span><span style="color: #0000FF">${</span><span style="color: #1C6277">HorizontalAlignment</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #795E26">setAlignment</span><span style="color: #000000">(</span><span style="color: #A31515">"top-left"</span><span style="color: #000000">);   </span><span style="color: #008000">// works!</span></div><div class='line'><span style="color: #795E26">setAlignment</span><span style="color: #000000">(</span><span style="color: #A31515">"top-middel"</span><span style="color: #000000">); </span><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #795E26">setAlignment</span><span style="color: #000000">(</span><span style="color: #A31515">"top-pot"</span><span style="color: #000000">);    </span><span style="color: #008000">// error! but good doughnuts if you're ever in Seattle</span></div></code></div></pre>
<p>While there are <strong>lots</strong> of examples of this sort of API in the wild, this is still a bit of a toy example since we could write these out manually.
In fact, for 9 strings, this is likely fine; but when you need a ton of strings, you should consider automatically generating them ahead of time to save work on every type-check (or just use <code>string</code>, which will be much simpler to comprehend).</p>
<p>Some of the real value comes from dynamically creating new string literals.
For example, imagine a <code>makeWatchedObject</code> API that takes an object and produces a mostly identical object, but with a new <code>on</code> method to detect for changes to the properties.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">person</span><span style="color: #000000"> = </span><span style="color: #795E26">makeWatchedObject</span><span style="color: #000000">({</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">firstName:</span><span style="color: #000000"> </span><span style="color: #A31515">"Homer"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #008000">// give-or-take</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location:</span><span style="color: #000000"> </span><span style="color: #A31515">"Springfield"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">});</span></div><div class='line'></div><div class='line'><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">"firstNameChanged"</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`firstName was changed!`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<p>Notice that <code>on</code> listens on the event <code>"firstNameChanged"</code>, not just <code>"firstName"</code>.
How would we type this?</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000" twslash="true"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">PropEventSource</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #001080">eventName</span><span style="color: #000000">: </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #1C6277">string</span><span style="color: #000000FF"> </span><span style="color: #000000">&</span><span style="color: #000000FF"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000FF"> </span><span style="color: #1C6277">T</span><span style="color: #0000FF">}</span><span style="color: #A31515">Changed`</span><span style="color: #000000">, </span><span style="color: #795E26">callback</span><span style="color: #000000">: () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">/// Create a "watched object" with an 'on' method</span></div><div class='line'><span style="color: #008000">/// so that you can watch for changes to properties.</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeWatchedObject</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">PropEventSource</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>With this, we can build something that errors when we give the wrong property!</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2345</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">PropEventSource</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #001080">eventName</span><span style="color: #000000">: </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #1C6277">string</span><span style="color: #000000FF"> </span><span style="color: #000000">&</span><span style="color: #000000FF"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000FF"> </span><span style="color: #1C6277">T</span><span style="color: #0000FF">}</span><span style="color: #A31515">Changed`</span><span style="color: #000000">, </span><span style="color: #795E26">callback</span><span style="color: #000000">: () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeWatchedObject</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">PropEventSource</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">person</span><span style="color: #000000"> = </span><span style="color: #795E26">makeWatchedObject</span><span style="color: #000000">({</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">firstName:</span><span style="color: #000000"> </span><span style="color: #A31515">"Homer"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #008000">// give-or-take</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location:</span><span style="color: #000000"> </span><span style="color: #A31515">"Springfield"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">});</span></div><div class='line'></div><div class='line'><span style="color: #008000">// ---cut---</span></div><div class='line'><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">"firstName"</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {});</span></div><div class='line'></div><div class='line'><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #001080">person</span><span style="color: #000000">.</span><span style="color: #795E26">on</span><span style="color: #000000">(</span><span style="color: #A31515">"frstNameChanged"</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {});</span></div></code></div></pre>
<p>We can also do something special in template literal types: we can <em>infer</em> from substitution positions.
We can make our last example generic to infer from parts of the <code>eventName</code> string to figure out the associated property.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">PropEventSource</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #1C6277">on</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000"> & </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;</span></div><div class='line'><span style="color: #000000">        (</span><span style="color: #001080">eventName</span><span style="color: #000000">: </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #1C6277">K</span><span style="color: #0000FF">}</span><span style="color: #A31515">Changed`</span><span style="color: #000000">, </span><span style="color: #795E26">callback</span><span style="color: #000000">: (</span><span style="color: #001080">newValue</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000"> ): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #1C6277">declare</span><span style="color: #000000"> </span><span style="color: #1C6277">function</span><span style="color: #000000"> </span><span style="color: #1C6277">makeWatchedObject</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">PropEventSource</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #1C6277">let</span><span style="color: #000000"> </span><span style="color: #1C6277">person</span><span style="color: #000000"> = </span><span style="color: #1C6277">makeWatchedObject</span><span style="color: #000000">({</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">firstName</span><span style="color: #000000">: </span><span style="color: #A31515">"Homer"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #098658">42</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">location</span><span style="color: #000000">: </span><span style="color: #A31515">"Springfield"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">});</span></div><div class='line'></div><div class='line'><span style="color: #008000">// works! 'newName' is typed as 'string'</span></div><div class='line'><span style="color: #1C6277">person</span><span style="color: #000000">.</span><span style="color: #1C6277">on</span><span style="color: #000000">(</span><span style="color: #A31515">"firstNameChanged"</span><span style="color: #000000">, </span><span style="color: #1C6277">newName</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// 'newName' has the type of 'firstName'</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #1C6277">console</span><span style="color: #000000">.</span><span style="color: #1C6277">log</span><span style="color: #000000">(</span><span style="color: #A31515">`new name is </span><span style="color: #0000FF">${</span><span style="color: #1C6277">newName</span><span style="color: #000000FF">.</span><span style="color: #1C6277">toUpperCase</span><span style="color: #000000FF">()</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">});</span></div><div class='line'></div><div class='line'><span style="color: #008000">// works! 'newAge' is typed as 'number'</span></div><div class='line'><span style="color: #1C6277">person</span><span style="color: #000000">.</span><span style="color: #1C6277">on</span><span style="color: #000000">(</span><span style="color: #A31515">"ageChanged"</span><span style="color: #000000">, </span><span style="color: #1C6277">newAge</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">if</span><span style="color: #000000"> (</span><span style="color: #001080">newAge</span><span style="color: #000000"> &lt; 0) {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"warning! negative age"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">})</span></div></code></div></pre>
<p>Here we made <code>on</code> into a generic method.
When a user calls with the string <code>"firstNameChanged'</code>, TypeScript will try to infer the right type for <code>K</code>.
To do that, it will match <code>K</code> against the content prior to <code>"Changed"</code> and infer the string <code>"firstName"</code>.
Once TypeScript figures that out, the <code>on</code> method can fetch the type of <code>firstName</code> on the original object, which is <code>string</code> in this case.
Similarly, when we call with <code>"ageChanged"</code>, it finds the type for the property <code>age</code> which is <code>number</code>).</p>
<p>Inference can be combined in different ways, often to deconstruct strings, and reconstruct them in different ways.
In fact, to help with modifying these string literal types, we’ve added a few new utility type aliases for modifying casing in letters (i.e. converting to lowercase and uppercase characters).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">EnthusiasticGreeting</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt; = </span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #1C6277">Uppercase</span><span style="color: #000000FF">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000FF">&gt;</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">HELLO</span><span style="color: #000000"> = </span><span style="color: #1C6277">EnthusiasticGreeting</span><span style="color: #000000">&lt;</span><span style="color: #A31515">"hello"</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #008000">//   ^?</span></div></code></div></pre>
<p>The new type aliases are <code>Uppercase</code>, <code>Lowercase</code>, <code>Capitalize</code> and <code>Uncapitalize</code>.
The first two transform every character in a string, and the latter two transform only the first character in a string.</p>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/40336">see the original pull request</a> and <a href="https://github.com/microsoft/TypeScript/pull/40580">the in-progress pull request to switch to type alias helpers</a>.</p>
<h2 id="key-remapping-in-mapped-types" style="position:relative;"><a href="#key-remapping-in-mapped-types" aria-label="key remapping in mapped types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Key Remapping in Mapped Types</h2>
<p>Just as a refresher, a mapped type can create new object types based on arbitrary keys</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Options</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #A31515">"noImplicitAny"</span><span style="color: #000000"> | </span><span style="color: #A31515">"strictNullChecks"</span><span style="color: #000000"> | </span><span style="color: #A31515">"strictFunctionTypes"</span><span style="color: #000000">]?: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #008000">// same as</span></div><div class='line'><span style="color: #008000">//   type Options = {</span></div><div class='line'><span style="color: #008000">//       noImplicitAny?: boolean,</span></div><div class='line'><span style="color: #008000">//       strictNullChecks?: boolean,</span></div><div class='line'><span style="color: #008000">//       strictFunctionTypes?: boolean</span></div><div class='line'><span style="color: #008000">//   };</span></div></code></div></pre>
<p>or new object types based on other object types.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/// 'Partial&lt;T&gt;' is the same as 'T', but with each property marked optional.</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Partial</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<p>Until now, mapped types could only produce new object types with keys that you provided them; however, lots of the time you want to be able to create new keys, or filter out keys, based on the inputs.</p>
<p>That’s why TypeScript 4.1 allows you to re-map keys in mapped types with a new <code>as</code> clause.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">MappedTypeWithNewKeys</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">    [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #1C6277">NewKeyType</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">//            ^^^^^^^^^^^^^</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">//            This is the new syntax!</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>With this new <code>as</code> clause, you can leverage features like template literal types to easily create property names based off of old ones.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Getters</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">    [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #A31515">`get</span><span style="color: #0000FF">${</span><span style="color: #1C6277">Capitalize</span><span style="color: #000000FF">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000FF"> </span><span style="color: #000000">&</span><span style="color: #000000FF"> </span><span style="color: #1C6277">K</span><span style="color: #000000FF">&gt;</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">]: () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">location</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">LazyPerson</span><span style="color: #000000"> = </span><span style="color: #1C6277">Getters</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Person</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #008000">//   ^?</span></div></code></div></pre>
<p>and you can even filter out keys by producing <code>never</code>.
That means you don’t have to use an extra <code>Omit</code> helper type in some cases.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Remove the 'kind' property</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">RemoveKindField</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">    [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #1C6277">Exclude</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">K</span><span style="color: #000000">, </span><span style="color: #A31515">"kind"</span><span style="color: #000000">&gt;]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Circle</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"circle"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">radius</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">KindlessCircle</span><span style="color: #000000"> = </span><span style="color: #1C6277">RemoveKindField</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Circle</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #008000">//   ^?</span></div></code></div></pre>
<p>For more information, take a look at <a href="https://github.com/microsoft/TypeScript/pull/40336">the original pull request over on GitHub</a>.</p>
<h2 id="recursive-conditional-types" style="position:relative;"><a href="#recursive-conditional-types" aria-label="recursive conditional types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recursive Conditional Types</h2>
<p>In JavaScript it’s fairly common to see functions that can flatten and build up container types at arbitrary levels.
For example, consider the <code>.then()</code> method on instances of <code>Promise</code>.
<code>.then(...)</code> unwraps each promise until it finds a value that’s not “promise-like”, and passes that value to a callback.
There’s also a relatively new <code>flat</code> method on <code>Array</code>s that can take a depth of how deep to flatten.</p>
<p>Expressing this in TypeScript’s type system was, for all practical intents and purposes, not possible.
While there were hacks to achieve this, the types ended up looking very unreasonable.</p>
<p>That’s why TypeScript 4.1 eases some restrictions on conditional types - so that they can model these patterns.
In TypeScript 4.1, conditional types can now immediately reference themselves within their branches, making it easier to write recursive type aliases.</p>
<p>For example, if we wanted to write a type to get the element types of nested arrays, we could write the following <code>deepFlatten</code> type.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ElementType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">ReadonlyArray</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; ? </span><span style="color: #1C6277">ElementType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; : </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">deepFlatten</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">unknown</span><span style="color: #000000">[]&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">ElementType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;[] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #A31515">"not implemented"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// All of these return the type 'number[]':</span></div><div class='line'><span style="color: #795E26">deepFlatten</span><span style="color: #000000">([</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">]);</span></div><div class='line'><span style="color: #795E26">deepFlatten</span><span style="color: #000000">([[</span><span style="color: #098658">1</span><span style="color: #000000">], [</span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">]]);</span></div><div class='line'><span style="color: #795E26">deepFlatten</span><span style="color: #000000">([[</span><span style="color: #098658">1</span><span style="color: #000000">], [[</span><span style="color: #098658">2</span><span style="color: #000000">]], [[[</span><span style="color: #098658">3</span><span style="color: #000000">]]]]);</span></div></code></div></pre>
<p>Similarly, in TypeScript 4.1 we can write an <code>Awaited</code> type to deeply unwrap <code>Promise</code>s.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Awaited</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">PromiseLike</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; ? </span><span style="color: #1C6277">Awaited</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; : </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">/// Like `promise.then(...)`, but more accurate in types.</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">customThen</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">p</span><span style="color: #000000">: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">onFulfilled</span><span style="color: #000000">: (</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">Awaited</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Awaited</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;&gt;;</span></div></code></div></pre>
<p>Keep in mind that while these recursive types are powerful, but they should be used responsibly and sparingly.</p>
<p>First off, these types can do a lot of work which means that they can increase type-checking time.
Trying to model numbers in the Collatz conjecture or Fibonacci sequence might be fun, but don’t ship that in <code>.d.ts</code> files on npm.</p>
<p>But apart from being computationally intensive, these types can hit an internal recursion depth limit on sufficiently-complex inputs.
When that recursion limit is hit, that results in a compile-time error.
In general, it’s better not to use these types at all than to write something that fails on more realistic examples.</p>
<p>See more <a href="https://github.com/microsoft/TypeScript/pull/40002">at the implementation</a>.</p>
<h2 id="checked-indexed-accesses---nouncheckedindexedaccess" style="position:relative;"><a href="#checked-indexed-accesses---nouncheckedindexedaccess" aria-label="checked indexed accesses   nouncheckedindexedaccess permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Checked Indexed Accesses (<code>--noUncheckedIndexedAccess</code>)</h2>
<p>TypeScript has a feature called <em>index signatures</em>.
These signatures are a way to signal to the type system that users can access arbitrarily-named properties.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Options</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">path</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">permissions</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Extra properties are caught by this index signature.</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">propName</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">checkOptions</span><span style="color: #000000">(</span><span style="color: #001080">opts</span><span style="color: #000000">: </span><span style="color: #1C6277">Options</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">path</span><span style="color: #000000">; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">permissions</span><span style="color: #000000">; </span><span style="color: #008000">// number</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// These are all allowed too!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// They have the type 'string | number'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">yadda</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">opts</span><span style="color: #000000">[</span><span style="color: #A31515">"foo bar baz"</span><span style="color: #000000">].</span><span style="color: #795E26">toString</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">opts</span><span style="color: #000000">[</span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">()].</span><span style="color: #795E26">toString</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In the above example, <code>Options</code> has an index signature that says any accessed property that’s not already listed should have the type <code>string | number</code>.
This is often convenient for optimistic code that assumes you know what you’re doing, but the truth is that most values in JavaScript do not support every potential property name.
Most types will not, for example, have a value for a property key created by <code>Math.random()</code> like in the previous example.
For many users, this behavior was undesirable, and felt like it wasn’t leveraging the full strict-checking of <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a>.</p>
<p>That’s why TypeScript 4.1 ships with a new flag called <a href="/tsconfig#noUncheckedIndexedAccess"><code>noUncheckedIndexedAccess</code></a>.
Under this new mode, every property access (like <code>foo.bar</code>) or indexed access (like <code>foo["bar"]</code>) is considered potentially undefined.
That means that in our last example, <code>opts.yadda</code> will have the type <code>string | number | undefined</code> as opposed to just <code>string | number</code>.
If you need to access that property, you’ll either have to check for its existence first or use a non-null assertion operator (the postfix <code>!</code> character).</p>
<p>This flag can be handy for catching out-of-bounds errors, but it might be noisy for a lot of code, so it is not automatically enabled by the <a href="/tsconfig#strict"><code>strict</code></a> flag; however, if this feature is interesting to you, you should feel free to try it and determine whether it makes sense for your team’s codebase!</p>
<p>You can learn more <a href="https://github.com/microsoft/TypeScript/pull/39560">at the implementing pull request</a>.</p>
<h2 id="paths-without-baseurl" style="position:relative;"><a href="#paths-without-baseurl" aria-label="paths without baseurl permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>paths</code> without <code>baseUrl</code></h2>
<p>Using path-mapping is fairly common - often it’s to have nicer imports, often it’s to simulate monorepo linking behavior.</p>
<p>Unfortunately, specifying <a href="/tsconfig#paths"><code>paths</code></a> to enable path-mapping required also specifying an option called <a href="/tsconfig#baseUrl"><code>baseUrl</code></a>, which allows bare specifier paths to be reached relative to the <a href="/tsconfig#baseUrl"><code>baseUrl</code></a> too.
This also often caused poor paths to be used by auto-imports.</p>
<p>In TypeScript 4.1, the <a href="/tsconfig#paths"><code>paths</code></a> option can be used without <a href="/tsconfig#baseUrl"><code>baseUrl</code></a>.
This helps avoid some of these issues.</p>
<h2 id="checkjs-implies-allowjs" style="position:relative;"><a href="#checkjs-implies-allowjs" aria-label="checkjs implies allowjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>checkJs</code> Implies <code>allowJs</code></h2>
<p>Previously if you were starting a checked JavaScript project, you had to set both <a href="/tsconfig#allowJs"><code>allowJs</code></a> and <a href="/tsconfig#checkJs"><code>checkJs</code></a>.
This was a slightly annoying bit of friction in the experience, so <a href="/tsconfig#checkJs"><code>checkJs</code></a> now implies <a href="/tsconfig#allowJs"><code>allowJs</code></a> by default.</p>
<p><a href="https://github.com/microsoft/TypeScript/pull/40275">See more details at the pull request</a>.</p>
<h2 id="react-17-jsx-factories" style="position:relative;"><a href="#react-17-jsx-factories" aria-label="react 17 jsx factories permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>React 17 JSX Factories</h2>
<p>TypeScript 4.1 supports React 17’s upcoming <code>jsx</code> and <code>jsxs</code> factory functions through two new options for the <a href="/tsconfig#jsx"><code>jsx</code></a> compiler option:</p>
<ul>
<li><code>react-jsx</code></li>
<li><code>react-jsxdev</code></li>
</ul>
<p>These options are intended for production and development compiles respectively.
Often, the options from one can extend from the other.</p>
<p>For more information, <a href="https://github.com/microsoft/TypeScript/pull/39199">check out the corresponding PR</a>.</p>
<h2 id="typescript-40" style="position:relative;"><a href="#typescript-40" aria-label="typescript 40 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 4.0</h2>
<h3 id="variadic-tuple-types" style="position:relative;"><a href="#variadic-tuple-types" aria-label="variadic tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variadic Tuple Types</h3>
<p>Consider a function in JavaScript called <code>concat</code> that takes two array or tuple types and concatenates them together to make a new array.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">(</span><span style="color: #001080">arr1</span><span style="color: #000000">, </span><span style="color: #001080">arr2</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [...</span><span style="color: #001080">arr1</span><span style="color: #000000">, ...</span><span style="color: #001080">arr2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Also consider <code>tail</code>, that takes an array or tuple, and returns all elements but the first.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">tail</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">_</span><span style="color: #000000">, ...</span><span style="color: #0070C1">result</span><span style="color: #000000">] = </span><span style="color: #001080">arg</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>How would we type either of these in TypeScript?</p>
<p>For <code>concat</code>, the only valid thing we could do in older versions of the language was to try and write some overloads.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [</span><span style="color: #1C6277">A</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">, </span><span style="color: #1C6277">E</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">, </span><span style="color: #1C6277">E</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">, </span><span style="color: #1C6277">E</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">, </span><span style="color: #1C6277">E</span><span style="color: #000000">, </span><span style="color: #1C6277">F</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">, </span><span style="color: #1C6277">E</span><span style="color: #000000">, </span><span style="color: #1C6277">F</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: []): [</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">, </span><span style="color: #1C6277">D</span><span style="color: #000000">, </span><span style="color: #1C6277">E</span><span style="color: #000000">, </span><span style="color: #1C6277">F</span><span style="color: #000000">];)</span></div></code></div></pre>
<p>Uh…okay, that’s…seven overloads for when the second array is always empty.
Let’s add some for when <code>arr2</code> has one argument.</p>
<!-- prettier-ignore -->
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A1</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">E1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">E1</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">E1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">E1</span><span style="color: #000000">, </span><span style="color: #1C6277">F1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">E1</span><span style="color: #000000">, </span><span style="color: #1C6277">F1</span><span style="color: #000000">], </span><span style="color: #001080">arr2</span><span style="color: #000000">: [</span><span style="color: #1C6277">A2</span><span style="color: #000000">]): [</span><span style="color: #1C6277">A1</span><span style="color: #000000">, </span><span style="color: #1C6277">B1</span><span style="color: #000000">, </span><span style="color: #1C6277">C1</span><span style="color: #000000">, </span><span style="color: #1C6277">D1</span><span style="color: #000000">, </span><span style="color: #1C6277">E1</span><span style="color: #000000">, </span><span style="color: #1C6277">F1</span><span style="color: #000000">, </span><span style="color: #1C6277">A2</span><span style="color: #000000">];</span></div></code></div></pre>
<p>We hope it’s clear that this is getting unreasonable.
Unfortunately, you’d also end up with the same sorts of issues typing a function like <code>tail</code>.</p>
<p>This is another case of what we like to call “death by a thousand overloads”, and it doesn’t even solve the problem generally.
It only gives correct types for as many overloads as we care to write.
If we wanted to make a catch-all case, we’d need an overload like the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[], </span><span style="color: #001080">arr2</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">[]): </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>But that signature doesn’t encode anything about the lengths of the input, or the order of the elements, when using tuples.</p>
<p>TypeScript 4.0 brings two fundamental changes, along with inference improvements, to make typing these possible.</p>
<p>The first change is that spreads in tuple type syntax can now be generic.
This means that we can represent higher-order operations on tuples and arrays even when we don’t know the actual types we’re operating over.
When generic spreads are instantiated (or, replaced with a real type) in these tuple types, they can produce other sets of array and tuple types.</p>
<p>For example, that means we can type function like <code>tail</code>, without our “death by a thousand overloads” issue.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">tail</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">[]&gt;(</span><span style="color: #001080">arr</span><span style="color: #000000">: </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">any</span><span style="color: #000000">, ...</span><span style="color: #1C6277">T</span><span style="color: #000000">]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">_ignored</span><span style="color: #000000">, ...</span><span style="color: #0070C1">rest</span><span style="color: #000000">] = </span><span style="color: #001080">arr</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">rest</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">myTuple</span><span style="color: #000000"> = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">] </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">myArray</span><span style="color: #000000"> = [</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #A31515">"world"</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">r1</span><span style="color: #000000"> = </span><span style="color: #795E26">tail</span><span style="color: #000000">(</span><span style="color: #001080">myTuple</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//    ^?</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">r2</span><span style="color: #000000"> = </span><span style="color: #795E26">tail</span><span style="color: #000000">([...</span><span style="color: #001080">myTuple</span><span style="color: #000000">, ...</span><span style="color: #001080">myArray</span><span style="color: #000000">] </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//    ^?</span></div></code></div></pre>
<p>The second change is that rest elements can occur anywhere in a tuple - not just at the end!</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Strings</span><span style="color: #000000"> = [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Numbers</span><span style="color: #000000"> = [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">StrStrNumNumBool</span><span style="color: #000000"> = [...</span><span style="color: #1C6277">Strings</span><span style="color: #000000">, ...</span><span style="color: #1C6277">Numbers</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">];</span></div></code></div></pre>
<p>Previously, TypeScript would issue an error like the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">A rest element must be last in a tuple type.</span></div></code></div></pre>
<p>But with TypeScript 4.0, this restriction is relaxed.</p>
<p>Note that in cases when we spread in a type without a known length, the resulting type becomes unbounded as well, and all the following elements factor into the resulting rest element type.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Strings</span><span style="color: #000000"> = [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Numbers</span><span style="color: #000000"> = </span><span style="color: #1C6277">number</span><span style="color: #000000">[];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Unbounded</span><span style="color: #000000"> = [...</span><span style="color: #1C6277">Strings</span><span style="color: #000000">, ...</span><span style="color: #1C6277">Numbers</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">];</span></div></code></div></pre>
<p>By combining both of these behaviors together, we can write a single well-typed signature for <code>concat</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000"> = </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">[];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">concat</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr1</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">arr2</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): [...</span><span style="color: #1C6277">T</span><span style="color: #000000">, ...</span><span style="color: #1C6277">U</span><span style="color: #000000">] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [...</span><span style="color: #001080">arr1</span><span style="color: #000000">, ...</span><span style="color: #001080">arr2</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>While that one signature is still a bit lengthy, it’s just one signature that doesn’t have to be repeated, and it gives predictable behavior on all arrays and tuples.</p>
<p>This functionality on its own is great, but it shines in more sophisticated scenarios too.
For example, consider a function to <a href="https://en.wikipedia.org/wiki/Partial_application">partially apply arguments</a> called <code>partialCall</code>.
<code>partialCall</code> takes a function - let’s call it <code>f</code> - along with the initial few arguments that <code>f</code> expects.
It then returns a new function that takes any other arguments that <code>f</code> still needs, and calls <code>f</code> when it receives them.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">partialCall</span><span style="color: #000000">(</span><span style="color: #001080">f</span><span style="color: #000000">, ...</span><span style="color: #001080">headArgs</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (...</span><span style="color: #001080">tailArgs</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(...</span><span style="color: #001080">headArgs</span><span style="color: #000000">, ...</span><span style="color: #001080">tailArgs</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>TypeScript 4.0 improves the inference process for rest parameters and rest tuple elements so that we can type this and have it “just work”.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000"> = </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">unknown</span><span style="color: #000000">[];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">partialCall</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000">, </span><span style="color: #1C6277">R</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">: (...</span><span style="color: #001080">args</span><span style="color: #000000">: [...</span><span style="color: #1C6277">T</span><span style="color: #000000">, ...</span><span style="color: #1C6277">U</span><span style="color: #000000">]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">R</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  ...</span><span style="color: #001080">headArgs</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span></div><div class='line'><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (...</span><span style="color: #001080">tailArgs</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(...</span><span style="color: #001080">headArgs</span><span style="color: #000000">, ...</span><span style="color: #001080">tailArgs</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In this case, <code>partialCall</code> understands which parameters it can and can’t initially take, and returns functions that appropriately accept and reject anything left over.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2345 2554 2554 2345</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000"> = </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">unknown</span><span style="color: #000000">[];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">partialCall</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Arr</span><span style="color: #000000">, </span><span style="color: #1C6277">R</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">: (...</span><span style="color: #001080">args</span><span style="color: #000000">: [...</span><span style="color: #1C6277">T</span><span style="color: #000000">, ...</span><span style="color: #1C6277">U</span><span style="color: #000000">]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">R</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  ...</span><span style="color: #001080">headArgs</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span></div><div class='line'><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (...</span><span style="color: #001080">tailArgs</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(...</span><span style="color: #001080">headArgs</span><span style="color: #000000">, ...</span><span style="color: #001080">tailArgs</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #008000">// ---cut---</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000"> = (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">z</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f1</span><span style="color: #000000"> = </span><span style="color: #795E26">partialCall</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">, </span><span style="color: #098658">100</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f2</span><span style="color: #000000"> = </span><span style="color: #795E26">partialCall</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">100</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #A31515">"oops"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #008000">// This works!</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f3</span><span style="color: #000000"> = </span><span style="color: #795E26">partialCall</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//    ^?</span></div><div class='line'></div><div class='line'><span style="color: #008000">// What can we do with f3 now?</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Works!</span></div><div class='line'><span style="color: #795E26">f3</span><span style="color: #000000">(</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f3</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f3</span><span style="color: #000000">(</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>Variadic tuple types enable a lot of new exciting patterns, especially around function composition.
We expect we may be able to leverage it to do a better job type-checking JavaScript’s built-in <code>bind</code> method.
A handful of other inference improvements and patterns also went into this, and if you’re interested in learning more, you can take a look at <a href="https://github.com/microsoft/TypeScript/pull/39094">the pull request</a> for variadic tuples.</p>
<h3 id="labeled-tuple-elements" style="position:relative;"><a href="#labeled-tuple-elements" aria-label="labeled tuple elements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Labeled Tuple Elements</h3>
<p>Improving the experience around tuple types and parameter lists is important because it allows us to get strongly typed validation around common JavaScript idioms - really just slicing and dicing argument lists and passing them to other functions.
The idea that we can use tuple types for rest parameters is one place where this is crucial.</p>
<p>For example, the following function that uses a tuple type as a rest parameter…</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">: [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">]): </span><span style="color: #1C6277">void</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>…should appear no different from the following function…</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">arg0</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">arg1</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>…for any caller of <code>foo</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2554</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">arg0</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">arg1</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #008000">// ---cut---</span></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>There is one place where the differences begin to become observable though: readability.
In the first example, we have no parameter names for the first and second elements.
While these have no impact on type-checking, the lack of labels on tuple positions can make them harder to use - harder to communicate our intent.</p>
<p>That’s why in TypeScript 4.0, tuples types can now provide labels.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Range</span><span style="color: #000000"> = [start: </span><span style="color: #1C6277">number</span><span style="color: #000000">, end: </span><span style="color: #1C6277">number</span><span style="color: #000000">];</span></div></code></div></pre>
<p>To deepen the connection between parameter lists and tuple types, the syntax for rest elements and optional elements mirrors the syntax for parameter lists.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> = [first: </span><span style="color: #1C6277">number</span><span style="color: #000000">, second?: </span><span style="color: #1C6277">string</span><span style="color: #000000">, ...rest: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]];</span></div></code></div></pre>
<p>There are a few rules when using labeled tuples.
For one, when labeling a tuple element, all other elements in the tuple must also be labeled.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 5084</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Bar</span><span style="color: #000000"> = [first: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">];</span></div></code></div></pre>
<p>It’s worth noting - labels don’t require us to name our variables differently when destructuring.
They’re purely there for documentation and tooling.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: [first: </span><span style="color: #1C6277">string</span><span style="color: #000000">, second: </span><span style="color: #1C6277">number</span><span style="color: #000000">]) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// ...</span></div><div class='line'></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// note: we didn't need to name these 'first' and 'second'</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> [</span><span style="color: #0070C1">a</span><span style="color: #000000">, </span><span style="color: #0070C1">b</span><span style="color: #000000">] = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">a</span></div><div class='line'><span style="color: #008000">//  ^?</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">b</span></div><div class='line'><span style="color: #008000">//  ^?</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Overall, labeled tuples are handy when taking advantage of patterns around tuples and argument lists, along with implementing overloads in a type-safe way.
In fact, TypeScript’s editor support will try to display them as overloads when possible.</p>
<p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2020/08/signatureHelpLabeledTuples.gif" alt="Signature help displaying a union of labeled tuples as in a parameter list as two signatures"></p>
<p>To learn more, check out <a href="https://github.com/microsoft/TypeScript/pull/38234">the pull request</a> for labeled tuple elements.</p>
<h2 id="class-property-inference-from-constructors" style="position:relative;"><a href="#class-property-inference-from-constructors" aria-label="class property inference from constructors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Class Property Inference from Constructors</h2>
<p>TypeScript 4.0 can now use control flow analysis to determine the types of properties in classes when <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a> is enabled.</p>
<!--prettier-ignore -->
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Square</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Previously both of these were any</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">area</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">// ^?</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">// ^?</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">sideLength</span><span style="color: #000000"> = </span><span style="color: #001080">sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">area</span><span style="color: #000000"> = </span><span style="color: #001080">sideLength</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In cases where not all paths of a constructor assign to an instance member, the property is considered to potentially be <code>undefined</code>.</p>
<!--prettier-ignore -->
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2532</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Square</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">// ^?</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">sideLength</span><span style="color: #000000"> = </span><span style="color: #001080">sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">get</span><span style="color: #000000"> </span><span style="color: #795E26">area</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">sideLength</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In cases where you know better (e.g. you have an <code>initialize</code> method of some sort), you’ll still need an explicit type annotation along with a definite assignment assertion (<code>!</code>) if you’re in <a href="/tsconfig#strictPropertyInitialization"><code>strictPropertyInitialization</code></a>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Square</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// definite assignment assertion</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//        v</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">sideLength</span><span style="color: #000000">!: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//         ^^^^^^^^</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// type annotation</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">(</span><span style="color: #001080">sideLength</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">initialize</span><span style="color: #000000">(</span><span style="color: #001080">sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">sideLength</span><span style="color: #000000"> = </span><span style="color: #001080">sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">get</span><span style="color: #000000"> </span><span style="color: #795E26">area</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">sideLength</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/37920">see the implementing pull request</a>.</p>
<h2 id="short-circuiting-assignment-operators" style="position:relative;"><a href="#short-circuiting-assignment-operators" aria-label="short circuiting assignment operators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Short-Circuiting Assignment Operators</h2>
<p>JavaScript, and a lot of other languages, support a set of operators called <em>compound assignment</em> operators.
Compound assignment operators apply an operator to two arguments, and then assign the result to the left side.
You may have seen these before:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Addition</span></div><div class='line'><span style="color: #008000">// a = a + b</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> += </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Subtraction</span></div><div class='line'><span style="color: #008000">// a = a - b</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> -= </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Multiplication</span></div><div class='line'><span style="color: #008000">// a = a * b</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> *= </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Division</span></div><div class='line'><span style="color: #008000">// a = a / b</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> /= </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Exponentiation</span></div><div class='line'><span style="color: #008000">// a = a ** b</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> **= </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Left Bit Shift</span></div><div class='line'><span style="color: #008000">// a = a &lt;&lt; b</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> &lt;&lt;= </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div></code></div></pre>
<p>So many operators in JavaScript have a corresponding assignment operator!
Up until recently, however, there were three notable exceptions: logical <em>and</em> (<code>&#x26;&#x26;</code>), logical <em>or</em> (<code>||</code>), and nullish coalescing (<code>??</code>).</p>
<p>That’s why TypeScript 4.0 supports a new ECMAScript feature to add three new assignment operators: <code>&#x26;&#x26;=</code>, <code>||=</code>, and <code>??=</code>.</p>
<p>These operators are great for substituting any example where a user might write code like the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000"> && </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000"> || </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000"> ?? </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Or a similar <code>if</code> block like</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// could be 'a ||= b'</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">a</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>There are even some patterns we’ve seen (or, uh, written ourselves) to lazily initialize values, only if they’ll be needed.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">values</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #000000">(</span><span style="color: #001080">values</span><span style="color: #000000"> ?? (</span><span style="color: #001080">values</span><span style="color: #000000"> = [])).</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #008000">// After</span></div><div class='line'><span style="color: #000000">(</span><span style="color: #001080">values</span><span style="color: #000000"> ??= []).</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>(look, we’re not proud of <em>all</em> the code we write…)</p>
<p>On the rare case that you use getters or setters with side-effects, it’s worth noting that these operators only perform assignments if necessary.
In that sense, not only is the right side of the operator “short-circuited” - the assignment itself is too.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> ||= </span><span style="color: #795E26">foo</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #008000">// roughly equivalent to either of the following</span></div><div class='line'></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> || (</span><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> = </span><span style="color: #795E26">foo</span><span style="color: #000000">());</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> = </span><span style="color: #795E26">foo</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><a href="https://www.typescriptlang.org/play?ts=Nightly#code/MYewdgzgLgBCBGArGBeGBvAsAKBnmA5gKawAOATiKQBQCUGO+TMokIANkQHTsgHUAiYlChFyMABYBDCDHIBXMANoBuHI2Z4A9FpgAlIqXZTgRGAFsiAQg2byJeeTAwAslKgSu5KWAAmIczoYAB4YAAYuAFY1XHwAXwAaWxgIEhgKKmoAfQA3KXYALhh4EA4iH3osWM1WCDKePkFUkTFJGTlFZRimOJw4mJwAM0VgKABLcBhB0qCqplr63n4BcjGCCVgIMd8zIjz2eXciXy7k+yhHZygFIhje7BwFzgblgBUJMdlwM3yAdykAJ6yBSQGAeMzNUTkU7YBCILgZUioOBIBGUJEAHwxUxmqnU2Ce3CWgnenzgYDMACo6pZxpYIJSOqDwSkSFCYXC0VQYFi0NMQHQVEA">Try running the following example</a> to see how that differs from <em>always</em> performing the assignment.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">obj</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">get</span><span style="color: #000000"> </span><span style="color: #795E26">prop</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"getter has run"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">        </span><span style="color: #008000">// Replace me!</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &lt; </span><span style="color: #098658">0.5</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    },</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">set</span><span style="color: #000000"> </span><span style="color: #795E26">prop</span><span style="color: #000000">(</span><span style="color: #001080">_val</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"setter has run"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"right side evaluated"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"This one always runs the setter"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> = </span><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> || </span><span style="color: #795E26">foo</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"This one *sometimes* runs the setter"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> ||= </span><span style="color: #795E26">foo</span><span style="color: #000000">();</span></div></code></div></pre>
<p>We’d like to extend a big thanks to community member <a href="https://github.com/Kingwl">Wenlu Wang</a> for this contribution!</p>
<p>For more details, you can <a href="https://github.com/microsoft/TypeScript/pull/37727">take a look at the pull request here</a>.
You can also <a href="https://github.com/tc39/proposal-logical-assignment/">check out TC39’s proposal repository for this feature</a>.</p>
<h2 id="unknown-on-catch-clause-bindings" style="position:relative;"><a href="#unknown-on-catch-clause-bindings" aria-label="unknown on catch clause bindings permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>unknown</code> on <code>catch</code> Clause Bindings</h2>
<p>Since the beginning days of TypeScript, <code>catch</code> clause variables have always been typed as <code>any</code>.
This meant that TypeScript allowed you to do anything you wanted with them.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">try</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Do some work</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">catch</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// x has type 'any' - have fun!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">message</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">++;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">yadda</span><span style="color: #000000">.</span><span style="color: #001080">yadda</span><span style="color: #000000">.</span><span style="color: #795E26">yadda</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The above has some undesirable behavior if we’re trying to prevent <em>more</em> errors from happening in our error-handling code!
Because these variables have the type <code>any</code> by default, they lack any type-safety which could have errored on invalid operations.</p>
<p>That’s why TypeScript 4.0 now lets you specify the type of <code>catch</code> clause variables as <code>unknown</code> instead.
<code>unknown</code> is safer than <code>any</code> because it reminds us that we need to perform some sorts of type-checks before operating on our values.</p>
<!--prettier-ignore -->
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @errors: 2571</span></div><div class='line'><span style="color: #AF00DB">try</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">catch</span><span style="color: #000000"> (</span><span style="color: #001080">e</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Can't access values on unknowns</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">());</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">e</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// We've narrowed 'e' down to the type 'string'.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>While the types of <code>catch</code> variables won’t change by default, we might consider a new <a href="/tsconfig#strict"><code>strict</code></a> mode flag in the future so that users can opt in to this behavior.
In the meantime, it should be possible to write a lint rule to force <code>catch</code> variables to have an explicit annotation of either <code>: any</code> or <code>: unknown</code>.</p>
<p>For more details you can <a href="https://github.com/microsoft/TypeScript/pull/39015">peek at the changes for this feature</a>.</p>
<h2 id="custom-jsx-factories" style="position:relative;"><a href="#custom-jsx-factories" aria-label="custom jsx factories permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom JSX Factories</h2>
<p>When using JSX, a <a href="https://reactjs.org/docs/fragments.html"><em>fragment</em></a> is a type of JSX element that allows us to return multiple child elements.
When we first implemented fragments in TypeScript, we didn’t have a great idea about how other libraries would utilize them.
Nowadays most other libraries that encourage using JSX and support fragments have a similar API shape.</p>
<p>In TypeScript 4.0, users can customize the fragment factory through the new <a href="/tsconfig#jsxFragmentFactory"><code>jsxFragmentFactory</code></a> option.</p>
<p>As an example, the following <code>tsconfig.json</code> file tells TypeScript to transform JSX in a way compatible with React, but switches each factory invocation to <code>h</code> instead of <code>React.createElement</code>, and uses <code>Fragment</code> instead of <code>React.Fragment</code>.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#target'><data-lsp lsp="Set the JavaScript language version for emitted JavaScript and include compatible library declarations.">target</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"esnext"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#module'><data-lsp lsp="Specify what module code is generated.">module</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"commonjs"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#jsx'><data-lsp lsp="Specify what JSX code is generated.">jsx</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"react"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#jsxFactory'><data-lsp lsp="Specify the JSX factory function used when targeting React JSX emit, e.g. 'React.createElement' or 'h'">jsxFactory</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"h"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#jsxFragmentFactory'><data-lsp lsp="Specify the JSX Fragment reference used for fragments when targeting React JSX emit e.g. 'React.Fragment' or 'Fragment'.">jsxFragmentFactory</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"Fragment"</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In cases where you need to have a different JSX factory on a per-file basis<!-- (maybe you like to ship React, Preact, and Inferno to give a blazing fast experience) -->, you can take advantage of the new <code>/** @jsxFrag */</code> pragma comment.
For example, the following…</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Note: these pragma comments need to be written</span></div><div class='line'><span style="color: #008000">// with a JSDoc-style multiline syntax to take effect.</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #008000">/** </span><span style="color: #0000FF">@jsx</span><span style="color: #008000"> h */</span></div><div class='line'><span style="color: #008000">/** </span><span style="color: #0000FF">@jsxFrag</span><span style="color: #008000"> Fragment */</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080"><data-lsp lsp='(alias) function h(type: string, props: (JSXInternal.HTMLAttributes &amp; JSXInternal.SVGAttributes &amp; Record&lt;string, any>) | null, ...children: ComponentChildren[]): VNode&lt;any> (+1 overload)&#10;(alias) namespace h&#10;import h' >h</data-lsp></span><span style="color: #000000">, </span><span style="color: #001080"><data-lsp lsp='(alias) const Fragment: ComponentClass&lt;{}, {}>&#10;import Fragment' >Fragment</data-lsp></span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"preact"</span><span style="color: #000000">;</span></div><div class='line'>&nbsp;</div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26"><data-lsp lsp='const Header: JSX.Element' >Header</data-lsp></span><span style="color: #000000"> = (</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #800000">&lt;&gt;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #800000">&lt;<data-lsp lsp='(property) JSX.IntrinsicElements.h1: React.DetailedHTMLProps&lt;React.HTMLAttributes&lt;HTMLHeadingElement>, HTMLHeadingElement>' >h1</data-lsp>></span><span style="color: #000000">Welcome</span><span style="color: #800000">&lt;/<data-lsp lsp='(property) JSX.IntrinsicElements.h1: React.DetailedHTMLProps&lt;React.HTMLAttributes&lt;HTMLHeadingElement>, HTMLHeadingElement>' >h1</data-lsp>></span></div><div class='line'><span style="color: #000000">  </span><span style="color: #800000">&lt;/&gt;</span></div><div class='line'><span style="color: #000000">);</span></div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgcilQ3wCgB6cuAWlrQFcZbqKqABAOwgFEocoAzqzgA5CDCQAuODAAWSAUjhgoKAOYgUcNLhBIOMAXA5IkAExkQ4AIyUB3KMBgSOwu09lwtAKQDKAEQg0agEYAE8AGyUQegiYYAjgEzgBMIMUAA9LGRQAayUkTEwkDAA6UgoAKkq4NgArASzPSvIqmvrGgDFVNThu9T0DOBaK0EhYOABvOFkAGj6ewfgAXzhsXDgAIhViGE2AbgqkDPH4HQ5QuAAJVDMkKDgAXjgAClI4OAAeAD53j6-ZABGb4AdSQER0ek+5CBvw+0N+AEp9kA'>Try</a></div></pre>
<p>…will get transformed to this output JavaScript…</p>
<pre class="shiki light-plus twoslash lsp" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">React</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&apos;react&apos;</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Header</span><span style="color: #000000"> = (</span><span style="color: #001080">React</span><span style="color: #000000">.</span><span style="color: #795E26">createElement</span><span style="color: #000000">(</span><span style="color: #001080">React</span><span style="color: #000000">.</span><span style="color: #001080">Fragment</span><span style="color: #000000">, </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">React</span><span style="color: #000000">.</span><span style="color: #795E26">createElement</span><span style="color: #000000">(</span><span style="color: #A31515">"h1"</span><span style="color: #000000">, </span><span style="color: #0000FF">null</span><span style="color: #000000">, </span><span style="color: #A31515">"Welcome"</span><span style="color: #000000">)));</span></div><div class='line'>&nbsp;</div></code><a class='playground-link' href='https://www.typescriptlang.org/play/#code/JYWwDg9gTgLgBAJQKYEMDG8BmUIjgcilQ3wCgB6cuAWlrQFcZbqKqABAOwgFEocoAzqzhsBACwgB3biGAxhAOQgwkALjgwxSAUjhgoKAOYgUcNLhBIOMAXA5IkAEw0Q4AI12SoclR2GS5MThTACkAZQARCDRqARgATwAbXRB6RJhgROB7OAF46xQADxcNFABrXSRMTCQMADpSCgAqJpEAKwFioKbyZta2DsKAMQNDOBGjS2s4HsbQSFg4AG84MQAacdGp+ABfOGxcOAAifWIYI4BuRqRChfhzDji4AAlURyQoOABeOAAKUjgcAAPAA+AGA4FiACMIIA6khEuZLEDyNCwYCUWCAJQXIA'>Try</a></div></pre>
<p>We’d like to extend a big thanks to community member <a href="https://github.com/nojvek">Noj Vek</a> for sending this pull request and patiently working with our team on it.</p>
<p>You can see that <a href="https://github.com/microsoft/TypeScript/pull/38720">the pull request</a> for more details!</p>
<h2 id="typescript-39" style="position:relative;"><a href="#typescript-39" aria-label="typescript 39 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.9</h2>
<h2 id="improvements-in-inference-and-promiseall" style="position:relative;"><a href="#improvements-in-inference-and-promiseall" aria-label="improvements in inference and promiseall permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improvements in Inference and <code>Promise.all</code></h2>
<p>Recent versions of TypeScript (around 3.7) have had updates to the declarations of functions like <code>Promise.all</code> and <code>Promise.race</code>.
Unfortunately, that introduced a few regressions, especially when mixing in values with <code>null</code> or <code>undefined</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Lion</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">roar</span><span style="color: #000000">(): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Seal</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">singKissFromARose</span><span style="color: #000000">(): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">visitZoo</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">lionExhibit</span><span style="color: #000000">: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Lion</span><span style="color: #000000">&gt;,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">sealExhibit</span><span style="color: #000000">: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Seal</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;</span></div><div class='line'><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> [</span><span style="color: #001080">lion</span><span style="color: #000000">, </span><span style="color: #001080">seal</span><span style="color: #000000">] = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #1C6277">Promise</span><span style="color: #000000">.</span><span style="color: #795E26">all</span><span style="color: #000000">([</span><span style="color: #001080">lionExhibit</span><span style="color: #000000">, </span><span style="color: #001080">sealExhibit</span><span style="color: #000000">]);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">lion</span><span style="color: #000000">.</span><span style="color: #795E26">roar</span><span style="color: #000000">(); </span><span style="color: #008000">// uh oh</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//  ~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Object is possibly 'undefined'.</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This is strange behavior!
The fact that <code>sealExhibit</code> contained an <code>undefined</code> somehow poisoned type of <code>lion</code> to include <code>undefined</code>.</p>
<p>Thanks to <a href="https://github.com/microsoft/TypeScript/pull/34501">a pull request</a> from <a href="https://github.com/jablko">Jack Bates</a>, this has been fixed with improvements in our inference process in TypeScript 3.9.
The above no longer errors.
If you’ve been stuck on older versions of TypeScript due to issues around <code>Promise</code>s, we encourage you to give 3.9 a shot!</p>
<h3 id="what-about-the-awaited-type" style="position:relative;"><a href="#what-about-the-awaited-type" aria-label="what about the awaited type permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What About the <code>awaited</code> Type?</h3>
<p>If you’ve been following our issue tracker and design meeting notes, you might be aware of some work around <a href="https://github.com/microsoft/TypeScript/pull/35998">a new type operator called <code>awaited</code></a>.
This goal of this type operator is to accurately model the way that <code>Promise</code> unwrapping works in JavaScript.</p>
<p>We initially anticipated shipping <code>awaited</code> in TypeScript 3.9, but as we’ve run early TypeScript builds with existing codebases, we’ve realized that the feature needs more design work before we can roll it out to everyone smoothly.
As a result, we’ve decided to pull the feature out of our main branch until we feel more confident.
We’ll be experimenting more with the feature, but we won’t be shipping it as part of this release.</p>
<h2 id="speed-improvements" style="position:relative;"><a href="#speed-improvements" aria-label="speed improvements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Speed Improvements</h2>
<p>TypeScript 3.9 ships with many new speed improvements.
Our team has been focusing on performance after observing extremely poor editing/compilation speed with packages like material-ui and styled-components.
We’ve dived deep here, with a series of different pull requests that optimize certain pathological cases involving large unions, intersections, conditional types, and mapped types.</p>
<ul>
<li><a href="https://github.com/microsoft/TypeScript/pull/36576">https://github.com/microsoft/TypeScript/pull/36576</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/36590">https://github.com/microsoft/TypeScript/pull/36590</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/36607">https://github.com/microsoft/TypeScript/pull/36607</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/36622">https://github.com/microsoft/TypeScript/pull/36622</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/36754">https://github.com/microsoft/TypeScript/pull/36754</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/36696">https://github.com/microsoft/TypeScript/pull/36696</a></li>
</ul>
<p>Each of these pull requests gains about a 5-10% reduction in compile times on certain codebases.
In total, we believe we’ve achieved around a 40% reduction in material-ui’s compile time!</p>
<p>We also have some changes to file renaming functionality in editor scenarios.
We heard from the Visual Studio Code team that when renaming a file, just figuring out which import statements needed to be updated could take between 5 to 10 seconds.
TypeScript 3.9 addresses this issue by <a href="https://github.com/microsoft/TypeScript/pull/37055">changing the internals of how the compiler and language service caches file lookups</a>.</p>
<p>While there’s still room for improvement, we hope this work translates to a snappier experience for everyone!</p>
<h2 id="-ts-expect-error-comments" style="position:relative;"><a href="#-ts-expect-error-comments" aria-label=" ts expect error comments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>// @ts-expect-error</code> Comments</h2>
<p>Imagine that we’re writing a library in TypeScript and we’re exporting some function called <code>doStuff</code> as part of our public API.
The function’s types declare that it takes two <code>string</code>s so that other TypeScript users can get type-checking errors, but it also does a runtime check (maybe only in development builds) to give JavaScript users a helpful error.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">doStuff</span><span style="color: #000000">(</span><span style="color: #001080">abc</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">xyz</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">abc</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">xyz</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// do some stuff</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>So TypeScript users will get a helpful red squiggle and an error message when they misuse this function, and JavaScript users will get an assertion error.
We’d like to test this behavior, so we’ll write a unit test.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #795E26">expect</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">doStuff</span><span style="color: #000000">(</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #098658">456</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}).</span><span style="color: #795E26">toThrow</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Unfortunately if our tests are written in TypeScript, TypeScript will give us an error!</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #795E26">doStuff</span><span style="color: #000000">(</span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #098658">456</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//          ~~~</span></div><div class='line'><span style="color: #008000">// error: Type 'number' is not assignable to type 'string'.</span></div></code></div></pre>
<p>That’s why TypeScript 3.9 brings a new feature: <code>// @ts-expect-error</code> comments.
When a line is prefixed with a <code>// @ts-expect-error</code> comment, TypeScript will suppress that error from being reported;
but if there’s no error, TypeScript will report that <code>// @ts-expect-error</code> wasn’t necessary.</p>
<p>As a quick example, the following code is okay</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @ts-expect-error</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #098658">47</span><span style="color: #000000"> * </span><span style="color: #A31515">"octopus"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>while the following code</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @ts-expect-error</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #098658">1</span><span style="color: #000000">);</span></div></code></div></pre>
<p>results in the error</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">Unused '@ts-expect-error' directive.</span></div></code></div></pre>
<p>We’d like to extend a big thanks to <a href="https://github.com/JoshuaKGoldberg">Josh Goldberg</a>, the contributor who implemented this feature.
For more information, you can take a look at <a href="https://github.com/microsoft/TypeScript/pull/36014">the <code>ts-expect-error</code> pull request</a>.</p>
<h3 id="ts-ignore-or-ts-expect-error" style="position:relative;"><a href="#ts-ignore-or-ts-expect-error" aria-label="ts ignore or ts expect error permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>ts-ignore</code> or <code>ts-expect-error</code>?</h3>
<p>In some ways <code>// @ts-expect-error</code> can act as a suppression comment, similar to <code>// @ts-ignore</code>.
The difference is that <code>// @ts-ignore</code> will do nothing if the following line is error-free.</p>
<p>You might be tempted to switch existing <code>// @ts-ignore</code> comments over to <code>// @ts-expect-error</code>, and you might be wondering which is appropriate for future code.
While it’s entirely up to you and your team, we have some ideas of which to pick in certain situations.</p>
<p>Pick <code>ts-expect-error</code> if:</p>
<ul>
<li>you’re writing test code where you actually want the type system to error on an operation</li>
<li>you expect a fix to be coming in fairly quickly and you just need a quick workaround</li>
<li>you’re in a reasonably-sized project with a proactive team that wants to remove suppression comments as soon affected code is valid again</li>
</ul>
<p>Pick <code>ts-ignore</code> if:</p>
<ul>
<li>you have an a larger project and and new errors have appeared in code with no clear owner</li>
<li>you are in the middle of an upgrade between two different versions of TypeScript, and a line of code errors in one version but not another.</li>
<li>you honestly don’t have the time to decide which of these options is better.</li>
</ul>
<h2 id="uncalled-function-checks-in-conditional-expressions" style="position:relative;"><a href="#uncalled-function-checks-in-conditional-expressions" aria-label="uncalled function checks in conditional expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Uncalled Function Checks in Conditional Expressions</h2>
<p>In TypeScript 3.7 we introduced <em>uncalled function checks</em> to report an error when you’ve forgotten to call a function.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">hasImportantPermissions</span><span style="color: #000000">(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Oops!</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">hasImportantPermissions</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//  ~~~~~~~~~~~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// This condition will always return true since the function is always defined.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Did you mean to call it instead?</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">deleteAllTheImportantFiles</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>However, this error only applied to conditions in <code>if</code> statements.
Thanks to <a href="https://github.com/microsoft/TypeScript/pull/36402">a pull request</a> from <a href="https://github.com/a-tarasyuk">Alexander Tarasyuk</a>, this feature is also now supported in ternary conditionals (i.e. the <code>cond ? trueExpr : falseExpr</code> syntax).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">listFilesOfDirectory</span><span style="color: #000000">(</span><span style="color: #001080">dirPath</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">): </span><span style="color: #1C6277">string</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">isDirectory</span><span style="color: #000000">(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getAllFiles</span><span style="color: #000000">(</span><span style="color: #001080">startFileName</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[] = [];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">traverse</span><span style="color: #000000">(</span><span style="color: #001080">startFileName</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">traverse</span><span style="color: #000000">(</span><span style="color: #001080">currentPath</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">isDirectory</span></div><div class='line'><span style="color: #000000">      ? </span><span style="color: #008000">//     ~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #008000">// This condition will always return true</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #008000">// since the function is always defined.</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #008000">// Did you mean to call it instead?</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #795E26">listFilesOfDirectory</span><span style="color: #000000">(</span><span style="color: #001080">currentPath</span><span style="color: #000000">).</span><span style="color: #795E26">forEach</span><span style="color: #000000">(</span><span style="color: #001080">traverse</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">      : </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #001080">currentPath</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><a href="https://github.com/microsoft/TypeScript/issues/36048">https://github.com/microsoft/TypeScript/issues/36048</a></p>
<h2 id="editor-improvements" style="position:relative;"><a href="#editor-improvements" aria-label="editor improvements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Editor Improvements</h2>
<p>The TypeScript compiler not only powers the TypeScript editing experience in most major editors, it also powers the JavaScript experience in the Visual Studio family of editors and more.
Using new TypeScript/JavaScript functionality in your editor will differ depending on your editor, but</p>
<ul>
<li>Visual Studio Code supports <a href="https://code.visualstudio.com/docs/typescript/typescript-compiling#_using-the-workspace-version-of-typescript">selecting different versions of TypeScript</a>. Alternatively, there’s the <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.vscode-typescript-next">JavaScript/TypeScript Nightly Extension</a> to stay on the bleeding edge (which is typically very stable).</li>
<li>Visual Studio 2017/2019 have [the SDK installers above] and <a href="https://www.nuget.org/packages/Microsoft.TypeScript.MSBuild">MSBuild installs</a>.</li>
<li>Sublime Text 3 supports <a href="https://github.com/microsoft/TypeScript-Sublime-Plugin#note-using-different-versions-of-typescript">selecting different versions of TypeScript</a></li>
</ul>
<h3 id="commonjs-auto-imports-in-javascript" style="position:relative;"><a href="#commonjs-auto-imports-in-javascript" aria-label="commonjs auto imports in javascript permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>CommonJS Auto-Imports in JavaScript</h3>
<p>One great new improvement is in auto-imports in JavaScript files using CommonJS modules.</p>
<p>In older versions, TypeScript always assumed that regardless of your file, you wanted an ECMAScript-style import like</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">fs</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"fs"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>However, not everyone is targeting ECMAScript-style modules when writing JavaScript files.
Plenty of users still use CommonJS-style <code>require(...)</code> imports like so</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">fs</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"fs"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>TypeScript now automatically detects the types of imports you’re using to keep your file’s style clean and consistent.</p>
<p><video src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2020/03/ERkaliGU0AA5anJ1.mp4"></video></p>
<p>For more details on the change, see <a href="https://github.com/microsoft/TypeScript/pull/37027">the corresponding pull request</a>.</p>
<h3 id="code-actions-preserve-newlines" style="position:relative;"><a href="#code-actions-preserve-newlines" aria-label="code actions preserve newlines permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code Actions Preserve Newlines</h3>
<p>TypeScript’s refactorings and quick fixes often didn’t do a great job of preserving newlines.
As a really basic example, take the following code.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">maxValue</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">/*start*/</span></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt;= </span><span style="color: #001080">maxValue</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// First get the squared value.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">square</span><span style="color: #000000"> = </span><span style="color: #001080">i</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Now print the squared value.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">square</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #008000">/*end*/</span></div></code></div></pre>
<p>If we highlighted the range from <code>/*start*/</code> to <code>/*end*/</code> in our editor to extract to a new function, we’d end up with code like the following.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">maxValue</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #795E26">printSquares</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">printSquares</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt;= </span><span style="color: #001080">maxValue</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// First get the squared value.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">square</span><span style="color: #000000"> = </span><span style="color: #001080">i</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Now print the squared value.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">square</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2020/03/printSquaresWithoutNewlines-3.9.gif.gif" alt="Extracting the for loop to a function in older versions of TypeScript. A newline is not preserved."></p>
<p>That’s not ideal - we had a blank line between each statement in our <code>for</code> loop, but the refactoring got rid of it!
TypeScript 3.9 does a little more work to preserve what we write.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">maxValue</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #795E26">printSquares</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">printSquares</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt;= </span><span style="color: #001080">maxValue</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// First get the squared value.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">square</span><span style="color: #000000"> = </span><span style="color: #001080">i</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Now print the squared value.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">square</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2020/03/printSquaresWithNewlines-3.9.gif.gif" alt="Extracting the for loop to a function in TypeScript 3.9. A newline is preserved."></p>
<p>You can see more about the implementation <a href="https://github.com/microsoft/TypeScript/pull/36688">in this pull request</a></p>
<h3 id="quick-fixes-for-missing-return-expressions" style="position:relative;"><a href="#quick-fixes-for-missing-return-expressions" aria-label="quick fixes for missing return expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Quick Fixes for Missing Return Expressions</h3>
<p>There are occasions where we might forget to return the value of the last statement in a function, especially when adding curly braces to arrow functions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// before</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// oops - not the same!</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f2</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #098658">42</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<p>Thanks to <a href="https://github.com/microsoft/TypeScript/pull/26434">a pull request</a> from community member <a href="https://github.com/Kingwl">Wenlu Wang</a>, TypeScript can provide a quick-fix to add missing <code>return</code> statements, remove curly braces, or add parentheses to arrow function bodies that look suspiciously like object literals.</p>
<p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2020/04/missingReturnValue-3-9.gif" alt="TypeScript fixing an error where no expression is returned by adding a return statement or removing curly braces."></p>
<h3 id="support-for-solution-style-tsconfigjson-files" style="position:relative;"><a href="#support-for-solution-style-tsconfigjson-files" aria-label="support for solution style tsconfigjson files permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for “Solution Style” <code>tsconfig.json</code> Files</h3>
<p>Editors need to figure out which configuration file a file belongs to so that it can apply the appropriate options and figure out which other files are included in the current “project”.
By default, editors powered by TypeScript’s language server do this by walking up each parent directory to find a <code>tsconfig.json</code>.</p>
<p>One case where this slightly fell over is when a <code>tsconfig.json</code> simply existed to reference other <code>tsconfig.json</code> files.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #008000">// tsconfig.json</span></div><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#files'><data-lsp lsp="Include a list of files. This does not support glob patterns, as opposed to `include`.">files</data-lsp></a>"</span><span style="color: #000000">: [],</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#references'><data-lsp lsp="Specify an array of objects that specify paths for projects. Used in project references.">references</data-lsp></a>"</span><span style="color: #000000">: [</span></div><div class='line'><span style="color: #000000">    { </span><span style="color: #0451A5">"path"</span><span style="color: #000000">: </span><span style="color: #A31515">"./tsconfig.shared.json"</span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">    { </span><span style="color: #0451A5">"path"</span><span style="color: #000000">: </span><span style="color: #A31515">"./tsconfig.frontend.json"</span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">    { </span><span style="color: #0451A5">"path"</span><span style="color: #000000">: </span><span style="color: #A31515">"./tsconfig.backend.json"</span><span style="color: #000000"> }</span></div><div class='line'><span style="color: #000000">  ]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This file that really does nothing but manage other project files is often called a “solution” in some environments.
Here, none of these <code>tsconfig.*.json</code> files get picked up by the server, but we’d really like the language server to understand that the current <code>.ts</code> file probably belongs to one of the mentioned projects in this root <code>tsconfig.json</code>.</p>
<p>TypeScript 3.9 adds support to editing scenarios for this configuration.
For more details, take a look at <a href="https://github.com/microsoft/TypeScript/pull/37239">the pull request that added this functionality</a>.</p>
<h2 id="breaking-changes-1" style="position:relative;"><a href="#breaking-changes-1" aria-label="breaking changes 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Breaking Changes</h2>
<h3 id="parsing-differences-in-optional-chaining-and-non-null-assertions" style="position:relative;"><a href="#parsing-differences-in-optional-chaining-and-non-null-assertions" aria-label="parsing differences in optional chaining and non null assertions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parsing Differences in Optional Chaining and Non-Null Assertions</h3>
<p>TypeScript recently implemented the optional chaining operator, but we’ve received user feedback that the behavior of optional chaining (<code>?.</code>) with the non-null assertion operator (<code>!</code>) is extremely counter-intuitive.</p>
<p>Specifically, in previous versions, the code</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000">!.</span><span style="color: #001080">baz</span><span style="color: #000000">;</span></div></code></div></pre>
<p>was interpreted to be equivalent to the following JavaScript.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000">).</span><span style="color: #001080">baz</span><span style="color: #000000">;</span></div></code></div></pre>
<p>In the above code the parentheses stop the “short-circuiting” behavior of optional chaining, so if <code>foo</code> is <code>undefined</code>, accessing <code>baz</code> will cause a runtime error.</p>
<p>The Babel team who pointed this behavior out, and most users who provided feedback to us, believe that this behavior is wrong.
We do too!
The thing we heard the most was that the <code>!</code> operator should just “disappear” since the intent was to remove <code>null</code> and <code>undefined</code> from the type of <code>bar</code>.</p>
<p>In other words, most people felt that the original snippet should be interpreted as</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000">.</span><span style="color: #001080">baz</span><span style="color: #000000">;</span></div></code></div></pre>
<p>which just evaluates to <code>undefined</code> when <code>foo</code> is <code>undefined</code>.</p>
<p>This is a breaking change, but we believe most code was written with the new interpretation in mind.
Users who want to revert to the old behavior can add explicit parentheses around the left side of the <code>!</code> operator.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000">!.</span><span style="color: #001080">baz</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="-and--are-now-invalid-jsx-text-characters" style="position:relative;"><a href="#-and--are-now-invalid-jsx-text-characters" aria-label=" and  are now invalid jsx text characters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>}</code> and <code>></code> are Now Invalid JSX Text Characters</h3>
<p>The JSX Specification forbids the use of the <code>}</code> and <code>></code> characters in text positions.
TypeScript and Babel have both decided to enforce this rule to be more comformant.
The new way to insert these characters is to use an HTML escape code (e.g. <code>&#x3C;span> 2 &#x26;gt 1 &#x3C;/div></code>) or insert an expression with a string literal (e.g. <code>&#x3C;span> 2 {">"} 1 &#x3C;/div></code>).</p>
<p>Luckily, thanks to the <a href="https://github.com/microsoft/TypeScript/pull/36636">pull request</a> enforcing this from <a href="https://github.com/bradzacher">Brad Zacher</a>, you’ll get an error message along the lines of</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">Unexpected token. Did you mean `{'&gt;'}` or `&gt;`?
Unexpected token. Did you mean `{'}'}` or `&rbrace;`?</span></div></code></div></pre>
<p>For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">directions</span><span style="color: #000000"> = </span><span style="color: #800000">&lt;span&gt;</span><span style="color: #000000">Navigate to: Menu Bar &gt; Tools &gt; Options</span><span style="color: #800000">&lt;/div&gt;</span></div><div class='line'><span style="color: #008000">//                                           ~       ~</span></div><div class='line'><span style="color: #008000">// Unexpected token. Did you mean `{'&gt;'}` or `&gt;`?</span></div></code></div></pre>
<p>That error message came with a handy quick fix, and thanks to <a href="https://github.com/a-tarasyuk">Alexander Tarasyuk</a>, <a href="https://github.com/microsoft/TypeScript/pull/37436">you can apply these changes in bulk</a> if you have a lot of errors.</p>
<h3 id="stricter-checks-on-intersections-and-optional-properties" style="position:relative;"><a href="#stricter-checks-on-intersections-and-optional-properties" aria-label="stricter checks on intersections and optional properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stricter Checks on Intersections and Optional Properties</h3>
<p>Generally, an intersection type like <code>A &#x26; B</code> is assignable to <code>C</code> if either <code>A</code> or <code>B</code> is assignable to <code>C</code>; however, sometimes that has problems with optional properties.
For example, take the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #008000">// notice this is 'number'</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">?: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">; </span><span style="color: #008000">// notice this is 'boolean'</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000"> & </span><span style="color: #1C6277">B</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">C</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div></code></div></pre>
<p>In previous versions of TypeScript, this was allowed because while <code>A</code> was totally incompatible with <code>C</code>, <code>B</code> <em>was</em> compatible with <code>C</code>.</p>
<p>In TypeScript 3.9, so long as every type in an intersection is a concrete object type, the type system will consider all of the properties at once.
As a result, TypeScript will see that the <code>a</code> property of <code>A &#x26; B</code> is incompatible with that of <code>C</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">Type 'A & B' is not assignable to type 'C'.
  Types of property 'a' are incompatible.
    Type 'number' is not assignable to type 'boolean | undefined'.</span></div></code></div></pre>
<p>For more information on this change, <a href="https://github.com/microsoft/TypeScript/pull/37195">see the corresponding pull request</a>.</p>
<h3 id="intersections-reduced-by-discriminant-properties" style="position:relative;"><a href="#intersections-reduced-by-discriminant-properties" aria-label="intersections reduced by discriminant properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Intersections Reduced By Discriminant Properties</h3>
<p>There are a few cases where you might end up with types that describe values that just don’t exist.
For example</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">smushObjects</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">U</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Circle</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"circle"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">radius</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Square</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"square"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Circle</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">Square</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #795E26">smushObjects</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">z</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000">);</span></div></code></div></pre>
<p>This code is slightly weird because there’s really no way to create an intersection of a <code>Circle</code> and a <code>Square</code> - they have two incompatible <code>kind</code> fields.
In previous versions of TypeScript, this code was allowed and the type of <code>kind</code> itself was <code>never</code> because <code>"circle" &#x26; "square"</code> described a set of values that could <code>never</code> exist.</p>
<p>In TypeScript 3.9, the type system is more aggressive here - it notices that it’s impossible to intersect <code>Circle</code> and <code>Square</code> because of their <code>kind</code> properties.
So instead of collapsing the type of <code>z.kind</code> to <code>never</code>, it collapses the type of <code>z</code> itself (<code>Circle &#x26; Square</code>) to <code>never</code>.
That means the above code now errors with:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">Property 'kind' does not exist on type 'never'.</span></div></code></div></pre>
<p>Most of the breaks we observed seem to correspond with slightly incorrect type declarations.
For more details, <a href="https://github.com/microsoft/TypeScript/pull/36696">see the original pull request</a>.</p>
<h3 id="getterssetters-are-no-longer-enumerable" style="position:relative;"><a href="#getterssetters-are-no-longer-enumerable" aria-label="getterssetters are no longer enumerable permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getters/Setters are No Longer Enumerable</h3>
<p>In older versions of TypeScript, <code>get</code> and <code>set</code> accessors in classes were emitted in a way that made them enumerable; however, this wasn’t compliant with the ECMAScript specification which states that they must be non-enumerable.
As a result, TypeScript code that targeted ES5 and ES2015 could differ in behavior.</p>
<p>Thanks to <a href="https://github.com/microsoft/TypeScript/pull/32264">a pull request</a> from GitHub user <a href="https://github.com/pathurs">pathurs</a>, TypeScript 3.9 now conforms more closely with ECMAScript in this regard.</p>
<h3 id="type-parameters-that-extend-any-no-longer-act-as-any" style="position:relative;"><a href="#type-parameters-that-extend-any-no-longer-act-as-any" aria-label="type parameters that extend any no longer act as any permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type Parameters That Extend <code>any</code> No Longer Act as <code>any</code></h3>
<p>In previous versions of TypeScript, a type parameter constrained to <code>any</code> could be treated as <code>any</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">spfjgerijghoied</span><span style="color: #000000">; </span><span style="color: #008000">// no error!</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This was an oversight, so TypeScript 3.9 takes a more conservative approach and issues an error on these questionable operations.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">spfjgerijghoied</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//  ~~~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Property 'spfjgerijghoied' does not exist on type 'T'.</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="export--is-always-retained" style="position:relative;"><a href="#export--is-always-retained" aria-label="export  is always retained permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>export *</code> is Always Retained</h3>
<p>In previous TypeScript versions, declarations like <code>export * from "foo"</code> would be dropped in our JavaScript output if <code>foo</code> didn’t export any values.
This sort of emit is problematic because it’s type-directed and can’t be emulated by Babel.
TypeScript 3.9 will always emit these <code>export *</code> declarations.
In practice, we don’t expect this to break much existing code.</p>
<h2 id="typescript-38" style="position:relative;"><a href="#typescript-38" aria-label="typescript 38 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.8</h2>
<h2 id="type-only-imports-and-export" style="position:relative;"><a href="#type-only-imports-and-export" aria-label="type only imports and export permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type-Only Imports and Export</h2>
<p>This feature is something most users may never have to think about; however, if you’ve hit issues under <a href="/tsconfig#isolatedModules"><code>isolatedModules</code></a>, TypeScript’s <code>transpileModule</code> API, or Babel, this feature might be relevant.</p>
<p>TypeScript 3.8 adds a new syntax for type-only imports and exports.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> { </span><span style="color: #001080">SomeThing</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./some-module.js"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> { </span><span style="color: #001080">SomeThing</span><span style="color: #000000"> };</span></div></code></div></pre>
<p><code>import type</code> only imports declarations to be used for type annotations and declarations.
It <em>always</em> gets fully erased, so there’s no remnant of it at runtime.
Similarly, <code>export type</code> only provides an export that can be used for type contexts, and is also erased from TypeScript’s output.</p>
<p>It’s important to note that classes have a value at runtime and a type at design-time, and the use is context-sensitive.
When using <code>import type</code> to import a class, you can’t do things like extend from it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> { </span><span style="color: #001080">Component</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"react"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">ButtonProps</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Button</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">ButtonProps</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//               ~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// error! 'Component' only refers to a type, but is being used as a value here.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>If you’ve used Flow before, the syntax is fairly similar.
One difference is that we’ve added a few restrictions to avoid code that might appear ambiguous.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Is only 'Foo' a type? Or every declaration in the import?</span></div><div class='line'><span style="color: #008000">// We just give an error because it's not clear.</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #AF00DB">type</span><span style="color: #000000"> </span><span style="color: #001080">Foo</span><span style="color: #000000">, { </span><span style="color: #001080">Bar</span><span style="color: #000000">, </span><span style="color: #001080">Baz</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"some-module"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//     ~~~~~~~~~~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #008000">// error! A type-only import can specify a default import or named bindings, but not both.</span></div></code></div></pre>
<p>In conjunction with <code>import type</code>, TypeScript 3.8 also adds a new compiler flag to control what happens with imports that won’t be utilized at runtime: <a href="/tsconfig#importsNotUsedAsValues"><code>importsNotUsedAsValues</code></a>.
This flag takes 3 different values:</p>
<ul>
<li><code>remove</code>: this is today’s behavior of dropping these imports. It’s going to continue to be the default, and is a non-breaking change.</li>
<li><code>preserve</code>: this <em>preserves</em> all imports whose values are never used. This can cause imports/side-effects to be preserved.</li>
<li><code>error</code>: this preserves all imports (the same as the <code>preserve</code> option), but will error when a value import is only used as a type. This might be useful if you want to ensure no values are being accidentally imported, but still make side-effect imports explicit.</li>
</ul>
<p>For more information about the feature, you can <a href="https://github.com/microsoft/TypeScript/pull/35200">take a look at the pull request</a>, and <a href="https://github.com/microsoft/TypeScript/pull/36092/">relevant changes</a> around broadening where imports from an <code>import type</code> declaration can be used.</p>
<h2 id="ecmascript-private-fields" style="position:relative;"><a href="#ecmascript-private-fields" aria-label="ecmascript private fields permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ECMAScript Private Fields</h2>
<p>TypeScript 3.8 brings support for ECMAScript’s private fields, part of the <a href="https://github.com/tc39/proposal-class-fields/">stage-3 class fields proposal</a>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">#name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#name</span><span style="color: #000000"> = </span><span style="color: #001080">name</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">greet</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`Hello, my name is </span><span style="color: #0000FF">${</span><span style="color: #0000FF">this</span><span style="color: #000000FF">.</span><span style="color: #001080">#name</span><span style="color: #0000FF">}</span><span style="color: #A31515">!`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">jeremy</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Person</span><span style="color: #000000">(</span><span style="color: #A31515">"Jeremy Bearimy"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #001080">jeremy</span><span style="color: #000000">.</span><span style="color: #001080">#name</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//     ~~~~~</span></div><div class='line'><span style="color: #008000">// Property '#name' is not accessible outside class 'Person'</span></div><div class='line'><span style="color: #008000">// because it has a private identifier.</span></div></code></div></pre>
<p>Unlike regular properties (even ones declared with the <code>private</code> modifier), private fields have a few rules to keep in mind.
Some of them are:</p>
<ul>
<li>Private fields start with a <code>#</code> character. Sometimes we call these <em>private names</em>.</li>
<li>Every private field name is uniquely scoped to its containing class.</li>
<li>TypeScript accessibility modifiers like <code>public</code> or <code>private</code> can’t be used on private fields.</li>
<li>Private fields can’t be accessed or even detected outside of the containing class - even by JS users! Sometimes we call this <em>hard privacy</em>.</li>
</ul>
<p>Apart from “hard” privacy, another benefit of private fields is that uniqueness we just mentioned.
For example, regular property declarations are prone to being overwritten in subclasses.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">cHelper</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">D</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">20</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">dHelper</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">instance</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">D</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #008000">// 'this.foo' refers to the same property on each instance.</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">instance</span><span style="color: #000000">.</span><span style="color: #795E26">cHelper</span><span style="color: #000000">()); </span><span style="color: #008000">// prints '20'</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">instance</span><span style="color: #000000">.</span><span style="color: #795E26">dHelper</span><span style="color: #000000">()); </span><span style="color: #008000">// prints '20'</span></div></code></div></pre>
<p>With private fields, you’ll never have to worry about this, since each field name is unique to the containing class.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">#foo</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">cHelper</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">D</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">#foo</span><span style="color: #000000"> = </span><span style="color: #098658">20</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">dHelper</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">instance</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">D</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #008000">// 'this.#foo' refers to a different field within each class.</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">instance</span><span style="color: #000000">.</span><span style="color: #795E26">cHelper</span><span style="color: #000000">()); </span><span style="color: #008000">// prints '10'</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">instance</span><span style="color: #000000">.</span><span style="color: #795E26">dHelper</span><span style="color: #000000">()); </span><span style="color: #008000">// prints '20'</span></div></code></div></pre>
<p>Another thing worth noting is that accessing a private field on any other type will result in a <code>TypeError</code>!</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Square</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">#sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">sideLength</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#sideLength</span><span style="color: #000000"> = </span><span style="color: #001080">sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">equals</span><span style="color: #000000">(</span><span style="color: #001080">other</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#sideLength</span><span style="color: #000000"> === </span><span style="color: #001080">other</span><span style="color: #000000">.</span><span style="color: #001080">#sideLength</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">a</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Square</span><span style="color: #000000">(</span><span style="color: #098658">100</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">b</span><span style="color: #000000"> = { </span><span style="color: #001080">sideLength:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Boom!</span></div><div class='line'><span style="color: #008000">// TypeError: attempted to get private field on non-instance</span></div><div class='line'><span style="color: #008000">// This fails because 'b' is not an instance of 'Square'.</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #795E26">equals</span><span style="color: #000000">(</span><span style="color: #001080">b</span><span style="color: #000000">));</span></div></code></div></pre>
<p>Finally, for any plain <code>.js</code> file users, private fields <em>always</em> have to be declared before they’re assigned to.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// No declaration for '#foo'</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// :(</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// SyntaxError!</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// '#foo' needs to be declared before writing to it.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#foo</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>JavaScript has always allowed users to access undeclared properties, whereas TypeScript has always required declarations for class properties.
With private fields, declarations are always needed regardless of whether we’re working in <code>.js</code> or <code>.ts</code> files.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/** </span><span style="color: #0000FF">@type</span><span style="color: #008000"> </span><span style="color: #1C6277">{number}</span><span style="color: #008000"> */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">#foo</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// This works.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">#foo</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>For more information about the implementation, you can <a href="https://github.com/Microsoft/TypeScript/pull/30829">check out the original pull request</a></p>
<h3 id="which-should-i-use" style="position:relative;"><a href="#which-should-i-use" aria-label="which should i use permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Which should I use?</h3>
<p>We’ve already received many questions on which type of privates you should use as a TypeScript user: most commonly, “should I use the <code>private</code> keyword, or ECMAScript’s hash/pound (<code>#</code>) private fields?”
It depends!</p>
<p>When it comes to properties, TypeScript’s <code>private</code> modifiers are fully erased - that means that at runtime, it acts entirely like a normal property and there’s no way to tell that it was declared with a <code>private</code> modifier. When using the <code>private</code> keyword, privacy is only enforced at compile-time/design-time, and for JavaScript consumers it’s entirely intent-based.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// This is an error at compile time,</span></div><div class='line'><span style="color: #008000">// but when TypeScript outputs .js files,</span></div><div class='line'><span style="color: #008000">// it'll run fine and print '10'.</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">().</span><span style="color: #001080">foo</span><span style="color: #000000">); </span><span style="color: #008000">// prints '10'</span></div><div class='line'><span style="color: #008000">//                  ~~~</span></div><div class='line'><span style="color: #008000">// error! Property 'foo' is private and only accessible within class 'C'.</span></div><div class='line'></div><div class='line'><span style="color: #008000">// TypeScript allows this at compile-time</span></div><div class='line'><span style="color: #008000">// as a "work-around" to avoid the error.</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">()[</span><span style="color: #A31515">"foo"</span><span style="color: #000000">]); </span><span style="color: #008000">// prints '10'</span></div></code></div></pre>
<p>The upside is that this sort of “soft privacy” can help your consumers temporarily work around not having access to some API, and also works in any runtime.</p>
<p>On the other hand, ECMAScript’s <code>#</code> privates are completely inaccessible outside of the class.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">#foo</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">().</span><span style="color: #001080">#foo</span><span style="color: #000000">); </span><span style="color: #008000">// SyntaxError</span></div><div class='line'><span style="color: #008000">//                  ~~~~</span></div><div class='line'><span style="color: #008000">// TypeScript reports an error *and*</span></div><div class='line'><span style="color: #008000">// this won't work at runtime!</span></div><div class='line'></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">()[</span><span style="color: #A31515">"#foo"</span><span style="color: #000000">]); </span><span style="color: #008000">// prints undefined</span></div><div class='line'><span style="color: #008000">//          ~~~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #008000">// TypeScript reports an error under 'noImplicitAny',</span></div><div class='line'><span style="color: #008000">// and this prints 'undefined'.</span></div></code></div></pre>
<p>This hard privacy is really useful for strictly ensuring that nobody can take use of any of your internals.
If you’re a library author, removing or renaming a private field should never cause a breaking change.</p>
<p>As we mentioned, another benefit is that subclassing can be easier with ECMAScript’s <code>#</code> privates because they <em>really</em> are private.
When using ECMAScript <code>#</code> private fields, no subclass ever has to worry about collisions in field naming.
When it comes to TypeScript’s <code>private</code> property declarations, users still have to be careful not to trample over properties declared in superclasses.</p>
<p>One more thing to think about is where you intend for your code to run.
TypeScript currently can’t support this feature unless targeting ECMAScript 2015 (ES6) targets or higher.
This is because our downleveled implementation uses <code>WeakMap</code>s to enforce privacy, and <code>WeakMap</code>s can’t be polyfilled in a way that doesn’t cause memory leaks.
In contrast, TypeScript’s <code>private</code>-declared properties work with all targets - even ECMAScript 3!</p>
<p>A final consideration might be speed: <code>private</code> properties are no different from any other property, so accessing them is as fast as any other property access no matter which runtime you target.
In contrast, because <code>#</code> private fields are downleveled using <code>WeakMap</code>s, they may be slower to use.
While some runtimes might optimize their actual implementations of <code>#</code> private fields, and even have speedy <code>WeakMap</code> implementations, that might not be the case in all runtimes.</p>
<h2 id="export--as-ns-syntax" style="position:relative;"><a href="#export--as-ns-syntax" aria-label="export  as ns syntax permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>export * as ns</code> Syntax</h2>
<p>It’s often common to have a single entry-point that exposes all the members of another module as a single member.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">utilities</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./utilities.js"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> { </span><span style="color: #001080">utilities</span><span style="color: #000000"> };</span></div></code></div></pre>
<p>This is so common that ECMAScript 2020 recently added a new syntax to support this pattern!</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">utilities</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./utilities.js"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This is a nice quality-of-life improvement to JavaScript, and TypeScript 3.8 implements this syntax.
When your module target is earlier than <code>es2020</code>, TypeScript will output something along the lines of the first code snippet.</p>
<h2 id="top-level-await" style="position:relative;"><a href="#top-level-await" aria-label="top level await permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Top-Level <code>await</code></h2>
<p>TypeScript 3.8 provides support for a handy upcoming ECMAScript feature called “top-level <code>await</code>“.</p>
<p>JavaScript users often introduce an <code>async</code> function in order to use <code>await</code>, and then immediately called the function after defining it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">main</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">response</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">"..."</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">greeting</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #795E26">text</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">greeting</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">main</span><span style="color: #000000">().</span><span style="color: #795E26">catch</span><span style="color: #000000">((</span><span style="color: #001080">e</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">));</span></div></code></div></pre>
<p>This is because previously in JavaScript (along with most other languages with a similar feature), <code>await</code> was only allowed within the body of an <code>async</code> function.
However, with top-level <code>await</code>, we can use <code>await</code> at the top level of a module.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">response</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">"..."</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">greeting</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">response</span><span style="color: #000000">.</span><span style="color: #795E26">text</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">greeting</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Make sure we're a module</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> {};</span></div></code></div></pre>
<p>Note there’s a subtlety: top-level <code>await</code> only works at the top level of a <em>module</em>, and files are only considered modules when TypeScript finds an <code>import</code> or an <code>export</code>.
In some basic cases, you might need to write out <code>export {}</code> as some boilerplate to make sure of this.</p>
<p>Top level <code>await</code> may not work in all environments where you might expect at this point.
Currently, you can only use top level <code>await</code> when the <a href="/tsconfig#target"><code>target</code></a> compiler option is <code>es2017</code> or above, and <code>module</code> is <code>esnext</code> or <code>system</code>.
Support within several environments and bundlers may be limited or may require enabling experimental support.</p>
<p>For more information on our implementation, you can <a href="https://github.com/microsoft/TypeScript/pull/35813">check out the original pull request</a>.</p>
<h2 id="es2020-for-target-and-module" style="position:relative;"><a href="#es2020-for-target-and-module" aria-label="es2020 for target and module permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>es2020</code> for <code>target</code> and <code>module</code></h2>
<p>TypeScript 3.8 supports <code>es2020</code> as an option for <code>module</code> and <a href="/tsconfig#target"><code>target</code></a>.
This will preserve newer ECMAScript 2020 features like optional chaining, nullish coalescing, <code>export * as ns</code>, and dynamic <code>import(...)</code> syntax.
It also means <code>bigint</code> literals now have a stable <a href="/tsconfig#target"><code>target</code></a> below <code>esnext</code>.</p>
<h2 id="jsdoc-property-modifiers" style="position:relative;"><a href="#jsdoc-property-modifiers" aria-label="jsdoc property modifiers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSDoc Property Modifiers</h2>
<p>TypeScript 3.8 supports JavaScript files by turning on the <a href="/tsconfig#allowJs"><code>allowJs</code></a> flag, and also supports <em>type-checking</em> those JavaScript files via the <a href="/tsconfig#checkJs"><code>checkJs</code></a> option or by adding a <code>// @ts-check</code> comment to the top of your <code>.js</code> files.</p>
<p>Because JavaScript files don’t have dedicated syntax for type-checking, TypeScript leverages JSDoc.
TypeScript 3.8 understands a few new JSDoc tags for properties.</p>
<p>First are the accessibility modifiers: <code>@public</code>, <code>@private</code>, and <code>@protected</code>.
These tags work exactly like <code>public</code>, <code>private</code>, and <code>protected</code> respectively work in TypeScript.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @ts-check</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/** </span><span style="color: #0000FF">@private</span><span style="color: #008000"> */</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">stuff</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">printStuff</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">stuff</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Foo</span><span style="color: #000000">().</span><span style="color: #001080">stuff</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//        ~~~~~</span></div><div class='line'><span style="color: #008000">// error! Property 'stuff' is private and only accessible within class 'Foo'.</span></div></code></div></pre>
<ul>
<li><code>@public</code> is always implied and can be left off, but means that a property can be reached from anywhere.</li>
<li><code>@private</code> means that a property can only be used within the containing class.</li>
<li><code>@protected</code> means that a property can only be used within the containing class, and all derived subclasses, but not on dissimilar instances of the containing class.</li>
</ul>
<p>Next, we’ve also added the <code>@readonly</code> modifier to ensure that a property is only ever written to during initialization.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @ts-check</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/** </span><span style="color: #0000FF">@readonly</span><span style="color: #008000"> */</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">stuff</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">writeToStuff</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">stuff</span><span style="color: #000000"> = </span><span style="color: #098658">200</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">//   ~~~~~</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Cannot assign to 'stuff' because it is a read-only property.</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Foo</span><span style="color: #000000">().</span><span style="color: #001080">stuff</span><span style="color: #000000">++;</span></div><div class='line'><span style="color: #008000">//        ~~~~~</span></div><div class='line'><span style="color: #008000">// Cannot assign to 'stuff' because it is a read-only property.</span></div></code></div></pre>
<h2 id="better-directory-watching-on-linux-and-watchoptions" style="position:relative;"><a href="#better-directory-watching-on-linux-and-watchoptions" aria-label="better directory watching on linux and watchoptions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better Directory Watching on Linux and <code>watchOptions</code></h2>
<p>TypeScript 3.8 ships a new strategy for watching directories, which is crucial for efficiently picking up changes to <code>node_modules</code>.</p>
<p>For some context, on operating systems like Linux, TypeScript installs directory watchers (as opposed to file watchers) on <code>node_modules</code> and many of its subdirectories to detect changes in dependencies.
This is because the number of available file watchers is often eclipsed by the of files in <code>node_modules</code>, whereas there are way fewer directories to track.</p>
<p>Older versions of TypeScript would <em>immediately</em> install directory watchers on folders, and at startup that would be fine; however, during an npm install, a lot of activity will take place within <code>node_modules</code> and that can overwhelm TypeScript, often slowing editor sessions to a crawl.
To prevent this, TypeScript 3.8 waits slightly before installing directory watchers to give these highly volatile directories some time to stabilize.</p>
<p>Because every project might work better under different strategies, and this new approach might not work well for your workflows, TypeScript 3.8 introduces a new <code>watchOptions</code> field in <code>tsconfig.json</code> and <code>jsconfig.json</code> which allows users to tell the compiler/language service which watching strategies should be used to keep track of files and directories.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Some typical compiler options</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#target'><data-lsp lsp="Set the JavaScript language version for emitted JavaScript and include compatible library declarations.">target</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"es2020"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#moduleResolution'><data-lsp lsp="Specify how TypeScript looks up a file from a given module specifier.">moduleResolution</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"node"</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// NEW: Options for file/directory watching</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"watchOptions"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Use native file system events for files and directories</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#watchFile'><data-lsp lsp="Specify how the TypeScript watch mode works.">watchFile</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"useFsEvents"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#watchDirectory'><data-lsp lsp="Specify how directories are watched on systems that lack recursive file-watching functionality.">watchDirectory</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"useFsEvents"</span><span style="color: #000000">,</span></div><div class='line'></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Poll files for updates more frequently</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// when they're updated a lot.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#fallbackPolling'><data-lsp lsp="Specify what approach the watcher should use if the system runs out of native file watchers.">fallbackPolling</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"dynamicPriority"</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>watchOptions</code> contains 4 new options that can be configured to handle how TypeScript keeps track of changes.</p>
<p>For more information on these changes, <a href="https://github.com/microsoft/TypeScript/pull/35615">head over to GitHub to see the pull request</a> to read more.</p>
<h2 id="fast-and-loose-incremental-checking" style="position:relative;"><a href="#fast-and-loose-incremental-checking" aria-label="fast and loose incremental checking permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>“Fast and Loose” Incremental Checking</h2>
<p>TypeScript 3.8 introduces a new compiler option called <a href="/tsconfig#assumeChangesOnlyAffectDirectDependencies"><code>assumeChangesOnlyAffectDirectDependencies</code></a>.
When this option is enabled, TypeScript will avoid rechecking/rebuilding all truly possibly-affected files, and only recheck/rebuild files that have changed as well as files that directly import them.</p>
<p>In a codebase like Visual Studio Code, this reduced rebuild times for changes in certain files from about 14 seconds to about 1 second.
While we don’t necessarily recommend this option for all codebases, you might be interested if you have an extremely large codebase and are willing to defer full project errors until later (e.g. a dedicated build via a <code>tsconfig.fullbuild.json</code> or in CI).</p>
<p>For more details, you can <a href="https://github.com/microsoft/TypeScript/pull/35711">see the original pull request</a>.</p>
<h2 id="typescript-37" style="position:relative;"><a href="#typescript-37" aria-label="typescript 37 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.7</h2>
<h2 id="optional-chaining" style="position:relative;"><a href="#optional-chaining" aria-label="optional chaining permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional Chaining</h2>
<p><a href="/play/#example/optional-chaining">Playground</a></p>
<p>Optional chaining is <a href="https://github.com/microsoft/TypeScript/issues/16">issue #16</a> on our issue tracker. For context, there have been over 23,000 issues on the TypeScript issue tracker since then.</p>
<p>At its core, optional chaining lets us write code where TypeScript can immediately stop running some expressions if we run into a <code>null</code> or <code>undefined</code>.
The star of the show in optional chaining is the new <code>?.</code> operator for <em>optional property accesses</em>.
When we write code like</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000">.</span><span style="color: #795E26">baz</span><span style="color: #000000">();</span></div></code></div></pre>
<p>this is a way of saying that when <code>foo</code> is defined, <code>foo.bar.baz()</code> will be computed; but when <code>foo</code> is <code>null</code> or <code>undefined</code>, stop what we’re doing and just return <code>undefined</code>.”</p>
<p>More plainly, that code snippet is the same as writing the following.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000"> === </span><span style="color: #0000FF">null</span><span style="color: #000000"> || </span><span style="color: #001080">foo</span><span style="color: #000000"> === </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> ? </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> : </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">bar</span><span style="color: #000000">.</span><span style="color: #795E26">baz</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Note that if <code>bar</code> is <code>null</code> or <code>undefined</code>, our code will still hit an error accessing <code>baz</code>.
Likewise, if <code>baz</code> is <code>null</code> or <code>undefined</code>, we’ll hit an error at the call site.
<code>?.</code> only checks for whether the value on the <em>left</em> of it is <code>null</code> or <code>undefined</code> - not any of the subsequent properties.</p>
<p>You might find yourself using <code>?.</code> to replace a lot of code that performs repetitive nullish checks using the <code>&#x26;&#x26;</code> operator.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Before</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">foo</span><span style="color: #000000"> && </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">bar</span><span style="color: #000000"> && </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">bar</span><span style="color: #000000">.</span><span style="color: #001080">baz</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// After-ish</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000">?.</span><span style="color: #001080">baz</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Keep in mind that <code>?.</code> acts differently than those <code>&#x26;&#x26;</code> operations since <code>&#x26;&#x26;</code> will act specially on “falsy” values (e.g. the empty string, <code>0</code>, <code>NaN</code>, and, well, <code>false</code>), but this is an intentional feature of the construct.
It doesn’t short-circuit on valid data like <code>0</code> or empty strings.</p>
<p>Optional chaining also includes two other operations.
First there’s the <em>optional element access</em> which acts similarly to optional property accesses, but allows us to access non-identifier properties (e.g. arbitrary strings, numbers, and symbols):</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * Get the first element of the array if we have an array.</span></div><div class='line'><span style="color: #008000"> * Otherwise return undefined.</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">tryGetFirstElement</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arr</span><span style="color: #000000">?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">arr</span><span style="color: #000000">?.[</span><span style="color: #098658">0</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// equivalent to</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//   return (arr === null || arr === undefined) ?</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//       undefined :</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//       arr[0];</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>There’s also <em>optional call</em>, which allows us to conditionally call expressions if they’re not <code>null</code> or <code>undefined</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeRequest</span><span style="color: #000000">(</span><span style="color: #001080">url</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #795E26">log</span><span style="color: #000000">?: (</span><span style="color: #001080">msg</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">log</span><span style="color: #000000">?.(</span><span style="color: #A31515">`Request started at </span><span style="color: #0000FF">${</span><span style="color: #0000FF">new</span><span style="color: #000000FF"> </span><span style="color: #1C6277">Date</span><span style="color: #000000FF">().</span><span style="color: #795E26">toISOString</span><span style="color: #000000FF">()</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// roughly equivalent to</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//   if (log != null) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//       log(`Request started at ${new Date().toISOString()}`);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//   }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = (</span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #001080">url</span><span style="color: #000000">)).</span><span style="color: #795E26">json</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">log</span><span style="color: #000000">?.(</span><span style="color: #A31515">`Request finished at at </span><span style="color: #0000FF">${</span><span style="color: #0000FF">new</span><span style="color: #000000FF"> </span><span style="color: #1C6277">Date</span><span style="color: #000000FF">().</span><span style="color: #795E26">toISOString</span><span style="color: #000000FF">()</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The “short-circuiting” behavior that optional chains have is limited property accesses, calls, element accesses - it doesn’t expand any further out from these expressions.
In other words,</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000"> / </span><span style="color: #795E26">someComputation</span><span style="color: #000000">();</span></div></code></div></pre>
<p>doesn’t stop the division or <code>someComputation()</code> call from occurring.
It’s equivalent to</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">temp</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000"> === </span><span style="color: #0000FF">null</span><span style="color: #000000"> || </span><span style="color: #001080">foo</span><span style="color: #000000"> === </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> ? </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> : </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">bar</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #001080">temp</span><span style="color: #000000"> / </span><span style="color: #795E26">someComputation</span><span style="color: #000000">();</span></div></code></div></pre>
<p>That might result in dividing <code>undefined</code>, which is why in <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a>, the following is an error.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">barPercentage</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">?: { </span><span style="color: #001080">bar</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> }) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">?.</span><span style="color: #001080">bar</span><span style="color: #000000"> / </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//     ~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Error: Object is possibly undefined.</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>More more details, you can <a href="https://github.com/tc39/proposal-optional-chaining/">read up on the proposal</a> and <a href="https://github.com/microsoft/TypeScript/pull/33294">view the original pull request</a>.</p>
<h2 id="nullish-coalescing" style="position:relative;"><a href="#nullish-coalescing" aria-label="nullish coalescing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nullish Coalescing</h2>
<p><a href="/play/#example/nullish-coalescing">Playground</a></p>
<p>The <em>nullish coalescing operator</em> is another upcoming ECMAScript feature that goes hand-in-hand with optional chaining, and which our team has been involved with championing in TC39.</p>
<p>You can think of this feature - the <code>??</code> operator - as a way to “fall back” to a default value when dealing with <code>null</code> or <code>undefined</code>.
When we write code like</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000"> ?? </span><span style="color: #795E26">bar</span><span style="color: #000000">();</span></div></code></div></pre>
<p>this is a new way to say that the value <code>foo</code> will be used when it’s “present”;
but when it’s <code>null</code> or <code>undefined</code>, calculate <code>bar()</code> in its place.</p>
<p>Again, the above code is equivalent to the following.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000"> !== </span><span style="color: #0000FF">null</span><span style="color: #000000"> && </span><span style="color: #001080">foo</span><span style="color: #000000"> !== </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> ? </span><span style="color: #001080">foo</span><span style="color: #000000"> : </span><span style="color: #795E26">bar</span><span style="color: #000000">();</span></div></code></div></pre>
<p>The <code>??</code> operator can replace uses of <code>||</code> when trying to use a default value.
For example, the following code snippet tries to fetch the volume that was last saved in <a href="https://developer.mozilla.org/docs/Web/API/Window/localStorage"><code>localStorage</code></a> (if it ever was);
however, it has a bug because it uses <code>||</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">initializeAudio</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">volume</span><span style="color: #000000"> = </span><span style="color: #001080">localStorage</span><span style="color: #000000">.</span><span style="color: #001080">volume</span><span style="color: #000000"> || </span><span style="color: #098658">0.5</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>When <code>localStorage.volume</code> is set to <code>0</code>, the page will set the volume to <code>0.5</code> which is unintended.
<code>??</code> avoids some unintended behavior from <code>0</code>, <code>NaN</code> and <code>""</code> being treated as falsy values.</p>
<p>We owe a large thanks to community members <a href="https://github.com/Kingwl">Wenlu Wang</a> and <a href="https://github.com/dragomirtitian">Titian Cernicova Dragomir</a> for implementing this feature!
For more details, <a href="https://github.com/microsoft/TypeScript/pull/32883">check out their pull request</a> and <a href="https://github.com/tc39/proposal-nullish-coalescing/">the nullish coalescing proposal repository</a>.</p>
<h2 id="assertion-functions" style="position:relative;"><a href="#assertion-functions" aria-label="assertion functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Assertion Functions</h2>
<p><a href="/play/#example/assertion-functions">Playground</a></p>
<p>There’s a specific set of functions that <code>throw</code> an error if something unexpected happened.
They’re called “assertion” functions.
As an example, Node.js has a dedicated function for this called <code>assert</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #001080">someValue</span><span style="color: #000000"> === </span><span style="color: #098658">42</span><span style="color: #000000">);</span></div></code></div></pre>
<p>In this example if <code>someValue</code> isn’t equal to <code>42</code>, then <code>assert</code> will throw an <code>AssertionError</code>.</p>
<p>Assertions in JavaScript are often used to guard against improper types being passed in.
For example,</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">multiply</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"number"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> === </span><span style="color: #A31515">"number"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> * </span><span style="color: #001080">y</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Unfortunately in TypeScript these checks could never be properly encoded.
For loosely-typed code this meant TypeScript was checking less, and for slightly conservative code it often forced users to use type assertions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">yell</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000">.</span><span style="color: #795E26">toUppercase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Oops! We misspelled 'toUpperCase'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Would be great if TypeScript still caught this!</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The alternative was to instead rewrite the code so that the language could analyze it, but this isn’t convenient.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">yell</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000"> !== </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">TypeError</span><span style="color: #000000">(</span><span style="color: #A31515">"str should have been a string."</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Error caught!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000">.</span><span style="color: #795E26">toUppercase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Ultimately the goal of TypeScript is to type existing JavaScript constructs in the least disruptive way.
For that reason, TypeScript 3.7 introduces a new concept called “assertion signatures” which model these assertion functions.</p>
<p>The first type of assertion signature models the way that Node’s <code>assert</code> function works.
It ensures that whatever condition is being checked must be true for the remainder of the containing scope.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #001080">condition</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">, </span><span style="color: #001080">msg</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">): asserts </span><span style="color: #001080">condition</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">condition</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">AssertionError</span><span style="color: #000000">(</span><span style="color: #001080">msg</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>asserts condition</code> says that whatever gets passed into the <code>condition</code> parameter must be true if the <code>assert</code> returns (because otherwise it would throw an error).
That means that for the rest of the scope, that condition must be truthy.
As an example, using this assertion function means we <em>do</em> catch our original <code>yell</code> example.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">yell</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000">.</span><span style="color: #795E26">toUppercase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//         ~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// error: Property 'toUppercase' does not exist on type 'string'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//        Did you mean 'toUpperCase'?</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #001080">condition</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">, </span><span style="color: #001080">msg</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">): asserts </span><span style="color: #001080">condition</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">condition</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">AssertionError</span><span style="color: #000000">(</span><span style="color: #001080">msg</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The other type of assertion signature doesn’t check for a condition, but instead tells TypeScript that a specific variable or property has a different type.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">assertIsString</span><span style="color: #000000">(</span><span style="color: #001080">val</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">): asserts </span><span style="color: #001080">val</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">val</span><span style="color: #000000"> !== </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">AssertionError</span><span style="color: #000000">(</span><span style="color: #A31515">"Not a string!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Here <code>asserts val is string</code> ensures that after any call to <code>assertIsString</code>, any variable passed in will be known to be a <code>string</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">yell</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assertIsString</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Now TypeScript knows that 'str' is a 'string'.</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000">.</span><span style="color: #795E26">toUppercase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//         ~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// error: Property 'toUppercase' does not exist on type 'string'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//        Did you mean 'toUpperCase'?</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>These assertion signatures are very similar to writing type predicate signatures:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">isString</span><span style="color: #000000">(</span><span style="color: #001080">val</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #001080">val</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">val</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">yell</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #795E26">isString</span><span style="color: #000000">(</span><span style="color: #001080">str</span><span style="color: #000000">)) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">str</span><span style="color: #000000">.</span><span style="color: #795E26">toUppercase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #A31515">"Oops!"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>And just like type predicate signatures, these assertion signatures are incredibly expressive.
We can express some fairly sophisticated ideas with these.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">assertIsDefined</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">val</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): asserts </span><span style="color: #001080">val</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">val</span><span style="color: #000000"> === </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> || </span><span style="color: #001080">val</span><span style="color: #000000"> === </span><span style="color: #0000FF">null</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">AssertionError</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #A31515">`Expected 'val' to be defined, but received </span><span style="color: #0000FF">${</span><span style="color: #001080">val</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span></div><div class='line'><span style="color: #000000">    );</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>To read up more about assertion signatures, <a href="https://github.com/microsoft/TypeScript/pull/32695">check out the original pull request</a>.</p>
<h2 id="better-support-for-never-returning-functions" style="position:relative;"><a href="#better-support-for-never-returning-functions" aria-label="better support for never returning functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better Support for <code>never</code>-Returning Functions</h2>
<p>As part of the work for assertion signatures, TypeScript needed to encode more about where and which functions were being called.
This gave us the opportunity to expand support for another class of functions: functions that return <code>never</code>.</p>
<p>The intent of any function that returns <code>never</code> is that it never returns.
It indicates that an exception was thrown, a halting error condition occurred, or that the program exited.
For example, <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/blob/5299d372a220584e75a031c13b3d555607af13f8/types/node/globals.d.ts#l874"><code>process.exit(...)</code> in <code>@types/node</code></a> is specified to return <code>never</code>.</p>
<p>In order to ensure that a function never potentially returned <code>undefined</code> or effectively returned from all code paths, TypeScript needed some syntactic signal - either a <code>return</code> or <code>throw</code> at the end of a function.
So users found themselves <code>return</code>-ing their failure functions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">dispatch</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">SomeType</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">doThingWithString</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"number"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">doThingWithNumber</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">process</span><span style="color: #000000">.</span><span style="color: #795E26">exit</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Now when these <code>never</code>-returning functions are called, TypeScript recognizes that they affect the control flow graph and accounts for them.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">dispatch</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">SomeType</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">doThingWithString</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"number"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">doThingWithNumber</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">process</span><span style="color: #000000">.</span><span style="color: #795E26">exit</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>As with assertion functions, you can <a href="https://github.com/microsoft/TypeScript/pull/32695">read up more at the same pull request</a>.</p>
<h2 id="more-recursive-type-aliases" style="position:relative;"><a href="#more-recursive-type-aliases" aria-label="more recursive type aliases permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>(More) Recursive Type Aliases</h2>
<p><a href="/play/#example/recursive-type-references">Playground</a></p>
<p>Type aliases have always had a limitation in how they could be “recursively” referenced.
The reason is that any use of a type alias needs to be able to substitute itself with whatever it aliases.
In some cases, that’s not possible, so the compiler rejects certain recursive aliases like the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> = </span><span style="color: #1C6277">Foo</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This is a reasonable restriction because any use of <code>Foo</code> would need to be replaced with <code>Foo</code> which would need to be replaced with <code>Foo</code> which would need to be replaced with <code>Foo</code> which… well, hopefully you get the idea!
In the end, there isn’t a type that makes sense in place of <code>Foo</code>.</p>
<p>This is fairly <a href="https://wikipedia.org/w/index.php?title=Recursive_data_type&#x26;oldid=913091335#in_type_synonyms">consistent with how other languages treat type aliases</a>, but it does give rise to some slightly surprising scenarios for how users leverage the feature.
For example, in TypeScript 3.6 and prior, the following causes an error.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ValueOrArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">ValueOrArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'><span style="color: #008000">//   ~~~~~~~~~~~~</span></div><div class='line'><span style="color: #008000">// error: Type alias 'ValueOrArray' circularly references itself.</span></div></code></div></pre>
<p>This is strange because there is technically nothing wrong with any use users could always write what was effectively the same code by introducing an interface.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ValueOrArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">ArrayOfValueOrArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">ArrayOfValueOrArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">ValueOrArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt; {}</span></div></code></div></pre>
<p>Because interfaces (and other object types) introduce a level of indirection and their full structure doesn’t need to be eagerly built out, TypeScript has no problem working with this structure.</p>
<p>But workaround of introducing the interface wasn’t intuitive for users.
And in principle there really wasn’t anything wrong with the original version of <code>ValueOrArray</code> that used <code>Array</code> directly.
If the compiler was a little bit “lazier” and only calculated the type arguments to <code>Array</code> when necessary, then TypeScript could express these correctly.</p>
<p>That’s exactly what TypeScript 3.7 introduces.
At the “top level” of a type alias, TypeScript will defer resolving type arguments to permit these patterns.</p>
<p>This means that code like the following that was trying to represent JSON…</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Json</span><span style="color: #000000"> = </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">boolean</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">JsonObject</span><span style="color: #000000"> | </span><span style="color: #1C6277">JsonArray</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">JsonObject</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">property</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">Json</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">JsonArray</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Json</span><span style="color: #000000">&gt; {}</span></div></code></div></pre>
<p>can finally be rewritten without helper interfaces.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Json</span><span style="color: #000000"> =</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">string</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">number</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">boolean</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">null</span></div><div class='line'><span style="color: #000000">  | { [</span><span style="color: #001080">property</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">Json</span><span style="color: #000000"> }</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">Json</span><span style="color: #000000">[];</span></div></code></div></pre>
<p>This new relaxation also lets us recursively reference type aliases in tuples as well.
The following code which used to error is now valid TypeScript code.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">VirtualNode</span><span style="color: #000000"> = </span><span style="color: #1C6277">string</span><span style="color: #000000"> | [</span><span style="color: #1C6277">string</span><span style="color: #000000">, { [</span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">any</span><span style="color: #000000"> }, ...</span><span style="color: #1C6277">VirtualNode</span><span style="color: #000000">[]];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">myNode</span><span style="color: #000000">: </span><span style="color: #1C6277">VirtualNode</span><span style="color: #000000"> = [</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"div"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  { </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">"parent"</span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #A31515">"div"</span><span style="color: #000000">, { </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">"first-child"</span><span style="color: #000000"> }, </span><span style="color: #A31515">"I'm the first child"</span><span style="color: #000000">],</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #A31515">"div"</span><span style="color: #000000">, { </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #A31515">"second-child"</span><span style="color: #000000"> }, </span><span style="color: #A31515">"I'm the second child"</span><span style="color: #000000">],</span></div><div class='line'><span style="color: #000000">];</span></div></code></div></pre>
<p>For more information, you can <a href="https://github.com/microsoft/TypeScript/pull/33050">read up on the original pull request</a>.</p>
<h2 id="--declaration-and---allowjs" style="position:relative;"><a href="#--declaration-and---allowjs" aria-label="  declaration and   allowjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--declaration</code> and <code>--allowJs</code></h2>
<p>The <a href="/tsconfig#declaration"><code>declaration</code></a> flag in TypeScript allows us to generate <code>.d.ts</code> files (declaration files) from TypeScript source files (i.e. <code>.ts</code> and <code>.tsx</code> files).
These <code>.d.ts</code> files are important for a couple of reasons.</p>
<p>First of all, they’re important because they allow TypeScript to type-check against other projects without re-checking the original source code.
They’re also important because they allow TypeScript to interoperate with existing JavaScript libraries that weren’t built with TypeScript in mind.
Finally, a benefit that is often underappreciated: both TypeScript <em>and</em> JavaScript users can benefit from these files when using editors powered by TypeScript to get things like better auto-completion.</p>
<p>Unfortunately, <a href="/tsconfig#declaration"><code>declaration</code></a> didn’t work with the <a href="/tsconfig#allowJs"><code>allowJs</code></a> flag which allows mixing TypeScript and JavaScript input files.
This was a frustrating limitation because it meant users couldn’t use the <a href="/tsconfig#declaration"><code>declaration</code></a> flag when migrating codebases, even if they were JSDoc-annotated.
TypeScript 3.7 changes that, and allows the two options to be used together!</p>
<p>The most impactful outcome of this feature might a bit subtle: with TypeScript 3.7, users can write libraries in JSDoc annotated JavaScript and support TypeScript users.</p>
<p>The way that this works is that when using <a href="/tsconfig#allowJs"><code>allowJs</code></a>, TypeScript has some best-effort analyses to understand common JavaScript patterns; however, the way that some patterns are expressed in JavaScript don’t necessarily look like their equivalents in TypeScript.
When <a href="/tsconfig#declaration"><code>declaration</code></a> emit is turned on, TypeScript figures out the best way to transform JSDoc comments and CommonJS exports into valid type declarations and the like in the output <code>.d.ts</code> files.</p>
<p>As an example, the following code snippet</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">assert</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"assert"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #1C6277">module</span><span style="color: #000000">.</span><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">blurImage</span><span style="color: #000000"> = </span><span style="color: #001080">blurImage</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * Produces a blurred image from an input buffer.</span></div><div class='line'><span style="color: #008000"> *</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">input</span><span style="color: #008000"> {Uint8Array}</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">width</span><span style="color: #008000"> {number}</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">height</span><span style="color: #008000"> {number}</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">blurImage</span><span style="color: #000000">(</span><span style="color: #001080">input</span><span style="color: #000000">, </span><span style="color: #001080">width</span><span style="color: #000000">, </span><span style="color: #001080">height</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">numPixels</span><span style="color: #000000"> = </span><span style="color: #001080">width</span><span style="color: #000000"> * </span><span style="color: #001080">height</span><span style="color: #000000"> * </span><span style="color: #098658">4</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">assert</span><span style="color: #000000">(</span><span style="color: #001080">input</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000"> === </span><span style="color: #001080">numPixels</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Uint8Array</span><span style="color: #000000">(</span><span style="color: #001080">numPixels</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// TODO</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Will produce a <code>.d.ts</code> file like</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * Produces a blurred image from an input buffer.</span></div><div class='line'><span style="color: #008000"> *</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">input</span><span style="color: #008000"> {Uint8Array}</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">width</span><span style="color: #008000"> {number}</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">height</span><span style="color: #008000"> {number}</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">blurImage</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">input</span><span style="color: #000000">: </span><span style="color: #1C6277">Uint8Array</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">width</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">height</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span></div><div class='line'><span style="color: #000000">): </span><span style="color: #1C6277">Uint8Array</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This can go beyond basic functions with <code>@param</code> tags too, where the following example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@callback</span><span style="color: #008000"> </span><span style="color: #1C6277">Job</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@returns</span><span style="color: #008000"> </span><span style="color: #1C6277">{void}</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'></div><div class='line'><span style="color: #008000">/** Queues work */</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Worker</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">maxDepth</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">started</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">depthLimit</span><span style="color: #000000"> = </span><span style="color: #001080">maxDepth</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">     * NOTE: queued jobs may add more items to queue</span></div><div class='line'><span style="color: #008000">     * </span><span style="color: #0000FF">@type</span><span style="color: #008000"> </span><span style="color: #1C6277">{Job[]}</span></div><div class='line'><span style="color: #008000">     */</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">queue</span><span style="color: #000000"> = [];</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">   * Adds a work item to the queue</span></div><div class='line'><span style="color: #008000">   * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #1C6277">{Job}</span><span style="color: #008000"> </span><span style="color: #001080">work</span></div><div class='line'><span style="color: #008000">   */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #001080">work</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">queue</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000"> + </span><span style="color: #098658">1</span><span style="color: #000000"> &gt; </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">depthLimit</span><span style="color: #000000">) </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000">(</span><span style="color: #A31515">"Queue full!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">queue</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #001080">work</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">   * Starts the queue if it has not yet started</span></div><div class='line'><span style="color: #008000">   */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">start</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">started</span><span style="color: #000000">) </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">started</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">queue</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #008000">/** </span><span style="color: #0000FF">@type</span><span style="color: #008000"> </span><span style="color: #1C6277">{Job}</span><span style="color: #008000"> */</span><span style="color: #000000"> (</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">queue</span><span style="color: #000000">.</span><span style="color: #795E26">shift</span><span style="color: #000000">())();</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>will be transformed into the following <code>.d.ts</code> file:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@callback</span><span style="color: #008000"> </span><span style="color: #1C6277">Job</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@returns</span><span style="color: #008000"> </span><span style="color: #1C6277">{void}</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'><span style="color: #008000">/** Queues work */</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Worker</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">maxDepth</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">started</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">depthLimit</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">   * NOTE: queued jobs may add more items to queue</span></div><div class='line'><span style="color: #008000">   * </span><span style="color: #0000FF">@type</span><span style="color: #008000"> </span><span style="color: #1C6277">{Job[]}</span></div><div class='line'><span style="color: #008000">   */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">queue</span><span style="color: #000000">: </span><span style="color: #1C6277">Job</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">   * Adds a work item to the queue</span></div><div class='line'><span style="color: #008000">   * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #1C6277">{Job}</span><span style="color: #008000"> </span><span style="color: #001080">work</span></div><div class='line'><span style="color: #008000">   */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #001080">work</span><span style="color: #000000">: </span><span style="color: #1C6277">Job</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000">   * Starts the queue if it has not yet started</span></div><div class='line'><span style="color: #008000">   */</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">start</span><span style="color: #000000">(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Job</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Note that when using these flags together, TypeScript doesn’t necessarily have to downlevel <code>.js</code> files.
If you simply want TypeScript to create <code>.d.ts</code> files, you can use the <a href="/tsconfig#emitDeclarationOnly"><code>emitDeclarationOnly</code></a> compiler option.</p>
<p>For more details, you can <a href="https://github.com/microsoft/TypeScript/pull/32372">check out the original pull request</a>.</p>
<h2 id="the-usedefineforclassfields-flag-and-the-declare-property-modifier" style="position:relative;"><a href="#the-usedefineforclassfields-flag-and-the-declare-property-modifier" aria-label="the usedefineforclassfields flag and the declare property modifier permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>useDefineForClassFields</code> Flag and The <code>declare</code> Property Modifier</h2>
<p>Back when TypeScript implemented public class fields, we assumed to the best of our abilities that the following code</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">bar</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>would be equivalent to a similar assignment within a constructor body.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Unfortunately, while this seemed to be the direction that the proposal moved towards in its earlier days, there is an extremely strong chance that public class fields will be standardized differently.
Instead, the original code sample might need to de-sugar to something closer to the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #795E26">defineProperty</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">, </span><span style="color: #A31515">"foo"</span><span style="color: #000000">, {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">enumerable:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">configurable:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">writable:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    });</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #795E26">defineProperty</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">, </span><span style="color: #A31515">"bar"</span><span style="color: #000000">, {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">enumerable:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">configurable:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">writable:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    });</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>While TypeScript 3.7 isn’t changing any existing emit by default, we’ve been rolling out changes incrementally to help users mitigate potential future breakage.
We’ve provided a new flag called <a href="/tsconfig#useDefineForClassFields"><code>useDefineForClassFields</code></a> to enable this emit mode with some new checking logic.</p>
<p>The two biggest changes are the following:</p>
<ul>
<li>Declarations are initialized with <code>Object.defineProperty</code>.</li>
<li>Declarations are <em>always</em> initialized to <code>undefined</code>, even if they have no initializer.</li>
</ul>
<p>This can cause quite a bit of fallout for existing code that use inheritance. First of all, <code>set</code> accessors from base classes won’t get triggered - they’ll be completely overwritten.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">set</span><span style="color: #000000"> </span><span style="color: #795E26">data</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"data changed to "</span><span style="color: #000000"> + </span><span style="color: #001080">value</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Derived</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// No longer triggers a 'console.log'</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// when using 'useDefineForClassFields'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">data</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Secondly, using class fields to specialize properties from base classes also won’t work.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Animal</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">animalStuff</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Dog</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Animal</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">dogStuff</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">AnimalHouse</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">resident</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">animal</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">resident</span><span style="color: #000000"> = </span><span style="color: #001080">animal</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">DogHouse</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">AnimalHouse</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Initializes 'resident' to 'undefined'</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// after the call to 'super()' when</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// using 'useDefineForClassFields'!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">resident</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">dog</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">(</span><span style="color: #001080">dog</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>What these two boil down to is that mixing properties with accessors is going to cause issues, and so will re-declaring properties with no initializers.</p>
<p>To detect the issue around accessors, TypeScript 3.7 will now emit <code>get</code>/<code>set</code> accessors in <code>.d.ts</code> files so that in TypeScript can check for overridden accessors.</p>
<p>Code that’s impacted by the class fields change can get around the issue by converting field initializers to assignments in constructor bodies.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">set</span><span style="color: #000000"> </span><span style="color: #795E26">data</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"data changed to "</span><span style="color: #000000"> + </span><span style="color: #001080">value</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Derived</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">data</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>To help mitigate the second issue, you can either add an explicit initializer or add a <code>declare</code> modifier to indicate that a property should have no emit.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Animal</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">animalStuff</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Dog</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Animal</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">dogStuff</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">AnimalHouse</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">resident</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">animal</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">resident</span><span style="color: #000000"> = </span><span style="color: #001080">animal</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">DogHouse</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">AnimalHouse</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #001080">resident</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//  ^^^^^^^</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// 'resident' now has a 'declare' modifier,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// and won't produce any output code.</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">dog</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">(</span><span style="color: #001080">dog</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Currently <a href="/tsconfig#useDefineForClassFields"><code>useDefineForClassFields</code></a> is only available when targeting ES5 and upwards, since <code>Object.defineProperty</code> doesn’t exist in ES3.
To achieve similar checking for issues, you can create a separate project that targets ES5 and uses <a href="/tsconfig#noEmit"><code>noEmit</code></a> to avoid a full build.</p>
<p>For more information, you can <a href="https://github.com/microsoft/TypeScript/pull/33509">take a look at the original pull request for these changes</a>.</p>
<p>We strongly encourage users to try the <a href="/tsconfig#useDefineForClassFields"><code>useDefineForClassFields</code></a> flag and report back on our issue tracker or in the comments below.
This includes feedback on difficulty of adopting the flag so we can understand how we can make migration easier.</p>
<h2 id="build-free-editing-with-project-references" style="position:relative;"><a href="#build-free-editing-with-project-references" aria-label="build free editing with project references permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build-Free Editing with Project References</h2>
<p>TypeScript’s project references provide us with an easy way to break codebases up to give us faster compiles.
Unfortunately, editing a project whose dependencies hadn’t been built (or whose output was out of date) meant that the editing experience wouldn’t work well.</p>
<p>In TypeScript 3.7, when opening a project with dependencies, TypeScript will automatically use the source <code>.ts</code>/<code>.tsx</code> files instead.
This means projects using project references will now see an improved editing experience where semantic operations are up-to-date and “just work”.
You can disable this behavior with the compiler option <a href="/tsconfig#disableSourceOfProjectReferenceRedirect"><code>disableSourceOfProjectReferenceRedirect</code></a> which may be appropriate when working in very large projects where this change may impact editing performance.</p>
<p>You can <a href="https://github.com/microsoft/TypeScript/pull/32028">read up more about this change by reading up on its pull request</a>.</p>
<h2 id="uncalled-function-checks" style="position:relative;"><a href="#uncalled-function-checks" aria-label="uncalled function checks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Uncalled Function Checks</h2>
<p>A common and dangerous error is to forget to invoke a function, especially if the function has zero arguments or is named in a way that implies it might be a property rather than a function.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">User</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">isAdministrator</span><span style="color: #000000">(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">notify</span><span style="color: #000000">(): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">doNotDisturb</span><span style="color: #000000">?(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// later...</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Broken code, do not use!</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">doAdminThing</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #1C6277">User</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// oops!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">isAdministrator</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">sudo</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">editTheConfiguration</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">AccessDeniedError</span><span style="color: #000000">(</span><span style="color: #A31515">"User is not an admin"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Here, we forgot to call <code>isAdministrator</code>, and the code incorrectly allows non-adminstrator users to edit the configuration!</p>
<p>In TypeScript 3.7, this is identified as a likely error:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">doAdminThing</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #1C6277">User</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">isAdministrator</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">//  ~~~~~~~~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// error! This condition will always return true since the function is always defined.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">//        Did you mean to call it instead?</span></div></code></div></pre>
<p>This check is a breaking change, but for that reason the checks are very conservative.
This error is only issued in <code>if</code> conditions, and it is not issued on optional properties, if <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> is off, or if the function is later called within the body of the <code>if</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">User</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">isAdministrator</span><span style="color: #000000">(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">notify</span><span style="color: #000000">(): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">doNotDisturb</span><span style="color: #000000">?(): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">issueNotification</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #1C6277">User</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">doNotDisturb</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// OK, property is optional</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">notify</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// OK, called the function</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #795E26">notify</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>If you intended to test the function without calling it, you can correct the definition of it to include <code>undefined</code>/<code>null</code>, or use <code>!!</code> to write something like <code>if (!!user.isAdministrator)</code> to indicate that the coercion is intentional.</p>
<p>We owe a big thanks to GitHub user <a href="https://github.com/jwbay">@jwbay</a> who took the initiative to create a <a href="https://github.com/microsoft/TypeScript/pull/32802">proof-of-concept</a> and iterated to provide us with with <a href="https://github.com/microsoft/TypeScript/pull/33178">the current version</a>.</p>
<h2 id="-ts-nocheck-in-typescript-files" style="position:relative;"><a href="#-ts-nocheck-in-typescript-files" aria-label=" ts nocheck in typescript files permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>// @ts-nocheck</code> in TypeScript Files</h2>
<p>TypeScript 3.7 allows us to add <code>// @ts-nocheck</code> comments to the top of TypeScript files to disable semantic checks.
Historically this comment was only respected in JavaScript source files in the presence of <a href="/tsconfig#checkJs"><code>checkJs</code></a>, but we’ve expanded support to TypeScript files to make migrations easier for all users.</p>
<h2 id="semicolon-formatter-option" style="position:relative;"><a href="#semicolon-formatter-option" aria-label="semicolon formatter option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Semicolon Formatter Option</h2>
<p>TypeScript’s built-in formatter now supports semicolon insertion and removal at locations where a trailing semicolon is optional due to JavaScript’s automatic semicolon insertion (ASI) rules. The setting is available now in <a href="https://code.visualstudio.com/insiders/">Visual Studio Code Insiders</a>, and will be available in Visual Studio 16.4 Preview 2 in the Tools Options menu.</p>
<img width="833" alt="New semicolon formatter option in VS Code" src="https://user-images.githubusercontent.com/3277153/65913194-10066e80-e395-11e9-8a3a-4f7305c397d5.png">
<p>Choosing a value of “insert” or “remove” also affects the format of auto-imports, extracted types, and other generated code provided by TypeScript services. Leaving the setting on its default value of “ignore” makes generated code match the semicolon preference detected in the current file.</p>
<h2 id="37-breaking-changes" style="position:relative;"><a href="#37-breaking-changes" aria-label="37 breaking changes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.7 Breaking Changes</h2>
<h3 id="dom-changes" style="position:relative;"><a href="#dom-changes" aria-label="dom changes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DOM Changes</h3>
<p><a href="https://github.com/microsoft/TypeScript/pull/33627">Types in <code>lib.dom.d.ts</code> have been updated</a>.
These changes are largely correctness changes related to nullability, but impact will ultimately depend on your codebase.</p>
<h3 id="class-field-mitigations" style="position:relative;"><a href="#class-field-mitigations" aria-label="class field mitigations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Class Field Mitigations</h3>
<p><a href="#the-usedefineforclassfields-flag-and-the-declare-property-modifier">As mentioned above</a>, TypeScript 3.7 emits <code>get</code>/<code>set</code> accessors in <code>.d.ts</code> files which can cause breaking changes for consumers on older versions of TypeScript like 3.5 and prior.
TypeScript 3.6 users will not be impacted, since that version was future-proofed for this feature.</p>
<p>While not a breakage per se, opting in to the <a href="/tsconfig#useDefineForClassFields"><code>useDefineForClassFields</code></a> flag can cause breakage when:</p>
<ul>
<li>overriding an accessor in a derived class with a property declaration</li>
<li>re-declaring a property declaration with no initializer</li>
</ul>
<p>To understand the full impact, read <a href="#the-usedefineforclassfields-flag-and-the-declare-property-modifier">the section above on the <code>useDefineForClassFields</code> flag</a>.</p>
<h3 id="function-truthy-checks" style="position:relative;"><a href="#function-truthy-checks" aria-label="function truthy checks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Function Truthy Checks</h3>
<p>As mentioned above, TypeScript now errors when functions appear to be uncalled within <code>if</code> statement conditions.
An error is issued when a function type is checked in <code>if</code> conditions unless any of the following apply:</p>
<ul>
<li>the checked value comes from an optional property</li>
<li><a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> is disabled</li>
<li>the function is later called within the body of the <code>if</code></li>
</ul>
<h3 id="local-and-imported-type-declarations-now-conflict" style="position:relative;"><a href="#local-and-imported-type-declarations-now-conflict" aria-label="local and imported type declarations now conflict permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local and Imported Type Declarations Now Conflict</h3>
<p>Due to a bug, the following construct was previously allowed in TypeScript:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// ./someOtherModule.ts</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">SomeType</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// ./myModule.ts</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">SomeType</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./someOtherModule"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">SomeType</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">fn</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">SomeType</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">arg</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// Error! 'x' doesn't exist on 'SomeType'</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Here, <code>SomeType</code> appears to originate in both the <code>import</code> declaration and the local <code>interface</code> declaration.
Perhaps surprisingly, inside the module, <code>SomeType</code> refers exclusively to the <code>import</code>ed definition, and the local declaration <code>SomeType</code> is only usable when imported from another file.
This is very confusing and our review of the very small number of cases of code like this in the wild showed that developers usually thought something different was happening.</p>
<p>In TypeScript 3.7, <a href="https://github.com/microsoft/TypeScript/pull/31231">this is now correctly identified as a duplicate identifier error</a>.
The correct fix depends on the original intent of the author and should be addressed on a case-by-case basis.
Usually, the naming conflict is unintentional and the best fix is to rename the imported type.
If the intent was to augment the imported type, a proper module augmentation should be written instead.</p>
<h3 id="37-api-changes" style="position:relative;"><a href="#37-api-changes" aria-label="37 api changes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>3.7 API Changes</h3>
<p>To enable the recursive type alias patterns described above, the <code>typeArguments</code> property has been removed from the <code>TypeReference</code> interface. Users should instead use the <code>getTypeArguments</code> function on <code>TypeChecker</code> instances.</p>
<h2 id="typescript-36" style="position:relative;"><a href="#typescript-36" aria-label="typescript 36 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.6</h2>
<h2 id="stricter-generators" style="position:relative;"><a href="#stricter-generators" aria-label="stricter generators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stricter Generators</h2>
<p>TypeScript 3.6 introduces stricter checking for iterators and generator functions.
In earlier versions, users of generators had no way to differentiate whether a value was yielded or returned from a generator.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &lt; </span><span style="color: #098658">0.5</span><span style="color: #000000">) </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">"Finished!"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">iter</span><span style="color: #000000"> = </span><span style="color: #795E26">foo</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">curr</span><span style="color: #000000"> = </span><span style="color: #001080">iter</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">curr</span><span style="color: #000000">.</span><span style="color: #001080">done</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// TypeScript 3.5 and prior thought this was a 'string | number'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// It should know it's 'string' since 'done' was 'true'!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">curr</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Additionally, generators just assumed the type of <code>yield</code> was always <code>any</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">bar</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: { </span><span style="color: #795E26">hello</span><span style="color: #000000">(): </span><span style="color: #1C6277">void</span><span style="color: #000000"> } = </span><span style="color: #AF00DB">yield</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">hello</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">iter</span><span style="color: #000000"> = </span><span style="color: #795E26">bar</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">iter</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">iter</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">(</span><span style="color: #098658">123</span><span style="color: #000000">); </span><span style="color: #008000">// oops! runtime error!</span></div></code></div></pre>
<p>In TypeScript 3.6, the checker now knows that the correct type for <code>curr.value</code> should be <code>string</code> in our first example, and will correctly error on our call to <code>next()</code> in our last example.
This is thanks to some changes in the <code>Iterator</code> and <code>IteratorResult</code> type declarations to include a few new type parameters, and to a new type that TypeScript uses to represent generators called the <code>Generator</code> type.</p>
<p>The <code>Iterator</code> type now allows users to specify the yielded type, the returned type, and the type that <code>next</code> can accept.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Iterator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000"> = </span><span style="color: #1C6277">any</span><span style="color: #000000">, </span><span style="color: #1C6277">TNext</span><span style="color: #000000"> = </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Takes either 0 or 1 arguments - doesn't accept 'undefined'</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">next</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">: [] | [</span><span style="color: #1C6277">TNext</span><span style="color: #000000">]): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">return</span><span style="color: #000000">?(</span><span style="color: #001080">value</span><span style="color: #000000">?: </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">throw</span><span style="color: #000000">?(</span><span style="color: #001080">e</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Building on that work, the new <code>Generator</code> type is an <code>Iterator</code> that always has both the <code>return</code> and <code>throw</code> methods present, and is also iterable.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Generator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000"> = </span><span style="color: #1C6277">any</span><span style="color: #000000">, </span><span style="color: #1C6277">TNext</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000">&gt;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Iterator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">, </span><span style="color: #1C6277">TNext</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">next</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">: [] | [</span><span style="color: #1C6277">TNext</span><span style="color: #000000">]): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">return</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">throw</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">Symbol</span><span style="color: #000000">.</span><span style="color: #001080">iterator</span><span style="color: #000000">](): </span><span style="color: #1C6277">Generator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">, </span><span style="color: #1C6277">TNext</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>To allow differentiation between returned values and yielded values, TypeScript 3.6 converts the <code>IteratorResult</code> type to a discriminated union type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">TReturn</span><span style="color: #000000"> = </span><span style="color: #1C6277">any</span><span style="color: #000000">&gt; =</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">IteratorYieldResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;</span></div><div class='line'><span style="color: #000000">  | </span><span style="color: #1C6277">IteratorReturnResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">IteratorYieldResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">TYield</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">done</span><span style="color: #000000">?: </span><span style="color: #1C6277">false</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">TYield</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">IteratorReturnResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">TReturn</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">done</span><span style="color: #000000">: </span><span style="color: #1C6277">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">TReturn</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In short, what this means is that you’ll be able to appropriately narrow down values from iterators when dealing with them directly.</p>
<p>To correctly represent the types that can be passed in to a generator from calls to <code>next()</code>, TypeScript 3.6 also infers certain uses of <code>yield</code> within the body of a generator function.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #AF00DB">yield</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #795E26">foo</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">(); </span><span style="color: #008000">// first call to 'next' is always ignored</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">(</span><span style="color: #098658">42</span><span style="color: #000000">); </span><span style="color: #008000">// error! 'number' is not assignable to 'string'</span></div></code></div></pre>
<p>If you’d prefer to be explicit, you can also enforce the type of values that can be returned, yielded, and evaluated from <code>yield</code> expressions using an explicit return type.
Below, <code>next()</code> can only be called with <code>boolean</code>s, and depending on the value of <code>done</code>, <code>value</code> is either a <code>string</code> or a <code>number</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * - yields numbers</span></div><div class='line'><span style="color: #008000"> * - returns strings</span></div><div class='line'><span style="color: #008000"> * - can be passed in booleans</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">counter</span><span style="color: #000000">(): </span><span style="color: #1C6277">Generator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #0000FF">true</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">break</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">"done!"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">iter</span><span style="color: #000000"> = </span><span style="color: #795E26">counter</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">curr</span><span style="color: #000000"> = </span><span style="color: #001080">iter</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #AF00DB">while</span><span style="color: #000000"> (!</span><span style="color: #001080">curr</span><span style="color: #000000">.</span><span style="color: #001080">done</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">curr</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">curr</span><span style="color: #000000"> = </span><span style="color: #001080">iter</span><span style="color: #000000">.</span><span style="color: #795E26">next</span><span style="color: #000000">(</span><span style="color: #001080">curr</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> === </span><span style="color: #098658">5</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">curr</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">());</span></div><div class='line'></div><div class='line'><span style="color: #008000">// prints:</span></div><div class='line'><span style="color: #008000">//</span></div><div class='line'><span style="color: #008000">// 0</span></div><div class='line'><span style="color: #008000">// 1</span></div><div class='line'><span style="color: #008000">// 2</span></div><div class='line'><span style="color: #008000">// 3</span></div><div class='line'><span style="color: #008000">// 4</span></div><div class='line'><span style="color: #008000">// 5</span></div><div class='line'><span style="color: #008000">// DONE!</span></div></code></div></pre>
<p>For more details on the change, <a href="https://github.com/Microsoft/TypeScript/issues/2983">see the pull request here</a>.</p>
<h2 id="more-accurate-array-spread" style="position:relative;"><a href="#more-accurate-array-spread" aria-label="more accurate array spread permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>More Accurate Array Spread</h2>
<p>In pre-ES2015 targets, the most faithful emit for constructs like <code>for</code>/<code>of</code> loops and array spreads can be a bit heavy.
For this reason, TypeScript uses a simpler emit by default that only supports array types, and supports iterating on other types using the <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a> flag.
The looser default without <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a> works fairly well; however, there were some common cases where the transformation of array spreads had observable differences.
For example, the following array containing a spread</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #000000">[...</span><span style="color: #1C6277">Array</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">)];</span></div></code></div></pre>
<p>can be rewritten as the following array literal</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #000000">[</span><span style="color: #0000FF">undefined</span><span style="color: #000000">, </span><span style="color: #0000FF">undefined</span><span style="color: #000000">, </span><span style="color: #0000FF">undefined</span><span style="color: #000000">, </span><span style="color: #0000FF">undefined</span><span style="color: #000000">, </span><span style="color: #0000FF">undefined</span><span style="color: #000000">];</span></div></code></div></pre>
<p>However, TypeScript would instead transform the original code into this code:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #1C6277">Array</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">).</span><span style="color: #795E26">slice</span><span style="color: #000000">();</span></div></code></div></pre>
<p>which is slightly different.
<code>Array(5)</code> produces an array with a length of 5, but with no defined property slots.</p>
<p>TypeScript 3.6 introduces a new <code>__spreadArrays</code> helper to accurately model what happens in ECMAScript 2015 in older targets outside of <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a>.
<code>__spreadArrays</code> is also available in <a href="https://github.com/Microsoft/tslib/">tslib</a>.</p>
<p>For more information, <a href="https://github.com/microsoft/TypeScript/pull/31166">see the relevant pull request</a>.</p>
<h2 id="improved-ux-around-promises" style="position:relative;"><a href="#improved-ux-around-promises" aria-label="improved ux around promises permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved UX Around Promises</h2>
<p>TypeScript 3.6 introduces some improvements for when <code>Promise</code>s are mis-handled.</p>
<p>For example, it’s often very common to forget to <code>.then()</code> or <code>await</code> the contents of a <code>Promise</code> before passing it to another function.
TypeScript’s error messages are now specialized, and inform the user that perhaps they should consider using the <code>await</code> keyword.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">User</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getUserData</span><span style="color: #000000">(): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">User</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">displayUser</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #1C6277">User</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">displayUser</span><span style="color: #000000">(</span><span style="color: #795E26">getUserData</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//              ~~~~~~~~~~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Argument of type 'Promise&lt;User&gt;' is not assignable to parameter of type 'User'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//   ...</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Did you forget to use 'await'?</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>It’s also common to try to access a method before <code>await</code>-ing or <code>.then()</code>-ing a <code>Promise</code>.
This is another example, among many others, where we’re able to do better.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getCuteAnimals</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">"https://reddit.com/r/aww.json"</span><span style="color: #000000">).</span><span style="color: #795E26">json</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//   ~~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Property 'json' does not exist on type 'Promise&lt;Response&gt;'.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Did you forget to use 'await'?</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/issues/30646">see the originating issue</a>, as well as the pull requests that link back to it.</p>
<h2 id="better-unicode-support-for-identifiers" style="position:relative;"><a href="#better-unicode-support-for-identifiers" aria-label="better unicode support for identifiers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better Unicode Support for Identifiers</h2>
<p>TypeScript 3.6 contains better support for Unicode characters in identifiers when emitting to ES2015 and later targets.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">𝓱𝓮𝓵𝓵𝓸</span><span style="color: #000000"> = </span><span style="color: #A31515">"world"</span><span style="color: #000000">; </span><span style="color: #008000">// previously disallowed, now allowed in '--target es2015'</span></div></code></div></pre>
<h2 id="importmeta-support-in-systemjs" style="position:relative;"><a href="#importmeta-support-in-systemjs" aria-label="importmeta support in systemjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>import.meta</code> Support in SystemJS</h2>
<p>TypeScript 3.6 supports transforming <code>import.meta</code> to <code>context.meta</code> when your <code>module</code> target is set to <code>system</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// This module:</span></div><div class='line'></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #AF00DB">import</span><span style="color: #000000">.</span><span style="color: #001080">meta</span><span style="color: #000000">.</span><span style="color: #001080">url</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #008000">// gets turned into the following:</span></div><div class='line'></div><div class='line'><span style="color: #001080">System</span><span style="color: #000000">.</span><span style="color: #795E26">register</span><span style="color: #000000">([], </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">exports</span><span style="color: #000000">, </span><span style="color: #001080">context</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">setters:</span><span style="color: #000000"> [],</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">execute</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> () {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">meta</span><span style="color: #000000">.</span><span style="color: #001080">url</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    },</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h2 id="get-and-set-accessors-are-allowed-in-ambient-contexts" style="position:relative;"><a href="#get-and-set-accessors-are-allowed-in-ambient-contexts" aria-label="get and set accessors are allowed in ambient contexts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>get</code> and <code>set</code> Accessors Are Allowed in Ambient Contexts</h2>
<p>In previous versions of TypeScript, the language didn’t allow <code>get</code> and <code>set</code> accessors in ambient contexts (like in <code>declare</code>-d classes, or in <code>.d.ts</code> files in general).
The rationale was that accessors weren’t distinct from properties as far as writing and reading to these properties;
however, <a href="https://github.com/tc39/proposal-class-fields/issues/248">because ECMAScript’s class fields proposal may have differing behavior from in existing versions of TypeScript</a>, we realized we needed a way to communicate this different behavior to provide appropriate errors in subclasses.</p>
<p>As a result, users can write getters and setters in ambient contexts in TypeScript 3.6.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Allowed in 3.6+.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">get</span><span style="color: #000000"> </span><span style="color: #795E26">x</span><span style="color: #000000">(): </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">set</span><span style="color: #000000"> </span><span style="color: #795E26">x</span><span style="color: #000000">(</span><span style="color: #001080">val</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In TypeScript 3.7, the compiler itself will take advantage of this feature so that generated <code>.d.ts</code> files will also emit <code>get</code>/<code>set</code> accessors.</p>
<h2 id="ambient-classes-and-functions-can-merge" style="position:relative;"><a href="#ambient-classes-and-functions-can-merge" aria-label="ambient classes and functions can merge permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ambient Classes and Functions Can Merge</h2>
<p>In previous versions of TypeScript, it was an error to merge classes and functions under any circumstances.
Now, ambient classes and functions (classes/functions with the <code>declare</code> modifier, or in <code>.d.ts</code> files) can merge.
This means that now you can write the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">Point2D</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">Point2D</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Point2D</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>instead of needing to use</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Point2D</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Point2D</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">  (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">Point2D</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">new</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">Point2D</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<p>One advantage of this is that the callable constructor pattern can be easily expressed while also allowing namespaces to merge with these declarations (since <code>var</code> declarations can’t merge with <code>namespace</code>s).</p>
<p>In TypeScript 3.7, the compiler will take advantage of this feature so that <code>.d.ts</code> files generated from <code>.js</code> files can appropriately capture both the callability and constructability of a class-like function.</p>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/32584">see the original PR on GitHub</a>.</p>
<h2 id="apis-to-support---build-and---incremental" style="position:relative;"><a href="#apis-to-support---build-and---incremental" aria-label="apis to support   build and   incremental permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>APIs to Support <code>--build</code> and <code>--incremental</code></h2>
<p>TypeScript 3.0 introduced support for referencing other and building them incrementally using the <code>--build</code> flag.
Additionally, TypeScript 3.4 introduced the <a href="/tsconfig#incremental"><code>incremental</code></a> flag for saving information about previous compilations to only rebuild certain files.
These flags were incredibly useful for structuring projects more flexibly and speeding builds up.
Unfortunately, using these flags didn’t work with 3rd party build tools like Gulp and Webpack.
TypeScript 3.6 now exposes two sets of APIs to operate on project references and incremental program building.</p>
<p>For creating <a href="/tsconfig#incremental"><code>incremental</code></a> builds, users can leverage the <code>createIncrementalProgram</code> and <code>createIncrementalCompilerHost</code> APIs.
Users can also re-hydrate old program instances from <code>.tsbuildinfo</code> files generated by this API using the newly exposed <code>readBuilderProgram</code> function, which is only meant to be used as for creating new programs (i.e. you can’t modify the returned instance - it’s only meant to be used for the <code>oldProgram</code> parameter in other <code>create*Program</code> functions).</p>
<p>For leveraging project references, a new <code>createSolutionBuilder</code> function has been exposed, which returns an instance of the new type <code>SolutionBuilder</code>.</p>
<p>For more details on these APIs, you can <a href="https://github.com/microsoft/TypeScript/pull/31432">see the original pull request</a>.</p>
<h2 id="semicolon-aware-code-edits" style="position:relative;"><a href="#semicolon-aware-code-edits" aria-label="semicolon aware code edits permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Semicolon-Aware Code Edits</h2>
<p>Editors like Visual Studio and Visual Studio Code can automatically apply quick fixes, refactorings, and other transformations like automatically importing values from other modules.
These transformations are powered by TypeScript, and older versions of TypeScript unconditionally added semicolons to the end of every statement; unfortunately, this disagreed with many users’ style guidelines, and many users were displeased with the editor inserting semicolons.</p>
<p>TypeScript is now smart enough to detect whether your file uses semicolons when applying these sorts of edits.
If your file generally lacks semicolons, TypeScript won’t add one.</p>
<p>For more details, <a href="https://github.com/microsoft/TypeScript/pull/31801">see the corresponding pull request</a>.</p>
<h2 id="smarter-auto-import-syntax" style="position:relative;"><a href="#smarter-auto-import-syntax" aria-label="smarter auto import syntax permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Smarter Auto-Import Syntax</h2>
<p>JavaScript has a lot of different module syntaxes or conventions: the one in the ECMAScript standard, the one Node already supports (CommonJS), AMD, System.js, and more!
For the most part, TypeScript would default to auto-importing using ECMAScript module syntax, which was often inappropriate in certain TypeScript projects with different compiler settings, or in Node projects with plain JavaScript and <code>require</code> calls.</p>
<p>TypeScript 3.6 is now a bit smarter about looking at your existing imports before deciding on how to auto-import other modules.
You can <a href="https://github.com/microsoft/TypeScript/pull/32684">see more details in the original pull request here</a>.</p>
<h2 id="await-completions-on-promises" style="position:relative;"><a href="#await-completions-on-promises" aria-label="await completions on promises permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>await</code> Completions on Promises</h2>
<h2 id="new-typescript-playground" style="position:relative;"><a href="#new-typescript-playground" aria-label="new typescript playground permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New TypeScript Playground</h2>
<p>The TypeScript playground has received a much-needed refresh with handy new functionality!
The new playground is largely a fork of <a href="https://github.com/agentcooper">Artem Tyurin</a>’s <a href="https://github.com/agentcooper/typescript-play">TypeScript playground</a> which community members have been using more and more.
We owe Artem a big thanks for helping out here!</p>
<p>The new playground now supports many new options including:</p>
<ul>
<li>The <a href="/tsconfig#target"><code>target</code></a> option (allowing users to switch out of <code>es5</code> to <code>es3</code>, <code>es2015</code>, <code>esnext</code>, etc.)</li>
<li>All the strictness flags (including just <a href="/tsconfig#strict"><code>strict</code></a>)</li>
<li>Support for plain JavaScript files (using <code>allowJS</code> and optionally <a href="/tsconfig#checkJs"><code>checkJs</code></a>)</li>
</ul>
<p>These options also persist when sharing links to playground samples, allowing users to more reliably share examples without having to tell the recipient “oh, don’t forget to turn on the <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a> option!“.</p>
<p>In the near future, we’re going to be refreshing the playground samples, adding JSX support, and polishing automatic type acquisition, meaning that you’ll be able to see the same experience on the playground as you’d get in your personal editor.</p>
<p>As we improve the playground and the website, <a href="https://github.com/microsoft/TypeScript-Website/">we welcome feedback and pull requests on GitHub</a>!</p>
<h2 id="typescript-35" style="position:relative;"><a href="#typescript-35" aria-label="typescript 35 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.5</h2>
<h2 id="speed-improvements-1" style="position:relative;"><a href="#speed-improvements-1" aria-label="speed improvements 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Speed improvements</h2>
<p>TypeScript 3.5 introduces several optimizations around type-checking and incremental builds.</p>
<h3 id="type-checking-speed-ups" style="position:relative;"><a href="#type-checking-speed-ups" aria-label="type checking speed ups permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type-checking speed-ups</h3>
<p>TypeScript 3.5 contains certain optimizations over TypeScript 3.4 for type-checking more efficiently.
These improvements are significantly more pronounced in editor scenarios where type-checking drives operations like code completion lists.</p>
<h3 id="--incremental-improvements" style="position:relative;"><a href="#--incremental-improvements" aria-label="  incremental improvements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--incremental</code> improvements</h3>
<p>TypeScript 3.5 improves on 3.4’s <a href="/tsconfig#incremental"><code>incremental</code></a> build mode, by saving information about how the state of the world was calculated - compiler settings, why files were looked up, where files were found, etc.
In scenarios involving hundreds of projects using TypeScript’s project references in <code>--build</code> mode, <a href="https://github.com/Microsoft/TypeScript/pull/31101">we’ve found that the amount of time rebuilding can be reduced by as much as 68% compared to TypeScript 3.4</a>!</p>
<p>For more details, you can see the pull requests to</p>
<ul>
<li><a href="https://github.com/Microsoft/TypeScript/pull/31100">cache module resolution</a></li>
<li><a href="https://github.com/Microsoft/TypeScript/pull/31101">cache settings calculated from <code>tsconfig.json</code></a></li>
</ul>
<h2 id="the-omit-helper-type" style="position:relative;"><a href="#the-omit-helper-type" aria-label="the omit helper type permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>Omit</code> helper type</h2>
<p>TypeScript 3.5 introduces the new <code>Omit</code> helper type, which creates a new type with some properties dropped from the original.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">QuantumPerson</span><span style="color: #000000"> = </span><span style="color: #1C6277">Omit</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Person</span><span style="color: #000000">, </span><span style="color: #A31515">"location"</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// equivalent to</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">QuantumPerson</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<p>Here we were able to copy over all the properties of <code>Person</code> except for <code>location</code> using the <code>Omit</code> helper.</p>
<p>For more details, <a href="https://github.com/Microsoft/TypeScript/pull/30552">see the pull request on GitHub to add <code>Omit</code></a>, as well as <a href="https://github.com/microsoft/TypeScript/pull/31134">the change to use <code>Omit</code> for object rest</a>.</p>
<h3 id="improved-excess-property-checks-in-union-types" style="position:relative;"><a href="#improved-excess-property-checks-in-union-types" aria-label="improved excess property checks in union types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved excess property checks in union types</h3>
<p>In TypeScript 3.4 and earlier, certain excess properties were allowed in situations where they really shouldn’t have been.
For instance, TypeScript 3.4 permitted the incorrect <code>name</code> property in the object literal even though its types don’t match between <code>Point</code> and <code>Label</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Point</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Label</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">thing</span><span style="color: #000000">: </span><span style="color: #1C6277">Point</span><span style="color: #000000"> | </span><span style="color: #1C6277">Label</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #008000">// uh-oh!</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<p>Previously, a non-disciminated union wouldn’t have <em>any</em> excess property checking done on its members, and as a result, the incorrectly typed <code>name</code> property slipped by.</p>
<p>In TypeScript 3.5, the type-checker at least verifies that all the provided properties belong to <em>some</em> union member and have the appropriate type, meaning that the sample above correctly issues an error.</p>
<p>Note that partial overlap is still permitted as long as the property types are valid.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">pl</span><span style="color: #000000">: </span><span style="color: #1C6277">Point</span><span style="color: #000000"> | </span><span style="color: #1C6277">Label</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"origin"</span><span style="color: #000000">, </span><span style="color: #008000">// okay</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<h2 id="the---allowumdglobalaccess-flag" style="position:relative;"><a href="#the---allowumdglobalaccess-flag" aria-label="the   allowumdglobalaccess flag permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>--allowUmdGlobalAccess</code> flag</h2>
<p>In TypeScript 3.5, you can now reference UMD global declarations like</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">export as namespace foo;</span></div></code></div></pre>
<p>from anywhere - even modules - using the new <a href="/tsconfig#allowUmdGlobalAccess"><code>allowUmdGlobalAccess</code></a> flag.</p>
<p>This mode adds flexibility for mixing and matching the way 3rd party libraries, where globals that libraries declare can always be consumed, even from within modules.</p>
<p>For more details, <a href="https://github.com/Microsoft/TypeScript/pull/30776/files">see the pull request on GitHub</a>.</p>
<h2 id="smarter-union-type-checking" style="position:relative;"><a href="#smarter-union-type-checking" aria-label="smarter union type checking permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Smarter union type checking</h2>
<p>In TypeScript 3.4 and prior, the following example would fail:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">S</span><span style="color: #000000"> = { </span><span style="color: #001080">done</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">; </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> = { </span><span style="color: #001080">done</span><span style="color: #000000">: </span><span style="color: #1C6277">false</span><span style="color: #000000">; </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> } | { </span><span style="color: #001080">done</span><span style="color: #000000">: </span><span style="color: #1C6277">true</span><span style="color: #000000">; </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">source</span><span style="color: #000000">: </span><span style="color: #1C6277">S</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">target</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #001080">target</span><span style="color: #000000"> = </span><span style="color: #001080">source</span><span style="color: #000000">;</span></div></code></div></pre>
<p>That’s because <code>S</code> isn’t assignable to <code>{ done: false, value: number }</code> nor <code>{ done: true, value: number }</code>.
Why?
Because the <code>done</code> property in <code>S</code> isn’t specific enough - it’s <code>boolean</code> whereas each constituent of <code>T</code> has a <code>done</code> property that’s specifically <code>true</code> or <code>false</code>.
That’s what we meant by each constituent type being checked in isolation: TypeScript doesn’t just union each property together and see if <code>S</code> is assignable to that.
If it did, some bad code could get through like the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"foo"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Bar</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"bar"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">doSomething</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> | </span><span style="color: #1C6277">Bar</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"foo"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">.</span><span style="color: #795E26">toLowerCase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// uh-oh - luckily TypeScript errors here!</span></div><div class='line'><span style="color: #795E26">doSomething</span><span style="color: #000000">({</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind:</span><span style="color: #000000"> </span><span style="color: #A31515">"foo"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #098658">123</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<p>However, this was a bit overly strict for the original example.
If you figure out the precise type of any possible value of <code>S</code>, you can actually see that it matches the types in <code>T</code> exactly.</p>
<p>In TypeScript 3.5, when assigning to types with discriminant properties like in <code>T</code>, the language actually <em>will</em> go further and decompose types like <code>S</code> into a union of every possible inhabitant type.
In this case, since <code>boolean</code> is a union of <code>true</code> and <code>false</code>, <code>S</code> will be viewed as a union of <code>{ done: false, value: number }</code> and <code>{ done: true, value: number }</code>.</p>
<p>For more details, you can <a href="https://github.com/microsoft/TypeScript/pull/30779">see the original pull request on GitHub</a>.</p>
<h2 id="higher-order-type-inference-from-generic-constructors" style="position:relative;"><a href="#higher-order-type-inference-from-generic-constructors" aria-label="higher order type inference from generic constructors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Higher order type inference from generic constructors</h2>
<p>In TypeScript 3.4, we improved inference for when generic functions that return functions like so:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">compose</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">, </span><span style="color: #1C6277">V</span><span style="color: #000000">&gt;(</span><span style="color: #795E26">f</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">, </span><span style="color: #795E26">g</span><span style="color: #000000">: (</span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">V</span><span style="color: #000000">): (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">V</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">(</span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">));</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>took other generic functions as arguments, like so:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">arrayify</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000">[] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span><span style="color: #001080">x</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; = { </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">boxify</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">newFn</span><span style="color: #000000"> = </span><span style="color: #795E26">compose</span><span style="color: #000000">(</span><span style="color: #001080">arrayify</span><span style="color: #000000">, </span><span style="color: #001080">boxify</span><span style="color: #000000">);</span></div></code></div></pre>
<p>Instead of a relatively useless type like <code>(x: {}) => Box&#x3C;{}[]></code>, which older versions of the language would infer, TypeScript 3.4’s inference allows <code>newFn</code> to be generic.
Its new type is <code>&#x3C;T>(x: T) => Box&#x3C;T[]></code>.</p>
<p>TypeScript 3.5 generalizes this behavior to work on constructor functions as well.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"box"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Bag</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"bag"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">composeCtor</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">, </span><span style="color: #1C6277">V</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">F</span><span style="color: #000000">: </span><span style="color: #AF00DB">new</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">G</span><span style="color: #000000">: </span><span style="color: #AF00DB">new</span><span style="color: #000000"> (</span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">V</span></div><div class='line'><span style="color: #000000">): (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">V</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">G</span><span style="color: #000000">(</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">F</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">));</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">f</span><span style="color: #000000"> = </span><span style="color: #795E26">composeCtor</span><span style="color: #000000">(</span><span style="color: #001080">Box</span><span style="color: #000000">, </span><span style="color: #001080">Bag</span><span style="color: #000000">); </span><span style="color: #008000">// has type '&lt;T&gt;(x: T) =&gt; Bag&lt;Box&lt;T&gt;&gt;'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #098658">1024</span><span style="color: #000000">); </span><span style="color: #008000">// has type 'Bag&lt;Box&lt;number&gt;&gt;'</span></div></code></div></pre>
<p>In addition to compositional patterns like the above, this new inference on generic constructors means that functions that operate on class components in certain UI libraries like React can more correctly operate on generic class components.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ComponentClass</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt; = </span><span style="color: #AF00DB">new</span><span style="color: #000000"> (</span><span style="color: #001080">props</span><span style="color: #000000">: </span><span style="color: #1C6277">P</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">props</span><span style="color: #000000">: </span><span style="color: #1C6277">P</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">props</span><span style="color: #000000">: </span><span style="color: #1C6277">P</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">myHoc</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt;(</span><span style="color: #001080">C</span><span style="color: #000000">: </span><span style="color: #1C6277">ComponentClass</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt;): </span><span style="color: #1C6277">ComponentClass</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NestedProps</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #001080">stuff</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">GenericComponent</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">NestedProps</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt; {}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// type is 'new &lt;T&gt;(props: NestedProps&lt;T&gt;) =&gt; Component&lt;NestedProps&lt;T&gt;&gt;'</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">GenericComponent2</span><span style="color: #000000"> = </span><span style="color: #795E26">myHoc</span><span style="color: #000000">(</span><span style="color: #001080">GenericComponent</span><span style="color: #000000">);</span></div></code></div></pre>
<p>To learn more, <a href="https://github.com/microsoft/TypeScript/pull/31116">check out the original pull request on GitHub</a>.</p>
<h2 id="typescript-34" style="position:relative;"><a href="#typescript-34" aria-label="typescript 34 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.4</h2>
<h2 id="faster-subsequent-builds-with-the---incremental-flag" style="position:relative;"><a href="#faster-subsequent-builds-with-the---incremental-flag" aria-label="faster subsequent builds with the   incremental flag permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Faster subsequent builds with the <code>--incremental</code> flag</h2>
<p>TypeScript 3.4 introduces a new flag called <a href="/tsconfig#incremental"><code>incremental</code></a> which tells TypeScript to save information about the project graph from the last compilation.
The next time TypeScript is invoked with <a href="/tsconfig#incremental"><code>incremental</code></a>, it will use that information to detect the least costly way to type-check and emit changes to your project.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #008000">// tsconfig.json</span></div><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#incremental'><data-lsp lsp="Save .tsbuildinfo files to allow for incremental compilation of projects.">incremental</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#outDir'><data-lsp lsp="Specify an output folder for all emitted files.">outDir</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./lib"</span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#include'><data-lsp lsp="Specify a list of glob patterns that match files to be included in compilation.">include</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"./src"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>By default with these settings, when we run <code>tsc</code>, TypeScript will look for a file called <code>.tsbuildinfo</code> in the output directory (<code>./lib</code>).
If <code>./lib/.tsbuildinfo</code> doesn’t exist, it’ll be generated.
But if it does, <code>tsc</code> will try to use that file to incrementally type-check and update our output files.</p>
<p>These <code>.tsbuildinfo</code> files can be safely deleted and don’t have any impact on our code at runtime - they’re purely used to make compilations faster.
We can also name them anything that we want, and place them anywhere we want using the <a href="/tsconfig#tsBuildInfoFile"><code>tsBuildInfoFile</code></a> option.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #008000">// front-end.tsconfig.json</span></div><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#incremental'><data-lsp lsp="Save .tsbuildinfo files to allow for incremental compilation of projects.">incremental</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#tsBuildInfoFile'><data-lsp lsp="Specify the folder for .tsbuildinfo incremental compilation files.">tsBuildInfoFile</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./buildcache/front-end"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#outDir'><data-lsp lsp="Specify an output folder for all emitted files.">outDir</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./lib"</span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#include'><data-lsp lsp="Specify a list of glob patterns that match files to be included in compilation.">include</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"./src"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="composite-projects" style="position:relative;"><a href="#composite-projects" aria-label="composite projects permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Composite projects</h3>
<p>Part of the intent with composite projects (<code>tsconfig.json</code>s with <a href="/tsconfig#composite"><code>composite</code></a> set to <code>true</code>) is that references between different projects can be built incrementally.
As such, composite projects will <strong>always</strong> produce <code>.tsbuildinfo</code> files.</p>
<h3 id="outfile" style="position:relative;"><a href="#outfile" aria-label="outfile permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>outFile</code></h3>
<p>When <a href="/tsconfig#outFile"><code>outFile</code></a> is used, the build information file’s name will be based on the output file’s name.
As an example, if our output JavaScript file is <code>./output/foo.js</code>, then under the <a href="/tsconfig#incremental"><code>incremental</code></a> flag, TypeScript will generate the file <code>./output/foo.tsbuildinfo</code>.
As above, this can be controlled with the <a href="/tsconfig#tsBuildInfoFile"><code>tsBuildInfoFile</code></a> option.</p>
<h2 id="higher-order-type-inference-from-generic-functions" style="position:relative;"><a href="#higher-order-type-inference-from-generic-functions" aria-label="higher order type inference from generic functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Higher order type inference from generic functions</h2>
<p>TypeScript 3.4 can now produce generic function types when inference from other generic functions produces free type variables for inferences.
This means many function composition patterns now work better in 3.4.</p>
<p>To get more specific, let’s build up some motivation and consider the following <code>compose</code> function:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">compose</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #1C6277">C</span><span style="color: #000000">&gt;(</span><span style="color: #795E26">f</span><span style="color: #000000">: (</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000">, </span><span style="color: #795E26">g</span><span style="color: #000000">: (</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">B</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000">): (</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">(</span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">));</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>compose</code> takes two other functions:</p>
<ul>
<li><code>f</code> which takes some argument (of type <code>A</code>) and returns a value of type <code>B</code></li>
<li><code>g</code> which takes an argument of type <code>B</code> (the type <code>f</code> returned), and returns a value of type <code>C</code></li>
</ul>
<p><code>compose</code> then returns a function which feeds its argument through <code>f</code> and then <code>g</code>.</p>
<p>When calling this function, TypeScript will try to figure out the types of <code>A</code>, <code>B</code>, and <code>C</code> through a process called <em>type argument inference</em>.
This inference process usually works pretty well:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getDisplayName</span><span style="color: #000000">(</span><span style="color: #001080">p</span><span style="color: #000000">: </span><span style="color: #1C6277">Person</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">.</span><span style="color: #795E26">toLowerCase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getLength</span><span style="color: #000000">(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// has type '(p: Person) =&gt; number'</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">getDisplayNameLength</span><span style="color: #000000"> = </span><span style="color: #795E26">compose</span><span style="color: #000000">(</span><span style="color: #001080">getDisplayName</span><span style="color: #000000">, </span><span style="color: #001080">getLength</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #008000">// works and returns the type 'number'</span></div><div class='line'><span style="color: #795E26">getDisplayNameLength</span><span style="color: #000000">({ </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"Person McPersonface"</span><span style="color: #000000">, </span><span style="color: #001080">age:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000"> });</span></div></code></div></pre>
<p>The inference process is fairly straightforward here because <code>getDisplayName</code> and <code>getLength</code> use types that can easily be referenced.
However, in TypeScript 3.3 and earlier, generic functions like <code>compose</code> didn’t work so well when passed other generic functions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000">[] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span><span style="color: #001080">x</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeBox</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { </span><span style="color: #001080">value</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// has type '(arg: {}) =&gt; Box&lt;{}[]&gt;'</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">makeBoxedArray</span><span style="color: #000000"> = </span><span style="color: #795E26">compose</span><span style="color: #000000">(</span><span style="color: #001080">makeArray</span><span style="color: #000000">, </span><span style="color: #001080">makeBox</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #795E26">makeBoxedArray</span><span style="color: #000000">(</span><span style="color: #A31515">"hello!"</span><span style="color: #000000">).</span><span style="color: #001080">value</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #008000">//                                ~~~~~~~~~~~</span></div><div class='line'><span style="color: #008000">// error: Property 'toUpperCase' does not exist on type '{}'.</span></div></code></div></pre>
<p>In older versions, TypeScript would infer the empty object type (<code>{}</code>) when inferring from other type variables like <code>T</code> and <code>U</code>.</p>
<p>During type argument inference in TypeScript 3.4, for a call to a generic function that returns a function type, TypeScript <em>will</em>, as appropriate, propagate type parameters from generic function arguments onto the resulting function type.</p>
<p>In other words, instead of producing the type</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">(arg: {}) =&gt; Box&lt;{}[]&gt;</span></div></code></div></pre>
<p>TypeScript 3.4 produces the type</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">arg</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">Box</span><span style="color: #000000">&lt;</span><span style="color: #0070C1">T</span><span style="color: #000000">[]&gt;</span></div></code></div></pre>
<p>Notice that <code>T</code> has been propagated from <code>makeArray</code> into the resulting type’s type parameter list.
This means that genericity from <code>compose</code>’s arguments has been preserved and our <code>makeBoxedArray</code> sample will just work!</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000">[] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span><span style="color: #001080">x</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeBox</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { </span><span style="color: #001080">value</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// has type '&lt;T&gt;(arg: T) =&gt; Box&lt;T[]&gt;'</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">makeBoxedArray</span><span style="color: #000000"> = </span><span style="color: #795E26">compose</span><span style="color: #000000">(</span><span style="color: #001080">makeArray</span><span style="color: #000000">, </span><span style="color: #001080">makeBox</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #008000">// works with no problem!</span></div><div class='line'><span style="color: #795E26">makeBoxedArray</span><span style="color: #000000">(</span><span style="color: #A31515">"hello!"</span><span style="color: #000000">).</span><span style="color: #001080">value</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000">();</span></div></code></div></pre>
<p>For more details, you can <a href="https://github.com/Microsoft/TypeScript/pull/30215">read more at the original change</a>.</p>
<h2 id="improvements-for-readonlyarray-and-readonly-tuples" style="position:relative;"><a href="#improvements-for-readonlyarray-and-readonly-tuples" aria-label="improvements for readonlyarray and readonly tuples permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improvements for <code>ReadonlyArray</code> and <code>readonly</code> tuples</h2>
<p>TypeScript 3.4 makes it a little bit easier to use read-only array-like types.</p>
<h3 id="a-new-syntax-for-readonlyarray" style="position:relative;"><a href="#a-new-syntax-for-readonlyarray" aria-label="a new syntax for readonlyarray permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A new syntax for <code>ReadonlyArray</code></h3>
<p>The <code>ReadonlyArray</code> type describes <code>Array</code>s that can only be read from.
Any variable with a reference to a <code>ReadonlyArray</code> can’t add, remove, or replace any elements of the array.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">arr</span><span style="color: #000000">: </span><span style="color: #1C6277">ReadonlyArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">arr</span><span style="color: #000000">.</span><span style="color: #795E26">slice</span><span style="color: #000000">(); </span><span style="color: #008000">// okay</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">arr</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #A31515">"hello!"</span><span style="color: #000000">); </span><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>While it’s good practice to use <code>ReadonlyArray</code> over <code>Array</code> when no mutation is intended, it’s often been a pain given that arrays have a nicer syntax.
Specifically, <code>number[]</code> is a shorthand version of <code>Array&#x3C;number></code>, just as <code>Date[]</code> is a shorthand for <code>Array&#x3C;Date></code>.</p>
<p>TypeScript 3.4 introduces a new syntax for <code>ReadonlyArray</code> using a new <code>readonly</code> modifier for array types.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">arr</span><span style="color: #000000">: </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">arr</span><span style="color: #000000">.</span><span style="color: #795E26">slice</span><span style="color: #000000">(); </span><span style="color: #008000">// okay</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">arr</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #A31515">"hello!"</span><span style="color: #000000">); </span><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="readonly-tuples" style="position:relative;"><a href="#readonly-tuples" aria-label="readonly tuples permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>readonly</code> tuples</h3>
<p>TypeScript 3.4 also introduces new support for <code>readonly</code> tuples.
We can prefix any tuple type with the <code>readonly</code> keyword to make it a <code>readonly</code> tuple, much like we now can with array shorthand syntax.
As you might expect, unlike ordinary tuples whose slots could be written to, <code>readonly</code> tuples only permit reading from those positions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">pair</span><span style="color: #000000">: </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">pair</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">]); </span><span style="color: #008000">// okay</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">pair</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] = </span><span style="color: #A31515">"hello!"</span><span style="color: #000000">; </span><span style="color: #008000">// error</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The same way that ordinary tuples are types that extend from <code>Array</code> - a tuple with elements of type <code>T</code><sub><code>1</code></sub>, <code>T</code><sub><code>2</code></sub>, … <code>T</code><sub><code>n</code></sub> extends from <code>Array&#x3C;</code> <code>T</code><sub><code>1</code></sub> | <code>T</code><sub><code>2</code></sub> | … <code>T</code><sub><code>n</code></sub> <code>></code> - <code>readonly</code> tuples are types that extend from <code>ReadonlyArray</code>. So a <code>readonly</code> tuple with elements <code>T</code><sub><code>1</code></sub>, <code>T</code><sub><code>2</code></sub>, … <code>T</code><sub><code>n</code></sub> extends from <code>ReadonlyArray&#x3C;</code> <code>T</code><sub><code>1</code></sub> | <code>T</code><sub><code>2</code></sub> | … <code>T</code><sub><code>n</code></sub> <code>></code>.</p>
<h3 id="readonly-mapped-type-modifiers-and-readonly-arrays" style="position:relative;"><a href="#readonly-mapped-type-modifiers-and-readonly-arrays" aria-label="readonly mapped type modifiers and readonly arrays permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>readonly</code> mapped type modifiers and <code>readonly</code> arrays</h3>
<p>In earlier versions of TypeScript, we generalized mapped types to operate differently on array-like types.
This meant that a mapped type like <code>Boxify</code> could work on arrays and tuples alike.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Boxify</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">Box</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]&gt;;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">// { a: Box&lt;string&gt;, b: Box&lt;number&gt; }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> = </span><span style="color: #1C6277">Boxify</span><span style="color: #000000">&lt;{ </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> }&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Array&lt;Box&lt;number&gt;&gt;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> = </span><span style="color: #1C6277">Boxify</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// [Box&lt;string&gt;, Box&lt;number&gt;]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> = </span><span style="color: #1C6277">Boxify</span><span style="color: #000000">&lt;[</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">]&gt;;</span></div></code></div></pre>
<p>Unfortunately, mapped types like the <code>Readonly</code> utility type were effectively no-ops on array and tuple types.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// lib.d.ts</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">// How code acted *before* TypeScript 3.4</span></div><div class='line'></div><div class='line'><span style="color: #008000">// { readonly a: string, readonly b: number }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;{ </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> }&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// number[]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// [string, boolean]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;[</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">]&gt;;</span></div></code></div></pre>
<p>In TypeScript 3.4, the <code>readonly</code> modifier in a mapped type will automatically convert array-like types to their corresponding <code>readonly</code> counterparts.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// How code acts now *with* TypeScript 3.4</span></div><div class='line'></div><div class='line'><span style="color: #008000">// { readonly a: string, readonly b: number }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;{ </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> }&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// readonly number[]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// readonly [string, boolean]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;[</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">]&gt;;</span></div></code></div></pre>
<p>Similarly, you could write a utility type like <code>Writable</code> mapped type that strips away <code>readonly</code>-ness, and that would convert <code>readonly</code> array containers back to their mutable equivalents.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Writable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  -</span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">// { a: string, b: number }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> = </span><span style="color: #1C6277">Writable</span><span style="color: #000000">&lt;{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// number[]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> = </span><span style="color: #1C6277">Writable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// [string, boolean]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> = </span><span style="color: #1C6277">Writable</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">]&gt;;</span></div></code></div></pre>
<h3 id="caveats" style="position:relative;"><a href="#caveats" aria-label="caveats permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h3>
<p>Despite its appearance, the <code>readonly</code> type modifier can only be used for syntax on array types and tuple types.
It is not a general-purpose type operator.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">err1</span><span style="color: #000000">: </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">Set</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">err2</span><span style="color: #000000">: </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">boolean</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// error!</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">okay</span><span style="color: #000000">: </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #1C6277">boolean</span><span style="color: #000000">[]; </span><span style="color: #008000">// works fine</span></div></code></div></pre>
<p>You can <a href="https://github.com/Microsoft/TypeScript/pull/29435">see more details in the pull request</a>.</p>
<h2 id="const-assertions" style="position:relative;"><a href="#const-assertions" aria-label="const assertions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>const</code> assertions</h2>
<p>TypeScript 3.4 introduces a new construct for literal values called <em><code>const</code></em> assertions.
Its syntax is a type assertion with <code>const</code> in place of the type name (e.g. <code>123 as const</code>).
When we construct new literal expressions with <code>const</code> assertions, we can signal to the language that</p>
<ul>
<li>no literal types in that expression should be widened (e.g. no going from <code>"hello"</code> to <code>string</code>)</li>
<li>object literals get <code>readonly</code> properties</li>
<li>array literals become <code>readonly</code> tuples</li>
</ul>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Type '"hello"'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type 'readonly [10, 20]'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = [</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #098658">20</span><span style="color: #000000">] </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type '{ readonly text: "hello" }'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000"> = { </span><span style="color: #001080">text:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000"> } </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Outside of <code>.tsx</code> files, the angle bracket assertion syntax can also be used.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Type '"hello"'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = &lt;</span><span style="color: #0000FF">const</span><span style="color: #000000">&gt;</span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type 'readonly [10, 20]'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = &lt;</span><span style="color: #0000FF">const</span><span style="color: #000000">&gt;[</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #098658">20</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type '{ readonly text: "hello" }'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000"> = &lt;</span><span style="color: #0000FF">const</span><span style="color: #000000">&gt;{ </span><span style="color: #001080">text:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000"> };</span></div></code></div></pre>
<p>This feature means that types that would otherwise be used just to hint immutability to the compiler can often be omitted.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Works with no types referenced or declared.</span></div><div class='line'><span style="color: #008000">// We only needed a single const assertion.</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getShapes</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = [</span></div><div class='line'><span style="color: #000000">    { </span><span style="color: #001080">kind:</span><span style="color: #000000"> </span><span style="color: #A31515">"circle"</span><span style="color: #000000">, </span><span style="color: #001080">radius:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">    { </span><span style="color: #001080">kind:</span><span style="color: #000000"> </span><span style="color: #A31515">"square"</span><span style="color: #000000">, </span><span style="color: #001080">sideLength:</span><span style="color: #000000"> </span><span style="color: #098658">50</span><span style="color: #000000"> },</span></div><div class='line'><span style="color: #000000">  ] </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">shape</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #795E26">getShapes</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Narrows perfectly!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">shape</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"circle"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Circle radius"</span><span style="color: #000000">, </span><span style="color: #001080">shape</span><span style="color: #000000">.</span><span style="color: #001080">radius</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Square side length"</span><span style="color: #000000">, </span><span style="color: #001080">shape</span><span style="color: #000000">.</span><span style="color: #001080">sideLength</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Notice the above needed no type annotations.
The <code>const</code> assertion allowed TypeScript to take the most specific type of the expression.</p>
<p>This can even be used to enable <code>enum</code>-like patterns in plain JavaScript code if you choose not to use TypeScript’s <code>enum</code> construct.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Colors</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">red:</span><span style="color: #000000"> </span><span style="color: #A31515">"RED"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">blue:</span><span style="color: #000000"> </span><span style="color: #A31515">"BLUE"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">green:</span><span style="color: #000000"> </span><span style="color: #A31515">"GREEN"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// or use an 'export default'</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">red:</span><span style="color: #000000"> </span><span style="color: #A31515">"RED"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">blue:</span><span style="color: #000000"> </span><span style="color: #A31515">"BLUE"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">green:</span><span style="color: #000000"> </span><span style="color: #A31515">"GREEN"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="caveats-1" style="position:relative;"><a href="#caveats-1" aria-label="caveats 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h3>
<p>One thing to note is that <code>const</code> assertions can only be applied immediately on simple literal expressions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Error! A 'const' assertion can only be applied to a</span></div><div class='line'><span style="color: #008000">// to a string, number, boolean, array, or object literal.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = (</span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &lt; </span><span style="color: #098658">0.5</span><span style="color: #000000"> ? </span><span style="color: #098658">0</span><span style="color: #000000"> : </span><span style="color: #098658">1</span><span style="color: #000000">) </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Works!</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &lt; </span><span style="color: #098658">0.5</span><span style="color: #000000"> ? (</span><span style="color: #098658">0</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">) : (</span><span style="color: #098658">1</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">);</span></div></code></div></pre>
<p>Another thing to keep in mind is that <code>const</code> contexts don’t immediately convert an expression to be fully immutable.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">arr</span><span style="color: #000000"> = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"foo"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">contents:</span><span style="color: #000000"> </span><span style="color: #001080">arr</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"bar"</span><span style="color: #000000">; </span><span style="color: #008000">// error!</span></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">contents</span><span style="color: #000000"> = []; </span><span style="color: #008000">// error!</span></div><div class='line'></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">contents</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">); </span><span style="color: #008000">// ...works!</span></div></code></div></pre>
<p>For more details, you can <a href="https://github.com/Microsoft/TypeScript/pull/29510">check out the respective pull request</a>.</p>
<h2 id="type-checking-for-globalthis" style="position:relative;"><a href="#type-checking-for-globalthis" aria-label="type checking for globalthis permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type-checking for <code>globalThis</code></h2>
<p>TypeScript 3.4 introduces support for type-checking ECMAScript’s new <code>globalThis</code> - a global variable that, well, refers to the global scope.
Unlike the above solutions, <code>globalThis</code> provides a standard way for accessing the global scope which can be used across different environments.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// in a global file:</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">abc</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Refers to 'abc' from above.</span></div><div class='line'><span style="color: #001080">globalThis</span><span style="color: #000000">.</span><span style="color: #001080">abc</span><span style="color: #000000"> = </span><span style="color: #098658">200</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Note that global variables declared with <code>let</code> and <code>const</code> don’t show up on <code>globalThis</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">answer</span><span style="color: #000000"> = </span><span style="color: #098658">42</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// error! Property 'answer' does not exist on 'typeof globalThis'.</span></div><div class='line'><span style="color: #001080">globalThis</span><span style="color: #000000">.</span><span style="color: #001080">answer</span><span style="color: #000000"> = </span><span style="color: #098658">333333</span><span style="color: #000000">;</span></div></code></div></pre>
<p>It’s also important to note that TypeScript doesn’t transform references to <code>globalThis</code> when compiling to older versions of ECMAScript.
As such, unless you’re targeting evergreen browsers (which already support <code>globalThis</code>), you may want to <a href="https://github.com/ljharb/globalThis">use an appropriate polyfill</a> instead.</p>
<p>For more details on the implementation, see <a href="https://github.com/Microsoft/TypeScript/pull/29332">the feature’s pull request</a>.</p>
<h2 id="typescript-33" style="position:relative;"><a href="#typescript-33" aria-label="typescript 33 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.3</h2>
<h2 id="improved-behavior-for-calling-union-types" style="position:relative;"><a href="#improved-behavior-for-calling-union-types" aria-label="improved behavior for calling union types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved behavior for calling union types</h2>
<p>In prior versions of TypeScript, unions of callable types could <em>only</em> be invoked if they had identical parameter lists.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Fruit</span><span style="color: #000000"> = </span><span style="color: #A31515">"apple"</span><span style="color: #000000"> | </span><span style="color: #A31515">"orange"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Color</span><span style="color: #000000"> = </span><span style="color: #A31515">"red"</span><span style="color: #000000"> | </span><span style="color: #A31515">"orange"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">FruitEater</span><span style="color: #000000"> = (</span><span style="color: #001080">fruit</span><span style="color: #000000">: </span><span style="color: #1C6277">Fruit</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #008000">// eats and ranks the fruit</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ColorConsumer</span><span style="color: #000000"> = (</span><span style="color: #001080">color</span><span style="color: #000000">: </span><span style="color: #1C6277">Color</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// consumes and describes the colors</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">f</span><span style="color: #000000">: </span><span style="color: #1C6277">FruitEater</span><span style="color: #000000"> | </span><span style="color: #1C6277">ColorConsumer</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Cannot invoke an expression whose type lacks a call signature.</span></div><div class='line'><span style="color: #008000">//   Type 'FruitEater | ColorConsumer' has no compatible call signatures.ts(2349)</span></div><div class='line'><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #A31515">"orange"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>However, in the above example, both <code>FruitEater</code>s and <code>ColorConsumer</code>s should be able to take the string <code>"orange"</code>, and return either a <code>number</code> or a <code>string</code>.</p>
<p>In TypeScript 3.3, this is no longer an error.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Fruit</span><span style="color: #000000"> = </span><span style="color: #A31515">"apple"</span><span style="color: #000000"> | </span><span style="color: #A31515">"orange"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Color</span><span style="color: #000000"> = </span><span style="color: #A31515">"red"</span><span style="color: #000000"> | </span><span style="color: #A31515">"orange"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">FruitEater</span><span style="color: #000000"> = (</span><span style="color: #001080">fruit</span><span style="color: #000000">: </span><span style="color: #1C6277">Fruit</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #008000">// eats and ranks the fruit</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ColorConsumer</span><span style="color: #000000"> = (</span><span style="color: #001080">color</span><span style="color: #000000">: </span><span style="color: #1C6277">Color</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// consumes and describes the colors</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">f</span><span style="color: #000000">: </span><span style="color: #1C6277">FruitEater</span><span style="color: #000000"> | </span><span style="color: #1C6277">ColorConsumer</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #A31515">"orange"</span><span style="color: #000000">); </span><span style="color: #008000">// It works! Returns a 'number | string'.</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #A31515">"apple"</span><span style="color: #000000">); </span><span style="color: #008000">// error - Argument of type '"red"' is not assignable to parameter of type '"orange"'.</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #A31515">"red"</span><span style="color: #000000">); </span><span style="color: #008000">// error - Argument of type '"red"' is not assignable to parameter of type '"orange"'.</span></div></code></div></pre>
<p>In TypeScript 3.3, the parameters of these signatures are <em>intersected</em> together to create a new signature.</p>
<p>In the example above, the parameters <code>fruit</code> and <code>color</code> are intersected together to a new parameter of type <code>Fruit &#x26; Color</code>.
<code>Fruit &#x26; Color</code> is really the same as <code>("apple" | "orange") &#x26; ("red" | "orange")</code> which is equivalent to <code>("apple" &#x26; "red") | ("apple" &#x26; "orange") | ("orange" &#x26; "red") | ("orange" &#x26; "orange")</code>.
Each of those impossible intersections reduces to <code>never</code>, and we’re left with <code>"orange" &#x26; "orange"</code> which is just <code>"orange"</code>.</p>
<h3 id="caveats-2" style="position:relative;"><a href="#caveats-2" aria-label="caveats 2 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h3>
<p>This new behavior only kicks in when at most one type in the union has multiple overloads, and at most one type in the union has a generic signature.
That means methods on <code>number[] | string[]</code> like <code>map</code> (which is generic) still won’t be callable.</p>
<p>On the other hand, methods like <code>forEach</code> will now be callable, but under <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a> there may be some issues.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Dog</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"dog"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">dogProp</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Cat</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"cat"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">catProp</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">catOrDogArray</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">[] | </span><span style="color: #1C6277">Cat</span><span style="color: #000000">[] = [];</span></div><div class='line'></div><div class='line'><span style="color: #001080">catOrDogArray</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">animal</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//                ~~~~~~ error!</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Parameter 'animal' implicitly has an 'any' type.</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<p>This is still strictly more capable in TypeScript 3.3, and adding an explicit type annotation will work.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Dog</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"dog"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">dogProp</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Cat</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"cat"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">catProp</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">catOrDogArray</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">[] | </span><span style="color: #1C6277">Cat</span><span style="color: #000000">[] = [];</span></div><div class='line'><span style="color: #001080">catOrDogArray</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">animal</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000"> | </span><span style="color: #1C6277">Cat</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">animal</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"dog"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">animal</span><span style="color: #000000">.</span><span style="color: #001080">dogProp</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">animal</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"cat"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">animal</span><span style="color: #000000">.</span><span style="color: #001080">catProp</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h2 id="incremental-file-watching-for-composite-projects-in---build---watch" style="position:relative;"><a href="#incremental-file-watching-for-composite-projects-in---build---watch" aria-label="incremental file watching for composite projects in   build   watch permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Incremental file watching for composite projects in <code>--build --watch</code></h2>
<p>TypeScript 3.0 introduced a new feature for structuring builds called “composite projects”.
Part of the goal here was to ensure users could break up large projects into smaller parts that build quickly and preserve project structure, without compromising the existing TypeScript experience.
Thanks to composite projects, TypeScript can use <code>--build</code> mode to recompile only the set of projects and dependencies.
You can think of this as optimizing <em>inter</em>-project builds.</p>
<p>TypeScript 2.7 also introduced <code>--watch</code> mode builds via a new incremental “builder” API.
In a similar vein, the entire idea is that this mode only re-checks and re-emits changed files or files whose dependencies might impact type-checking.
You can think of this as optimizing <em>intra</em>-project builds.</p>
<p>Prior to 3.3, building composite projects using <code>--build --watch</code> actually didn’t use this incremental file watching infrastructure.
An update in one project under <code>--build --watch</code> mode would force a full build of that project, rather than determining which files within that project were affected.</p>
<p>In TypeScript 3.3, <code>--build</code> mode’s <code>--watch</code> flag <em>does</em> leverage incremental file watching as well.
That can mean signficantly faster builds under <code>--build --watch</code>.
In our testing, this functionality has resulted in <strong>a reduction of 50% to 75% in build times</strong> of the original <code>--build --watch</code> times.
<a href="https://github.com/Microsoft/TypeScript/pull/29161">You can read more on the original pull request for the change</a> to see specific numbers, but we believe most composite project users will see significant wins here.</p>
<h2 id="typescript-32" style="position:relative;"><a href="#typescript-32" aria-label="typescript 32 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.2</h2>
<h2 id="strictbindcallapply" style="position:relative;"><a href="#strictbindcallapply" aria-label="strictbindcallapply permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>strictBindCallApply</code></h2>
<p>TypeScript 3.2 introduces a new <a href="/tsconfig#strictBindCallApply"><code>strictBindCallApply</code></a> compiler option (in the <a href="/tsconfig#strict"><code>strict</code></a> family of options) with which the <code>bind</code>, <code>call</code>, and <code>apply</code> methods on function objects are strongly typed and strictly checked.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">): </span><span style="color: #1C6277">string</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> + </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #795E26">apply</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">, [</span><span style="color: #098658">10</span><span style="color: #000000">]); </span><span style="color: #008000">// error: too few argumnts</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #795E26">apply</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">, [</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #098658">20</span><span style="color: #000000">]); </span><span style="color: #008000">// error: 2nd argument is a number</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">c</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #795E26">apply</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">, [</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">30</span><span style="color: #000000">]); </span><span style="color: #008000">// error: too many arguments</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">d</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #795E26">apply</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">, [</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">]); </span><span style="color: #008000">// okay! returns a string</span></div></code></div></pre>
<p>This is achieved by introducing two new types, <code>CallableFunction</code> and <code>NewableFunction</code>, in <code>lib.d.ts</code>. These types contain specialized generic method declarations for <code>bind</code>, <code>call</code>, and <code>apply</code> for regular functions and constructor functions, respectively. The declarations use generic rest parameters (see #24897) to capture and reflect parameter lists in a strongly typed manner. In <a href="/tsconfig#strictBindCallApply"><code>strictBindCallApply</code></a> mode these declarations are used in place of the (very permissive) declarations provided by type <code>Function</code>.</p>
<h3 id="caveats-3" style="position:relative;"><a href="#caveats-3" aria-label="caveats 3 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h3>
<p>Since the stricter checks may uncover previously unreported errors, this is a breaking change in <a href="/tsconfig#strict"><code>strict</code></a> mode.</p>
<p>Additionally, <a href="https://github.com/Microsoft/TypeScript/pull/27028#issuecomment-429334450">another caveat</a> of this new functionality is that due to certain limitations, <code>bind</code>, <code>call</code>, and <code>apply</code> can’t yet fully model generic functions or functions that have overloads.
When using these methods on a generic function, type parameters will be substituted with the empty object type (<code>{}</code>), and when used on a function with overloads, only the last overload will ever be modeled.</p>
<h2 id="generic-spread-expressions-in-object-literals" style="position:relative;"><a href="#generic-spread-expressions-in-object-literals" aria-label="generic spread expressions in object literals permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic spread expressions in object literals</h2>
<p>In TypeScript 3.2, object literals now allow generic spread expressions which now produce intersection types, similar to the <code>Object.assign</code> function and JSX literals. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">taggedObject</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">tag</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { ...</span><span style="color: #001080">obj</span><span style="color: #000000">, </span><span style="color: #001080">tag</span><span style="color: #000000"> }; </span><span style="color: #008000">// T & { tag: U }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #795E26">taggedObject</span><span style="color: #000000">({ </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">20</span><span style="color: #000000"> }, </span><span style="color: #A31515">"point"</span><span style="color: #000000">); </span><span style="color: #008000">// { x: number, y: number } & { tag: "point" }</span></div></code></div></pre>
<p>Property assignments and non-generic spread expressions are merged to the greatest extent possible on either side of a generic spread expression. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo1</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">t</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">obj1</span><span style="color: #000000">: { </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }, </span><span style="color: #001080">obj2</span><span style="color: #000000">: { </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { ...</span><span style="color: #001080">obj1</span><span style="color: #000000">, </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, ...</span><span style="color: #001080">t</span><span style="color: #000000">, ...</span><span style="color: #001080">obj2</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> }; </span><span style="color: #008000">// { a: string, x: number } & T & { b: string, y: number }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Non-generic spread expressions continue to be processed as before: Call and construct signatures are stripped, only non-method properties are preserved, and for properties with the same name, the type of the rightmost property is used. This contrasts with intersection types which concatenate call and construct signatures, preserve all properties, and intersect the types of properties with the same name. Thus, spreads of the same types may produce different results when they are created through instantiation of generic types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">spread</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">t</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">u</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { ...</span><span style="color: #001080">t</span><span style="color: #000000">, ...</span><span style="color: #001080">u</span><span style="color: #000000"> }; </span><span style="color: #008000">// T & U</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: { </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: { </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">c</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s1</span><span style="color: #000000"> = { ...</span><span style="color: #001080">x</span><span style="color: #000000">, ...</span><span style="color: #001080">y</span><span style="color: #000000"> }; </span><span style="color: #008000">// { a: string, b: string, c: boolean }</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s2</span><span style="color: #000000"> = </span><span style="color: #795E26">spread</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">); </span><span style="color: #008000">// { a: string, b: number } & { b: string, c: boolean }</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b1</span><span style="color: #000000"> = </span><span style="color: #001080">s1</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b2</span><span style="color: #000000"> = </span><span style="color: #001080">s2</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// number & string</span></div></code></div></pre>
<h2 id="generic-object-rest-variables-and-parameters" style="position:relative;"><a href="#generic-object-rest-variables-and-parameters" aria-label="generic object rest variables and parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic object rest variables and parameters</h2>
<p>TypeScript 3.2 also allows destructuring a rest binding from a generic variable. This is achieved by using the predefined <code>Pick</code> and <code>Exclude</code> helper types from <code>lib.d.ts</code>, and using the generic type in question as well as the names of the other bindings in the destructuring pattern.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">excludeTag</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> { </span><span style="color: #001080">tag</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> { </span><span style="color: #001080">tag</span><span style="color: #000000">, ...</span><span style="color: #001080">rest</span><span style="color: #000000"> } = </span><span style="color: #001080">obj</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">rest</span><span style="color: #000000">; </span><span style="color: #008000">// Pick&lt;T, Exclude&lt;keyof T, "tag"&gt;&gt;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">taggedPoint</span><span style="color: #000000"> = { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">20</span><span style="color: #000000">, </span><span style="color: #001080">tag:</span><span style="color: #000000"> </span><span style="color: #A31515">"point"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">point</span><span style="color: #000000"> = </span><span style="color: #795E26">excludeTag</span><span style="color: #000000">(</span><span style="color: #001080">taggedPoint</span><span style="color: #000000">); </span><span style="color: #008000">// { x: number, y: number }</span></div></code></div></pre>
<h2 id="bigint" style="position:relative;"><a href="#bigint" aria-label="bigint permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>BigInt</h2>
<p>BigInts are part of an upcoming proposal in ECMAScript that allow us to model theoretically arbitrarily large integers.
TypeScript 3.2 brings type-checking for BigInts, as well as support for emitting BigInt literals when targeting <code>esnext</code>.</p>
<p>BigInt support in TypeScript introduces a new primitive type called the <code>bigint</code> (all lowercase).
You can get a <code>bigint</code> by calling the <code>BigInt()</code> function or by writing out a BigInt literal by adding an <code>n</code> to the end of any integer numeric literal:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">bigint</span><span style="color: #000000"> = </span><span style="color: #1C6277">BigInt</span><span style="color: #000000">(</span><span style="color: #098658">100</span><span style="color: #000000">); </span><span style="color: #008000">// the BigInt function</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">bar</span><span style="color: #000000">: </span><span style="color: #1C6277">bigint</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #0000FF">n</span><span style="color: #000000">; </span><span style="color: #008000">// a BigInt literal</span></div><div class='line'></div><div class='line'><span style="color: #008000">// *Slaps roof of fibonacci function*</span></div><div class='line'><span style="color: #008000">// This bad boy returns ints that can get *so* big!</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">fibonacci</span><span style="color: #000000">(</span><span style="color: #001080">n</span><span style="color: #000000">: </span><span style="color: #1C6277">bigint</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #0000FF">n</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">last</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #0000FF">n</span><span style="color: #000000">, </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #0000FF">n</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #001080">n</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">current</span><span style="color: #000000"> = </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">result</span><span style="color: #000000"> += </span><span style="color: #001080">last</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">last</span><span style="color: #000000"> = </span><span style="color: #001080">current</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">fibonacci</span><span style="color: #000000">(</span><span style="color: #098658">10000</span><span style="color: #0000FF">n</span><span style="color: #000000">);</span></div></code></div></pre>
<p>While you might imagine close interaction between <code>number</code> and <code>bigint</code>, the two are separate domains.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">bar</span><span style="color: #000000">: </span><span style="color: #1C6277">bigint</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #001080">bar</span><span style="color: #000000">; </span><span style="color: #008000">// error: Type 'bigint' is not assignable to type 'number'.</span></div><div class='line'><span style="color: #001080">bar</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000">; </span><span style="color: #008000">// error: Type 'number' is not assignable to type 'bigint'.</span></div></code></div></pre>
<p>As specified in ECMAScript, mixing <code>number</code>s and <code>bigint</code>s in arithmetic operations is an error.
You’ll have to explicitly convert values to <code>BigInt</code>s.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #098658">3.141592</span><span style="color: #000000"> * </span><span style="color: #098658">10000</span><span style="color: #0000FF">n</span><span style="color: #000000">); </span><span style="color: #008000">// error</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #098658">3145</span><span style="color: #000000"> * </span><span style="color: #098658">10</span><span style="color: #0000FF">n</span><span style="color: #000000">); </span><span style="color: #008000">// error</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #1C6277">BigInt</span><span style="color: #000000">(</span><span style="color: #098658">3145</span><span style="color: #000000">) * </span><span style="color: #098658">10</span><span style="color: #0000FF">n</span><span style="color: #000000">); </span><span style="color: #008000">// okay!</span></div></code></div></pre>
<p>Also important to note is that <code>bigint</code>s produce a new string when using the <code>typeof</code> operator: the string <code>"bigint"</code>.
Thus, TypeScript correctly narrows using <code>typeof</code> as you’d expect.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">whatKindOfNumberIsIt</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">bigint</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"bigint"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"'x' is a bigint!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"'x' is a floating-point number"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>We’d like to extend a huge thanks to <a href="https://github.com/calebsander">Caleb Sander</a> for all the work on this feature.
We’re grateful for the contribution, and we’re sure our users are too!</p>
<h3 id="caveats-4" style="position:relative;"><a href="#caveats-4" aria-label="caveats 4 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h3>
<p>As we mentioned, BigInt support is only available for the <code>esnext</code> target.
It may not be obvious, but because BigInts have different behavior for mathematical operators like <code>+</code>, <code>-</code>, <code>*</code>, etc., providing functionality for older targets where the feature doesn’t exist (like <code>es2017</code> and below) would involve rewriting each of these operations.
TypeScript would need to dispatch to the correct behavior depending on the type, and so every addition, string concatenation, multiplication, etc. would involve a function call.</p>
<p>For that reason, we have no immediate plans to provide downleveling support.
On the bright side, Node 11 and newer versions of Chrome already support this feature, so you’ll be able to use BigInts there when targeting <code>esnext</code>.</p>
<p>Certain targets may include a polyfill or BigInt-like runtime object.
For those purposes you may want to add <code>esnext.bigint</code> to the <a href="/tsconfig#lib"><code>lib</code></a> setting in your compiler options.</p>
<h2 id="non-unit-types-as-union-discriminants" style="position:relative;"><a href="#non-unit-types-as-union-discriminants" aria-label="non unit types as union discriminants permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Non-unit types as union discriminants</h2>
<p>TypeScript 3.2 makes narrowing easier by relaxing rules for what it considers a discriminant property.
Common properties of unions are now considered discriminants as long as they contain <em>some</em> singleton type (e.g. a string literal, <code>null</code>, or <code>undefined</code>), and they contain no generics.</p>
<p>As a result, TypeScript 3.2 considers the <code>error</code> property in the following example to be a discriminant, whereas before it wouldn’t since <code>Error</code> isn’t a singleton type.
Thanks to this, narrowing works correctly in the body of the <code>unwrap</code> function.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Result</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { </span><span style="color: #001080">error</span><span style="color: #000000">: </span><span style="color: #1C6277">Error</span><span style="color: #000000">; </span><span style="color: #001080">data</span><span style="color: #000000">: </span><span style="color: #1C6277">null</span><span style="color: #000000"> } | { </span><span style="color: #001080">error</span><span style="color: #000000">: </span><span style="color: #1C6277">null</span><span style="color: #000000">; </span><span style="color: #001080">data</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">unwrap</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">result</span><span style="color: #000000">: </span><span style="color: #1C6277">Result</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">error</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Here 'error' is non-null</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">error</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Now 'data' is non-null</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #001080">data</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="tsconfigjson-inheritance-via-nodejs-packages" style="position:relative;"><a href="#tsconfigjson-inheritance-via-nodejs-packages" aria-label="tsconfigjson inheritance via nodejs packages permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>tsconfig.json</code> inheritance via Node.js packages</h2>
<p>TypeScript 3.2 now resolves <code>tsconfig.json</code>s from <code>node_modules</code>. When using a bare path for the <code>extends</code> field in <code>tsconfig.json</code>, TypeScript will dive into <code>node_modules</code> packages for us.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#extends'><data-lsp lsp="Specify one or more path or node module references to base configuration files from which settings are inherited.">extends</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"@my-team/tsconfig-base"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#include'><data-lsp lsp="Specify a list of glob patterns that match files to be included in compilation.">include</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"./**/*"</span><span style="color: #000000">],</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Override certain options on a project-by-project basis.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#strictBindCallApply'><data-lsp lsp="Check that the arguments for `bind`, `call`, and `apply` methods match the original function.">strictBindCallApply</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Here, TypeScript will climb up <code>node_modules</code> folders looking for a <code>@my-team/tsconfig-base</code> package. For each of those packages, TypeScript will first check whether <code>package.json</code> contains a <code>"tsconfig"</code> field, and if it does, TypeScript will try to load a configuration file from that field. If neither exists, TypeScript will try to read from a <code>tsconfig.json</code> at the root. This is similar to the lookup process for <code>.js</code> files in packages that Node uses, and the <code>.d.ts</code> lookup process that TypeScript already uses.</p>
<p>This feature can be extremely useful for bigger organizations, or projects with lots of distributed dependencies.</p>
<h2 id="the-new---showconfig-flag" style="position:relative;"><a href="#the-new---showconfig-flag" aria-label="the new   showconfig flag permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The new <code>--showConfig</code> flag</h2>
<p><code>tsc</code>, the TypeScript compiler, supports a new flag called <code>--showConfig</code>.
When running <code>tsc --showConfig</code>, TypeScript will calculate the effective <code>tsconfig.json</code> (after calculating options inherited from the <code>extends</code> field) and print that out.
This can be useful for diagnosing configuration issues in general.</p>
<h2 id="objectdefineproperty-declarations-in-javascript" style="position:relative;"><a href="#objectdefineproperty-declarations-in-javascript" aria-label="objectdefineproperty declarations in javascript permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Object.defineProperty</code> declarations in JavaScript</h2>
<p>When writing in JavaScript files (using <a href="/tsconfig#allowJs"><code>allowJs</code></a>), TypeScript now recognizes declarations that use <code>Object.defineProperty</code>.
This means you’ll get better completions, and stronger type-checking when enabling type-checking in JavaScript files (by turning on the <a href="/tsconfig#checkJs"><code>checkJs</code></a> option or adding a <code>// @ts-check</code> comment to the top of your file).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #008000">// @ts-check</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000"> = {};</span></div><div class='line'><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #795E26">defineProperty</span><span style="color: #000000">(</span><span style="color: #001080">obj</span><span style="color: #000000">, </span><span style="color: #A31515">"x"</span><span style="color: #000000">, { </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #001080">writable:</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000"> });</span></div><div class='line'></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">toLowercase</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #008000">//    ~~~~~~~~~~~</span></div><div class='line'><span style="color: #008000">//    error:</span></div><div class='line'><span style="color: #008000">//     Property 'toLowercase' does not exist on type 'string'.</span></div><div class='line'><span style="color: #008000">//     Did you mean 'toLowerCase'?</span></div><div class='line'></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"world"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//  ~</span></div><div class='line'><span style="color: #008000">//  error:</span></div><div class='line'><span style="color: #008000">//   Cannot assign to 'x' because it is a read-only property.</span></div></code></div></pre>
<h2 id="typescript-31" style="position:relative;"><a href="#typescript-31" aria-label="typescript 31 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.1</h2>
<h2 id="mapped-types-on-tuples-and-arrays" style="position:relative;"><a href="#mapped-types-on-tuples-and-arrays" aria-label="mapped types on tuples and arrays permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mapped types on tuples and arrays</h2>
<p>In TypeScript 3.1, mapped object types<sup><a href="#ts-3-1-only-homomorphic">[1]</a></sup> over tuples and arrays now produce new tuples/arrays, rather than creating a new type where members like <code>push()</code>, <code>pop()</code>, and <code>length</code> are converted.
For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">MapToPromise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]&gt; };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Coordinate</span><span style="color: #000000"> = [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">PromiseCoordinate</span><span style="color: #000000"> = </span><span style="color: #1C6277">MapToPromise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Coordinate</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// [Promise&lt;number&gt;, Promise&lt;number&gt;]</span></div></code></div></pre>
<p><code>MapToPromise</code> takes a type <code>T</code>, and when that type is a tuple like <code>Coordinate</code>, only the numeric properties are converted.
In <code>[number, number]</code>, there are two numerically named properties: <code>0</code> and <code>1</code>.
When given a tuple like that, <code>MapToPromise</code> will create a new tuple where the <code>0</code> and <code>1</code> properties are <code>Promise</code>s of the original type.
So the resulting type <code>PromiseCoordinate</code> ends up with the type <code>[Promise&#x3C;number>, Promise&#x3C;number>]</code>.</p>
<h2 id="properties-declarations-on-functions" style="position:relative;"><a href="#properties-declarations-on-functions" aria-label="properties declarations on functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Properties declarations on functions</h2>
<p>TypeScript 3.1 brings the ability to define properties on function declarations and <code>const</code>-declared functons, simply by assigning to properties on these functions in the same scope.
This allows us to write canonical JavaScript code without resorting to <code>namespace</code> hacks.
For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">readImage</span><span style="color: #000000">(</span><span style="color: #001080">path</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #795E26">callback</span><span style="color: #000000">: (</span><span style="color: #001080">err</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">, </span><span style="color: #001080">image</span><span style="color: #000000">: </span><span style="color: #1C6277">Image</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #001080">readImage</span><span style="color: #000000">.</span><span style="color: #795E26">sync</span><span style="color: #000000"> = (</span><span style="color: #001080">path</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">contents</span><span style="color: #000000"> = </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">readFileSync</span><span style="color: #000000">(</span><span style="color: #001080">path</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">decodeImageSync</span><span style="color: #000000">(</span><span style="color: #001080">contents</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<p>Here, we have a function <code>readImage</code> which reads an image in a non-blocking asynchronous way.
In addition to <code>readImage</code>, we’ve provided a convenience function on <code>readImage</code> itself called <code>readImage.sync</code>.</p>
<p>While ECMAScript exports are often a better way of providing this functionality, this new support allows code written in this style to “just work” TypeScript.
Additionaly, this approach for property declarations allows us to express common patterns like <code>defaultProps</code> and <code>propTypes</code> on React stateless function components (SFCs).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">FooComponent</span><span style="color: #000000"> = ({ </span><span style="color: #001080">name</span><span style="color: #000000"> }) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> &lt;</span><span style="color: #1C6277">div</span><span style="color: #000000">&gt;</span><span style="color: #001080">Hello</span><span style="color: #000000">! </span><span style="color: #0070C1">I</span><span style="color: #000000"> </span><span style="color: #001080">am</span><span style="color: #000000"> {</span><span style="color: #001080">name</span><span style="color: #000000">}&lt;/</span><span style="color: #001080">div</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #001080">FooComponent</span><span style="color: #000000">.</span><span style="color: #001080">defaultProps</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"(anonymous)"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<!--
fs.readFile(path, (err, data) => {
        if (err) callback(err, undefined);
        else decodeImage(data, (err, image) => {
            if (err) callback(err, undefined);
            else callback(undefined, image);
        });
    });
-->
<hr>
<p><sup id="ts-3-1-only-homomorphic">[1]</sup> More specifically, homomorphic mapped types like in the above form.</p>
<h2 id="version-selection-with-typesversions" style="position:relative;"><a href="#version-selection-with-typesversions" aria-label="version selection with typesversions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Version selection with <code>typesVersions</code></h2>
<p>Feedback from our community, as well as our own experience, has shown us that leveraging the newest TypeScript features while also accomodating users on the older versions are difficult.
TypeScript introduces a new feature called <code>typesVersions</code> to help accommodate these scenarios.</p>
<p>When using Node module resolution in TypeScript 3.1, when TypeScript cracks open a <code>package.json</code> file to figure out which files it needs to read, it first looks at a new field called <code>typesVersions</code>.
A <code>package.json</code> with a <code>typesVersions</code> field might look like this:</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"name"</span><span style="color: #000000">: </span><span style="color: #A31515">"package-name"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"version"</span><span style="color: #000000">: </span><span style="color: #A31515">"1.0"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#types'><data-lsp lsp="Specify type package names to be included without being referenced in a source file.">types</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./index.d.ts"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"typesVersions"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"&gt;=3.1"</span><span style="color: #000000">: { </span><span style="color: #0451A5">"*"</span><span style="color: #000000">: [</span><span style="color: #A31515">"ts3.1/*"</span><span style="color: #000000">] }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This <code>package.json</code> tells TypeScript to check whether the current version of TypeScript is running.
If it’s 3.1 or later, it figures out the path you’ve imported relative to the package, and reads from the package’s <code>ts3.1</code> folder.
That’s what that <code>{ "*": ["ts3.1/*"] }</code> means - if you’re familiar with path mapping today, it works exactly like that.</p>
<p>So in the above example, if we’re importing from <code>"package-name"</code>, we’ll try to resolve from <code>[...]/node_modules/package-name/ts3.1/index.d.ts</code> (and other relevant paths) when running in TypeScript 3.1.
If we import from <code>package-name/foo</code>, we’ll try to look for <code>[...]/node_modules/package-name/ts3.1/foo.d.ts</code> and <code>[...]/node_modules/package-name/ts3.1/foo/index.d.ts</code>.</p>
<p>What if we’re not running in TypeScript 3.1 in this example?
Well, if none of the fields in <code>typesVersions</code> get matched, TypeScript falls back to the <code>types</code> field, so here TypeScript 3.0 and earlier will be redirected to <code>[...]/node_modules/package-name/index.d.ts</code>.</p>
<h3 id="matching-behavior" style="position:relative;"><a href="#matching-behavior" aria-label="matching behavior permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Matching behavior</h3>
<p>The way that TypeScript decides on whether a version of the compiler &#x26; language matches is by using Node’s <a href="https://github.com/npm/node-semver#ranges">semver ranges</a>.</p>
<h3 id="multiple-fields" style="position:relative;"><a href="#multiple-fields" aria-label="multiple fields permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple fields</h3>
<p><code>typesVersions</code> can support multiple fields where each field name is specified by the range to match on.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"name"</span><span style="color: #000000">: </span><span style="color: #A31515">"package-name"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"version"</span><span style="color: #000000">: </span><span style="color: #A31515">"1.0"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#types'><data-lsp lsp="Specify type package names to be included without being referenced in a source file.">types</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./index.d.ts"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"typesVersions"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"&gt;=3.2"</span><span style="color: #000000">: { </span><span style="color: #0451A5">"*"</span><span style="color: #000000">: [</span><span style="color: #A31515">"ts3.2/*"</span><span style="color: #000000">] },</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"&gt;=3.1"</span><span style="color: #000000">: { </span><span style="color: #0451A5">"*"</span><span style="color: #000000">: [</span><span style="color: #A31515">"ts3.1/*"</span><span style="color: #000000">] }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Since ranges have the potential to overlap, determining which redirect applies is order-specific.
That means in the above example, even though both the <code>>=3.2</code> and the <code>>=3.1</code> matchers support TypeScript 3.2 and above, reversing the order could have different behavior, so the above sample would not be equivalent to the following.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"name"</span><span style="color: #000000">: </span><span style="color: #A31515">"package-name"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"version"</span><span style="color: #000000">: </span><span style="color: #A31515">"1.0"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#types'><data-lsp lsp="Specify type package names to be included without being referenced in a source file.">types</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./index.d.ts"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"typesVersions"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// NOTE: this doesn't work!</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"&gt;=3.1"</span><span style="color: #000000">: { </span><span style="color: #0451A5">"*"</span><span style="color: #000000">: [</span><span style="color: #A31515">"ts3.1/*"</span><span style="color: #000000">] },</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"&gt;=3.2"</span><span style="color: #000000">: { </span><span style="color: #0451A5">"*"</span><span style="color: #000000">: [</span><span style="color: #A31515">"ts3.2/*"</span><span style="color: #000000">] }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="typescript-30" style="position:relative;"><a href="#typescript-30" aria-label="typescript 30 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 3.0</h2>
<h2 id="tuples-in-rest-parameters-and-spread-expressions" style="position:relative;"><a href="#tuples-in-rest-parameters-and-spread-expressions" aria-label="tuples in rest parameters and spread expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tuples in rest parameters and spread expressions</h2>
<p>TypeScript 3.0 adds support to multiple new capabilities to interact with function parameter lists as tuple types.
TypeScript 3.0 adds support for:</p>
<ul>
<li><a href="#rest-parameters-with-tuple-types">Expansion of rest parameters with tuple types into discrete parameters.</a></li>
<li><a href="#spread-expressions-with-tuple-types">Expansion of spread expressions with tuple types into discrete arguments.</a></li>
<li><a href="#generic-rest-parameters">Generic rest parameters and corresponding inference of tuple types.</a></li>
<li><a href="#optional-elements-in-tuple-types">Optional elements in tuple types.</a></li>
<li><a href="#rest-elements-in-tuple-types">Rest elements in tuple types.</a></li>
</ul>
<p>With these features it becomes possible to strongly type a number of higher-order functions that transform functions and their parameter lists.</p>
<h3 id="rest-parameters-with-tuple-types" style="position:relative;"><a href="#rest-parameters-with-tuple-types" aria-label="rest parameters with tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rest parameters with tuple types</h3>
<p>When a rest parameter has a tuple type, the tuple type is expanded into a sequence of discrete parameters.
For example the following two declarations are equivalent:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">: [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">]): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">args_0</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">args_1</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">args_2</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="spread-expressions-with-tuple-types" style="position:relative;"><a href="#spread-expressions-with-tuple-types" aria-label="spread expressions with tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Spread expressions with tuple types</h3>
<p>When a function call includes a spread expression of a tuple type as the last argument, the spread expression corresponds to a sequence of discrete arguments of the tuple element types.</p>
<p>Thus, the following calls are equivalent:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">args</span><span style="color: #000000">: [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">] = [</span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">args</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">], </span><span style="color: #001080">args</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">], </span><span style="color: #001080">args</span><span style="color: #000000">[</span><span style="color: #098658">2</span><span style="color: #000000">]);</span></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">);</span></div></code></div></pre>
<h3 id="generic-rest-parameters" style="position:relative;"><a href="#generic-rest-parameters" aria-label="generic rest parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic rest parameters</h3>
<p>A rest parameter is permitted to have a generic type that is constrained to an array type, and type inference can infer tuple types for such generic rest parameters. This enables higher-order capturing and spreading of partial parameter lists:</p>
<h5 id="example" style="position:relative;"><a href="#example" aria-label="example permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">bind</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">[], </span><span style="color: #1C6277">V</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, ...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">V</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span></div><div class='line'><span style="color: #000000">): (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">V</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f3</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">z</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f2</span><span style="color: #000000"> = </span><span style="color: #795E26">bind</span><span style="color: #000000">(</span><span style="color: #001080">f3</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">); </span><span style="color: #008000">// (y: string, z: boolean) =&gt; void</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f1</span><span style="color: #000000"> = </span><span style="color: #795E26">bind</span><span style="color: #000000">(</span><span style="color: #001080">f2</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">); </span><span style="color: #008000">// (z: boolean) =&gt; void</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f0</span><span style="color: #000000"> = </span><span style="color: #795E26">bind</span><span style="color: #000000">(</span><span style="color: #001080">f1</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">); </span><span style="color: #008000">// () =&gt; void</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f3</span><span style="color: #000000">(</span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">f2</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">f1</span><span style="color: #000000">(</span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">f0</span><span style="color: #000000">();</span></div></code></div></pre>
<p>In the declaration of <code>f2</code> above, type inference infers types <code>number</code>, <code>[string, boolean]</code> and <code>void</code> for <code>T</code>, <code>U</code> and <code>V</code> respectively.</p>
<p>Note that when a tuple type is inferred from a sequence of parameters and later expanded into a parameter list, as is the case for <code>U</code>, the original parameter names are used in the expansion (however, the names have no semantic meaning and are not otherwise observable).</p>
<h3 id="optional-elements-in-tuple-types" style="position:relative;"><a href="#optional-elements-in-tuple-types" aria-label="optional elements in tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional elements in tuple types</h3>
<p>Tuple types now permit a <code>?</code> postfix on element types to indicate that the element is optional:</p>
<h5 id="example-1" style="position:relative;"><a href="#example-1" aria-label="example 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">t</span><span style="color: #000000">: [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">?, </span><span style="color: #1C6277">boolean</span><span style="color: #000000">?];</span></div><div class='line'><span style="color: #001080">t</span><span style="color: #000000"> = [</span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">t</span><span style="color: #000000"> = [</span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">t</span><span style="color: #000000"> = [</span><span style="color: #098658">42</span><span style="color: #000000">];</span></div></code></div></pre>
<p>In <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode, a <code>?</code> modifier automatically includes <code>undefined</code> in the element type, similar to optional parameters.</p>
<p>A tuple type permits an element to be omitted if it has a postfix <code>?</code> modifier on its type and all elements to the right of it also have <code>?</code> modifiers.</p>
<p>When tuple types are inferred for rest parameters, optional parameters in the source become optional tuple elements in the inferred type.</p>
<p>The <code>length</code> property of a tuple type with optional elements is a union of numeric literal types representing the possible lengths.
For example, the type of the <code>length</code> property in the tuple type <code>[number, string?, boolean?]</code> is <code>1 | 2 | 3</code>.</p>
<h3 id="rest-elements-in-tuple-types" style="position:relative;"><a href="#rest-elements-in-tuple-types" aria-label="rest elements in tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rest elements in tuple types</h3>
<p>The last element of a tuple type can be a rest element of the form <code>...X</code>, where <code>X</code> is an array type.
A rest element indicates that the tuple type is open-ended and may have zero or more additional elements of the array element type.
For example, <code>[number, ...string[]]</code> means tuples with a <code>number</code> element followed by any number of <code>string</code> elements.</p>
<h5 id="example-2" style="position:relative;"><a href="#example-2" aria-label="example 2 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">tuple</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">[]&gt;(...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">args</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">numbers</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">[] = </span><span style="color: #795E26">getArrayOfNumbers</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">t1</span><span style="color: #000000"> = </span><span style="color: #795E26">tuple</span><span style="color: #000000">(</span><span style="color: #A31515">"foo"</span><span style="color: #000000">, </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">); </span><span style="color: #008000">// [string, number, boolean]</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">t2</span><span style="color: #000000"> = </span><span style="color: #795E26">tuple</span><span style="color: #000000">(</span><span style="color: #A31515">"bar"</span><span style="color: #000000">, ...</span><span style="color: #001080">numbers</span><span style="color: #000000">); </span><span style="color: #008000">// [string, ...number[]]</span></div></code></div></pre>
<p>The type of the <code>length</code> property of a tuple type with a rest element is <code>number</code>.</p>
<h2 id="new-unknown-top-type" style="position:relative;"><a href="#new-unknown-top-type" aria-label="new unknown top type permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>unknown</code> top type</h2>
<p>TypeScript 3.0 introduces a new top type <code>unknown</code>.
<code>unknown</code> is the type-safe counterpart of <code>any</code>.
Anything is assignable to <code>unknown</code>, but <code>unknown</code> isn’t assignable to anything but itself and <code>any</code> without a type assertion or a control flow based narrowing.
Likewise, no operations are permitted on an <code>unknown</code> without first asserting or narrowing to a more specific type.</p>
<h5 id="example-3" style="position:relative;"><a href="#example-3" aria-label="example 3 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// In an intersection everything absorbs unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T00</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">null</span><span style="color: #000000">; </span><span style="color: #008000">// null</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T01</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// undefined</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T02</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">null</span><span style="color: #000000"> & </span><span style="color: #1C6277">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// null & undefined (which becomes never)</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T03</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T04</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">string</span><span style="color: #000000">[]; </span><span style="color: #008000">// string[]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T05</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">unknown</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T06</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> & </span><span style="color: #1C6277">any</span><span style="color: #000000">; </span><span style="color: #008000">// any</span></div><div class='line'></div><div class='line'><span style="color: #008000">// In a union an unknown absorbs everything</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T10</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T11</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T12</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T13</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T14</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">[]; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T15</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">unknown</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T16</span><span style="color: #000000"> = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> | </span><span style="color: #1C6277">any</span><span style="color: #000000">; </span><span style="color: #008000">// any</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type variable and unknown in union and intersection</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T20</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> & {}; </span><span style="color: #008000">// T & {}</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T21</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> | {}; </span><span style="color: #008000">// T | {}</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T22</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">unknown</span><span style="color: #000000">; </span><span style="color: #008000">// T</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T23</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">unknown</span><span style="color: #000000">; </span><span style="color: #008000">// unknown</span></div><div class='line'></div><div class='line'><span style="color: #008000">// unknown in conditional types</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T30</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> ? </span><span style="color: #1C6277">true</span><span style="color: #000000"> : </span><span style="color: #1C6277">false</span><span style="color: #000000">; </span><span style="color: #008000">// Deferred</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T31</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> ? </span><span style="color: #1C6277">true</span><span style="color: #000000"> : </span><span style="color: #1C6277">false</span><span style="color: #000000">; </span><span style="color: #008000">// Deferred (so it distributes)</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T32</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">never</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> ? </span><span style="color: #1C6277">true</span><span style="color: #000000"> : </span><span style="color: #1C6277">false</span><span style="color: #000000">; </span><span style="color: #008000">// true</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T33</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">never</span><span style="color: #000000"> ? </span><span style="color: #1C6277">true</span><span style="color: #000000"> : </span><span style="color: #1C6277">false</span><span style="color: #000000">; </span><span style="color: #008000">// Deferred</span></div><div class='line'></div><div class='line'><span style="color: #008000">// keyof unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T40</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">; </span><span style="color: #008000">// string | number | symbol</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T41</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">unknown</span><span style="color: #000000">; </span><span style="color: #008000">// never</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Only equality operators are allowed with unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f10</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> == </span><span style="color: #098658">5</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> !== </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> &gt;= </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> + </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> * </span><span style="color: #098658">2</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  -</span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  +</span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// No property accesses, element accesses, or function calls</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f11</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">5</span><span style="color: #000000">]; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">x</span><span style="color: #000000">(); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">x</span><span style="color: #000000">(); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// typeof, instanceof, and user defined type predicates</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">isFunction</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">): </span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">Function</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f20</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000"> || </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"number"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// string | number</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #795E26">isFunction</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">)) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Function</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Homomorphic mapped type over unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T50</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">number</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T51</span><span style="color: #000000"> = </span><span style="color: #1C6277">T50</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">any</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// { [x: string]: number }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T52</span><span style="color: #000000"> = </span><span style="color: #1C6277">T50</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">unknown</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// {}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Anything is assignable to unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f21</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">pAny</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">, </span><span style="color: #001080">pNever</span><span style="color: #000000">: </span><span style="color: #1C6277">never</span><span style="color: #000000">, </span><span style="color: #001080">pT</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">123</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">pAny</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">pNever</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">pT</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// unknown assignable only to itself and any</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f22</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v1</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v2</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v3</span><span style="color: #000000">: </span><span style="color: #1C6277">object</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v4</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v5</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[] = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v6</span><span style="color: #000000">: {} = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v7</span><span style="color: #000000">: {} | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type parameter 'T extends unknown' not related to object</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f23</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">unknown</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">object</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Anything but primitive assignable to { [x: string]: unknown }</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f24</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: { [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> }) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = {};</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">5</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">123</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Locals of type unknown always considered initialized</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f25</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Spread of unknown causes result to be unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f26</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: {}, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">, </span><span style="color: #001080">z</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">o1</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">, ...</span><span style="color: #001080">x</span><span style="color: #000000"> }; </span><span style="color: #008000">// { a: number }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">o2</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">, ...</span><span style="color: #001080">x</span><span style="color: #000000">, ...</span><span style="color: #001080">y</span><span style="color: #000000"> }; </span><span style="color: #008000">// unknown</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">o3</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">, ...</span><span style="color: #001080">x</span><span style="color: #000000">, ...</span><span style="color: #001080">y</span><span style="color: #000000">, ...</span><span style="color: #001080">z</span><span style="color: #000000"> }; </span><span style="color: #008000">// any</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Functions with unknown return type don't need return expressions</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f27</span><span style="color: #000000">(): </span><span style="color: #1C6277">unknown</span><span style="color: #000000"> {}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Rest type cannot be created from unknown</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f28</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> { ...</span><span style="color: #001080">a</span><span style="color: #000000"> } = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Class properties of type unknown don't need definite assignment</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C1</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">unknown</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">c</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="support-for-defaultprops-in-jsx" style="position:relative;"><a href="#support-for-defaultprops-in-jsx" aria-label="support for defaultprops in jsx permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>defaultProps</code> in JSX</h2>
<p>TypeScript 2.9 and earlier didn’t leverage <a href="https://reactjs.org/docs/typechecking-with-proptypes.html#default-prop-values">React <code>defaultProps</code></a> declarations inside JSX components.
Users would often have to declare properties optional and use non-null assertions inside of <code>render</code>, or they’d use type-assertions to fix up the type of the component before exporting it.</p>
<p>TypeScript 3.0 adds supports a new type alias in the <code>JSX</code> namespace called <code>LibraryManagedAttributes</code>.
This helper type defines a transformation on the component’s <code>Props</code> type, before using to check a JSX expression targeting it; thus allowing customization like: how conflicts between provided props and inferred props are handled, how inferences are mapped, how optionality is handled, and how inferences from differing places should be combined.</p>
<p>In short using this general type, we can model React’s specific behavior for things like <code>defaultProps</code> and, to some extent, <code>propTypes</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Props</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Greet</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">React</span><span style="color: #000000">.</span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Props</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">render</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">name</span><span style="color: #000000"> } = </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">props</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #800000">&lt;div&gt;</span><span style="color: #000000">Hello $</span><span style="color: #0000FF">{</span><span style="color: #001080">name</span><span style="color: #000000FF">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000FF">()</span><span style="color: #0000FF">}</span><span style="color: #000000">!</span><span style="color: #800000">&lt;/div&gt;</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #001080">defaultProps</span><span style="color: #000000"> = { </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"world"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type-checks! No type assertions needed!</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">el</span><span style="color: #000000"> = </span><span style="color: #800000">&lt;</span><span style="color: #1C6277">Greet</span><span style="color: #000000"> </span><span style="color: #800000">/&gt;</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="caveats-5" style="position:relative;"><a href="#caveats-5" aria-label="caveats 5 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h3>
<h4 id="explicit-types-on-defaultprops" style="position:relative;"><a href="#explicit-types-on-defaultprops" aria-label="explicit types on defaultprops permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Explicit types on <code>defaultProps</code></h4>
<p>The default-ed properties are inferred from the <code>defaultProps</code> property type. If an explicit type annotation is added, e.g. <code>static defaultProps: Partial&#x3C;Props>;</code> the compiler will not be able to identify which properties have defaults (since the type of <code>defaultProps</code> include all properties of <code>Props</code>).</p>
<p>Use <code>static defaultProps: Pick&#x3C;Props, "name">;</code> as an explicit type annotation instead, or do not add a type annotation as done in the example above.</p>
<p>For stateless function components (SFCs) use ES2015 default initializers for SFCs:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">Greet</span><span style="color: #000000">({ </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"world"</span><span style="color: #000000"> }: </span><span style="color: #1C6277">Props</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #800000">&lt;div&gt;</span><span style="color: #000000">Hello $</span><span style="color: #0000FF">{</span><span style="color: #001080">name</span><span style="color: #000000FF">.</span><span style="color: #795E26">toUpperCase</span><span style="color: #000000FF">()</span><span style="color: #0000FF">}</span><span style="color: #000000">!</span><span style="color: #800000">&lt;/div&gt;</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h5 id="changes-to-typesreact" style="position:relative;"><a href="#changes-to-typesreact" aria-label="changes to typesreact permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Changes to <code>@types/React</code></h5>
<p>Corresponding changes to add <code>LibraryManagedAttributes</code> definition to the <code>JSX</code> namespace in <code>@types/React</code> are still needed.
Keep in mind that there are some limitations.</p>
<h2 id="-reference-lib--reference-directives" style="position:relative;"><a href="#-reference-lib--reference-directives" aria-label=" reference lib  reference directives permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>/// &#x3C;reference lib="..." /></code> reference directives</h2>
<p>TypeScript adds a new triple-slash-reference directive (<code>/// &#x3C;reference lib="name" /></code>), allowing a file to explicitly include an existing built-in <em>lib</em> file.</p>
<p>Built-in <em>lib</em> files are referenced in the same fashion as the <a href="/tsconfig#lib"><code>lib</code></a> compiler option in <em>tsconfig.json</em> (e.g. use <code>lib="es2015"</code> and not <code>lib="lib.es2015.d.ts"</code>, etc.).</p>
<p>For declaration file authors who rely on built-in types, e.g. DOM APIs or built-in JS run-time constructors like <code>Symbol</code> or <code>Iterable</code>, triple-slash-reference lib directives are the recommended. Previously these .d.ts files had to add forward/duplicate declarations of such types.</p>
<h5 id="example-4" style="position:relative;"><a href="#example-4" aria-label="example 4 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>Using <code>/// &#x3C;reference lib="es2017.string" /></code> to one of the files in a compilation is equivalent to compiling with <code>--lib es2017.string</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/// </span><span style="color: #800000">&lt;reference</span><span style="color: #008000"> </span><span style="color: #FF0000">lib</span><span style="color: #000000">=</span><span style="color: #A31515">"es2017.string"</span><span style="color: #008000"> </span><span style="color: #800000">/&gt;</span></div><div class='line'></div><div class='line'><span style="color: #A31515">"foo"</span><span style="color: #000000">.</span><span style="color: #795E26">padStart</span><span style="color: #000000">(</span><span style="color: #098658">4</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="typescript-29" style="position:relative;"><a href="#typescript-29" aria-label="typescript 29 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.9</h2>
<h2 id="support-number-and-symbol-named-properties-with-keyof-and-mapped-types" style="position:relative;"><a href="#support-number-and-symbol-named-properties-with-keyof-and-mapped-types" aria-label="support number and symbol named properties with keyof and mapped types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support <code>number</code> and <code>symbol</code> named properties with <code>keyof</code> and mapped types</h2>
<p>TypeScript 2.9 adds support for <code>number</code> and <code>symbol</code> named properties in index types and mapped types.
Previously, the <code>keyof</code> operator and mapped types only supported <code>string</code> named properties.</p>
<p>Changes include:</p>
<ul>
<li>An index type <code>keyof T</code> for some type <code>T</code> is a subtype of <code>string | number | symbol</code>.</li>
<li>A mapped type <code>{ [P in K]: XXX }</code> permits any <code>K</code> assignable to <code>string | number | symbol</code>.</li>
<li>In a <code>for...in</code> statement for an object of a generic type <code>T</code>, the inferred type of the iteration variable was previously <code>keyof T</code> but is now <code>Extract&#x3C;keyof T, string></code>. (In other words, the subset of <code>keyof T</code> that includes only string-like values.)</li>
</ul>
<p>Given an object type <code>X</code>, <code>keyof X</code> is resolved as follows:</p>
<ul>
<li>If <code>X</code> contains a string index signature, <code>keyof X</code> is a union of <code>string</code>, <code>number</code>, and the literal types representing symbol-like properties, otherwise</li>
<li>If <code>X</code> contains a numeric index signature, <code>keyof X</code> is a union of <code>number</code> and the literal types representing string-like and symbol-like properties, otherwise</li>
<li><code>keyof X</code> is a union of the literal types representing string-like, number-like, and symbol-like properties.</li>
</ul>
<p>Where:</p>
<ul>
<li>String-like properties of an object type are those declared using an identifier, a string literal, or a computed property name of a string literal type.</li>
<li>Number-like properties of an object type are those declared using a numeric literal or computed property name of a numeric literal type.</li>
<li>Symbol-like properties of an object type are those declared using a computed property name of a unique symbol type.</li>
</ul>
<p>In a mapped type <code>{ [P in K]: XXX }</code>, each string literal type in <code>K</code> introduces a property with a string name, each numeric literal type in <code>K</code> introduces a property with a numeric name, and each unique symbol type in <code>K</code> introduces a property with a unique symbol name.
Furthermore, if <code>K</code> includes type <code>string</code>, a string index signature is introduced, and if <code>K</code> includes type <code>number</code>, a numeric index signature is introduced.</p>
<h4 id="example-5" style="position:relative;"><a href="#example-5" aria-label="example 5 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c</span><span style="color: #000000"> = </span><span style="color: #A31515">"c"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">d</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">e</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #1C6277">E1</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">A</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">B</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">C</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #1C6277">E2</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">A</span><span style="color: #000000"> = </span><span style="color: #A31515">"A"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">B</span><span style="color: #000000"> = </span><span style="color: #A31515">"B"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">C</span><span style="color: #000000"> = </span><span style="color: #A31515">"C"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// String-like name</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #098658">5</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// Number-like name</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">c</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// String-like name</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">d</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// Number-like name</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">e</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// Symbol-like name</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #0070C1">E1</span><span style="color: #000000">.</span><span style="color: #0070C1">A</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// Number-like name</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #0070C1">E2</span><span style="color: #000000">.</span><span style="color: #0070C1">A</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// String-like name</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K1</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000">; </span><span style="color: #008000">// "a" | 5 | "c" | 10 | typeof e | E1.A | E2.A</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K2</span><span style="color: #000000"> = </span><span style="color: #1C6277">Extract</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "a" | "c" | E2.A</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K3</span><span style="color: #000000"> = </span><span style="color: #1C6277">Extract</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// 5 | 10 | E1.A</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K4</span><span style="color: #000000"> = </span><span style="color: #1C6277">Extract</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000">, </span><span style="color: #1C6277">symbol</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// typeof e</span></div></code></div></pre>
<p>Since <code>keyof</code> now reflects the presence of a numeric index signature by including type <code>number</code> in the key type, mapped types such as <code>Partial&#x3C;T></code> and <code>Readonly&#x3C;T></code> work correctly when applied to object types with numeric index signatures:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Arrayish</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">length</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ReadonlyArrayish</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Arrayish</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">map</span><span style="color: #000000">: </span><span style="color: #1C6277">ReadonlyArrayish</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">n</span><span style="color: #000000"> = </span><span style="color: #001080">map</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">map</span><span style="color: #000000">[</span><span style="color: #098658">123</span><span style="color: #000000">]; </span><span style="color: #008000">// Previously of type any (or an error with --noImplicitAny)</span></div></code></div></pre>
<p>Furthermore, with the <code>keyof</code> operator’s support for <code>number</code> and <code>symbol</code> named keys, it is now possible to abstract over access to properties of objects that are indexed by numeric literals (such as numeric enum types) and unique symbols.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #1C6277">Enum</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">A</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">B</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">C</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">enumToStringMap</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[Enum.</span><span style="color: #0070C1">A</span><span style="color: #001080">]:</span><span style="color: #000000"> </span><span style="color: #A31515">"Name A"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[Enum.</span><span style="color: #0070C1">B</span><span style="color: #001080">]:</span><span style="color: #000000"> </span><span style="color: #A31515">"Name B"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[Enum.</span><span style="color: #0070C1">C</span><span style="color: #001080">]:</span><span style="color: #000000"> </span><span style="color: #A31515">"Name C"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">sym1</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">sym2</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">sym3</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">symbolToNumberMap</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[sym1]:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[sym2]:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[sym3]:</span><span style="color: #000000"> </span><span style="color: #098658">3</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">KE</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">enumToStringMap</span><span style="color: #000000">; </span><span style="color: #008000">// Enum (i.e. Enum.A | Enum.B | Enum.C)</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">KS</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">symbolToNumberMap</span><span style="color: #000000">; </span><span style="color: #008000">// typeof sym1 | typeof sym2 | typeof sym3</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getValue</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000">[</span><span style="color: #001080">key</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x1</span><span style="color: #000000"> = </span><span style="color: #795E26">getValue</span><span style="color: #000000">(</span><span style="color: #001080">enumToStringMap</span><span style="color: #000000">, </span><span style="color: #001080">Enum</span><span style="color: #000000">.</span><span style="color: #0070C1">C</span><span style="color: #000000">); </span><span style="color: #008000">// Returns "Name C"</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x2</span><span style="color: #000000"> = </span><span style="color: #795E26">getValue</span><span style="color: #000000">(</span><span style="color: #001080">symbolToNumberMap</span><span style="color: #000000">, </span><span style="color: #001080">sym3</span><span style="color: #000000">); </span><span style="color: #008000">// Returns 3</span></div></code></div></pre>
<p>This is a breaking change; previously, the <code>keyof</code> operator and mapped types only supported <code>string</code> named properties.
Code that assumed values typed with <code>keyof T</code> were always <code>string</code>s, will now be flagged as error.</p>
<h4 id="example-6" style="position:relative;"><a href="#example-6" aria-label="example 6 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">useKey</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">o</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">k</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #001080">k</span><span style="color: #000000">; </span><span style="color: #008000">// Error: keyof T is not assignable to string</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h4 id="recommendations" style="position:relative;"><a href="#recommendations" aria-label="recommendations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Recommendations</h4>
<ul>
<li>
<p>If your functions are only able to handle string named property keys, use <code>Extract&#x3C;keyof T, string></code> in the declaration:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">useKey</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Extract</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;&gt;(</span><span style="color: #001080">o</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">k</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #001080">k</span><span style="color: #000000">; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
</li>
<li>
<p>If your functions are open to handling all property keys, then the changes should be done down-stream:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">useKey</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">o</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">k</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">symbol</span><span style="color: #000000"> = </span><span style="color: #001080">k</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
</li>
<li>
<p>Otherwise use <a href="/tsconfig#keyofStringsOnly"><code>keyofStringsOnly</code></a> compiler option to disable the new behavior.</p>
</li>
</ul>
<h2 id="generic-type-arguments-in-jsx-elements" style="position:relative;"><a href="#generic-type-arguments-in-jsx-elements" aria-label="generic type arguments in jsx elements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic type arguments in JSX elements</h2>
<p>JSX elements now allow passing type arguments to generic components.</p>
<h4 id="example-7" style="position:relative;"><a href="#example-7" aria-label="example 7 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">GenericComponent</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt; </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">React</span><span style="color: #000000">.</span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">P</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">internalProp</span><span style="color: #000000">: </span><span style="color: #1C6277">P</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Props</span><span style="color: #000000"> = { </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">x</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">GenericComponent</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Props</span><span style="color: #000000">&gt; </span><span style="color: #1C6277">a</span><span style="color: #000000">={</span><span style="color: #098658">10</span><span style="color: #000000">} </span><span style="color: #1C6277">b</span><span style="color: #000000">=</span><span style="color: #A31515">"hi"</span><span style="color: #000000"> /&gt;; </span><span style="color: #008000">// OK</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">y</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">GenericComponent</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Props</span><span style="color: #000000">&gt; </span><span style="color: #1C6277">a</span><span style="color: #000000">={</span><span style="color: #098658">10</span><span style="color: #000000">} </span><span style="color: #1C6277">b</span><span style="color: #000000">={</span><span style="color: #098658">20</span><span style="color: #000000">} /&gt;; </span><span style="color: #008000">// Error</span></div></code></div></pre>
<h2 id="generic-type-arguments-in-generic-tagged-templates" style="position:relative;"><a href="#generic-type-arguments-in-generic-tagged-templates" aria-label="generic type arguments in generic tagged templates permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic type arguments in generic tagged templates</h2>
<p>Tagged templates are a form of invocation introduced in ECMAScript 2015.
Like call expressions, generic functions may be used in a tagged template and TypeScript will infer the type arguments utilized.</p>
<p>TypeScript 2.9 allows passing generic type arguments to tagged template strings.</p>
<h4 id="example-8" style="position:relative;"><a href="#example-8" aria-label="example 8 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">styledComponent</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Props</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">strs</span><span style="color: #000000">: </span><span style="color: #1C6277">TemplateStringsArray</span></div><div class='line'><span style="color: #000000">): </span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Props</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">MyProps</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">styledComponent</span><span style="color: #A31515">&lt;</span><span style="color: #1C6277">MyProps</span><span style="color: #A31515">&gt;`</span></div><div class='line'><span style="color: #A31515">  font-size: 1.5em;</span></div><div class='line'><span style="color: #A31515">  text-align: center;</span></div><div class='line'><span style="color: #A31515">  color: palevioletred;</span></div><div class='line'><span style="color: #A31515">`</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">tag</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">strs</span><span style="color: #000000">: </span><span style="color: #1C6277">TemplateStringsArray</span><span style="color: #000000">, ...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[]): </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// inference fails because 'number' and 'string' are both candidates that conflict</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #795E26">tag</span><span style="color: #A31515">&lt;</span><span style="color: #1C6277">string</span><span style="color: #A31515"> </span><span style="color: #000000">|</span><span style="color: #A31515"> </span><span style="color: #1C6277">number</span><span style="color: #A31515">&gt;`</span><span style="color: #0000FF">${</span><span style="color: #098658">100</span><span style="color: #0000FF">}</span><span style="color: #A31515"> </span><span style="color: #0000FF">${</span><span style="color: #A31515">"hello"</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="import-types" style="position:relative;"><a href="#import-types" aria-label="import types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>import</code> types</h2>
<p>Modules can import types declared in other modules. But non-module global scripts cannot access types declared in modules. Enter <code>import</code> types.</p>
<p>Using <code>import("mod")</code> in a type annotation allows for reaching in a module and accessing its exported declaration without importing it.</p>
<h4 id="example-9" style="position:relative;"><a href="#example-9" aria-label="example 9 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>Given a declaration of a class <code>Pet</code> in a module file:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// module.d.ts</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Pet</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Can be used in a non-module file <code>global-script.ts</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// global-script.ts</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">adopt</span><span style="color: #000000">(</span><span style="color: #001080">p</span><span style="color: #000000">: </span><span style="color: #0000FF">import</span><span style="color: #000000">(</span><span style="color: #A31515">"./module"</span><span style="color: #000000">).</span><span style="color: #1C6277">Pet</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`Adopting </span><span style="color: #0000FF">${</span><span style="color: #001080">p</span><span style="color: #000000FF">.</span><span style="color: #001080">name</span><span style="color: #0000FF">}</span><span style="color: #A31515">...`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This also works in JSDoc comments to refer to types from other modules in <code>.js</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #008000">// a.js</span></div><div class='line'></div><div class='line'><span style="color: #008000">/**</span></div><div class='line'><span style="color: #008000"> * </span><span style="color: #0000FF">@param</span><span style="color: #008000"> </span><span style="color: #001080">p</span><span style="color: #008000"> { import("./module").Pet }</span></div><div class='line'><span style="color: #008000"> */</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">walk</span><span style="color: #000000">(</span><span style="color: #001080">p</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`Walking </span><span style="color: #0000FF">${</span><span style="color: #001080">p</span><span style="color: #000000FF">.</span><span style="color: #001080">name</span><span style="color: #0000FF">}</span><span style="color: #A31515">...`</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="relaxing-declaration-emit-visiblity-rules" style="position:relative;"><a href="#relaxing-declaration-emit-visiblity-rules" aria-label="relaxing declaration emit visiblity rules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relaxing declaration emit visiblity rules</h2>
<p>With <code>import</code> types available, many of the visibility errors reported during declaration file generation can be handled by the compiler without the need to change the input.</p>
<p>For instance:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">createHash</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"crypto"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">hash</span><span style="color: #000000"> = </span><span style="color: #795E26">createHash</span><span style="color: #000000">(</span><span style="color: #A31515">"sha256"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//           ^^^^</span></div><div class='line'><span style="color: #008000">// Exported variable 'hash' has or is using name 'Hash' from external module "crypto" but cannot be named.</span></div></code></div></pre>
<p>With TypeScript 2.9, no errors are reported, and now the generated file looks like:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">hash</span><span style="color: #000000">: </span><span style="color: #0000FF">import</span><span style="color: #000000">(</span><span style="color: #A31515">"crypto"</span><span style="color: #000000">).</span><span style="color: #1C6277">Hash</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="support-for-importmeta" style="position:relative;"><a href="#support-for-importmeta" aria-label="support for importmeta permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>import.meta</code></h2>
<p>TypeScript 2.9 introduces support for <code>import.meta</code>, a new meta-property as described by the current <a href="https://github.com/tc39/proposal-import-meta">TC39 proposal</a>.</p>
<p>The type of <code>import.meta</code> is the global <code>ImportMeta</code> type which is defined in <code>lib.es5.d.ts</code>.
This interface is extremely limited.
Adding well-known properties for Node or browsers requires interface merging and possibly a global augmentation depending on the context.</p>
<h4 id="example-10" style="position:relative;"><a href="#example-10" aria-label="example 10 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>Assuming that <code>__dirname</code> is always available on <code>import.meta</code>, the declaration would be done through reopening <code>ImportMeta</code> interface:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// node.d.ts</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">ImportMeta</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">__dirname</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>And usage would be:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000">.</span><span style="color: #001080">meta</span><span style="color: #000000">.</span><span style="color: #001080">__dirname</span><span style="color: #000000">; </span><span style="color: #008000">// Has type 'string'</span></div></code></div></pre>
<p><code>import.meta</code> is only allowed when targeting <code>ESNext</code> modules and ECMAScript targets.</p>
<h2 id="new---resolvejsonmodule" style="position:relative;"><a href="#new---resolvejsonmodule" aria-label="new   resolvejsonmodule permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--resolveJsonModule</code></h2>
<p>Often in Node.js applications a <code>.json</code> is needed. With TypeScript 2.9, <a href="/tsconfig#resolveJsonModule"><code>resolveJsonModule</code></a> allows for importing, extracting types from and generating <code>.json</code> files.</p>
<h4 id="example-11" style="position:relative;"><a href="#example-11" aria-label="example 11 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// settings.json</span></div><div class='line'></div><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #A31515">"repo"</span><span style="color: #000000">: </span><span style="color: #A31515">"TypeScript"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #A31515">"dry"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #A31515">"debug"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// a.ts</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">settings</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./settings.json"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #001080">settings</span><span style="color: #000000">.</span><span style="color: #001080">debug</span><span style="color: #000000"> === </span><span style="color: #0000FF">true</span><span style="color: #000000">; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">settings</span><span style="color: #000000">.</span><span style="color: #001080">dry</span><span style="color: #000000"> === </span><span style="color: #098658">2</span><span style="color: #000000">; </span><span style="color: #008000">// Error: Operator '===' cannot be applied boolean and number</span></div></code></div></pre>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#module'><data-lsp lsp="Specify what module code is generated.">module</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"commonjs"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#resolveJsonModule'><data-lsp lsp="Enable importing .json files">resolveJsonModule</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#esModuleInterop'><data-lsp lsp="Emit additional JavaScript to ease support for importing CommonJS modules. This enables `allowSyntheticDefaultImports` for type compatibility.">esModuleInterop</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="--pretty-output-by-default" style="position:relative;"><a href="#--pretty-output-by-default" aria-label="  pretty output by default permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--pretty</code> output by default</h2>
<p>Starting TypeScript 2.9 errors are displayed under <a href="/tsconfig#pretty"><code>pretty</code></a> by default if the output device is applicable for colorful text.
TypeScript will check if the output steam has <a href="https://nodejs.org/api/tty.html"><code>isTty</code></a> property set.</p>
<p>Use <code>--pretty false</code> on the command line or set <code>"pretty": false</code> in your <code>tsconfig.json</code> to disable <a href="/tsconfig#pretty"><code>pretty</code></a> output.</p>
<h2 id="new---declarationmap" style="position:relative;"><a href="#new---declarationmap" aria-label="new   declarationmap permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--declarationMap</code></h2>
<p>Enabling <a href="/tsconfig#declarationMap"><code>declarationMap</code></a> alongside <a href="/tsconfig#declaration"><code>declaration</code></a> causes the compiler to emit <code>.d.ts.map</code> files alongside the output <code>.d.ts</code> files.
Language Services can also now understand these map files, and uses them to map declaration-file based definition locations to their original source, when available.</p>
<p>In other words, hitting go-to-definition on a declaration from a <code>.d.ts</code> file generated with <a href="/tsconfig#declarationMap"><code>declarationMap</code></a> will take you to the source file (<code>.ts</code>) location where that declaration was defined, and not to the <code>.d.ts</code>.</p>
<h2 id="typescript-28" style="position:relative;"><a href="#typescript-28" aria-label="typescript 28 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.8</h2>
<h2 id="conditional-types" style="position:relative;"><a href="#conditional-types" aria-label="conditional types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conditional Types</h2>
<p>TypeScript 2.8 introduces <em>conditional types</em> which add the ability to express non-uniform type mappings.
A conditional type selects one of two possible types based on a condition expressed as a type relationship test:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0070C1">T</span><span style="color: #000000"> </span><span style="color: #001080">extends</span><span style="color: #000000"> </span><span style="color: #0070C1">U</span><span style="color: #000000"> ? </span><span style="color: #0070C1">X</span><span style="color: #000000"> : </span><span style="color: #0070C1">Y</span></div></code></div></pre>
<p>The type above means when <code>T</code> is assignable to <code>U</code> the type is <code>X</code>, otherwise the type is <code>Y</code>.</p>
<p>A conditional type <code>T extends U ? X : Y</code> is either <em>resolved</em> to <code>X</code> or <code>Y</code>, or <em>deferred</em> because the condition depends on one or more type variables.
Whether to resolve or defer is determined as follows:</p>
<ul>
<li>First, given types <code>T'</code> and <code>U'</code> that are instantiations of <code>T</code> and <code>U</code> where all occurrences of type parameters are replaced with <code>any</code>, if <code>T'</code> is not assignable to <code>U'</code>, the conditional type is resolved to <code>Y</code>. Intuitively, if the most permissive instantiation of <code>T</code> is not assignable to the most permissive instantiation of <code>U</code>, we know that no instantiation will be and we can just resolve to <code>Y</code>.</li>
<li>Next, for each type variable introduced by an <code>infer</code> (more later) declaration within <code>U</code> collect a set of candidate types by inferring from <code>T</code> to <code>U</code> (using the same inference algorithm as type inference for generic functions). For a given <code>infer</code> type variable <code>V</code>, if any candidates were inferred from co-variant positions, the type inferred for <code>V</code> is a union of those candidates. Otherwise, if any candidates were inferred from contra-variant positions, the type inferred for <code>V</code> is an intersection of those candidates. Otherwise, the type inferred for <code>V</code> is <code>never</code>.</li>
<li>Then, given a type <code>T''</code> that is an instantiation of <code>T</code> where all <code>infer</code> type variables are replaced with the types inferred in the previous step, if <code>T''</code> is <em>definitely assignable</em> to <code>U</code>, the conditional type is resolved to <code>X</code>. The definitely assignable relation is the same as the regular assignable relation, except that type variable constraints are not considered. Intuitively, when a type is definitely assignable to another type, we know that it will be assignable for <em>all instantiations</em> of those types.</li>
<li>Otherwise, the condition depends on one or more type variables and the conditional type is deferred.</li>
</ul>
<h4 id="example-12" style="position:relative;"><a href="#example-12" aria-label="example 12 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #A31515">"string"</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #A31515">"number"</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">boolean</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #A31515">"boolean"</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">undefined</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #A31515">"undefined"</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Function</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #A31515">"function"</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #A31515">"object"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T0</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "string"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T1</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #A31515">"a"</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "string"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T2</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">true</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "boolean"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T3</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "function"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T4</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">[]&gt;; </span><span style="color: #008000">// "object"</span></div></code></div></pre>
<h3 id="distributive-conditional-types" style="position:relative;"><a href="#distributive-conditional-types" aria-label="distributive conditional types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Distributive conditional types</h3>
<p>Conditional types in which the checked type is a naked type parameter are called <em>distributive conditional types</em>.
Distributive conditional types are automatically distributed over union types during instantiation.
For example, an instantiation of <code>T extends U ? X : Y</code> with the type argument <code>A | B | C</code> for <code>T</code> is resolved as <code>(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)</code>.</p>
<h4 id="example-13" style="position:relative;"><a href="#example-13" aria-label="example 13 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T10</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">)&gt;; </span><span style="color: #008000">// "string" | "function"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T12</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">[] | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "string" | "object" | "undefined"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T11</span><span style="color: #000000"> = </span><span style="color: #1C6277">TypeName</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">[] | </span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;; </span><span style="color: #008000">// "object"</span></div></code></div></pre>
<p>In instantiations of a distributive conditional type <code>T extends U ? X : Y</code>, references to <code>T</code> within the conditional type are resolved to individual constituents of the union type (i.e. <code>T</code> refers to the individual constituents <em>after</em> the conditional type is distributed over the union type).
Furthermore, references to <code>T</code> within <code>X</code> have an additional type parameter constraint <code>U</code> (i.e. <code>T</code> is considered assignable to <code>U</code> within <code>X</code>).</p>
<h4 id="example-14" style="position:relative;"><a href="#example-14" aria-label="example 14 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">BoxedValue</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">BoxedArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { </span><span style="color: #001080">array</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[] };</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Boxed</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">[] ? </span><span style="color: #1C6277">BoxedArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">number</span><span style="color: #000000">]&gt; : </span><span style="color: #1C6277">BoxedValue</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T20</span><span style="color: #000000"> = </span><span style="color: #1C6277">Boxed</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// BoxedValue&lt;string&gt;;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T21</span><span style="color: #000000"> = </span><span style="color: #1C6277">Boxed</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;; </span><span style="color: #008000">// BoxedArray&lt;number&gt;;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T22</span><span style="color: #000000"> = </span><span style="color: #1C6277">Boxed</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;; </span><span style="color: #008000">// BoxedValue&lt;string&gt; | BoxedArray&lt;number&gt;;</span></div></code></div></pre>
<p>Notice that <code>T</code> has the additional constraint <code>any[]</code> within the true branch of <code>Boxed&#x3C;T></code> and it is therefore possible to refer to the element type of the array as <code>T[number]</code>. Also, notice how the conditional type is distributed over the union type in the last example.</p>
<p>The distributive property of conditional types can conveniently be used to <em>filter</em> union types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Diff</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000"> ? </span><span style="color: #1C6277">never</span><span style="color: #000000"> : </span><span style="color: #1C6277">T</span><span style="color: #000000">; </span><span style="color: #008000">// Remove types from T that are assignable to U</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Filter</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000"> ? </span><span style="color: #1C6277">T</span><span style="color: #000000"> : </span><span style="color: #1C6277">never</span><span style="color: #000000">; </span><span style="color: #008000">// Remove types from T that are not assignable to U</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T30</span><span style="color: #000000"> = </span><span style="color: #1C6277">Diff</span><span style="color: #000000">&lt;</span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"b"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"d"</span><span style="color: #000000">, </span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"f"</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "b" | "d"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T31</span><span style="color: #000000"> = </span><span style="color: #1C6277">Filter</span><span style="color: #000000">&lt;</span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"b"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"d"</span><span style="color: #000000">, </span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"f"</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "a" | "c"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T32</span><span style="color: #000000"> = </span><span style="color: #1C6277">Diff</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">), </span><span style="color: #1C6277">Function</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string | number</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T33</span><span style="color: #000000"> = </span><span style="color: #1C6277">Filter</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">), </span><span style="color: #1C6277">Function</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// () =&gt; void</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">Diff</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// Remove null and undefined from T</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T34</span><span style="color: #000000"> = </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string | number</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T35</span><span style="color: #000000"> = </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">[] | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string | string[]</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f2</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s1</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s2</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Conditional types are particularly useful when combined with mapped types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">FunctionPropertyNames</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">] </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Function</span><span style="color: #000000"> ? </span><span style="color: #1C6277">K</span><span style="color: #000000"> : </span><span style="color: #1C6277">never</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}[</span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">FunctionProperties</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">Pick</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">FunctionPropertyNames</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NonFunctionPropertyNames</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">] </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Function</span><span style="color: #000000"> ? </span><span style="color: #1C6277">never</span><span style="color: #000000"> : </span><span style="color: #1C6277">K</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}[</span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NonFunctionProperties</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">Pick</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">NonFunctionPropertyNames</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Part</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">subparts</span><span style="color: #000000">: </span><span style="color: #1C6277">Part</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">updatePart</span><span style="color: #000000">(</span><span style="color: #001080">newName</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T40</span><span style="color: #000000"> = </span><span style="color: #1C6277">FunctionPropertyNames</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Part</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "updatePart"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T41</span><span style="color: #000000"> = </span><span style="color: #1C6277">NonFunctionPropertyNames</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Part</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "id" | "name" | "subparts"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T42</span><span style="color: #000000"> = </span><span style="color: #1C6277">FunctionProperties</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Part</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// { updatePart(newName: string): void }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T43</span><span style="color: #000000"> = </span><span style="color: #1C6277">NonFunctionProperties</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Part</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// { id: number, name: string, subparts: Part[] }</span></div></code></div></pre>
<p>Similar to union and intersection types, conditional types are not permitted to reference themselves recursively. For example the following is an error.</p>
<h4 id="example-15" style="position:relative;"><a href="#example-15" aria-label="example 15 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ElementType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">[] ? </span><span style="color: #1C6277">ElementType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">number</span><span style="color: #000000">]&gt; : </span><span style="color: #1C6277">T</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div></code></div></pre>
<h3 id="type-inference-in-conditional-types" style="position:relative;"><a href="#type-inference-in-conditional-types" aria-label="type inference in conditional types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type inference in conditional types</h3>
<p>Within the <code>extends</code> clause of a conditional type, it is now possible to have <code>infer</code> declarations that introduce a type variable to be inferred.
Such inferred type variables may be referenced in the true branch of the conditional type.
It is possible to have multiple <code>infer</code> locations for the same type variable.</p>
<p>For example, the following extracts the return type of a function type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">R</span><span style="color: #000000"> ? </span><span style="color: #1C6277">R</span><span style="color: #000000"> : </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Conditional types can be nested to form a sequence of pattern matches that are evaluated in order:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> (</span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">)[]</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T0</span><span style="color: #000000"> = </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T1</span><span style="color: #000000"> = </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">[]&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T2</span><span style="color: #000000"> = </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T3</span><span style="color: #000000"> = </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T4</span><span style="color: #000000"> = </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;[]&gt;; </span><span style="color: #008000">// Promise&lt;string&gt;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T5</span><span style="color: #000000"> = </span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Unpacked</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;[]&gt;&gt;; </span><span style="color: #008000">// string</span></div></code></div></pre>
<p>The following example demonstrates how multiple candidates for the same type variable in co-variant positions causes a union type to be inferred:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> { </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000"> } ? </span><span style="color: #1C6277">U</span><span style="color: #000000"> : </span><span style="color: #1C6277">never</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T10</span><span style="color: #000000"> = </span><span style="color: #1C6277">Foo</span><span style="color: #000000">&lt;{ </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T11</span><span style="color: #000000"> = </span><span style="color: #1C6277">Foo</span><span style="color: #000000">&lt;{ </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> }&gt;; </span><span style="color: #008000">// string | number</span></div></code></div></pre>
<p>Likewise, multiple candidates for the same type variable in contra-variant positions causes an intersection type to be inferred:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Bar</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> { </span><span style="color: #795E26">a</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">; </span><span style="color: #795E26">b</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000"> }</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">never</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T20</span><span style="color: #000000"> = </span><span style="color: #1C6277">Bar</span><span style="color: #000000">&lt;{ </span><span style="color: #795E26">a</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">; </span><span style="color: #795E26">b</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000"> }&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T21</span><span style="color: #000000"> = </span><span style="color: #1C6277">Bar</span><span style="color: #000000">&lt;{ </span><span style="color: #795E26">a</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">; </span><span style="color: #795E26">b</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000"> }&gt;; </span><span style="color: #008000">// string & number</span></div></code></div></pre>
<p>When inferring from a type with multiple call signatures (such as the type of an overloaded function), inferences are made from the <em>last</em> signature (which, presumably, is the most permissive catch-all case).
It is not possible to perform overload resolution based on a list of argument types.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">): </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T30</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string | number</span></div></code></div></pre>
<p>It is not possible to use <code>infer</code> declarations in constraint clauses for regular type parameters:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">R</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">R</span><span style="color: #000000">; </span><span style="color: #008000">// Error, not supported</span></div></code></div></pre>
<p>However, much the same effect can be obtained by erasing the type variables in the constraint and instead specifying a conditional type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">AnyFunction</span><span style="color: #000000"> = (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">AnyFunction</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #0000FF">infer</span><span style="color: #000000"> </span><span style="color: #1C6277">R</span></div><div class='line'><span style="color: #000000">  ? </span><span style="color: #1C6277">R</span></div><div class='line'><span style="color: #000000">  : </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="predefined-conditional-types" style="position:relative;"><a href="#predefined-conditional-types" aria-label="predefined conditional types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Predefined conditional types</h3>
<p>TypeScript 2.8 adds several predefined conditional types to <code>lib.d.ts</code>:</p>
<ul>
<li><code>Exclude&#x3C;T, U></code> — Exclude from <code>T</code> those types that are assignable to <code>U</code>.</li>
<li><code>Extract&#x3C;T, U></code> — Extract from <code>T</code> those types that are assignable to <code>U</code>.</li>
<li><code>NonNullable&#x3C;T></code> — Exclude <code>null</code> and <code>undefined</code> from <code>T</code>.</li>
<li><code>ReturnType&#x3C;T></code> — Obtain the return type of a function type.</li>
<li><code>InstanceType&#x3C;T></code> — Obtain the instance type of a constructor function type.</li>
</ul>
<h4 id="example-16" style="position:relative;"><a href="#example-16" aria-label="example 16 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T00</span><span style="color: #000000"> = </span><span style="color: #1C6277">Exclude</span><span style="color: #000000">&lt;</span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"b"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"d"</span><span style="color: #000000">, </span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"f"</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "b" | "d"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T01</span><span style="color: #000000"> = </span><span style="color: #1C6277">Extract</span><span style="color: #000000">&lt;</span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"b"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"d"</span><span style="color: #000000">, </span><span style="color: #A31515">"a"</span><span style="color: #000000"> | </span><span style="color: #A31515">"c"</span><span style="color: #000000"> | </span><span style="color: #A31515">"f"</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "a" | "c"</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T02</span><span style="color: #000000"> = </span><span style="color: #1C6277">Exclude</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">), </span><span style="color: #1C6277">Function</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string | number</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T03</span><span style="color: #000000"> = </span><span style="color: #1C6277">Extract</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">), </span><span style="color: #1C6277">Function</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// () =&gt; void</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T04</span><span style="color: #000000"> = </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string | number</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T05</span><span style="color: #000000"> = </span><span style="color: #1C6277">NonNullable</span><span style="color: #000000">&lt;(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">) | </span><span style="color: #1C6277">string</span><span style="color: #000000">[] | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// (() =&gt; string) | string[]</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000">(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T10</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T11</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// void</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T12</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// {}</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T13</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span><span style="color: #000000">[]&gt;() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// number[]</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T14</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">f1</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// { a: number, b: string }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T15</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">any</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// any</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T16</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">never</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// any</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T17</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T18</span><span style="color: #000000"> = </span><span style="color: #1C6277">ReturnType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Function</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// Error</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T20</span><span style="color: #000000"> = </span><span style="color: #1C6277">InstanceType</span><span style="color: #000000">&lt;</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// C</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T21</span><span style="color: #000000"> = </span><span style="color: #1C6277">InstanceType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">any</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// any</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T22</span><span style="color: #000000"> = </span><span style="color: #1C6277">InstanceType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">never</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// any</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T23</span><span style="color: #000000"> = </span><span style="color: #1C6277">InstanceType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T24</span><span style="color: #000000"> = </span><span style="color: #1C6277">InstanceType</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Function</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// Error</span></div></code></div></pre>
<blockquote>
<p>Note: The <code>Exclude</code> type is a proper implementation of the <code>Diff</code> type suggested <a href="https://github.com/Microsoft/TypeScript/issues/12215#issuecomment-307871458">here</a>. We’ve used the name <code>Exclude</code> to avoid breaking existing code that defines a <code>Diff</code>, plus we feel that name better conveys the semantics of the type. We did not include the <code>Omit&#x3C;T, K></code> type because it is trivially written as <code>Pick&#x3C;T, Exclude&#x3C;keyof T, K>></code>.</p>
</blockquote>
<h2 id="improved-control-over-mapped-type-modifiers" style="position:relative;"><a href="#improved-control-over-mapped-type-modifiers" aria-label="improved control over mapped type modifiers permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved control over mapped type modifiers</h2>
<p>Mapped types support adding a <code>readonly</code> or <code>?</code> modifier to a mapped property, but they did not provide support the ability to <em>remove</em> modifiers.
This matters in <a href="https://github.com/Microsoft/TypeScript/pull/12563"><em>homomorphic mapped types</em></a> which by default preserve the modifiers of the underlying type.</p>
<p>TypeScript 2.8 adds the ability for a mapped type to either add or remove a particular modifier.
Specifically, a <code>readonly</code> or <code>?</code> property modifier in a mapped type can now be prefixed with either <code>+</code> or <code>-</code> to indicate that the modifier should be added or removed.</p>
<h4 id="example-17" style="position:relative;"><a href="#example-17" aria-label="example 17 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">MutableRequired</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { -</span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]-?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">] }; </span><span style="color: #008000">// Remove readonly and ?</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ReadonlyPartial</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { +</span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]+?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">] }; </span><span style="color: #008000">// Add readonly and ?</span></div></code></div></pre>
<p>A modifier with no <code>+</code> or <code>-</code> prefix is the same as a modifier with a <code>+</code> prefix. So, the <code>ReadonlyPartial&#x3C;T></code> type above corresponds to</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">ReadonlyPartial</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">] }; </span><span style="color: #008000">// Add readonly and ?</span></div></code></div></pre>
<p>Using this ability, <code>lib.d.ts</code> now has a new <code>Required&#x3C;T></code> type.
This type strips <code>?</code> modifiers from all properties of <code>T</code>, thus making all properties required.</p>
<h4 id="example-18" style="position:relative;"><a href="#example-18" aria-label="example 18 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Required</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = { [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]-?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">] };</span></div></code></div></pre>
<p>Note that in <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode, when a homomorphic mapped type removes a <code>?</code> modifier from a property in the underlying type it also removes <code>undefined</code> from the type of that property:</p>
<h4 id="example-19" style="position:relative;"><a href="#example-19" aria-label="example 19 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> = { </span><span style="color: #001080">a</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }; </span><span style="color: #008000">// Same as { a?: string | undefined }</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Bar</span><span style="color: #000000"> = </span><span style="color: #1C6277">Required</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Foo</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// Same as { a: string }</span></div></code></div></pre>
<h2 id="improved-keyof-with-intersection-types" style="position:relative;"><a href="#improved-keyof-with-intersection-types" aria-label="improved keyof with intersection types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved <code>keyof</code> with intersection types</h2>
<p>With TypeScript 2.8 <code>keyof</code> applied to an intersection type is transformed to a union of <code>keyof</code> applied to each intersection constituent.
In other words, types of the form <code>keyof (A &#x26; B)</code> are transformed to be <code>keyof A | keyof B</code>.
This change should address inconsistencies with inference from <code>keyof</code> expressions.</p>
<h4 id="example-20" style="position:relative;"><a href="#example-20" aria-label="example 20 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> = { </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> = { </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T1</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> (</span><span style="color: #1C6277">A</span><span style="color: #000000"> & </span><span style="color: #1C6277">B</span><span style="color: #000000">); </span><span style="color: #008000">// "a" | "b"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T2</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> (</span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">B</span><span style="color: #000000">); </span><span style="color: #008000">// keyof T | "b"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T3</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> (</span><span style="color: #1C6277">A</span><span style="color: #000000"> & </span><span style="color: #1C6277">U</span><span style="color: #000000">); </span><span style="color: #008000">// "a" | keyof U</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T4</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt; = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> (</span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">U</span><span style="color: #000000">); </span><span style="color: #008000">// keyof T | keyof U</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T5</span><span style="color: #000000"> = </span><span style="color: #1C6277">T2</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "a" | "b"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T6</span><span style="color: #000000"> = </span><span style="color: #1C6277">T3</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">B</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "a" | "b"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T7</span><span style="color: #000000"> = </span><span style="color: #1C6277">T4</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">&gt;; </span><span style="color: #008000">// "a" | "b"</span></div></code></div></pre>
<h2 id="better-handling-for-namespace-patterns-in-js-files" style="position:relative;"><a href="#better-handling-for-namespace-patterns-in-js-files" aria-label="better handling for namespace patterns in js files permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better handling for namespace patterns in <code>.js</code> files</h2>
<p>TypeScript 2.8 adds support for understanding more namespace patterns in <code>.js</code> files.
Empty object literals declarations on top level, just like functions and classes, are now recognized as as namespace declarations in JavaScript.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">ns</span><span style="color: #000000"> = {}; </span><span style="color: #008000">// recognized as a declaration for a namespace `ns`</span></div><div class='line'><span style="color: #001080">ns</span><span style="color: #000000">.</span><span style="color: #001080">constant</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// recognized as a declaration for var `constant`</span></div></code></div></pre>
<p>Assignments at the top-level should behave the same way; in other words, a <code>var</code> or <code>const</code> declaration is not required.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #001080">app</span><span style="color: #000000"> = {}; </span><span style="color: #008000">// does NOT need to be `var app = {}`</span></div><div class='line'><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #0070C1">C</span><span style="color: #000000"> = </span><span style="color: #0000FF">class</span><span style="color: #000000"> {};</span></div><div class='line'><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #795E26">f</span><span style="color: #000000"> = </span><span style="color: #0000FF">function</span><span style="color: #000000"> () {};</span></div><div class='line'><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #001080">prop</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="iifes-as-namespace-declarations" style="position:relative;"><a href="#iifes-as-namespace-declarations" aria-label="iifes as namespace declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IIFEs as namespace declarations</h3>
<p>An IIFE returning a function, class or empty object literal, is also recognized as a namespace:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000"> = (</span><span style="color: #0000FF">function</span><span style="color: #000000"> () {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">(</span><span style="color: #001080">n</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000"> = </span><span style="color: #001080">n</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">})();</span></div><div class='line'><span style="color: #0070C1">C</span><span style="color: #000000">.</span><span style="color: #001080">staticProperty</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="defaulted-declarations" style="position:relative;"><a href="#defaulted-declarations" aria-label="defaulted declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Defaulted declarations</h3>
<p>“Defaulted declarations” allow initializers that reference the declared name in the left side of a logical or:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #001080">my</span><span style="color: #000000"> = </span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #001080">my</span><span style="color: #000000"> || {};</span></div><div class='line'><span style="color: #001080">my</span><span style="color: #000000">.</span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">my</span><span style="color: #000000">.</span><span style="color: #001080">app</span><span style="color: #000000"> || {};</span></div></code></div></pre>
<h3 id="prototype-assignment" style="position:relative;"><a href="#prototype-assignment" aria-label="prototype assignment permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prototype assignment</h3>
<p>You can assign an object literal directly to the prototype property. Individual prototype assignments still work too:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000"> = </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">p</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000"> = </span><span style="color: #001080">p</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #1C6277">C</span><span style="color: #000000">.</span><span style="color: #001080">prototype</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">m</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #1C6277">C</span><span style="color: #000000">.</span><span style="color: #001080">prototype</span><span style="color: #000000">.</span><span style="color: #795E26">q</span><span style="color: #000000"> = </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">r</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">p</span><span style="color: #000000"> === </span><span style="color: #001080">r</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<h3 id="nested-and-merged-declarations" style="position:relative;"><a href="#nested-and-merged-declarations" aria-label="nested and merged declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nested and merged declarations</h3>
<p>Nesting works to any level now, and merges correctly across files. Previously neither was the case.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">app</span><span style="color: #000000"> = </span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #001080">app</span><span style="color: #000000"> || {};</span></div><div class='line'><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #0070C1">C</span><span style="color: #000000"> = </span><span style="color: #0000FF">class</span><span style="color: #000000"> {};</span></div></code></div></pre>
<h2 id="per-file-jsx-factories" style="position:relative;"><a href="#per-file-jsx-factories" aria-label="per file jsx factories permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Per-file JSX factories</h2>
<p>TypeScript 2.8 adds support for a per-file configurable JSX factory name using <code>@jsx dom</code> paragma.
JSX factory can be configured for a compilation using <a href="/tsconfig#jsxFactory"><code>jsxFactory</code></a> (default is <code>React.createElement</code>). With TypeScript 2.8 you can override this on a per-file-basis by adding a comment to the beginning of the file.</p>
<h4 id="example-21" style="position:relative;"><a href="#example-21" aria-label="example 21 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/** </span><span style="color: #0000FF">@jsx</span><span style="color: #008000"> dom */</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">dom</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./renderer"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">&lt;</span><span style="color: #1C6277">h</span><span style="color: #000000">&gt;&lt;/</span><span style="color: #1C6277">h</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>Generates:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">renderer_1</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"./renderer"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">renderer_1</span><span style="color: #000000">.</span><span style="color: #795E26">dom</span><span style="color: #000000">(</span><span style="color: #A31515">"h"</span><span style="color: #000000">, </span><span style="color: #0000FF">null</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="locally-scoped-jsx-namespaces" style="position:relative;"><a href="#locally-scoped-jsx-namespaces" aria-label="locally scoped jsx namespaces permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Locally scoped JSX namespaces</h2>
<p>JSX type checking is driven by definitions in a JSX namespace, for instance <code>JSX.Element</code> for the type of a JSX element, and <code>JSX.IntrinsicElements</code> for built-in elements.
Before TypeScript 2.8 the <code>JSX</code> namespace was expected to be in the global namespace, and thus only allowing one to be defined in a project.
Starting with TypeScript 2.8 the <code>JSX</code> namespace will be looked under the <code>jsxNamespace</code> (e.g. <code>React</code>) allowing for multiple jsx factories in one compilation.
For backward compatibility the global <code>JSX</code> namespace is used as a fallback if none was defined on the factory function.
Combined with the per-file <code>@jsx</code> pragma, each file can have a different JSX factory.</p>
<h2 id="new---emitdeclarationsonly" style="position:relative;"><a href="#new---emitdeclarationsonly" aria-label="new   emitdeclarationsonly permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--emitDeclarationsOnly</code></h2>
<p><code>--emitDeclarationsOnly</code> allows for <em>only</em> generating declaration files; <code>.js</code>/<code>.jsx</code> output generation will be skipped with this flag. The flag is useful when the <code>.js</code> output generation is handled by a different transpiler like Babel.</p>
<h2 id="typescript-27" style="position:relative;"><a href="#typescript-27" aria-label="typescript 27 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.7</h2>
<h2 id="constant-named-properties" style="position:relative;"><a href="#constant-named-properties" aria-label="constant named properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Constant-named properties</h2>
<p>TypeScript 2.7 adds support for declaring const-named properties on types including ECMAScript symbols.</p>
<h4 id="example-22" style="position:relative;"><a href="#example-22" aria-label="example 22 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Lib</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">SERIALIZE</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">(</span><span style="color: #A31515">"serialize-method-key"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Serializable</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #0070C1">SERIALIZE</span><span style="color: #000000">](</span><span style="color: #001080">obj</span><span style="color: #000000">: {}): </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// consumer</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">SERIALIZE</span><span style="color: #000000">, </span><span style="color: #001080">Serializable</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"lib"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">JSONSerializableItem</span><span style="color: #000000"> </span><span style="color: #0000FF">implements</span><span style="color: #000000"> </span><span style="color: #1C6277">Serializable</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #0070C1">SERIALIZE</span><span style="color: #000000">](</span><span style="color: #001080">obj</span><span style="color: #000000">: {}) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">JSON</span><span style="color: #000000">.</span><span style="color: #795E26">stringify</span><span style="color: #000000">(</span><span style="color: #001080">obj</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This also applies to numeric and string literals.</p>
<h4 id="example-23" style="position:relative;"><a href="#example-23" aria-label="example 23 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Foo</span><span style="color: #000000"> = </span><span style="color: #A31515">"Foo"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Bar</span><span style="color: #000000"> = </span><span style="color: #A31515">"Bar"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[Foo]:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">[Bar]:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #001080">Foo</span><span style="color: #000000">]; </span><span style="color: #008000">// has type 'number'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #001080">Bar</span><span style="color: #000000">]; </span><span style="color: #008000">// has type 'string'</span></div></code></div></pre>
<h3 id="unique-symbol" style="position:relative;"><a href="#unique-symbol" aria-label="unique symbol permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>unique symbol</code></h3>
<p>To enable treating symbols as unique literals a new type <code>unique symbol</code> is available.
<code>unique symbol</code> is are subtype of <code>symbol</code>, and are produced only from calling <code>Symbol()</code> or <code>Symbol.for()</code>, or from explicit type annotations.
The new type is only allowed on <code>const</code> declarations and <code>readonly static</code> properties, and in order to reference a specific unique symbol, you’ll have to use the <code>typeof</code> operator.
Each reference to a <code>unique symbol</code> implies a completely unique identity that’s tied to a given declaration.</p>
<h4 id="example-24" style="position:relative;"><a href="#example-24" aria-label="example 24 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Works</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Foo</span><span style="color: #000000">: </span><span style="color: #1C6277">unique</span><span style="color: #000000"> </span><span style="color: #1C6277">symbol</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Error! 'Bar' isn't a constant.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">Bar</span><span style="color: #000000">: </span><span style="color: #1C6277">unique</span><span style="color: #000000"> </span><span style="color: #1C6277">symbol</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Works - refers to a unique symbol, but its identity is tied to 'Foo'.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">Baz</span><span style="color: #000000">: </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">Foo</span><span style="color: #000000"> = </span><span style="color: #001080">Foo</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Also works.</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">StaticSymbol</span><span style="color: #000000">: </span><span style="color: #1C6277">unique</span><span style="color: #000000"> </span><span style="color: #1C6277">symbol</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Because each <code>unique symbol</code> has a completely separate identity, no two <code>unique symbol</code> types are assignable or comparable to each other.</p>
<h4 id="example-25" style="position:relative;"><a href="#example-25" aria-label="example 25 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Foo</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">Bar</span><span style="color: #000000"> = </span><span style="color: #1C6277">Symbol</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Error: can't compare two unique symbols.</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">Foo</span><span style="color: #000000"> === </span><span style="color: #001080">Bar</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="strict-class-initialization" style="position:relative;"><a href="#strict-class-initialization" aria-label="strict class initialization permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict Class Initialization</h2>
<p>TypeScript 2.7 introduces a new flag called <a href="/tsconfig#strictPropertyInitialization"><code>strictPropertyInitialization</code></a>.
This flag performs checks to ensure that each instance property of a class gets initialized in the constructor body, or by a property initializer.
For example</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">bar</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">baz</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//  ~~~</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//  Error! Property 'baz' has no initializer and is not definitely assigned in the</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//         constructor.</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">42</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In the above, if we truly meant for <code>baz</code> to potentially be <code>undefined</code>, we should have declared it with the type <code>boolean | undefined</code>.</p>
<p>There are certain scenarios where properties can be initialized indirectly (perhaps by a helper method or dependency injection library), in which case you can use the new <em>definite assignment assertion modifiers</em> for your properties (discussed below).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000">!: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ^</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Notice this '!' modifier.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// This is the "definite assignment assertion"</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">initialize</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">initialize</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Keep in mind that <a href="/tsconfig#strictPropertyInitialization"><code>strictPropertyInitialization</code></a> will be turned on along with other <a href="/tsconfig#strict"><code>strict</code></a> mode flags, which can impact your project.
You can set the <a href="/tsconfig#strictPropertyInitialization"><code>strictPropertyInitialization</code></a> setting to <code>false</code> in your <code>tsconfig.json</code>’s <code>compilerOptions</code>, or <code>--strictPropertyInitialization false</code> on the command line to turn off this checking.</p>
<h2 id="definite-assignment-assertions" style="position:relative;"><a href="#definite-assignment-assertions" aria-label="definite assignment assertions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Definite Assignment Assertions</h2>
<p>The definite assignment assertion is a feature that allows a <code>!</code> to be placed after instance property and variable declarations to relay to TypeScript that a variable is indeed assigned for all intents and purposes, even if TypeScript’s analyses cannot detect so.</p>
<p>For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #795E26">initialize</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000"> + </span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//          ~   ~</span></div><div class='line'><span style="color: #008000">// Error! Variable 'x' is used before being assigned.</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">initialize</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>With definite assignment assertions, we can assert that <code>x</code> is really assigned by appending an <code>!</code> to its declaration:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Notice the '!'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">!: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #795E26">initialize</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #008000">// No error!</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000"> + </span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">initialize</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In a sense, the definite assignment assertion operator is the dual of the non-null assertion operator (in which <em>expressions</em> are post-fixed with a <code>!</code>), which we could also have used in the example.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #795E26">initialize</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #008000">// No error!</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">! + </span><span style="color: #001080">x</span><span style="color: #000000">!);</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">initialize</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In our example, we knew that all uses of <code>x</code> would be initialized so it makes more sense to use definite assignment assertions than non-null assertions.</p>
<h2 id="fixed-length-tuples" style="position:relative;"><a href="#fixed-length-tuples" aria-label="fixed length tuples permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Fixed Length Tuples</h2>
<p>In TypeScript 2.6 and earlier, <code>[number, string, string]</code> was considered a subtype of <code>[number, string]</code>.
This was motivated by TypeScript’s structural nature; the first and second elements of a <code>[number, string, string]</code> are respectively subtypes of the first and second elements of <code>[number, string]</code>.
However, after examining real world usage of tuples, we noticed that most situations in which this was permitted was typically undesirable.</p>
<p>In TypeScript 2.7, tuples of different arities are no longer assignable to each other.
Thanks to a pull request from <a href="https://github.com/KiaraGrouwstra">Kiara Grouwstra</a>, tuple types now encode their arity into the type of their respective <code>length</code> property.
This is accomplished by leveraging numeric literal types, which now allow tuples to be distinct from tuples of different arities.</p>
<p>Conceptually, you might consider the type <code>[number, string]</code> to be equivalent to the following declaration of <code>NumStrTuple</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">NumStrTuple</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #098658">0</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #098658">1</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">length</span><span style="color: #000000">: </span><span style="color: #098658">2</span><span style="color: #000000">; </span><span style="color: #008000">// using the numeric literal type '2'</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Note that this is a breaking change for some code.
If you need to resort to the original behavior in which tuples only enforce a minimum length, you can use a similar declaration that does not explicitly define a <code>length</code> property, falling back to <code>number</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">MinimumNumStrTuple</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #098658">0</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #098658">1</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Note that this does not imply tuples represent immutable arrays, but it is an implied convention.</p>
<h2 id="improved-type-inference-for-object-literals" style="position:relative;"><a href="#improved-type-inference-for-object-literals" aria-label="improved type inference for object literals permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved type inference for object literals</h2>
<p>TypeScript 2.7 improves type inference for multiple object literals occurring in the same context.
When multiple object literal types contribute to a union type, we now <em>normalize</em> the object literal types such that all properties are present in each constituent of the union type.</p>
<p>Consider:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">obj</span><span style="color: #000000"> = </span><span style="color: #001080">test</span><span style="color: #000000"> ? { </span><span style="color: #001080">text:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000"> } : {}; </span><span style="color: #008000">// { text: string } | { text?: undefined }</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">s</span><span style="color: #000000"> = </span><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">text</span><span style="color: #000000">; </span><span style="color: #008000">// string | undefined</span></div></code></div></pre>
<p>Previously type <code>{}</code> was inferred for <code>obj</code> and the second line subsequently caused an error because <code>obj</code> would appear to have no properties.
That obviously wasn’t ideal.</p>
<h4 id="example-26" style="position:relative;"><a href="#example-26" aria-label="example 26 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// let obj: { a: number, b: number } |</span></div><div class='line'><span style="color: #008000">//     { a: string, b?: undefined } |</span></div><div class='line'><span style="color: #008000">//     { a?: undefined, b?: undefined }</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000"> = [{ </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> }, { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #A31515">"abc"</span><span style="color: #000000"> }, {}][</span><span style="color: #098658">0</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000">; </span><span style="color: #008000">// string | number | undefined</span></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// number | undefined</span></div></code></div></pre>
<p>Multiple object literal type inferences for the same type parameter are similarly collapsed into a single normalized union type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(...</span><span style="color: #001080">items</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[]): </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">// let obj: { a: number, b: number } |</span></div><div class='line'><span style="color: #008000">//     { a: string, b?: undefined } |</span></div><div class='line'><span style="color: #008000">//     { a?: undefined, b?: undefined }</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000"> = </span><span style="color: #795E26">f</span><span style="color: #000000">({ </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> }, { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #A31515">"abc"</span><span style="color: #000000"> }, {});</span></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000">; </span><span style="color: #008000">// string | number | undefined</span></div><div class='line'><span style="color: #001080">obj</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// number | undefined</span></div></code></div></pre>
<h2 id="improved-handling-of-structurally-identical-classes-and-instanceof-expressions" style="position:relative;"><a href="#improved-handling-of-structurally-identical-classes-and-instanceof-expressions" aria-label="improved handling of structurally identical classes and instanceof expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved handling of structurally identical classes and <code>instanceof</code> expressions</h2>
<p>TypeScript 2.7 improves the handling of structurally identical classes in union types and <code>instanceof</code> expressions:</p>
<ul>
<li>Structurally identical, but distinct, class types are now preserved in union types (instead of eliminating all but one).</li>
<li>Union type subtype reduction only removes a class type if it is a subclass of <em>and</em> derives from another class type in the union.</li>
<li>Type checking of the <code>instanceof</code> operator is now based on whether the type of the left operand <em>derives from</em> the type indicated by the right operand (as opposed to a structural subtype check).</li>
</ul>
<p>This means that union types and <code>instanceof</code> properly distinguish between structurally identical classes.</p>
<h4 id="example-27" style="position:relative;"><a href="#example-27" aria-label="example 27 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example:</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {}</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {}</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {}</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">D</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">c</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">E</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">D</span><span style="color: #000000"> {}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x1</span><span style="color: #000000"> = !</span><span style="color: #0000FF">true</span><span style="color: #000000"> ? </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">A</span><span style="color: #000000">() : </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">B</span><span style="color: #000000">(); </span><span style="color: #008000">// A</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x2</span><span style="color: #000000"> = !</span><span style="color: #0000FF">true</span><span style="color: #000000"> ? </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">B</span><span style="color: #000000">() : </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">(); </span><span style="color: #008000">// B | C (previously B)</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x3</span><span style="color: #000000"> = !</span><span style="color: #0000FF">true</span><span style="color: #000000"> ? </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">() : </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">D</span><span style="color: #000000">(); </span><span style="color: #008000">// C | D (previously C)</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a1</span><span style="color: #000000"> = [</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">A</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">B</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">D</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">E</span><span style="color: #000000">()]; </span><span style="color: #008000">// A[]</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a2</span><span style="color: #000000"> = [</span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">B</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">D</span><span style="color: #000000">(), </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">E</span><span style="color: #000000">()]; </span><span style="color: #008000">// (B | C | D)[] (previously B[])</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">B</span><span style="color: #000000"> | </span><span style="color: #1C6277">C</span><span style="color: #000000"> | </span><span style="color: #1C6277">D</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// B (previously B | D)</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// C</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// D (previously never)</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="type-guards-inferred-from-in-operator" style="position:relative;"><a href="#type-guards-inferred-from-in-operator" aria-label="type guards inferred from in operator permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type guards inferred from <code>in</code> operator</h2>
<p>The <code>in</code> operator now acts as a narrowing expression for types.</p>
<p>For a <code>n in x</code> expression, where <code>n</code> is a string literal or string literal type and <code>x</code> is a union type, the “true” branch narrows to types which have an optional or required property <code>n</code>, and the “false” branch narrows to types which have an optional or missing property <code>n</code>.</p>
<h4 id="example-28" style="position:relative;"><a href="#example-28" aria-label="example 28 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000"> | </span><span style="color: #1C6277">B</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #A31515">"a"</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="support-for-import-d-from-cjs-form-commonjs-modules-with---esmoduleinterop" style="position:relative;"><a href="#support-for-import-d-from-cjs-form-commonjs-modules-with---esmoduleinterop" aria-label="support for import d from cjs form commonjs modules with   esmoduleinterop permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>import d from "cjs"</code> form CommonJS modules with <code>--esModuleInterop</code></h2>
<p>TypeScript 2.7 updates CommonJS/AMD/UMD module emit to synthesize namespace records based on the presence of an <code>__esModule</code> indicator under <a href="/tsconfig#esModuleInterop"><code>esModuleInterop</code></a>.
The change brings the generated output from TypeScript closer to that generated by Babel.</p>
<p>Previously CommonJS/AMD/UMD modules were treated in the same way as ES6 modules, resulting in a couple of problems. Namely:</p>
<ul>
<li>
<p>TypeScript treats a namespace import (i.e. <code>import * as foo from "foo"</code>) for a CommonJS/AMD/UMD module as equivalent to <code>const foo = require("foo")</code>.
Things are simple here, but they don’t work out if the primary object being imported is a primitive or a class or a function.
ECMAScript spec stipulates that a namespace record is a plain object, and that a namespace import (<code>foo</code> in the example above) is not callable, though allowed by TypeScript</p>
</li>
<li>
<p>Similarly a default import (i.e. <code>import d from "foo"</code>) for a CommonJS/AMD/UMD module as equivalent to <code>const d = require("foo").default</code>.
Most of the CommonJS/AMD/UMD modules available today do not have a <code>default</code> export, making this import pattern practically unusable to import non-ES modules (i.e. CommonJS/AMD/UMD). For instance <code>import fs from "fs"</code> or <code>import express from "express"</code> are not allowed.</p>
</li>
</ul>
<p>Under the new <a href="/tsconfig#esModuleInterop"><code>esModuleInterop</code></a> these two issues should be addressed:</p>
<ul>
<li>A namespace import (i.e. <code>import * as foo from "foo"</code>) is now correctly flagged as uncallabale. Calling it will result in an error.</li>
<li>Default imports to CommonJS/AMD/UMD are now allowed (e.g. <code>import fs from "fs"</code>), and should work as expected.</li>
</ul>
<blockquote>
<p>Note: The new behavior is added under a flag to avoid unwarranted breaks to existing code bases. We highly recommend applying it both to new and existing projects.
For existing projects, namespace imports (<code>import * as express from "express"; express();</code>) will need to be converted to default imports (<code>import express from "express"; express();</code>).</p>
</blockquote>
<h4 id="example-29" style="position:relative;"><a href="#example-29" aria-label="example 29 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>With <a href="/tsconfig#esModuleInterop"><code>esModuleInterop</code></a> two new helpers are generated <code>__importStar</code> and <code>__importDefault</code> for import <code>*</code> and import <code>default</code> respectively.
For instance input like:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"foo"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"bar"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Will generate:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">__importStar</span><span style="color: #000000"> =</span></div><div class='line'><span style="color: #000000">  (</span><span style="color: #0000FF">this</span><span style="color: #000000"> && </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">__importStar</span><span style="color: #000000">) ||</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">mod</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">mod</span><span style="color: #000000"> && </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #001080">__esModule</span><span style="color: #000000">) </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = {};</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">mod</span><span style="color: #000000"> != </span><span style="color: #0000FF">null</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">k</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #001080">hasOwnProperty</span><span style="color: #000000">.</span><span style="color: #795E26">call</span><span style="color: #000000">(</span><span style="color: #001080">mod</span><span style="color: #000000">, </span><span style="color: #001080">k</span><span style="color: #000000">)) </span><span style="color: #001080">result</span><span style="color: #000000">[</span><span style="color: #001080">k</span><span style="color: #000000">] = </span><span style="color: #001080">mod</span><span style="color: #000000">[</span><span style="color: #001080">k</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">result</span><span style="color: #000000">[</span><span style="color: #A31515">"default"</span><span style="color: #000000">] = </span><span style="color: #001080">mod</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">__importDefault</span><span style="color: #000000"> =</span></div><div class='line'><span style="color: #000000">  (</span><span style="color: #0000FF">this</span><span style="color: #000000"> && </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">__importDefault</span><span style="color: #000000">) ||</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">mod</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> && </span><span style="color: #001080">mod</span><span style="color: #000000">.</span><span style="color: #001080">__esModule</span><span style="color: #000000"> ? </span><span style="color: #001080">mod</span><span style="color: #000000"> : { </span><span style="color: #001080">default:</span><span style="color: #000000"> </span><span style="color: #001080">mod</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">__esModule</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #795E26">__importStar</span><span style="color: #000000">(</span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"foo"</span><span style="color: #000000">));</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">bar_1</span><span style="color: #000000"> = </span><span style="color: #795E26">__importDefault</span><span style="color: #000000">(</span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"bar"</span><span style="color: #000000">));</span></div></code></div></pre>
<h2 id="numeric-separators" style="position:relative;"><a href="#numeric-separators" aria-label="numeric separators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Numeric separators</h2>
<p>TypeScript 2.7 brings support for <a href="https://github.com/tc39/proposal-numeric-separator">ES Numeric Separators</a>.
Numeric literals can now be separated into segments using <code>_</code>.</p>
<h5 id="example-30" style="position:relative;"><a href="#example-30" aria-label="example 30 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">milion</span><span style="color: #000000"> = </span><span style="color: #098658">1_000_000</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">phone</span><span style="color: #000000"> = </span><span style="color: #098658">555_734_2231</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">bytes</span><span style="color: #000000"> = </span><span style="color: #098658">0xff_0c_00_ff</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">word</span><span style="color: #000000"> = </span><span style="color: #098658">0b1100_0011_1101_0001</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="cleaner-output-in---watch-mode" style="position:relative;"><a href="#cleaner-output-in---watch-mode" aria-label="cleaner output in   watch mode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cleaner output in <code>--watch</code> mode</h2>
<p>TypeScript’s <code>--watch</code> mode now clears the screen after a re-compilation is requested.</p>
<h2 id="prettier---pretty-output" style="position:relative;"><a href="#prettier---pretty-output" aria-label="prettier   pretty output permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prettier <code>--pretty</code> output</h2>
<p>TypeScript’s <a href="/tsconfig#pretty"><code>pretty</code></a> flag can make error messages easier to read and manage.
<a href="/tsconfig#pretty"><code>pretty</code></a> now uses colors for file names, diagnostic codes, and line numbers.
File names and positions are now also formatted to allow navigation in common terminals (e.g. Visual Studio Code terminal).</p>
<h2 id="typescript-26" style="position:relative;"><a href="#typescript-26" aria-label="typescript 26 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.6</h2>
<h2 id="strict-function-types" style="position:relative;"><a href="#strict-function-types" aria-label="strict function types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict function types</h2>
<p>TypeScript 2.6 introduces a new strict checking flag, <a href="/tsconfig#strictFunctionTypes"><code>strictFunctionTypes</code></a>.
The <a href="/tsconfig#strictFunctionTypes"><code>strictFunctionTypes</code></a> switch is part of the <a href="/tsconfig#strict"><code>strict</code></a> family of switches, meaning that it defaults to on in <a href="/tsconfig#strict"><code>strict</code></a> mode.
You can opt-out by setting <code>--strictFunctionTypes false</code> on your command line or in your tsconfig.json.</p>
<p>Under <a href="/tsconfig#strictFunctionTypes"><code>strictFunctionTypes</code></a> function type parameter positions are checked <em>contravariantly</em> instead of <em>bivariantly</em>.
For some background on what variance means for function types check out <a href="https://www.stephanboyer.com/post/132/what-are-covariance-and-contravariance">What are covariance and contravariance?</a>.</p>
<p>The stricter checking applies to all function types, <em>except</em> those originating in method or constructor declarations.
Methods are excluded specifically to ensure generic classes and interfaces (such as <code>Array&#x3C;T></code>) continue to mostly relate covariantly.</p>
<p>Consider the following example in which <code>Animal</code> is the supertype of <code>Dog</code> and <code>Cat</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f2</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f3</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Cat</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">f1</span><span style="color: #000000"> = </span><span style="color: #001080">f2</span><span style="color: #000000">; </span><span style="color: #008000">// Error with --strictFunctionTypes</span></div><div class='line'><span style="color: #001080">f2</span><span style="color: #000000"> = </span><span style="color: #001080">f1</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">f2</span><span style="color: #000000"> = </span><span style="color: #001080">f3</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div></code></div></pre>
<p>The first assignment is permitted in default type checking mode, but flagged as an error in strict function types mode.
Intuitively, the default mode permits the assignment because it is <em>possibly</em> sound, whereas strict function types mode makes it an error because it isn’t <em>provably</em> sound.
In either mode the third assignment is an error because it is <em>never</em> sound.</p>
<p>Another way to describe the example is that the type <code>(x: T) => void</code> is <em>bivariant</em> (i.e. covariant <em>or</em> contravariant) for <code>T</code> in default type checking mode, but <em>contravariant</em> for <code>T</code> in strict function types mode.</p>
<h4 id="example-31" style="position:relative;"><a href="#example-31" aria-label="example 31 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Comparer</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">compare</span><span style="color: #000000">: (</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">animalComparer</span><span style="color: #000000">: </span><span style="color: #1C6277">Comparer</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Animal</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">dogComparer</span><span style="color: #000000">: </span><span style="color: #1C6277">Comparer</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Dog</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #001080">animalComparer</span><span style="color: #000000"> = </span><span style="color: #001080">dogComparer</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">dogComparer</span><span style="color: #000000"> = </span><span style="color: #001080">animalComparer</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div></code></div></pre>
<p>The first assignment is now an error. Effectively, <code>T</code> is contravariant in <code>Comparer&#x3C;T></code> because it is used only in function type parameter positions.</p>
<p>By the way, note that whereas some languages (e.g. C# and Scala) require variance annotations (<code>out</code>/<code>in</code> or <code>+</code>/<code>-</code>), variance emerges naturally from the actual use of a type parameter within a generic type due to TypeScript’s structural type system.</p>
<h4 id="note" style="position:relative;"><a href="#note" aria-label="note permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Note:</h4>
<p>Under <a href="/tsconfig#strictFunctionTypes"><code>strictFunctionTypes</code></a> the first assignment is still permitted if <code>compare</code> was declared as a method.
Effectively, <code>T</code> is bivariant in <code>Comparer&#x3C;T></code> because it is used only in method parameter positions.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Comparer</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">compare</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">animalComparer</span><span style="color: #000000">: </span><span style="color: #1C6277">Comparer</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Animal</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">dogComparer</span><span style="color: #000000">: </span><span style="color: #1C6277">Comparer</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Dog</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #001080">animalComparer</span><span style="color: #000000"> = </span><span style="color: #001080">dogComparer</span><span style="color: #000000">; </span><span style="color: #008000">// Ok because of bivariance</span></div><div class='line'><span style="color: #001080">dogComparer</span><span style="color: #000000"> = </span><span style="color: #001080">animalComparer</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div></code></div></pre>
<p>TypeScript 2.6 also improves type inference involving contravariant positions:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">combine</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(...</span><span style="color: #001080">funcs</span><span style="color: #000000">: ((</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">)[]): (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">f</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">funcs</span><span style="color: #000000">) </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">animalFunc</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">dogFunc</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">) {}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">combined</span><span style="color: #000000"> = </span><span style="color: #795E26">combine</span><span style="color: #000000">(</span><span style="color: #001080">animalFunc</span><span style="color: #000000">, </span><span style="color: #001080">dogFunc</span><span style="color: #000000">); </span><span style="color: #008000">// (x: Dog) =&gt; void</span></div></code></div></pre>
<p>Above, all inferences for <code>T</code> originate in contravariant positions, and we therefore infer the <em>best common subtype</em> for <code>T</code>.
This contrasts with inferences from covariant positions, where we infer the <em>best common supertype</em>.</p>
<h2 id="support-for-jsx-fragment-syntax" style="position:relative;"><a href="#support-for-jsx-fragment-syntax" aria-label="support for jsx fragment syntax permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for JSX Fragment Syntax</h2>
<p>TypeScript 2.6.2 adds support for the new <code>&#x3C;>...&#x3C;/></code> syntax for fragments in JSX.
It is frequently desirable to return multiple children from a component.
However, this is invalid, so the usual approach has been to wrap the text in an extra element, such as a <code>&#x3C;div></code> or <code>&#x3C;span></code> as shown below.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #795E26">render</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #800000">&lt;div&gt;</span></div><div class='line'><span style="color: #000000">            Some text.</span></div><div class='line'><span style="color: #000000">            </span><span style="color: #800000">&lt;h2&gt;</span><span style="color: #000000">A heading</span><span style="color: #800000">&lt;/h2&gt;</span></div><div class='line'><span style="color: #000000">            More text.</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #800000">&lt;/div&gt;</span></div><div class='line'><span style="color: #000000">    );</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>To address this pattern, React introduced the <code>React.Fragment</code> component, which provides a dedicated way to wrap such elements without adding an element to the DOM.
Correspondingly, the <code>&#x3C;>...&#x3C;/></code> syntax was added to JSX to facilitate this new construct. Therefore, the above scenario becomes:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">tsx</div><div class='code-container'><code><div class='line'><span style="color: #795E26">render</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #800000">&lt;&gt;</span></div><div class='line'><span style="color: #000000">            Some text.</span></div><div class='line'><span style="color: #000000">            </span><span style="color: #800000">&lt;h2&gt;</span><span style="color: #000000">A heading</span><span style="color: #800000">&lt;/h2&gt;</span></div><div class='line'><span style="color: #000000">            More text.</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #800000">&lt;/&gt;</span></div><div class='line'><span style="color: #000000">    );</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Under <code>--jsx preserve</code>, the new syntax is left untouched for TypeScript emit. Otherwise, for <code>--jsx react</code>, <code>&#x3C;>...&#x3C;/></code> is compiled to <code>React.createElement(React.Fragment, null, ...)</code>, where <code>React.createElement</code> respects <a href="/tsconfig#jsxFactory"><code>jsxFactory</code></a>.
Note that it is an error to use <code>&#x3C;>...&#x3C;/></code> when <code>--jsx react</code> and <a href="/tsconfig#jsxFactory"><code>jsxFactory</code></a> are both enabled.</p>
<p>Please refer to <a href="https://reactjs.org/blog/2017/11/28/react-v16.2.0-fragment-support.html">the React blog</a> for more details on fragments and the new syntax.</p>
<h2 id="cache-tagged-template-objects-in-modules" style="position:relative;"><a href="#cache-tagged-template-objects-in-modules" aria-label="cache tagged template objects in modules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cache tagged template objects in modules</h2>
<p>TypeScript 2.6 fixes the tagged string template emit to align better with the ECMAScript spec.
As per the <a href="https://tc39.github.io/ecma262/#sec-gettemplateobject">ECMAScript spec</a>, every time a template tag is evaluated, the <em>same</em> template strings object (the same <code>TemplateStringsArray</code>) should be passed as the first argument.
Before TypeScript 2.6, the generated output was a completely new template object each time.
Though the string contents are the same, this emit affects libraries that use the identity of the string for cache invalidation purposes, e.g. <a href="https://github.com/PolymerLabs/lit-html/issues/58">lit-html</a>.</p>
<h4 id="example-32" style="position:relative;"><a href="#example-32" aria-label="example 32 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">id</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">TemplateStringsArray</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">templateObjectFactory</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">id</span><span style="color: #A31515">`hello world`</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #795E26">templateObjectFactory</span><span style="color: #000000">() === </span><span style="color: #795E26">templateObjectFactory</span><span style="color: #000000">(); </span><span style="color: #008000">// true in TS 2.6</span></div></code></div></pre>
<p>Results in the following generated code:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">__makeTemplateObject</span><span style="color: #000000"> =</span></div><div class='line'><span style="color: #000000">  (</span><span style="color: #0000FF">this</span><span style="color: #000000"> && </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">__makeTemplateObject</span><span style="color: #000000">) ||</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">cooked</span><span style="color: #000000">, </span><span style="color: #001080">raw</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #001080">defineProperty</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #795E26">defineProperty</span><span style="color: #000000">(</span><span style="color: #001080">cooked</span><span style="color: #000000">, </span><span style="color: #A31515">"raw"</span><span style="color: #000000">, { </span><span style="color: #001080">value:</span><span style="color: #000000"> </span><span style="color: #001080">raw</span><span style="color: #000000"> });</span></div><div class='line'><span style="color: #000000">    } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">cooked</span><span style="color: #000000">.</span><span style="color: #001080">raw</span><span style="color: #000000"> = </span><span style="color: #001080">raw</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">cooked</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">id</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_a</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">templateObjectFactory</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">id</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">_a</span><span style="color: #000000"> || (</span><span style="color: #001080">_a</span><span style="color: #000000"> = </span><span style="color: #795E26">__makeTemplateObject</span><span style="color: #000000">([</span><span style="color: #A31515">"hello world"</span><span style="color: #000000">], [</span><span style="color: #A31515">"hello world"</span><span style="color: #000000">]))</span></div><div class='line'><span style="color: #000000">  );</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = </span><span style="color: #795E26">templateObjectFactory</span><span style="color: #000000">() === </span><span style="color: #795E26">templateObjectFactory</span><span style="color: #000000">();</span></div></code></div></pre>
<blockquote>
<p>Note: This change brings a new emit helper, <code>__makeTemplateObject</code>;
if you are using <a href="/tsconfig#importHelpers"><code>importHelpers</code></a> with <a href="https://github.com/Microsoft/tslib"><code>tslib</code></a>, an updated to version 1.8 or later.</p>
</blockquote>
<h2 id="localized-diagnostics-on-the-command-line" style="position:relative;"><a href="#localized-diagnostics-on-the-command-line" aria-label="localized diagnostics on the command line permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Localized diagnostics on the command line</h2>
<p>TypeScript 2.6 npm package ships with localized versions of diagnostic messages for 13 languages.
The localized messages are available when using <code>--locale</code> flag on the command line.</p>
<h4 id="example-33" style="position:relative;"><a href="#example-33" aria-label="example 33 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>Error messages in Russian:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">sh</div><div class='code-container'><code><div class='line'><span style="color: #000000">c:</span><span style="color: #EE0000">\t</span><span style="color: #000000">s&gt;tsc --v</span></div><div class='line'><span style="color: #000000">Version 2.6.0-dev.20171003</span></div><div class='line'></div><div class='line'><span style="color: #000000">c:</span><span style="color: #EE0000">\t</span><span style="color: #000000">s&gt;tsc --locale ru --pretty c:</span><span style="color: #EE0000">\t</span><span style="color: #000000">est</span><span style="color: #EE0000">\a</span><span style="color: #000000">.ts</span></div><div class='line'></div><div class='line'><span style="color: #000000">../test/a.ts(1,5): error TS2322: Тип </span><span style="color: #A31515">""</span><span style="color: #000000">string</span><span style="color: #A31515">""</span><span style="color: #000000"> не может быть назначен для типа </span><span style="color: #A31515">"number"</span><span style="color: #000000">.</span></div><div class='line'></div><div class='line'><span style="color: #000000">1 var x: number = </span><span style="color: #A31515">"string"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">      ~</span></div></code></div></pre>
<p>And help in Japanese:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">sh</div><div class='code-container'><code><div class='line'><span style="color: #000000">PS C:</span><span style="color: #EE0000">\t</span><span style="color: #000000">s&gt; tsc --v</span></div><div class='line'><span style="color: #000000">Version 2.6.0-dev.20171003</span></div><div class='line'></div><div class='line'><span style="color: #000000">PS C:</span><span style="color: #EE0000">\t</span><span style="color: #000000">s&gt; tsc --locale ja-jp</span></div><div class='line'><span style="color: #000000">バージョン 2.6.0-dev.20171003</span></div><div class='line'><span style="color: #000000">構文: tsc [オプション] [ファイル ...]</span></div><div class='line'></div><div class='line'><span style="color: #000000">例:  tsc hello.ts</span></div><div class='line'><span style="color: #000000">    tsc --outFile file.js file.ts</span></div><div class='line'><span style="color: #000000">    tsc @args.txt</span></div><div class='line'></div><div class='line'><span style="color: #000000">オプション:</span></div><div class='line'><span style="color: #000000"> -h, --help                                 このメッセージを表示します。</span></div><div class='line'><span style="color: #000000"> --all                                      コンパイラ オプションをすべて表示します。</span></div><div class='line'><span style="color: #000000"> -v, --version                              コンパイラのバージョンを表示します。</span></div><div class='line'><span style="color: #000000"> --init                                     TypeScript プロジェクトを初期化して、tsconfig.json ファイルを作成します。</span></div><div class='line'><span style="color: #000000"> -p ファイルまたはディレクトリ, --project ファイルまたはディレクトリ  構成ファイルか、</span><span style="color: #A31515">'tsconfig.json'</span><span style="color: #000000"> を含むフォルダーにパスが指定されたプロジェクトをコ</span></div><div class='line'><span style="color: #000000">ンパイルします。</span></div><div class='line'><span style="color: #000000"> --pretty                                   色とコンテキストを使用してエラーとメッセージにスタイルを適用します (試験的)。</span></div><div class='line'><span style="color: #000000"> -w, --watch                                入力ファイルを監視します。</span></div><div class='line'><span style="color: #000000"> -t バージョン, --target バージョン                   ECMAScript のターゲット バージョンを指定します: </span><span style="color: #A31515">'ES3'</span><span style="color: #000000"> (既定)、</span><span style="color: #A31515">'ES5'</span><span style="color: #000000">、</span><span style="color: #A31515">'ES2015'</span><span style="color: #000000">、</span><span style="color: #A31515">'ES2016'</span><span style="color: #000000">、</span><span style="color: #A31515">'ES2017'</span><span style="color: #000000">、</span><span style="color: #A31515">'ES</span></div><div class='line'><span style="color: #A31515">NEXT'</span><span style="color: #000000">。</span></div><div class='line'><span style="color: #000000"> -m 種類, --module 種類                         モジュール コード生成を指定します: </span><span style="color: #A31515">'none'</span><span style="color: #000000">、</span><span style="color: #A31515">'commonjs'</span><span style="color: #000000">、</span><span style="color: #A31515">'amd'</span><span style="color: #000000">、</span><span style="color: #A31515">'system'</span><span style="color: #000000">、</span><span style="color: #A31515">'umd'</span><span style="color: #000000">、</span><span style="color: #A31515">'es2015'</span><span style="color: #000000">、</span><span style="color: #A31515">'ESNext'</span><span style="color: #000000">。</span></div><div class='line'><span style="color: #000000"> --lib                                      コンパイルに含めるライブラリ ファイルを指定します:</span></div><div class='line'><span style="color: #000000">                                              </span><span style="color: #A31515">'es5'</span><span style="color: #000000"> </span><span style="color: #A31515">'es6'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015'</span><span style="color: #000000"> </span><span style="color: #A31515">'es7'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2016'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2017'</span><span style="color: #000000"> </span><span style="color: #A31515">'esnext'</span><span style="color: #000000"> </span><span style="color: #A31515">'dom'</span><span style="color: #000000"> </span><span style="color: #A31515">'dom.iterable'</span><span style="color: #000000"> </span><span style="color: #A31515">'webworker'</span><span style="color: #000000"> </span><span style="color: #A31515">'scripthost'</span><span style="color: #000000"> </span><span style="color: #A31515">'es201</span></div><div class='line'><span style="color: #A31515">5.core'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.collection'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.generator'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.iterable'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.promise'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.proxy'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.reflect'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.symbol'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2015.symbol.wellkno</span></div><div class='line'><span style="color: #A31515">wn'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2016.array.include'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2017.object'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2017.sharedmemory'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2017.string'</span><span style="color: #000000"> </span><span style="color: #A31515">'es2017.intl'</span><span style="color: #000000"> </span><span style="color: #A31515">'esnext.asynciterable'</span></div><div class='line'><span style="color: #000000"> --allowJs                                  javascript ファイルのコンパイルを許可します。</span></div><div class='line'><span style="color: #000000"> --jsx 種類                                   JSX コード生成を指定します: </span><span style="color: #A31515">'preserve'</span><span style="color: #000000">、</span><span style="color: #A31515">'react-native'</span><span style="color: #000000">、</span><span style="color: #A31515">'react'</span><span style="color: #000000">。</span></div><div class='line'><span style="color: #000000"> -d, --declaration                          対応する </span><span style="color: #A31515">'.d.ts'</span><span style="color: #000000"> ファイルを生成します。</span></div><div class='line'><span style="color: #000000"> --sourceMap                                対応する </span><span style="color: #A31515">'.map'</span><span style="color: #000000"> ファイルを生成します。</span></div><div class='line'><span style="color: #000000"> --outFile ファイル                             出力を連結して 1 つのファイルを生成します。</span></div><div class='line'><span style="color: #000000"> --outDir ディレクトリ                            ディレクトリへ出力構造をリダイレクトします。</span></div><div class='line'><span style="color: #000000"> --removeComments                           コメントを出力しないでください。</span></div><div class='line'><span style="color: #000000"> --noEmit                                   出力しないでください。</span></div><div class='line'><span style="color: #000000"> --strict                                   strict 型チェックのオプションをすべて有効にします。</span></div><div class='line'><span style="color: #000000"> --noImplicitAny                            暗黙的な </span><span style="color: #A31515">'any'</span><span style="color: #000000"> 型を含む式と宣言に関するエラーを発生させます。</span></div><div class='line'><span style="color: #000000"> --strictNullChecks                         厳格な null チェックを有効にします。</span></div><div class='line'><span style="color: #000000"> --noImplicitThis                           暗黙的な </span><span style="color: #A31515">'any'</span><span style="color: #000000"> 型を持つ </span><span style="color: #A31515">'this'</span><span style="color: #000000"> 式でエラーが発生します。</span></div><div class='line'><span style="color: #000000"> --alwaysStrict                             厳格モードで解析してソース ファイルごとに </span><span style="color: #A31515">"use strict"</span><span style="color: #000000"> を生成します。</span></div><div class='line'><span style="color: #000000"> --noUnusedLocals                           使用されていないローカルに関するエラーを報告します。</span></div><div class='line'><span style="color: #000000"> --noUnusedParameters                       使用されていないパラメーターに関するエラーを報告します。</span></div><div class='line'><span style="color: #000000"> --noImplicitReturns                        関数の一部のコード パスが値を返さない場合にエラーを報告します。</span></div><div class='line'><span style="color: #000000"> --noFallthroughCasesInSwitch               switch ステートメントに </span><span style="color: #AF00DB">case</span><span style="color: #000000"> のフォールスルーがある場合にエラーを報告します。</span></div><div class='line'><span style="color: #000000"> --types                                    コンパイルに含む型宣言ファイル。</span></div><div class='line'><span style="color: #000000"> @&lt;ファイル&gt;</span></div></code></div></pre>
<h2 id="suppress-errors-in-ts-files-using--ts-ignore-comments" style="position:relative;"><a href="#suppress-errors-in-ts-files-using--ts-ignore-comments" aria-label="suppress errors in ts files using  ts ignore comments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Suppress errors in .ts files using ’// @ts-ignore’ comments</h2>
<p>TypeScript 2.6 support suppressing errors in .js files using <code>// @ts-ignore</code> comments placed above the offending lines.</p>
<h4 id="example-34" style="position:relative;"><a href="#example-34" aria-label="example 34 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">false</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// @ts-ignore: Unreachable code error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>A <code>// @ts-ignore</code> comment suppresses all errors that originate on the following line.
It is recommended practice to have the remainder of the comment following <code>@ts-ignore</code> explain which error is being suppressed.</p>
<p>Please note that this comment only suppresses the error reporting, and we recommend you use this comments <em>very sparingly</em>.</p>
<h2 id="faster-tsc---watch" style="position:relative;"><a href="#faster-tsc---watch" aria-label="faster tsc   watch permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Faster <code>tsc --watch</code></h2>
<p>TypeScript 2.6 brings a faster <code>--watch</code> implementation.
The new version optimizes code generation and checking for code bases using ES modules.
Changes detected in a module file will result in <em>only</em> regenerating the changed module, and files that depend on it, instead of the whole project.
Projects with large number of files should reap the most benefit from this change.</p>
<p>The new implementation also brings performance enhancements to watching in tsserver.
The watcher logic has been completely rewritten to respond faster to change events.</p>
<h2 id="write-only-references-now-flagged-as-unused" style="position:relative;"><a href="#write-only-references-now-flagged-as-unused" aria-label="write only references now flagged as unused permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Write-only references now flagged as unused</h2>
<p>TypeScript 2.6 adds revised implementation the <a href="/tsconfig#noUnusedLocals"><code>noUnusedLocals</code></a> and <a href="/tsconfig#noUnusedParameters"><code>noUnusedParameters</code></a> <a href="/docs/handbook/compiler-options.html">compiler options</a>.
Declarations are only written to but never read from are now flagged as unused.</p>
<h4 id="example-35" style="position:relative;"><a href="#example-35" aria-label="example 35 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>Bellow both <code>n</code> and <code>m</code> will be marked as unused, because their values are never <em>read</em>. Previously TypeScript would only check whether their values were <em>referenced</em>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">n</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">n</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #001080">m</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">m</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Also functions that are only called within their own bodies are considered unused.</p>
<h4 id="example-36" style="position:relative;"><a href="#example-36" aria-label="example 36 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">(); </span><span style="color: #008000">// Error: 'f' is declared but its value is never read</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="typescript-25" style="position:relative;"><a href="#typescript-25" aria-label="typescript 25 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.5</h2>
<h2 id="optional-catch-clause-variables" style="position:relative;"><a href="#optional-catch-clause-variables" aria-label="optional catch clause variables permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional <code>catch</code> clause variables</h2>
<p>Thanks to work done by <a href="https://github.com/tinganho">@tinganho</a>, TypeScript 2.5 implements a new ECMAScript feature that allows users to omit the variable in <code>catch</code> clauses.
For example, when using <code>JSON.parse</code> you may need to wrap calls to the function with a <code>try</code>/<code>catch</code>, but you may not end up using the <code>SyntaxError</code> that gets thrown when input is erroneous.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">input</span><span style="color: #000000"> = </span><span style="color: #A31515">"..."</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">try</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #1C6277">JSON</span><span style="color: #000000">.</span><span style="color: #795E26">parse</span><span style="color: #000000">(</span><span style="color: #001080">input</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">catch</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ^ Notice that our `catch` clause doesn't declare a variable.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Invalid JSON given</span><span style="color: #EE0000">\n\n</span><span style="color: #A31515">"</span><span style="color: #000000"> + </span><span style="color: #001080">input</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="type-assertioncast-syntax-in-checkjsts-check-mode" style="position:relative;"><a href="#type-assertioncast-syntax-in-checkjsts-check-mode" aria-label="type assertioncast syntax in checkjsts check mode permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type assertion/cast syntax in <code>checkJs</code>/<code>@ts-check</code> mode</h2>
<p>TypeScript 2.5 introduces the ability to <a href="https://github.com/Microsoft/TypeScript/issues/5158">assert the type of expressions when using plain JavaScript in your projects</a>.
The syntax is an <code>/** @type {...} */</code> annotation comment followed by a parenthesized expression whose type needs to be re-evaluated.
For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #008000">/** </span><span style="color: #0000FF">@type</span><span style="color: #008000"> </span><span style="color: #1C6277">{SomeType}</span><span style="color: #008000"> */</span><span style="color: #000000"> </span><span style="color: #001080">AnyParenthesizedExpression</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="deduplicated-and-redirected-packages" style="position:relative;"><a href="#deduplicated-and-redirected-packages" aria-label="deduplicated and redirected packages permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deduplicated and redirected packages</h2>
<p>When importing using the <code>Node</code> module resolution strategy in TypeScript 2.5, the compiler will now check whether files originate from “identical” packages.
If a file originates from a package with a <code>package.json</code> containing the same <code>name</code> and <code>version</code> fields as a previously encountered package, then TypeScript will redirect itself to the top-most package.
This helps resolve problems where two packages might contain identical declarations of classes, but which contain <code>private</code> members that cause them to be structurally incompatible.</p>
<p>As a nice bonus, this can also reduce the memory and runtime footprint of the compiler and language service by avoiding loading <code>.d.ts</code> files from duplicate packages.</p>
<h2 id="the---preservesymlinks-compiler-flag" style="position:relative;"><a href="#the---preservesymlinks-compiler-flag" aria-label="the   preservesymlinks compiler flag permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>--preserveSymlinks</code> compiler flag</h2>
<p>TypeScript 2.5 brings the <a href="/tsconfig#preserveSymlinks"><code>preserveSymlinks</code></a> flag, which parallels the behavior of <a href="https://nodejs.org/api/cli.html#cli_preserve_symlinks">the <code>--preserve-symlinks</code> flag in Node.js</a>.
This flag also exhibits the opposite behavior to Webpack’s <code>resolve.symlinks</code> option (i.e. setting TypeScript’s <a href="/tsconfig#preserveSymlinks"><code>preserveSymlinks</code></a> to <code>true</code> parallels setting Webpack’s <code>resolve.symlinks</code> to <code>false</code>, and vice-versa).</p>
<p>In this mode, references to modules and packages (e.g. <code>import</code>s and <code>/// &#x3C;reference type="..." /></code> directives) are all resolved relative to the location of the symbolic link file, rather than relative to the path that the symbolic link resolves to.
For a more concrete example, we’ll defer to <a href="https://nodejs.org/api/cli.html#cli_preserve_symlinks">the documentation on the Node.js website</a>.</p>
<h2 id="typescript-24" style="position:relative;"><a href="#typescript-24" aria-label="typescript 24 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.4</h2>
<h2 id="dynamic-import-expressions" style="position:relative;"><a href="#dynamic-import-expressions" aria-label="dynamic import expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dynamic Import Expressions</h2>
<p>Dynamic <code>import</code> expressions are a new feature and part of ECMAScript that allows users to asynchronously request a module at any arbitrary point in your program.</p>
<p>This means that you can conditionally and lazily import other modules and libraries.
For example, here’s an <code>async</code> function that only imports a utility library when it’s needed:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getZipFile</span><span style="color: #000000">(</span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">files</span><span style="color: #000000">: </span><span style="color: #1C6277">File</span><span style="color: #000000">[]): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">File</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">zipUtil</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #0000FF">import</span><span style="color: #000000">(</span><span style="color: #A31515">"./utils/create-zip-file"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">zipContents</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">zipUtil</span><span style="color: #000000">.</span><span style="color: #795E26">getContentAsBlob</span><span style="color: #000000">(</span><span style="color: #001080">files</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">File</span><span style="color: #000000">(</span><span style="color: #001080">zipContents</span><span style="color: #000000">, </span><span style="color: #001080">name</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Many bundlers have support for automatically splitting output bundles based on these <code>import</code> expressions, so consider using this new feature with the <code>esnext</code> module target.</p>
<h2 id="string-enums" style="position:relative;"><a href="#string-enums" aria-label="string enums permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>String Enums</h2>
<p>TypeScript 2.4 now allows enum members to contain string initializers.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #1C6277">Colors</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Red</span><span style="color: #000000"> = </span><span style="color: #A31515">"RED"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Green</span><span style="color: #000000"> = </span><span style="color: #A31515">"GREEN"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Blue</span><span style="color: #000000"> = </span><span style="color: #A31515">"BLUE"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The caveat is that string-initialized enums can’t be reverse-mapped to get the original enum member name.
In other words, you can’t write <code>Colors["RED"]</code> to get the string <code>"Red"</code>.</p>
<h2 id="improved-inference-for-generics" style="position:relative;"><a href="#improved-inference-for-generics" aria-label="improved inference for generics permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved inference for generics</h2>
<p>TypeScript 2.4 introduces a few wonderful changes around the way generics are inferred.</p>
<h3 id="return-types-as-inference-targets" style="position:relative;"><a href="#return-types-as-inference-targets" aria-label="return types as inference targets permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Return types as inference targets</h3>
<p>For one, TypeScript can now make inferences for the return type of a call.
This can improve your experience and catch errors.
Something that now works:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">arrayMap</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #795E26">f</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">): (</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">[] {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span><span style="color: #001080">a</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #795E26">map</span><span style="color: #000000">(</span><span style="color: #001080">f</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">lengths</span><span style="color: #000000">: (</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">number</span><span style="color: #000000">[] = </span><span style="color: #795E26">arrayMap</span><span style="color: #000000">((</span><span style="color: #001080">s</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">);</span></div></code></div></pre>
<p>As an example of new errors you might spot as a result:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt; = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Promise</span><span style="color: #000000">((</span><span style="color: #001080">resolve</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">resolve</span><span style="color: #000000">(</span><span style="color: #098658">10</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//      ~~ Error!</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h3 id="type-parameter-inference-from-contextual-types" style="position:relative;"><a href="#type-parameter-inference-from-contextual-types" aria-label="type parameter inference from contextual types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type parameter inference from contextual types</h3>
<p>Prior to TypeScript 2.4, in the following example</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">: &lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> = (</span><span style="color: #001080">y</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">;</span></div></code></div></pre>
<p><code>y</code> would have the type <code>any</code>.
This meant the program would type-check, but you could technically do anything with <code>y</code>, such as the following:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">: &lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> = (</span><span style="color: #001080">y</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">y</span><span style="color: #000000">() + </span><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">bar</span><span style="color: #000000">;</span></div></code></div></pre>
<p>That last example isn’t actually type-safe.</p>
<p>In TypeScript 2.4, the function on the right side implicitly <em>gains</em> type parameters, and <code>y</code> is inferred to have the type of that type-parameter.</p>
<p>If you use <code>y</code> in a way that the type parameter’s constraint doesn’t support, you’ll correctly get an error.
In this case, the constraint of <code>T</code> was (implicitly) <code>{}</code>, so the last example will appropriately fail.</p>
<h3 id="stricter-checking-for-generic-functions" style="position:relative;"><a href="#stricter-checking-for-generic-functions" aria-label="stricter checking for generic functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stricter checking for generic functions</h3>
<p>TypeScript now tries to unify type parameters when comparing two single-signature types.
As a result, you’ll get stricter checks when relating two generic signatures, and may catch some bugs.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> [</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">S</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">S</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">S</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> [</span><span style="color: #1C6277">S</span><span style="color: #000000">, </span><span style="color: #1C6277">S</span><span style="color: #000000">];</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">B</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="strict-contravariance-for-callback-parameters" style="position:relative;"><a href="#strict-contravariance-for-callback-parameters" aria-label="strict contravariance for callback parameters permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Strict contravariance for callback parameters</h2>
<p>TypeScript has always compared parameters in a bivariant way.
There are a number of reasons for this, but by-and-large this was not been a huge issue for our users until we saw some of the adverse effects it had with <code>Promise</code>s and <code>Observable</code>s.</p>
<p>TypeScript 2.4 introduces tightens this up when relating two callback types. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Mappable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">map</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #795E26">f</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">Mappable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">Mappable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">Mappable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Prior to TypeScript 2.4, this example would succeed.
When relating the types of <code>map</code>, TypeScript would bidirectionally relate their parameters (i.e. the type of <code>f</code>).
When relating each <code>f</code>, TypeScript would also bidirectionally relate the type of <em>those</em> parameters.</p>
<p>When relating the type of <code>map</code> in TS 2.4, the language will check whether each parameter is a callback type, and if so, it will ensure that those parameters are checked in a contravariant manner with respect to the current relation.</p>
<p>In other words, TypeScript now catches the above bug, which may be a breaking change for some users, but will largely be helpful.</p>
<h2 id="weak-type-detection" style="position:relative;"><a href="#weak-type-detection" aria-label="weak type detection permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Weak Type Detection</h2>
<p>TypeScript 2.4 introduces the concept of “weak types”.
Any type that contains nothing but a set of all-optional properties is considered to be <em>weak</em>.
For example, this <code>Options</code> type is a weak type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Options</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">data</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">timeout</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">maxRetries</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>In TypeScript 2.4, it’s now an error to assign anything to a weak type when there’s no overlap in properties.
For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">sendMessage</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000">: </span><span style="color: #1C6277">Options</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">opts</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">payload:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello world!"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">retryOnFail:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Error!</span></div><div class='line'><span style="color: #795E26">sendMessage</span><span style="color: #000000">(</span><span style="color: #001080">opts</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">// No overlap between the type of 'opts' and 'Options' itself.</span></div><div class='line'><span style="color: #008000">// Maybe we meant to use 'data'/'maxRetries' instead of 'payload'/'retryOnFail'.</span></div></code></div></pre>
<p>You can think of this as TypeScript “toughening up” the weak guarantees of these types to catch what would otherwise be silent bugs.</p>
<p>Since this is a breaking change, you may need to know about the workarounds which are the same as those for strict object literal checks:</p>
<ol>
<li>Declare the properties if they really do exist.</li>
<li>Add an index signature to the weak type (i.e. <code>[propName: string]: {}</code>).</li>
<li>Use a type assertion (i.e. <code>opts as Options</code>).</li>
</ol>
<h2 id="typescript-23" style="position:relative;"><a href="#typescript-23" aria-label="typescript 23 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.3</h2>
<h2 id="generators-and-iteration-for-es5es3" style="position:relative;"><a href="#generators-and-iteration-for-es5es3" aria-label="generators and iteration for es5es3 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generators and Iteration for ES5/ES3</h2>
<p><em>First some ES2016 terminology:</em></p>
<h4 id="iterators" style="position:relative;"><a href="#iterators" aria-label="iterators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Iterators</h4>
<p><a href="https://www.ecma-international.org/ecma-262/6.0/#sec-iteration">ES2015 introduced <code>Iterator</code></a>, which is an object that exposes three methods, <code>next</code>, <code>return</code>, and <code>throw</code>, as per the following interface:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Iterator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">next</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">return</span><span style="color: #000000">?(</span><span style="color: #001080">value</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">throw</span><span style="color: #000000">?(</span><span style="color: #001080">e</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This kind of iterator is useful for iterating over synchronously available values, such as the elements of an Array or the keys of a Map.
An object that supports iteration is said to be “iterable” if it has a <code>Symbol.iterator</code> method that returns an <code>Iterator</code> object.</p>
<p>The Iterator protocol also defines the target of some of the ES2015 features like <code>for..of</code> and spread operator and the array rest in destructuring assignmnets.</p>
<h4 id="generators" style="position:relative;"><a href="#generators" aria-label="generators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generators</h4>
<p><a href="https://www.ecma-international.org/ecma-262/6.0/#sec-generatorfunction-objects">ES2015 also introduced “Generators”</a>, which are functions that can be used to yield partial computation results via the <code>Iterator</code> interface and the <code>yield</code> keyword.
Generators can also internally delegate calls to another iterable through <code>yield *</code>. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #0000FF">*</span><span style="color: #000000"> [</span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h4 id="new---downleveliteration" style="position:relative;"><a href="#new---downleveliteration" aria-label="new   downleveliteration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--downlevelIteration</code></h4>
<p>Previously generators were only supported if the target is ES6/ES2015 or later.
Moreover, constructs that operate on the Iterator protocol, e.g. <code>for..of</code> were only supported if they operate on arrays for targets below ES6/ES2015.</p>
<p>TypeScript 2.3 adds full support for generators and the Iterator protocol for ES3 and ES5 targets with <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a> flag.</p>
<p>With <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a>, the compiler uses new type check and emit behavior that attempts to call a <code>[Symbol.iterator]()</code> method on the iterated object if it is found, and creates a synthetic array iterator over the object if it is not.</p>
<blockquote>
<p>Please note that this requires a native <code>Symbol.iterator</code> or <code>Symbol.iterator</code> shim at runtime for any non-array values.</p>
</blockquote>
<p><code>for..of</code> statements, Array Destructuring, and Spread elements in Array, Call, and New expressions support <code>Symbol.iterator</code> in ES5/E3 if available when using <a href="/tsconfig#downlevelIteration"><code>downlevelIteration</code></a>, but can be used on an Array even if it does not define <code>Symbol.iterator</code> at run time or design time.</p>
<h2 id="async-iteration" style="position:relative;"><a href="#async-iteration" aria-label="async iteration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async Iteration</h2>
<p>TypeScript 2.3 adds support for the async iterators and generators as described by the current <a href="https://github.com/tc39/proposal-async-iteration">TC39 proposal</a>.</p>
<h4 id="async-iterators" style="position:relative;"><a href="#async-iterators" aria-label="async iterators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async iterators</h4>
<p>The Async Iteration introduces an <code>AsyncIterator</code>, which is similar to <code>Iterator</code>.
The difference lies in the fact that the <code>next</code>, <code>return</code>, and <code>throw</code> methods of an <code>AsyncIterator</code> return a <code>Promise</code> for the iteration result, rather than the result itself. This allows the caller to enlist in an asynchronous notification for the time at which the <code>AsyncIterator</code> has advanced to the point of yielding a value.
An <code>AsyncIterator</code> has the following shape:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">AsyncIterator</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">next</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">return</span><span style="color: #000000">?(</span><span style="color: #001080">value</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">throw</span><span style="color: #000000">?(</span><span style="color: #001080">e</span><span style="color: #000000">?: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">IteratorResult</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;&gt;;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>An object that supports async iteration is said to be “iterable” if it has a <code>Symbol.asyncIterator</code> method that returns an <code>AsyncIterator</code> object.</p>
<h4 id="async-generators" style="position:relative;"><a href="#async-generators" aria-label="async generators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Async Generators</h4>
<p>The <a href="https://github.com/tc39/proposal-async-iteration">Async Iteration proposal</a> introduces “Async Generators”, which are async functions that also can be used to yield partial computation results. Async Generators can also delegate calls via <code>yield*</code> to either an iterable or async iterable:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">sleep</span><span style="color: #000000">(</span><span style="color: #098658">100</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #0000FF">*</span><span style="color: #000000"> [</span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #0000FF">*</span><span style="color: #000000"> (</span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function*</span><span style="color: #000000"> () {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">sleep</span><span style="color: #000000">(</span><span style="color: #098658">100</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #098658">4</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  })();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>As with Generators, Async Generators can only be function declarations, function expressions, or methods of classes or object literals. Arrow functions cannot be Async Generators. Async Generators require a valid, global <code>Promise</code> implementation (either native or an ES2015-compatible polyfill), in addition to a valid <code>Symbol.asyncIterator</code> reference (either a native symbol or a shim).</p>
<h4 id="the-for-await-of-statement" style="position:relative;"><a href="#the-for-await-of-statement" aria-label="the for await of statement permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>for-await-of</code> Statement</h4>
<p>Finally, ES2015 introduced the <code>for..of</code> statement as a means of iterating over an iterable.
Similarly, the Async Iteration proposal introduces the <code>for..await..of</code> statement to iterate over an async iterable:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> </span><span style="color: #AF00DB">await</span><span style="color: #000000"> (</span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">x</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The <code>for..await..of</code> statement is only legal within an Async Function or Async Generator.</p>
<h4 id="caveats-6" style="position:relative;"><a href="#caveats-6" aria-label="caveats 6 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caveats</h4>
<ul>
<li>Keep in mind that our support for async iterators relies on support for <code>Symbol.asyncIterator</code> to exist at runtime.
You may need to polyfill <code>Symbol.asyncIterator</code>, which for simple purposes can be as simple as: <code>(Symbol as any).asyncIterator = Symbol.asyncIterator || Symbol.from("Symbol.asyncIterator");</code></li>
<li>You also need to include <code>esnext</code> in your <a href="/tsconfig#lib"><code>lib</code></a> option, to get the <code>AsyncIterator</code> declaration if you do not already have it.</li>
<li>Finally, if your target is ES5 or ES3, you’ll also need to set the <code>--downlevelIterators</code> flag.</li>
</ul>
<h2 id="generic-parameter-defaults" style="position:relative;"><a href="#generic-parameter-defaults" aria-label="generic parameter defaults permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic parameter defaults</h2>
<p>TypeScript 2.3 adds support for declaring defaults for generic type parameters.</p>
<h4 id="example-37" style="position:relative;"><a href="#example-37" aria-label="example 37 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>Consider a function that creates a new <code>HTMLElement</code>, calling it with no arguments generates a <code>Div</code>; you can optionally pass a list of children as well. Previously you would have to define it as:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">create</span><span style="color: #000000">(): </span><span style="color: #1C6277">Container</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">HTMLDivElement</span><span style="color: #000000">, </span><span style="color: #1C6277">HTMLDivElement</span><span style="color: #000000">[]&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">create</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">HTMLElement</span><span style="color: #000000">&gt;(</span><span style="color: #001080">element</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">Container</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">T</span><span style="color: #000000">[]&gt;;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">create</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">HTMLElement</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">HTMLElement</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">element</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">children</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">[]</span></div><div class='line'><span style="color: #000000">): </span><span style="color: #1C6277">Container</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">[]&gt;;</span></div></code></div></pre>
<p>With generic parameter defaults we can reduce it to:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">create</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">HTMLElement</span><span style="color: #000000"> = </span><span style="color: #1C6277">HTMLDivElement</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000"> = </span><span style="color: #1C6277">T</span><span style="color: #000000">[]&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">element</span><span style="color: #000000">?: </span><span style="color: #1C6277">T</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">children</span><span style="color: #000000">?: </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">): </span><span style="color: #1C6277">Container</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>A generic parameter default follows the following rules:</p>
<ul>
<li>A type parameter is deemed optional if it has a default.</li>
<li>Required type parameters must not follow optional type parameters.</li>
<li>Default types for a type parameter must satisfy the constraint for the type parameter, if it exists.</li>
<li>When specifying type arguments, you are only required to specify type arguments for the required type parameters. Unspecified type parameters will resolve to their default types.</li>
<li>If a default type is specified and inference cannot chose a candidate, the default type is inferred.</li>
<li>A class or interface declaration that merges with an existing class or interface declaration may introduce a default for an existing type parameter.</li>
<li>A class or interface declaration that merges with an existing class or interface declaration may introduce a new type parameter as long as it specifies a default.</li>
</ul>
<h2 id="new---strict-master-option" style="position:relative;"><a href="#new---strict-master-option" aria-label="new   strict master option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--strict</code> master option</h2>
<p>New checks added to TypeScript are often off by default to avoid breaking existing projects. While avoiding breakage is a good thing, this strategy has the drawback of making it increasingly complex to choose the highest level of type safety, and doing so requires explicit opt-in action on every TypeScript release. With the <a href="/tsconfig#strict"><code>strict</code></a> option it becomes possible to choose maximum type safety with the understanding that additional errors might be reported by newer versions of the compiler as improved type checking features are added.</p>
<p>The new <a href="/tsconfig#strict"><code>strict</code></a> compiler option represents the recommended setting of a number of type checking options. Specifically, specifying <a href="/tsconfig#strict"><code>strict</code></a> corresponds to specifying all of the following options (and may in the future include more options):</p>
<ul>
<li><a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a></li>
<li><a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a></li>
<li><a href="/tsconfig#noImplicitThis"><code>noImplicitThis</code></a></li>
<li><a href="/tsconfig#alwaysStrict"><code>alwaysStrict</code></a></li>
</ul>
<p>In exact terms, the <a href="/tsconfig#strict"><code>strict</code></a> option sets the <em>default</em> value for the compiler options listed above. This means it is still possible to individually control the options. For example,</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code><div class='line'><span style="color: undefined">--strict --noImplicitThis false</span></div></code></div></pre>
<p>has the effect of turning on all strict options <em>except</em> the <a href="/tsconfig#noImplicitThis"><code>noImplicitThis</code></a> option. Using this scheme it is possible to express configurations consisting of <em>all</em> strict options except some explicitly listed options. In other words, it is now possible to default to the highest level of type safety but opt out of certain checks.</p>
<p>Starting with TypeScript 2.3, the default <code>tsconfig.json</code> generated by <code>tsc --init</code> includes a <code>"strict": true</code> setting in the <code>"compilerOptions"</code> section. Thus, new projects started with <code>tsc --init</code> will by default have the highest level of type safety enabled.</p>
<h2 id="enhanced---init-output" style="position:relative;"><a href="#enhanced---init-output" aria-label="enhanced   init output permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Enhanced <code>--init</code> output</h2>
<p>Along with setting <a href="/tsconfig#strict"><code>strict</code></a> on by default, <code>tsc --init</code> has an enhanced output. Default <code>tsconfig.json</code> files generated by <code>tsc --init</code> now include a set of the common compiler options along with their descriptions commented out. Just un-comment the configuration you like to set to get the desired behavior; we hope the new output simplifies the setting up new projects and keeps configuration files readable as projects grow.</p>
<h2 id="errors-in-js-files-with---checkjs" style="position:relative;"><a href="#errors-in-js-files-with---checkjs" aria-label="errors in js files with   checkjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Errors in .js files with <code>--checkJs</code></h2>
<p>By default the TypeScript compiler does not report any errors in .js files including using <a href="/tsconfig#allowJs"><code>allowJs</code></a>. With TypeScript 2.3 type-checking errors can also be reported in <code>.js</code> files with <a href="/tsconfig#checkJs"><code>checkJs</code></a>.</p>
<p>You can skip checking some files by adding <code>// @ts-nocheck</code> comment to them; conversely you can choose to check only a few <code>.js</code> files by adding <code>// @ts-check</code> comment to them without setting <a href="/tsconfig#checkJs"><code>checkJs</code></a>. You can also ignore errors on specific lines by adding <code>// @ts-ignore</code> on the preceding line.</p>
<p><code>.js</code> files are still checked to ensure that they only include standard ECMAScript features; type annotations are only allowed in <code>.ts</code> files and are flagged as errors in <code>.js</code> files. JSDoc comments can be used to add some type information to your JavaScript code, see <a href="https://github.com/Microsoft/TypeScript/wiki/JSDoc-support-in-JavaScript">JSDoc Support documentation</a> for more details about the supported JSDoc constructs.</p>
<p>See <a href="https://github.com/Microsoft/TypeScript/wiki/Type-Checking-JavaScript-Files">Type checking JavaScript Files documentation</a> for more details.</p>
<h2 id="typescript-22" style="position:relative;"><a href="#typescript-22" aria-label="typescript 22 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.2</h2>
<h2 id="support-for-mix-in-classes" style="position:relative;"><a href="#support-for-mix-in-classes" aria-label="support for mix in classes permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for Mix-in classes</h2>
<p>TypeScript 2.2 adds support for the ECMAScript 2015 mixin class pattern (see <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Classes#Mix-ins">MDN Mixin description</a> and <a href="http://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/">“Real” Mixins with JavaScript Classes</a> for more details) as well as rules for combining mixin construct signatures with regular construct signatures in intersection types.</p>
<h5 id="first-some-terminology" style="position:relative;"><a href="#first-some-terminology" aria-label="first some terminology permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>First some terminology:</h5>
<ul>
<li>
<p>A <strong>mixin constructor type</strong> refers to a type that has a single construct signature with a single rest argument of type <code>any[]</code> and an object-like return type. For example, given an object-like type <code>X</code>, <code>new (...args: any[]) => X</code> is a mixin constructor type with an instance type <code>X</code>.</p>
</li>
<li>
<p>A <strong>mixin class</strong> is a class declaration or expression that <code>extends</code> an expression of a type parameter type. The following rules apply to mixin class declarations:</p>
</li>
</ul>
<ul>
<li>The type parameter type of the <code>extends</code> expression must be constrained to a mixin constructor type.</li>
<li>The constructor of a mixin class (if any) must have a single rest parameter of type <code>any[]</code> and must use the spread operator to pass those parameters as arguments in a <code>super(...args)</code> call.</li>
</ul>
<p>Given an expression <code>Base</code> of a parametric type <code>T</code> with a constraint <code>X</code>, a mixin class <code>class C extends Base {...}</code> is processed as if <code>Base</code> had type <code>X</code> and the resulting type is the intersection <code>typeof C &#x26; T</code>. In other words, a mixin class is represented as an intersection between the mixin class constructor type and the parametric base class constructor type.</p>
<p>When obtaining the construct signatures of an intersection type that contains mixin constructor types, the mixin construct signatures are discarded and their instance types are mixed into the return types of the other construct signatures in the intersection type. For example, the intersection type <code>{ new(...args: any[]) => A } &#x26; { new(s: string) => B }</code> has a single construct signature <code>new(s: string) => A &#x26; B</code>.</p>
<h5 id="putting-all-of-the-above-rules-together-in-an-example" style="position:relative;"><a href="#putting-all-of-the-above-rules-together-in-an-example" aria-label="putting all of the above rules together in an example permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Putting all of the above rules together in an example:</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Point</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Constructor</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #AF00DB">new</span><span style="color: #000000"> (...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">Tagged</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Constructor</span><span style="color: #000000">&lt;{}&gt;&gt;(</span><span style="color: #001080">Base</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">_tag</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #0000FF">super</span><span style="color: #000000">(...</span><span style="color: #001080">args</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">_tag</span><span style="color: #000000"> = </span><span style="color: #A31515">""</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">TaggedPoint</span><span style="color: #000000"> = </span><span style="color: #795E26">Tagged</span><span style="color: #000000">(</span><span style="color: #001080">Point</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">point</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">TaggedPoint</span><span style="color: #000000">(</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #098658">20</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">point</span><span style="color: #000000">.</span><span style="color: #001080">_tag</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Customer</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #795E26">Tagged</span><span style="color: #000000">(</span><span style="color: #001080">Person</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">accountBalance</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">customer</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Customer</span><span style="color: #000000">(</span><span style="color: #A31515">"Joe"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">customer</span><span style="color: #000000">.</span><span style="color: #001080">_tag</span><span style="color: #000000"> = </span><span style="color: #A31515">"test"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">customer</span><span style="color: #000000">.</span><span style="color: #001080">accountBalance</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Mixin classes can constrain the types of classes they can mix into by specifying a construct signature return type in the constraint for the type parameter. For example, the following <code>WithLocation</code> function implements a subclass factory that adds a <code>getLocation</code> method to any class that satisfies the <code>Point</code> interface (i.e. that has <code>x</code> and <code>y</code> properties of type <code>number</code>).</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Point</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">WithLocation</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Constructor</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Point</span><span style="color: #000000">&gt;&gt;(</span><span style="color: #001080">Base</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">getLocation</span><span style="color: #000000">(): [</span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">] {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> [</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">y</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">  };</span></div></code></div></pre>
<h2 id="object-type" style="position:relative;"><a href="#object-type" aria-label="object type permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>object</code> type</h2>
<p>TypeScript did not have a type that represents the non-primitive type, i.e. any thing that is not <code>number</code> | <code>string</code> | <code>boolean</code> | <code>symbol</code> | <code>null</code> | <code>undefined</code>. Enter the new <code>object</code> type.</p>
<p>With <code>object</code> type, APIs like <code>Object.create</code> can be better represented. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #001080">o</span><span style="color: #000000">: </span><span style="color: #1C6277">object</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #795E26">create</span><span style="color: #000000">({ </span><span style="color: #001080">prop:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000"> }); </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #0000FF">null</span><span style="color: #000000">); </span><span style="color: #008000">// OK</span></div><div class='line'></div><div class='line'><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #098658">42</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #A31515">"string"</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #0000FF">false</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></div></code></div></pre>
<h2 id="support-for-newtarget" style="position:relative;"><a href="#support-for-newtarget" aria-label="support for newtarget permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>new.target</code></h2>
<p>The <code>new.target</code> meta-property is new syntax introduced in ES2015. When an instance of a constructor is created via <code>new</code>, the value of <code>new.target</code> is set to be a reference to the constructor function initially used to allocate the instance. If a function is called rather than constructed via <code>new</code>, <code>new.target</code> is set to <code>undefined</code>.</p>
<p><code>new.target</code> comes in handy when <code>Object.setPrototypeOf</code> or <code>__proto__</code> needs to be set in a class constructor. One such use case is inheriting from <code>Error</code> in NodeJS v4 and higher.</p>
<h4 id="example-38" style="position:relative;"><a href="#example-38" aria-label="example 38 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">CustomError</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">); </span><span style="color: #008000">// 'Error' breaks prototype chain here</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #1C6277">Object</span><span style="color: #000000">.</span><span style="color: #795E26">setPrototypeOf</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000">.</span><span style="color: #001080">target</span><span style="color: #000000">.</span><span style="color: #001080">prototype</span><span style="color: #000000">); </span><span style="color: #008000">// restore prototype chain</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>This results in the generated JS</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">CustomError</span><span style="color: #000000"> = (</span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">_super</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">__extends</span><span style="color: #000000">(</span><span style="color: #001080">CustomError</span><span style="color: #000000">, </span><span style="color: #001080">_super</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">CustomError</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_newTarget</span><span style="color: #000000"> = </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">constructor</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_this</span><span style="color: #000000"> = </span><span style="color: #001080">_super</span><span style="color: #000000">.</span><span style="color: #795E26">apply</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">, </span><span style="color: #0000FF">arguments</span><span style="color: #000000">); </span><span style="color: #008000">// 'Error' breaks prototype chain here</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">_this</span><span style="color: #000000">.</span><span style="color: #001080">__proto__</span><span style="color: #000000"> = </span><span style="color: #1C6277">_newTarget</span><span style="color: #000000">.</span><span style="color: #001080">prototype</span><span style="color: #000000">; </span><span style="color: #008000">// restore prototype chain</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">_this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">CustomError</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">})(</span><span style="color: #1C6277">Error</span><span style="color: #000000">);</span></div></code></div></pre>
<p><code>new.target</code> also comes in handy for writing constructable functions, for example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">new</span><span style="color: #000000">.</span><span style="color: #001080">target</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/* called via 'new' */</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Which translates to:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_newTarget</span><span style="color: #000000"> = </span><span style="color: #0000FF">this</span><span style="color: #000000"> && </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">f</span><span style="color: #000000"> ? </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">constructor</span><span style="color: #000000"> : </span><span style="color: #0000FF">void</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">_newTarget</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/* called via 'new' */</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="better-checking-for-nullundefined-in-operands-of-expressions" style="position:relative;"><a href="#better-checking-for-nullundefined-in-operands-of-expressions" aria-label="better checking for nullundefined in operands of expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better checking for <code>null</code>/<code>undefined</code> in operands of expressions</h2>
<p>TypeScript 2.2 improves checking of nullable operands in expressions. Specifically, these are now flagged as errors:</p>
<ul>
<li>If either operand of a <code>+</code> operator is nullable, and neither operand is of type <code>any</code> or <code>string</code>.</li>
<li>If either operand of a <code>-</code>, <code>*</code>, <code>**</code>, <code>/</code>, <code>%</code>, <code>&#x3C;&#x3C;</code>, <code>>></code>, <code>>>></code>, <code>&#x26;</code>, <code>|</code>, or <code>^</code> operator is nullable.</li>
<li>If either operand of a <code>&#x3C;</code>, <code>></code>, <code>&#x3C;=</code>, <code>>=</code>, or <code>in</code> operator is nullable.</li>
<li>If the right operand of an <code>instanceof</code> operator is nullable.</li>
<li>If the operand of a <code>+</code>, <code>-</code>, <code>~</code>, <code>++</code>, or <code>--</code> unary operator is nullable.</li>
</ul>
<p>An operand is considered nullable if the type of the operand is <code>null</code> or <code>undefined</code> or a union type that includes <code>null</code> or <code>undefined</code>. Note that the union type case only only occurs in <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode because <code>null</code> and <code>undefined</code> disappear from unions in classic type checking mode.</p>
<h2 id="dotted-property-for-types-with-string-index-signatures" style="position:relative;"><a href="#dotted-property-for-types-with-string-index-signatures" aria-label="dotted property for types with string index signatures permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dotted property for types with string index signatures</h2>
<p>Types with a string index signature can be indexed using the <code>[]</code> notation, but were not allowed to use the <code>.</code>. Starting with TypeScript 2.2 using either should be allowed.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">StringMap</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">map</span><span style="color: #000000">: </span><span style="color: #1C6277">StringMap</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #001080">map</span><span style="color: #000000">[</span><span style="color: #A31515">"prop1"</span><span style="color: #000000">] = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">map</span><span style="color: #000000">.</span><span style="color: #001080">prop2</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div></code></div></pre>
<p>This only apply to types with an <em>explicit</em> string index signature. It is still an error to access unknown properties on a type using <code>.</code> notation.</p>
<h2 id="support-for-spread-operator-on-jsx-element-children" style="position:relative;"><a href="#support-for-spread-operator-on-jsx-element-children" aria-label="support for spread operator on jsx element children permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for spread operator on JSX element children</h2>
<p>TypeScript 2.2 adds support for using spread on a JSX element children. Please see <a href="https://github.com/facebook/jsx/issues/57">facebook/jsx#57</a> for more details.</p>
<h4 id="example-39" style="position:relative;"><a href="#example-39" aria-label="example 39 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">Todo</span><span style="color: #000000">(</span><span style="color: #001080">prop</span><span style="color: #000000">: { </span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #001080">todo</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> &lt;</span><span style="color: #1C6277">div</span><span style="color: #000000">&gt;{prop.key.toString() + prop.</span><span style="color: #001080">todo</span><span style="color: #000000">}&lt;/</span><span style="color: #001080">div</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">TodoList</span><span style="color: #000000">({ </span><span style="color: #001080">todos</span><span style="color: #000000"> }: </span><span style="color: #1C6277">TodoListProps</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> (</span></div><div class='line'><span style="color: #000000">    &lt;</span><span style="color: #1C6277">div</span><span style="color: #000000">&gt;{...</span><span style="color: #001080">todos</span><span style="color: #000000">.</span><span style="color: #795E26">map</span><span style="color: #000000">((</span><span style="color: #001080">todo</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> &lt;</span><span style="color: #1C6277">Todo</span><span style="color: #000000"> </span><span style="color: #1C6277">key</span><span style="color: #000000">={</span><span style="color: #1C6277">todo</span><span style="color: #000000">.</span><span style="color: #001080">id</span><span style="color: #000000">} </span><span style="color: #1C6277">todo</span><span style="color: #000000">={</span><span style="color: #1C6277">todo</span><span style="color: #000000">.</span><span style="color: #001080">todo</span><span style="color: #000000">} /&gt;)}&lt;/</span><span style="color: #001080">div</span><span style="color: #000000">&gt;</span></div><div class='line'><span style="color: #000000">  );</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">TodoListProps</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">&lt;</span><span style="color: #001080">TodoList</span><span style="color: #000000"> {...</span><span style="color: #001080">x</span><span style="color: #000000">} /&gt;;</span></div></code></div></pre>
<h2 id="new-jsx-react-native" style="position:relative;"><a href="#new-jsx-react-native" aria-label="new jsx react native permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>jsx: react-native</code></h2>
<p>React-native build pipeline expects all files to have a <code>.js</code> extensions even if the file contains JSX syntax. The new <a href="/tsconfig#jsx"><code>jsx</code></a> value <code>react-native</code> will persevere the JSX syntax in the output file, but give it a <code>.js</code> extension.</p>
<h2 id="typescript-21" style="position:relative;"><a href="#typescript-21" aria-label="typescript 21 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.1</h2>
<h2 id="keyof-and-lookup-types" style="position:relative;"><a href="#keyof-and-lookup-types" aria-label="keyof and lookup types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>keyof</code> and Lookup Types</h2>
<p>In JavaScript it is fairly common to have APIs that expect property names as parameters, but so far it hasn’t been possible to express the type relationships that occur in those APIs.</p>
<p>Enter Index Type Query or <code>keyof</code>;
An indexed type query <code>keyof T</code> yields the type of permitted property names for <code>T</code>.
A <code>keyof T</code> type is considered a subtype of <code>string</code>.</p>
<h5 id="example-40" style="position:relative;"><a href="#example-40" aria-label="example 40 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K1</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000">; </span><span style="color: #008000">// "name" | "age" | "location"</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K2</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000">[]; </span><span style="color: #008000">// "length" | "push" | "pop" | "concat" | ...</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">K3</span><span style="color: #000000"> = </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> { [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">Person</span><span style="color: #000000"> }; </span><span style="color: #008000">// string</span></div></code></div></pre>
<p>The dual of this is <em>indexed access types</em>, also called <em>lookup types</em>.
Syntactically, they look exactly like an element access, but are written as types:</p>
<h5 id="example-41" style="position:relative;"><a href="#example-41" aria-label="example 41 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">P1</span><span style="color: #000000"> = </span><span style="color: #1C6277">Person</span><span style="color: #000000">[</span><span style="color: #A31515">"name"</span><span style="color: #000000">]; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">P2</span><span style="color: #000000"> = </span><span style="color: #1C6277">Person</span><span style="color: #000000">[</span><span style="color: #A31515">"name"</span><span style="color: #000000"> | </span><span style="color: #A31515">"age"</span><span style="color: #000000">]; </span><span style="color: #008000">// string | number</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">P3</span><span style="color: #000000"> = </span><span style="color: #1C6277">string</span><span style="color: #000000">[</span><span style="color: #A31515">"charAt"</span><span style="color: #000000">]; </span><span style="color: #008000">// (pos: number) =&gt; string</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">P4</span><span style="color: #000000"> = </span><span style="color: #1C6277">string</span><span style="color: #000000">[][</span><span style="color: #A31515">"push"</span><span style="color: #000000">]; </span><span style="color: #008000">// (...items: string[]) =&gt; number</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">P5</span><span style="color: #000000"> = </span><span style="color: #1C6277">string</span><span style="color: #000000">[][</span><span style="color: #098658">0</span><span style="color: #000000">]; </span><span style="color: #008000">// string</span></div></code></div></pre>
<p>You can use this pattern with other parts of the type system to get type-safe lookups.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getProperty</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000">[</span><span style="color: #001080">key</span><span style="color: #000000">]; </span><span style="color: #008000">// Inferred type is T[K]</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">setProperty</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">, </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">K</span><span style="color: #000000">]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">obj</span><span style="color: #000000">[</span><span style="color: #001080">key</span><span style="color: #000000">] = </span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = { </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #001080">bar:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello!"</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">foo</span><span style="color: #000000"> = </span><span style="color: #795E26">getProperty</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #A31515">"foo"</span><span style="color: #000000">); </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">bar</span><span style="color: #000000"> = </span><span style="color: #795E26">getProperty</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #A31515">"bar"</span><span style="color: #000000">); </span><span style="color: #008000">// string</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">oops</span><span style="color: #000000"> = </span><span style="color: #795E26">getProperty</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #A31515">"wargarbl"</span><span style="color: #000000">); </span><span style="color: #008000">// Error! "wargarbl" is not "foo" | "bar"</span></div><div class='line'></div><div class='line'><span style="color: #795E26">setProperty</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #A31515">"foo"</span><span style="color: #000000">, </span><span style="color: #A31515">"string"</span><span style="color: #000000">); </span><span style="color: #008000">// Error!, string expected number</span></div></code></div></pre>
<h2 id="mapped-types" style="position:relative;"><a href="#mapped-types" aria-label="mapped types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Mapped Types</h2>
<p>One common task is to take an existing type and make each of its properties entirely optional.
Let’s say we have a `Person:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>A partial version of it would be:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">PartialPerson</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">age</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>with Mapped types, <code>PartialPerson</code> can be written as a generalized transformation on the type <code>Person</code> as:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Partial</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]?: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">PartialPerson</span><span style="color: #000000"> = </span><span style="color: #1C6277">Partial</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Person</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>Mapped types are produced by taking a union of literal types, and computing a set of properties for a new object type.
They’re like <a href="https://docs.python.org/2/tutorial/datastructures.html#nested-list-comprehensions">list comprehensions in Python</a>, but instead of producing new elements in a list, they produce new properties in a type.</p>
<p>In addition to <code>Partial</code>, Mapped Types can express many useful transformations on types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Keep types the same, but make each property to be read-only.</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Same property names, but make the value a promise instead of a concrete one</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Deferred</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">]&gt;;</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Wrap proxies around properties of T</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Proxify</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = {</span></div><div class='line'><span style="color: #000000">  [</span><span style="color: #1C6277">P</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">]: { </span><span style="color: #795E26">get</span><span style="color: #000000">(): </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">]; </span><span style="color: #795E26">set</span><span style="color: #000000">(</span><span style="color: #001080">v</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">[</span><span style="color: #1C6277">P</span><span style="color: #000000">]): </span><span style="color: #1C6277">void</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<h2 id="partial-readonly-record-and-pick" style="position:relative;"><a href="#partial-readonly-record-and-pick" aria-label="partial readonly record and pick permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>Partial</code>, <code>Readonly</code>, <code>Record</code>, and <code>Pick</code></h2>
<p><code>Partial</code> and <code>Readonly</code>, as described earlier, are very useful constructs.
You can use them to describe some common JS routines like:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">assign</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">props</span><span style="color: #000000">: </span><span style="color: #1C6277">Partial</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">freeze</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">Readonly</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>Because of that, they are now included by default in the standard library.</p>
<p>We’re also including two other utility types as well: <code>Record</code> and <code>Pick</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// From T pick a set of properties K</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">pick</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, ...</span><span style="color: #001080">keys</span><span style="color: #000000">: </span><span style="color: #1C6277">K</span><span style="color: #000000">[]): </span><span style="color: #1C6277">Pick</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">K</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">nameAndAgeOnly</span><span style="color: #000000"> = </span><span style="color: #795E26">pick</span><span style="color: #000000">(</span><span style="color: #001080">person</span><span style="color: #000000">, </span><span style="color: #A31515">"name"</span><span style="color: #000000">, </span><span style="color: #A31515">"age"</span><span style="color: #000000">); </span><span style="color: #008000">// { name: string, age: number }</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// For every properties K of type T, transform it to U</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">mapObject</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">K</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">obj</span><span style="color: #000000">: </span><span style="color: #1C6277">Record</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">K</span><span style="color: #000000">, </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">: (</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span></div><div class='line'><span style="color: #000000">): </span><span style="color: #1C6277">Record</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">K</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">names</span><span style="color: #000000"> = { </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #001080">bar:</span><span style="color: #000000"> </span><span style="color: #A31515">"world"</span><span style="color: #000000">, </span><span style="color: #001080">baz:</span><span style="color: #000000"> </span><span style="color: #A31515">"bye"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">lengths</span><span style="color: #000000"> = </span><span style="color: #795E26">mapObject</span><span style="color: #000000">(</span><span style="color: #001080">names</span><span style="color: #000000">, (</span><span style="color: #001080">s</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">); </span><span style="color: #008000">// { foo: number, bar: number, baz: number }</span></div></code></div></pre>
<h2 id="object-spread-and-rest" style="position:relative;"><a href="#object-spread-and-rest" aria-label="object spread and rest permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Object Spread and Rest</h2>
<p>TypeScript 2.1 brings support for <a href="https://github.com/sebmarkbage/ecmascript-rest-spread">ES2017 Spread and Rest</a>.</p>
<p>Similar to array spread, spreading an object can be handy to get a shallow copy:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">copy</span><span style="color: #000000"> = { ...</span><span style="color: #001080">original</span><span style="color: #000000"> };</span></div></code></div></pre>
<p>Similarly, you can merge several different objects.
In the following example, <code>merged</code> will have properties from <code>foo</code>, <code>bar</code>, and <code>baz</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">merged</span><span style="color: #000000"> = { ...</span><span style="color: #001080">foo</span><span style="color: #000000">, ...</span><span style="color: #001080">bar</span><span style="color: #000000">, ...</span><span style="color: #001080">baz</span><span style="color: #000000"> };</span></div></code></div></pre>
<p>You can also override existing properties and add new ones:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000"> = { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #A31515">"string"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">newObj</span><span style="color: #000000"> = { ...</span><span style="color: #001080">obj</span><span style="color: #000000">, </span><span style="color: #001080">z:</span><span style="color: #000000"> </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">4</span><span style="color: #000000"> }; </span><span style="color: #008000">// { x: number, y: number, z: number }</span></div></code></div></pre>
<p>The order of specifying spread operations determines what properties end up in the resulting object;
properties in later spreads “win out” over previously created properties.</p>
<p>Object rests are the dual of object spreads, in that they can extract any extra properties that don’t get picked up when destructuring an element:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000"> = { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">z:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> { </span><span style="color: #001080">z</span><span style="color: #000000">, ...</span><span style="color: #001080">obj1</span><span style="color: #000000"> } = </span><span style="color: #001080">obj</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">obj1</span><span style="color: #000000">; </span><span style="color: #008000">// {x: number, y: number};</span></div></code></div></pre>
<h2 id="downlevel-async-functions" style="position:relative;"><a href="#downlevel-async-functions" aria-label="downlevel async functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Downlevel Async Functions</h2>
<p>This feature was supported before TypeScript 2.1, but only when targeting ES6/ES2015.
TypeScript 2.1 brings the capability to ES3 and ES5 run-times, meaning you’ll be free to take advantage of it no matter what environment you’re using.</p>
<blockquote>
<p>Note: first, we need to make sure our run-time has an ECMAScript-compliant <code>Promise</code> available globally.
That might involve grabbing <a href="https://github.com/stefanpenner/es6-promise">a polyfill</a> for <code>Promise</code>, or relying on one that you might have in the run-time that you’re targeting.
We also need to make sure that TypeScript knows <code>Promise</code> exists by setting your <a href="/tsconfig#lib"><code>lib</code></a> option to something like <code>"dom", "es2015"</code> or <code>"dom", "es2015.promise", "es5"</code></p>
</blockquote>
<h5 id="example-42" style="position:relative;"><a href="#example-42" aria-label="example 42 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<h5 id="tsconfigjson" style="position:relative;"><a href="#tsconfigjson" aria-label="tsconfigjson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>tsconfig.json</h5>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#lib'><data-lsp lsp="Specify a set of bundled library declaration files that describe the target runtime environment.">lib</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"dom"</span><span style="color: #000000">, </span><span style="color: #A31515">"es2015.promise"</span><span style="color: #000000">, </span><span style="color: #A31515">"es5"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h5 id="dramaticwelcomets" style="position:relative;"><a href="#dramaticwelcomets" aria-label="dramaticwelcomets permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>dramaticWelcome.ts</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">delay</span><span style="color: #000000">(</span><span style="color: #001080">milliseconds</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">void</span><span style="color: #000000">&gt;((</span><span style="color: #001080">resolve</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">setTimeout</span><span style="color: #000000">(</span><span style="color: #001080">resolve</span><span style="color: #000000">, </span><span style="color: #001080">milliseconds</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  });</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">dramaticWelcome</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Hello"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #098658">3</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">delay</span><span style="color: #000000">(</span><span style="color: #098658">500</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"."</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"World!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">dramaticWelcome</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Compiling and running the output should result in the correct behavior on an ES3/ES5 engine.</p>
<h2 id="support-for-external-helpers-library-tslib" style="position:relative;"><a href="#support-for-external-helpers-library-tslib" aria-label="support for external helpers library tslib permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for external helpers library (<code>tslib</code>)</h2>
<p>TypeScript injects a handful of helper functions such as <code>__extends</code> for inheritance, <code>__assign</code> for spread operator in object literals and JSX elements, and <code>__awaiter</code> for async functions.</p>
<p>Previously there were two options:</p>
<ol>
<li>inject helpers in <em>every</em> file that needs them, or</li>
<li>no helpers at all with <a href="/tsconfig#noEmitHelpers"><code>noEmitHelpers</code></a>.</li>
</ol>
<p>The two options left more to be desired;
bundling the helpers in every file was a pain point for customers trying to keep their package size small.
And not including helpers, meant customers had to maintain their own helpers library.</p>
<p>TypeScript 2.1 allows for including these files in your project once in a separate module, and the compiler will emit imports to them as needed.</p>
<p>First, install the <a href="https://github.com/Microsoft/tslib"><code>tslib</code></a> utility library:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">sh</div><div class='code-container'><code><div class='line'><span style="color: #000000">npm install tslib</span></div></code></div></pre>
<p>Second, compile your files using <a href="/tsconfig#importHelpers"><code>importHelpers</code></a>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">sh</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc --module commonjs --importHelpers a.ts</span></div></code></div></pre>
<p>So given the following input, the resulting <code>.js</code> file will include an import to <code>tslib</code> and use the <code>__assign</code> helper from it instead of inlining it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">o</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"o"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">copy</span><span style="color: #000000"> = { ...</span><span style="color: #001080">o</span><span style="color: #000000"> };</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">tslib_1</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"tslib"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">o</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"o"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">copy</span><span style="color: #000000"> = </span><span style="color: #001080">tslib_1</span><span style="color: #000000">.</span><span style="color: #795E26">__assign</span><span style="color: #000000">({}, </span><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">o</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="untyped-imports" style="position:relative;"><a href="#untyped-imports" aria-label="untyped imports permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Untyped imports</h2>
<p>TypeScript has traditionally been overly strict about how you can import modules.
This was to avoid typos and prevent users from using modules incorrectly.</p>
<p>However, a lot of the time, you might just want to import an existing module that may not have its own <code>.d.ts</code> file.
Previously this was an error.
Starting with TypeScript 2.1 this is now much easier.</p>
<p>With TypeScript 2.1, you can import a JavaScript module without needing a type declaration.
A type declaration (such as <code>declare module "foo" { ... }</code> or <code>node_modules/@types/foo</code>) still takes priority if it exists.</p>
<p>An import to a module with no declaration file will still be flagged as an error under <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a>.</p>
<h5 id="example-43" style="position:relative;"><a href="#example-43" aria-label="example 43 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Succeeds if `node_modules/asdf/index.js` exists, or if `node_modules/asdf/package.json` defines a valid "main" entry point</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">x</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"asdf"</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="support-for---target-es2016---target-es2017-and---target-esnext" style="position:relative;"><a href="#support-for---target-es2016---target-es2017-and---target-esnext" aria-label="support for   target es2016   target es2017 and   target esnext permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>--target ES2016</code>, <code>--target ES2017</code> and <code>--target ESNext</code></h2>
<p>TypeScript 2.1 supports three new target values <code>--target ES2016</code>, <code>--target ES2017</code> and <code>--target ESNext</code>.</p>
<p>Using target <code>--target ES2016</code> will instruct the compiler not to transform ES2016-specific features, e.g. <code>**</code> operator.</p>
<p>Similarly, <code>--target ES2017</code> will instruct the compiler not to transform ES2017-specific features like <code>async</code>/<code>await</code>.</p>
<p><code>--target ESNext</code> targets latest supported <a href="https://github.com/tc39/proposals">ES proposed features</a>.</p>
<h2 id="improved-any-inference" style="position:relative;"><a href="#improved-any-inference" aria-label="improved any inference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved <code>any</code> Inference</h2>
<p>Previously, if TypeScript couldn’t figure out the type of a variable, it would choose the <code>any</code> type.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// implicitly 'any'</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = []; </span><span style="color: #008000">// implicitly 'any[]'</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">; </span><span style="color: #008000">// explicitly 'any'.</span></div></code></div></pre>
<p>With TypeScript 2.1, instead of just choosing <code>any</code>, TypeScript will infer types based on what you end up assigning later on.</p>
<p>This is only enabled if <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a> is set.</p>
<h5 id="example-44" style="position:relative;"><a href="#example-44" aria-label="example 44 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// You can still assign anything you want to 'x'.</span></div><div class='line'><span style="color: #795E26">x</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// After that last assignment, TypeScript 2.1 knows that 'x' has type '() =&gt; number'.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #795E26">x</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Thanks to that, it will now tell you that you can't add a number to a function!</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000"> + </span><span style="color: #001080">y</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #008000">//          ~~~~~</span></div><div class='line'><span style="color: #008000">// Error! Operator '+' cannot be applied to types '() =&gt; number' and 'number'.</span></div><div class='line'></div><div class='line'><span style="color: #008000">// TypeScript still allows you to assign anything you want to 'x'.</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"Hello world!"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// But now it also knows that 'x' is a 'string'!</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">toLowerCase</span><span style="color: #000000">();</span></div></code></div></pre>
<p>The same sort of tracking is now also done for empty arrays.</p>
<p>A variable declared with no type annotation and an initial value of <code>[]</code> is considered an implicit <code>any[]</code> variable.
However, each subsequent <code>x.push(value)</code>, <code>x.unshift(value)</code> or <code>x[n] = value</code> operation <em>evolves</em> the type of the variable in accordance with what elements are added to it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = [];</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">] = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">unshift</span><span style="color: #000000">(</span><span style="color: #0000FF">true</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// (string | number | boolean)[]</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f2</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #795E26">cond</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000"> = [];</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #795E26">cond</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// string[] | null</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="implicit-any-errors" style="position:relative;"><a href="#implicit-any-errors" aria-label="implicit any errors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implicit any errors</h2>
<p>One great benefit of this is that you’ll see <em>way fewer</em> implicit <code>any</code> errors when running with <a href="/tsconfig#noImplicitAny"><code>noImplicitAny</code></a>.
Implicit <code>any</code> errors are only reported when the compiler is unable to know the type of a variable without a type annotation.</p>
<h5 id="example-45" style="position:relative;"><a href="#example-45" aria-label="example 45 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f3</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = []; </span><span style="color: #008000">// Error: Variable 'x' implicitly has type 'any[]' in some locations where its type cannot be determined.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error: Variable 'x' implicitly has an 'any[]' type.</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="better-inference-for-literal-types" style="position:relative;"><a href="#better-inference-for-literal-types" aria-label="better inference for literal types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better inference for literal types</h2>
<p>String, numeric and boolean literal types (e.g. <code>"abc"</code>, <code>1</code>, and <code>true</code>) were previously inferred only in the presence of an explicit type annotation.
Starting with TypeScript 2.1, literal types are <em>always</em> inferred for <code>const</code> variables and <code>readonly</code> properties.</p>
<p>The type inferred for a <code>const</code> variable or <code>readonly</code> property without a type annotation is the type of the literal initializer.
The type inferred for a <code>let</code> variable, <code>var</code> variable, parameter, or non-<code>readonly</code> property with an initializer and no type annotation is the widened literal type of the initializer.
Where the widened type for a string literal type is <code>string</code>, <code>number</code> for numeric literal types, <code>boolean</code> for <code>true</code> or <code>false</code> and the containing enum for enum literal types.</p>
<h5 id="example-46" style="position:relative;"><a href="#example-46" aria-label="example 46 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c1</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// Type 1</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c2</span><span style="color: #000000"> = </span><span style="color: #001080">c1</span><span style="color: #000000">; </span><span style="color: #008000">// Type 1</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c3</span><span style="color: #000000"> = </span><span style="color: #A31515">"abc"</span><span style="color: #000000">; </span><span style="color: #008000">// Type "abc"</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c4</span><span style="color: #000000"> = </span><span style="color: #0000FF">true</span><span style="color: #000000">; </span><span style="color: #008000">// Type true</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c5</span><span style="color: #000000"> = </span><span style="color: #001080">cond</span><span style="color: #000000"> ? </span><span style="color: #098658">1</span><span style="color: #000000"> : </span><span style="color: #A31515">"abc"</span><span style="color: #000000">; </span><span style="color: #008000">// Type 1 | "abc"</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v1</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// Type number</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v2</span><span style="color: #000000"> = </span><span style="color: #001080">c2</span><span style="color: #000000">; </span><span style="color: #008000">// Type number</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v3</span><span style="color: #000000"> = </span><span style="color: #001080">c3</span><span style="color: #000000">; </span><span style="color: #008000">// Type string</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v4</span><span style="color: #000000"> = </span><span style="color: #001080">c4</span><span style="color: #000000">; </span><span style="color: #008000">// Type boolean</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v5</span><span style="color: #000000"> = </span><span style="color: #001080">c5</span><span style="color: #000000">; </span><span style="color: #008000">// Type number | string</span></div></code></div></pre>
<p>Literal type widening can be controlled through explicit type annotations.
Specifically, when an expression of a literal type is inferred for a const location without a type annotation, that <code>const</code> variable gets a widening literal type inferred.
But when a <code>const</code> location has an explicit literal type annotation, the <code>const</code> variable gets a non-widening literal type.</p>
<h5 id="example-47" style="position:relative;"><a href="#example-47" aria-label="example 47 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c1</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">; </span><span style="color: #008000">// Widening type "hello"</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v1</span><span style="color: #000000"> = </span><span style="color: #001080">c1</span><span style="color: #000000">; </span><span style="color: #008000">// Type string</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">c2</span><span style="color: #000000">: </span><span style="color: #A31515">"hello"</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">; </span><span style="color: #008000">// Type "hello"</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v2</span><span style="color: #000000"> = </span><span style="color: #001080">c2</span><span style="color: #000000">; </span><span style="color: #008000">// Type "hello"</span></div></code></div></pre>
<h2 id="use-returned-values-from-super-calls-as-this" style="position:relative;"><a href="#use-returned-values-from-super-calls-as-this" aria-label="use returned values from super calls as this permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use returned values from super calls as ‘this’</h2>
<p>In ES2015, constructors which return an object implicitly substitute the value of <code>this</code> for any callers of <code>super()</code>.
As a result, it is necessary to capture any potential return value of <code>super()</code> and replace it with <code>this</code>.
This change enables working with <a href="https://w3c.github.io/webcomponents/spec/custom/#htmlelement-constructor">Custom Elements</a>, which takes advantage of this to initialize browser-allocated elements with user-written constructors.</p>
<h5 id="example-48" style="position:relative;"><a href="#example-48" aria-label="example 48 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// return a new object other than `this`</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    };</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Derived</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Generates:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">Derived</span><span style="color: #000000"> = (</span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">_super</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">__extends</span><span style="color: #000000">(</span><span style="color: #001080">Derived</span><span style="color: #000000">, </span><span style="color: #001080">_super</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">Derived</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_this</span><span style="color: #000000"> = </span><span style="color: #001080">_super</span><span style="color: #000000">.</span><span style="color: #795E26">call</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">) || </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">_this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">_this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">Derived</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">})(</span><span style="color: #001080">Base</span><span style="color: #000000">);</span></div></code></div></pre>
<blockquote>
<p>This change entails a break in the behavior of extending built-in classes like <code>Error</code>, <code>Array</code>, <code>Map</code>, etc.. Please see the <a href="https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work">extending built-ins breaking change documentation</a> for more details.</p>
</blockquote>
<h2 id="configuration-inheritance" style="position:relative;"><a href="#configuration-inheritance" aria-label="configuration inheritance permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration inheritance</h2>
<p>Often a project has multiple output targets, e.g. <code>ES5</code> and <code>ES2015</code>, debug and production or <code>CommonJS</code> and <code>System</code>;
Just a few configuration options change between these two targets, and maintaining multiple <code>tsconfig.json</code> files can be a hassle.</p>
<p>TypeScript 2.1 supports inheriting configuration using <code>extends</code>, where:</p>
<ul>
<li><code>extends</code> is a new top-level property in <code>tsconfig.json</code> (alongside <code>compilerOptions</code>, <a href="/tsconfig#files"><code>files</code></a>, <a href="/tsconfig#include"><code>include</code></a>, and <code>exclude</code>).</li>
<li>The value of <code>extends</code> must be a string containing a path to another configuration file to inherit from.</li>
<li>The configuration from the base file are loaded first, then overridden by those in the inheriting config file.</li>
<li>Circularity between configuration files is not allowed.</li>
<li><a href="/tsconfig#files"><code>files</code></a>, <a href="/tsconfig#include"><code>include</code></a> and <code>exclude</code> from the inheriting config file <em>overwrite</em> those from the base config file.</li>
<li>All relative paths found in the configuration file will be resolved relative to the configuration file they originated in.</li>
</ul>
<h5 id="example-49" style="position:relative;"><a href="#example-49" aria-label="example 49 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p><code>configs/base.json</code>:</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#noImplicitAny'><data-lsp lsp="Enable error reporting for expressions and declarations with an implied `any` type..">noImplicitAny</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#strictNullChecks'><data-lsp lsp="When type checking, take into account `null` and `undefined`.">strictNullChecks</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>tsconfig.json</code>:</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#extends'><data-lsp lsp="Specify one or more path or node module references to base configuration files from which settings are inherited.">extends</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./configs/base"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#files'><data-lsp lsp="Include a list of files. This does not support glob patterns, as opposed to `include`.">files</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"main.ts"</span><span style="color: #000000">, </span><span style="color: #A31515">"supplemental.ts"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>tsconfig.nostrictnull.json</code>:</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#extends'><data-lsp lsp="Specify one or more path or node module references to base configuration files from which settings are inherited.">extends</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./tsconfig"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#strictNullChecks'><data-lsp lsp="When type checking, take into account `null` and `undefined`.">strictNullChecks</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">false</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="new---alwaysstrict" style="position:relative;"><a href="#new---alwaysstrict" aria-label="new   alwaysstrict permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--alwaysStrict</code></h2>
<p>Invoking the compiler with <a href="/tsconfig#alwaysStrict"><code>alwaysStrict</code></a> causes:</p>
<ol>
<li>Parses all the code in strict mode.</li>
<li>Writes <code>"use strict";</code> directive atop every generated file.</li>
</ol>
<p>Modules are parsed automatically in strict mode.
The new flag is recommended for non-module code.</p>
<h2 id="typescript-20" style="position:relative;"><a href="#typescript-20" aria-label="typescript 20 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 2.0</h2>
<h2 id="null--and-undefined-aware-types" style="position:relative;"><a href="#null--and-undefined-aware-types" aria-label="null  and undefined aware types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Null- and undefined-aware types</h2>
<p>TypeScript has two special types, Null and Undefined, that have the values <code>null</code> and <code>undefined</code> respectively.
Previously it was not possible to explicitly name these types, but <code>null</code> and <code>undefined</code> may now be used as type names regardless of type checking mode.</p>
<p>The type checker previously considered <code>null</code> and <code>undefined</code> assignable to anything.
Effectively, <code>null</code> and <code>undefined</code> were valid values of <em>every</em> type and it wasn’t possible to specifically exclude them (and therefore not possible to detect erroneous use of them).</p>
<h3 id="--strictnullchecks" style="position:relative;"><a href="#--strictnullchecks" aria-label="  strictnullchecks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--strictNullChecks</code></h3>
<p><a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> switches to a new strict null checking mode.</p>
<p>In strict null checking mode, the <code>null</code> and <code>undefined</code> values are <em>not</em> in the domain of every type and are only assignable to themselves and <code>any</code> (the one exception being that <code>undefined</code> is also assignable to <code>void</code>).
So, whereas <code>T</code> and <code>T | undefined</code> are considered synonymous in regular type checking mode (because <code>undefined</code> is considered a subtype of any <code>T</code>), they are different types in strict type checking mode, and only <code>T | undefined</code> permits <code>undefined</code> values. The same is true for the relationship of <code>T</code> to <code>T | null</code>.</p>
<h4 id="example-50" style="position:relative;"><a href="#example-50" aria-label="example 50 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">z</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">z</span><span style="color: #000000">; </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div></code></div></pre>
<h3 id="assigned-before-use-checking" style="position:relative;"><a href="#assigned-before-use-checking" aria-label="assigned before use checking permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Assigned-before-use checking</h3>
<p>In strict null checking mode the compiler requires every reference to a local variable of a type that doesn’t include <code>undefined</code> to be preceded by an assignment to that variable in every possible preceding code path.</p>
<h4 id="example-51" style="position:relative;"><a href="#example-51" aria-label="example 51 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error, reference not preceded by assignment</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Error, reference not preceded by assignment</span></div><div class='line'><span style="color: #001080">z</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div></code></div></pre>
<p>The compiler checks that variables are definitely assigned by performing <em>control flow based type analysis</em>. See later for further details on this topic.</p>
<h3 id="optional-parameters-and-properties" style="position:relative;"><a href="#optional-parameters-and-properties" aria-label="optional parameters and properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional parameters and properties</h3>
<p>Optional parameters and properties automatically have <code>undefined</code> added to their types, even when their type annotations don’t specifically include <code>undefined</code>.
For example, the following two types are identical:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T1</span><span style="color: #000000"> = (</span><span style="color: #001080">x</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// x has type number | undefined</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">T2</span><span style="color: #000000"> = (</span><span style="color: #001080">x</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// x has type number | undefined</span></div></code></div></pre>
<h3 id="non-null-and-non-undefined-type-guards" style="position:relative;"><a href="#non-null-and-non-undefined-type-guards" aria-label="non null and non undefined type guards permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Non-null and non-undefined type guards</h3>
<p>A property access or a function call produces a compile-time error if the object or function is of a type that includes <code>null</code> or <code>undefined</code>.
However, type guards are extended to support non-null and non-undefined checks.</p>
<h4 id="example-52" style="position:relative;"><a href="#example-52" aria-label="example 52 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// Ok, type of x is number here</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// Error, type of x is number? here</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000"> != </span><span style="color: #0000FF">null</span><span style="color: #000000"> ? </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) : </span><span style="color: #A31515">""</span><span style="color: #000000">; </span><span style="color: #008000">// Type of a is string</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000"> && </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// Type of b is string | 0 | null | undefined</span></div></code></div></pre>
<p>Non-null and non-undefined type guards may use the <code>==</code>, <code>!=</code>, <code>===</code>, or <code>!==</code> operator to compare to <code>null</code> or <code>undefined</code>, as in <code>x != null</code> or <code>x === undefined</code>.
The effects on subject variable types accurately reflect JavaScript semantics (e.g. double-equals operators check for both values no matter which one is specified whereas triple-equals only checks for the specified value).</p>
<h3 id="dotted-names-in-type-guards" style="position:relative;"><a href="#dotted-names-in-type-guards" aria-label="dotted names in type guards permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Dotted names in type guards</h3>
<p>Type guards previously only supported checking local variables and parameters.
Type guards now support checking “dotted names” consisting of a variable or parameter name followed one or more property accesses.</p>
<h4 id="example-53" style="position:relative;"><a href="#example-53" aria-label="example 53 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Options</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">location</span><span style="color: #000000">?: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">y</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000">?: </span><span style="color: #1C6277">Options</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">options</span><span style="color: #000000"> && </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">location</span><span style="color: #000000"> && </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">location</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">x</span><span style="color: #000000"> = </span><span style="color: #001080">options</span><span style="color: #000000">.</span><span style="color: #001080">location</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Type of x is number</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Type guards for dotted names also work with user defined type guard functions and the <code>typeof</code> and <code>instanceof</code> operators and do not depend on the <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> compiler option.</p>
<p>A type guard for a dotted name has no effect following an assignment to any part of the dotted name.
For example, a type guard for <code>x.y.z</code> will have no effect following an assignment to <code>x</code>, <code>x.y</code>, or <code>x.y.z</code>.</p>
<h3 id="expression-operators" style="position:relative;"><a href="#expression-operators" aria-label="expression operators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Expression operators</h3>
<p>Expression operators permit operand types to include <code>null</code> and/or <code>undefined</code> but always produce values of non-null and non-undefined types.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">sum</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> + </span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// Produces value of type number</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The <code>&#x26;&#x26;</code> operator adds <code>null</code> and/or <code>undefined</code> to the type of the right operand depending on which are present in the type of the left operand, and the <code>||</code> operator removes both <code>null</code> and <code>undefined</code> from the type of the left operand in the resulting union type.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Entity</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Entity</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000"> && </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">; </span><span style="color: #008000">// s is of type string | null</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000"> || { </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #A31515">"test"</span><span style="color: #000000"> }; </span><span style="color: #008000">// y is of type Entity</span></div></code></div></pre>
<h3 id="type-widening" style="position:relative;"><a href="#type-widening" aria-label="type widening permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type widening</h3>
<p>The <code>null</code> and <code>undefined</code> types are <em>not</em> widened to <code>any</code> in strict null checking mode.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #0000FF">null</span><span style="color: #000000">; </span><span style="color: #008000">// Type of z is null</span></div></code></div></pre>
<p>In regular type checking mode the inferred type of <code>z</code> is <code>any</code> because of widening, but in strict null checking mode the inferred type of <code>z</code> is <code>null</code> (and therefore, absent a type annotation, <code>null</code> is the only possible value for <code>z</code>).</p>
<h3 id="non-null-assertion-operator" style="position:relative;"><a href="#non-null-assertion-operator" aria-label="non null assertion operator permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Non-null assertion operator</h3>
<p>A new <code>!</code> post-fix expression operator may be used to assert that its operand is non-null and non-undefined in contexts where the type checker is unable to conclude that fact.
Specifically, the operation <code>x!</code> produces a value of the type of <code>x</code> with <code>null</code> and <code>undefined</code> excluded.
Similar to type assertions of the forms <code>&#x3C;T>x</code> and <code>x as T</code>, the <code>!</code> non-null assertion operator is simply removed in the emitted JavaScript code.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Compiled with --strictNullChecks</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">validateEntity</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">?: </span><span style="color: #1C6277">Entity</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Throw exception if e is null or invalid entity</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">processEntity</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">?: </span><span style="color: #1C6277">Entity</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">validateEntity</span><span style="color: #000000">(</span><span style="color: #001080">e</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">e</span><span style="color: #000000">!.</span><span style="color: #001080">name</span><span style="color: #000000">; </span><span style="color: #008000">// Assert that e is non-null and access name</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="compatibility" style="position:relative;"><a href="#compatibility" aria-label="compatibility permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Compatibility</h3>
<p>The new features are designed such that they can be used in both strict null checking mode and regular type checking mode.
In particular, the <code>null</code> and <code>undefined</code> types are automatically erased from union types in regular type checking mode (because they are subtypes of all other types), and the <code>!</code> non-null assertion expression operator is permitted but has no effect in regular type checking mode. Thus, declaration files that are updated to use null- and undefined-aware types can still be used in regular type checking mode for backwards compatibility.</p>
<p>In practical terms, strict null checking mode requires that all files in a compilation are null- and undefined-aware.</p>
<h2 id="control-flow-based-type-analysis" style="position:relative;"><a href="#control-flow-based-type-analysis" aria-label="control flow based type analysis permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Control flow based type analysis</h2>
<p>TypeScript 2.0 implements a control flow-based type analysis for local variables and parameters.
Previously, the type analysis performed for type guards was limited to <code>if</code> statements and <code>?:</code> conditional expressions and didn’t include effects of assignments and control flow constructs such as <code>return</code> and <code>break</code> statements.
With TypeScript 2.0, the type checker analyzes all possible flows of control in statements and expressions to produce the most specific type possible (the <em>narrowed type</em>) at any given location for a local variable or parameter that is declared to have a union type.</p>
<h4 id="example-54" style="position:relative;"><a href="#example-54" aria-label="example 54 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">boolean</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// type of x is string here</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// type of x is number here</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// type of x is number | boolean here</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">bar</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">"number"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// type of x is string here</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Control flow based type analysis is particuarly relevant in <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode because nullable types are represented using union types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">null</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #0000FF">null</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// type of x is string in remainder of function</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Furthermore, in <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode, control flow based type analysis includes <em>definite assignment analysis</em> for local variables of types that don’t permit the value <code>undefined</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">mumble</span><span style="color: #000000">(</span><span style="color: #001080">check</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #008000">// Type doesn't permit undefined</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error, x is undefined</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">check</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Error, x is possibly undefined</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="tagged-union-types" style="position:relative;"><a href="#tagged-union-types" aria-label="tagged union types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tagged union types</h2>
<p>TypeScript 2.0 implements support for tagged (or discriminated) union types.
Specifically, the TS compiler now support type guards that narrow union types based on tests of a discriminant property and furthermore extend that capability to <code>switch</code> statements.</p>
<h4 id="example-55" style="position:relative;"><a href="#example-55" aria-label="example 55 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Square</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"square"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">size</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Rectangle</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"rectangle"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">width</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">height</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Circle</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">kind</span><span style="color: #000000">: </span><span style="color: #A31515">"circle"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">radius</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Shape</span><span style="color: #000000"> = </span><span style="color: #1C6277">Square</span><span style="color: #000000"> | </span><span style="color: #1C6277">Rectangle</span><span style="color: #000000"> | </span><span style="color: #1C6277">Circle</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">area</span><span style="color: #000000">(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">Shape</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// In the following switch statement, the type of s is narrowed in each case clause</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// according to the value of the discriminant property, thus allowing the other properties</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// of that variant to be accessed without a type assertion.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">switch</span><span style="color: #000000"> (</span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #A31515">"square"</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">size</span><span style="color: #000000"> * </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">size</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #A31515">"rectangle"</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">width</span><span style="color: #000000"> * </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">height</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #A31515">"circle"</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000">.PI * </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">radius</span><span style="color: #000000"> * </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">radius</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test1</span><span style="color: #000000">(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">Shape</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"square"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">s</span><span style="color: #000000">; </span><span style="color: #008000">// Square</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">s</span><span style="color: #000000">; </span><span style="color: #008000">// Rectangle | Circle</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test2</span><span style="color: #000000">(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">Shape</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"square"</span><span style="color: #000000"> || </span><span style="color: #001080">s</span><span style="color: #000000">.</span><span style="color: #001080">kind</span><span style="color: #000000"> === </span><span style="color: #A31515">"rectangle"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">s</span><span style="color: #000000">; </span><span style="color: #008000">// Circle</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>A <em>discriminant property type guard</em> is an expression of the form <code>x.p == v</code>, <code>x.p === v</code>, <code>x.p != v</code>, or <code>x.p !== v</code>, where <code>p</code> and <code>v</code> are a property and an expression of a string literal type or a union of string literal types.
The discriminant property type guard narrows the type of <code>x</code> to those constituent types of <code>x</code> that have a discriminant property <code>p</code> with one of the possible values of <code>v</code>.</p>
<p>Note that we currently only support discriminant properties of string literal types.
We intend to later add support for boolean and numeric literal types.</p>
<h2 id="the-never-type" style="position:relative;"><a href="#the-never-type" aria-label="the never type permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>never</code> type</h2>
<p>TypeScript 2.0 introduces a new primitive type <code>never</code>.
The <code>never</code> type represents the type of values that never occur.
Specifically, <code>never</code> is the return type for functions that never return and <code>never</code> is the type of variables under type guards that are never true.</p>
<p>The <code>never</code> type has the following characteristics:</p>
<ul>
<li><code>never</code> is a subtype of and assignable to every type.</li>
<li>No type is a subtype of or assignable to <code>never</code> (except <code>never</code> itself).</li>
<li>In a function expression or arrow function with no return type annotation, if the function has no <code>return</code> statements, or only <code>return</code> statements with expressions of type <code>never</code>, and if the end point of the function is not reachable (as determined by control flow analysis), the inferred return type for the function is <code>never</code>.</li>
<li>In a function with an explicit <code>never</code> return type annotation, all <code>return</code> statements (if any) must have expressions of type <code>never</code> and the end point of the function must not be reachable.</li>
</ul>
<p>Because <code>never</code> is a subtype of every type, it is always omitted from union types and it is ignored in function return type inference as long as there are other types being returned.</p>
<p>Some examples of functions returning <code>never</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Function returning never must have unreachable end point</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">): </span><span style="color: #1C6277">never</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Inferred return type is never</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">fail</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">"Something failed"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Function returning never must have unreachable end point</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">infiniteLoop</span><span style="color: #000000">(): </span><span style="color: #1C6277">never</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #0000FF">true</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Some examples of use of functions returning <code>never</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Inferred return type is number</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">move1</span><span style="color: #000000">(</span><span style="color: #001080">direction</span><span style="color: #000000">: </span><span style="color: #A31515">"up"</span><span style="color: #000000"> | </span><span style="color: #A31515">"down"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">switch</span><span style="color: #000000"> (</span><span style="color: #001080">direction</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #A31515">"up"</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #A31515">"down"</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> -</span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">"Should never get here"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Inferred return type is number</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">move2</span><span style="color: #000000">(</span><span style="color: #001080">direction</span><span style="color: #000000">: </span><span style="color: #A31515">"up"</span><span style="color: #000000"> | </span><span style="color: #A31515">"down"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">direction</span><span style="color: #000000"> === </span><span style="color: #A31515">"up"</span></div><div class='line'><span style="color: #000000">    ? </span><span style="color: #098658">1</span></div><div class='line'><span style="color: #000000">    : </span><span style="color: #001080">direction</span><span style="color: #000000"> === </span><span style="color: #A31515">"down"</span></div><div class='line'><span style="color: #000000">    ? -</span><span style="color: #098658">1</span></div><div class='line'><span style="color: #000000">    : </span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">"Should never get here"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Inferred return type is T</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">check</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">undefined</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> || </span><span style="color: #795E26">error</span><span style="color: #000000">(</span><span style="color: #A31515">"Undefined value"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Because <code>never</code> is assignable to every type, a function returning <code>never</code> can be used when a callback returning a more specific type is required:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test</span><span style="color: #000000">(</span><span style="color: #795E26">cb</span><span style="color: #000000">: () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #795E26">cb</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">test</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">test</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #795E26">fail</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #795E26">test</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">throw</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h2 id="read-only-properties-and-index-signatures" style="position:relative;"><a href="#read-only-properties-and-index-signatures" aria-label="read only properties and index signatures permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Read-only properties and index signatures</h2>
<p>A property or index signature can now be declared with the <code>readonly</code> modifier is considered read-only.</p>
<p>Read-only properties may have initializers and may be assigned to in constructors within the same class declaration, but otherwise assignments to read-only properties are disallowed.</p>
<p>In addition, entities are <em>implicitly</em> read-only in several situations:</p>
<ul>
<li>A property declared with a <code>get</code> accessor and no <code>set</code> accessor is considered read-only.</li>
<li>In the type of an enum object, enum members are considered read-only properties.</li>
<li>In the type of a module object, exported <code>const</code> variables are considered read-only properties.</li>
<li>An entity declared in an <code>import</code> statement is considered read-only.</li>
<li>An entity accessed through an ES2015 namespace import is considered read-only (e.g. <code>foo.x</code> is read-only when <code>foo</code> is declared as <code>import * as foo from "foo"</code>).</li>
</ul>
<h4 id="example-56" style="position:relative;"><a href="#example-56" aria-label="example 56 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Point</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p1</span><span style="color: #000000">: </span><span style="color: #1C6277">Point</span><span style="color: #000000"> = { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">20</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #001080">p1</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">5</span><span style="color: #000000">; </span><span style="color: #008000">// Error, p1.x is read-only</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p2</span><span style="color: #000000"> = { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p3</span><span style="color: #000000">: </span><span style="color: #1C6277">Point</span><span style="color: #000000"> = </span><span style="color: #001080">p2</span><span style="color: #000000">; </span><span style="color: #008000">// Ok, read-only alias for p2</span></div><div class='line'><span style="color: #001080">p3</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">5</span><span style="color: #000000">; </span><span style="color: #008000">// Error, p3.x is read-only</span></div><div class='line'><span style="color: #001080">p2</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">5</span><span style="color: #000000">; </span><span style="color: #008000">// Ok, but also changes p3.x because of aliasing</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">; </span><span style="color: #008000">// Assignment permitted in constructor</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; = [</span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">ReadonlyArray</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; = </span><span style="color: #001080">a</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">b</span><span style="color: #000000">[</span><span style="color: #098658">5</span><span style="color: #000000">] = </span><span style="color: #098658">5</span><span style="color: #000000">; </span><span style="color: #008000">// Error, elements are read-only</span></div><div class='line'><span style="color: #001080">b</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">); </span><span style="color: #008000">// Error, no push method (because it mutates array)</span></div><div class='line'><span style="color: #001080">b</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000"> = </span><span style="color: #098658">3</span><span style="color: #000000">; </span><span style="color: #008000">// Error, length is read-only</span></div><div class='line'><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// Error, mutating methods are missing</span></div></code></div></pre>
<h2 id="specifying-the-type-of-this-for-functions" style="position:relative;"><a href="#specifying-the-type-of-this-for-functions" aria-label="specifying the type of this for functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Specifying the type of <code>this</code> for functions</h2>
<p>Following up on specifying the type of <code>this</code> in a class or an interface, functions and methods can now declare the type of <code>this</code> they expect.</p>
<p>By default the type of <code>this</code> inside a function is <code>any</code>.
Starting with TypeScript 2.0, you can provide an explicit <code>this</code> parameter.
<code>this</code> parameters are fake parameters that come first in the parameter list of a function:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">: </span><span style="color: #1C6277">void</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// make sure `this` is unusable in this standalone function</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="this-parameters-in-callbacks" style="position:relative;"><a href="#this-parameters-in-callbacks" aria-label="this parameters in callbacks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>this</code> parameters in callbacks</h3>
<p>Libraries can also use <code>this</code> parameters to declare how callbacks will be invoked.</p>
<h4 id="example-57" style="position:relative;"><a href="#example-57" aria-label="example 57 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">UIElement</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">addClickListener</span><span style="color: #000000">(</span><span style="color: #795E26">onclick</span><span style="color: #000000">: (</span><span style="color: #0000FF">this</span><span style="color: #000000">: </span><span style="color: #1C6277">void</span><span style="color: #000000">, </span><span style="color: #001080">e</span><span style="color: #000000">: </span><span style="color: #1C6277">Event</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>this: void</code> means that <code>addClickListener</code> expects <code>onclick</code> to be a function that does not require a <code>this</code> type.</p>
<p>Now if you annotate calling code with <code>this</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Handler</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">info</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">onClickBad</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">: </span><span style="color: #1C6277">Handler</span><span style="color: #000000">, </span><span style="color: #001080">e</span><span style="color: #000000">: </span><span style="color: #1C6277">Event</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// oops, used this here. using this callback would crash at runtime</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">info</span><span style="color: #000000"> = </span><span style="color: #001080">e</span><span style="color: #000000">.</span><span style="color: #001080">message</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">h</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Handler</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">uiElement</span><span style="color: #000000">.</span><span style="color: #795E26">addClickListener</span><span style="color: #000000">(</span><span style="color: #001080">h</span><span style="color: #000000">.</span><span style="color: #001080">onClickBad</span><span style="color: #000000">); </span><span style="color: #008000">// error!</span></div></code></div></pre>
<h3 id="--noimplicitthis" style="position:relative;"><a href="#--noimplicitthis" aria-label="  noimplicitthis permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--noImplicitThis</code></h3>
<p>A new flag is also added in TypeScript 2.0 to flag all uses of <code>this</code> in functions without an explicit type annotation.</p>
<h2 id="glob-support-in-tsconfigjson" style="position:relative;"><a href="#glob-support-in-tsconfigjson" aria-label="glob support in tsconfigjson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Glob support in <code>tsconfig.json</code></h2>
<p>Glob support is here!! Glob support has been <a href="https://github.com/Microsoft/TypeScript/issues/1927">one of the most requested features</a>.</p>
<p>Glob-like file patterns are supported two properties <a href="/tsconfig#include"><code>include</code></a> and <code>exclude</code>.</p>
<h4 id="example-58" style="position:relative;"><a href="#example-58" aria-label="example 58 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#module'><data-lsp lsp="Specify what module code is generated.">module</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"commonjs"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#noImplicitAny'><data-lsp lsp="Enable error reporting for expressions and declarations with an implied `any` type..">noImplicitAny</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#removeComments'><data-lsp lsp="Disable emitting comments.">removeComments</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#preserveConstEnums'><data-lsp lsp="Disable erasing `const enum` declarations in generated code.">preserveConstEnums</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#outFile'><data-lsp lsp="Specify a file that bundles all outputs into one JavaScript file. If `declaration` is true, also designates a file that bundles all .d.ts output.">outFile</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"../../built/local/tsc.js"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#sourceMap'><data-lsp lsp="Create source map files for emitted JavaScript files.">sourceMap</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#include'><data-lsp lsp="Specify a list of glob patterns that match files to be included in compilation.">include</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"src/**/*"</span><span style="color: #000000">],</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#exclude'><data-lsp lsp="Filters results from the `include` option.">exclude</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"node_modules"</span><span style="color: #000000">, </span><span style="color: #A31515">"**/*.spec.ts"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The supported glob wildcards are:</p>
<ul>
<li><code>*</code> matches zero or more characters (excluding directory separators)</li>
<li><code>?</code> matches any one character (excluding directory separators)</li>
<li><code>**/</code> recursively matches any subdirectory</li>
</ul>
<p>If a segment of a glob pattern includes only <code>*</code> or <code>.*</code>, then only files with supported extensions are included (e.g. <code>.ts</code>, <code>.tsx</code>, and <code>.d.ts</code> by default with <code>.js</code> and <code>.jsx</code> if <a href="/tsconfig#allowJs"><code>allowJs</code></a> is set to true).</p>
<p>If the <a href="/tsconfig#files"><code>files</code></a> and <a href="/tsconfig#include"><code>include</code></a> are both left unspecified, the compiler defaults to including all TypeScript (<code>.ts</code>, <code>.d.ts</code> and <code>.tsx</code>) files in the containing directory and subdirectories except those excluded using the <code>exclude</code> property. JS files (<code>.js</code> and <code>.jsx</code>) are also included if <a href="/tsconfig#allowJs"><code>allowJs</code></a> is set to true.</p>
<p>If the <a href="/tsconfig#files"><code>files</code></a> or <a href="/tsconfig#include"><code>include</code></a> properties are specified, the compiler will instead include the union of the files included by those two properties.
Files in the directory specified using the <a href="/tsconfig#outDir"><code>outDir</code></a> compiler option are always excluded unless explicitly included via the <a href="/tsconfig#files"><code>files</code></a> property (even when the <code>exclude</code> property is specified).</p>
<p>Files included using <a href="/tsconfig#include"><code>include</code></a> can be filtered using the <code>exclude</code> property.
However, files included explicitly using the <a href="/tsconfig#files"><code>files</code></a> property are always included regardless of <code>exclude</code>.
The <code>exclude</code> property defaults to excluding the <code>node_modules</code>, <code>bower_components</code>, and <code>jspm_packages</code> directories when not specified.</p>
<h2 id="module-resolution-enhancements-baseurl-path-mapping-rootdirs-and-tracing" style="position:relative;"><a href="#module-resolution-enhancements-baseurl-path-mapping-rootdirs-and-tracing" aria-label="module resolution enhancements baseurl path mapping rootdirs and tracing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Module resolution enhancements: BaseUrl, Path mapping, rootDirs and tracing</h2>
<p>TypeScript 2.0 provides a set of additional module resolution knops to <em>inform</em> the compiler where to find declarations for a given module.</p>
<p>See <a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html">Module Resolution</a> documentation for more details.</p>
<h3 id="base-url" style="position:relative;"><a href="#base-url" aria-label="base url permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Base URL</h3>
<p>Using a <a href="/tsconfig#baseUrl"><code>baseUrl</code></a> is a common practice in applications using AMD module loaders where modules are “deployed” to a single folder at run-time.
All module imports with non-relative names are assumed to be relative to the <a href="/tsconfig#baseUrl"><code>baseUrl</code></a>.</p>
<h4 id="example-59" style="position:relative;"><a href="#example-59" aria-label="example 59 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#baseUrl'><data-lsp lsp="Specify the base directory to resolve non-relative module names.">baseUrl</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./modules"</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Now imports to <code>"moduleA"</code> would be looked up in <code>./modules/moduleA</code></p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">A</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"moduleA"</span><span style="color: #000000">;</span></div></code></div></pre>
<h3 id="path-mapping" style="position:relative;"><a href="#path-mapping" aria-label="path mapping permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Path mapping</h3>
<p>Sometimes modules are not directly located under <em>baseUrl</em>.
Loaders use a mapping configuration to map module names to files at run-time, see <a href="http://requirejs.org/docs/api.html#config-paths">RequireJs documentation</a> and <a href="https://github.com/systemjs/systemjs/blob/master/docs/import-maps.md">SystemJS documentation</a>.</p>
<p>The TypeScript compiler supports the declaration of such mappings using <a href="/tsconfig#paths"><code>paths</code></a> property in <code>tsconfig.json</code> files.</p>
<h4 id="example-60" style="position:relative;"><a href="#example-60" aria-label="example 60 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>For instance, an import to a module <code>"jquery"</code> would be translated at runtime to <code>"node_modules/jquery/dist/jquery.slim.min.js"</code>.</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#baseUrl'><data-lsp lsp="Specify the base directory to resolve non-relative module names.">baseUrl</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"./node_modules"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#paths'><data-lsp lsp="Specify a set of entries that re-map imports to additional lookup locations.">paths</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #0451A5">"jquery"</span><span style="color: #000000">: [</span><span style="color: #A31515">"jquery/dist/jquery.slim.min"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Using <a href="/tsconfig#paths"><code>paths</code></a> also allow for more sophisticated mappings including multiple fall back locations.
Consider a project configuration where only some modules are available in one location, and the rest are in another.</p>
<h3 id="virtual-directories-with-rootdirs" style="position:relative;"><a href="#virtual-directories-with-rootdirs" aria-label="virtual directories with rootdirs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Virtual Directories with <code>rootDirs</code></h3>
<p>Using ‘rootDirs’, you can inform the compiler of the <em>roots</em> making up this “virtual” directory;
and thus the compiler can resolve relative modules imports within these “virtual” directories <em>as if</em> they were merged together in one directory.</p>
<h4 id="example-61" style="position:relative;"><a href="#example-61" aria-label="example 61 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<p>Given this project structure:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code> src
 └── views
     └── view1.ts (imports './template1')
     └── view2.ts

 generated
 └── templates
         └── views
             └── template1.ts (imports './view2')</code></div></pre><!-- Note from shiki-twoslash: the language tree was not set up for Shiki to use, and so there is no code highlighting --!>
<p>A build step will copy the files in <code>/src/views</code> and <code>/generated/templates/views</code> to the same directory in the output.
At run-time, a view can expect its template to exist next to it, and thus should import it using a relative name as <code>"./template"</code>.</p>
<p><a href="/tsconfig#rootDirs"><code>rootDirs</code></a> specify a list of <em>roots</em> whose contents are expected to merge at run-time.
So following our example, the <code>tsconfig.json</code> file should look like:</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#rootDirs'><data-lsp lsp="Allow multiple folders to be treated as one when resolving modules.">rootDirs</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"src/views"</span><span style="color: #000000">, </span><span style="color: #A31515">"generated/templates/views"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="tracing-module-resolution" style="position:relative;"><a href="#tracing-module-resolution" aria-label="tracing module resolution permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tracing module resolution</h3>
<p><a href="/tsconfig#traceResolution"><code>traceResolution</code></a> offers a handy way to understand how modules have been resolved by the compiler.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">shell</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc --traceResolution</span></div></code></div></pre>
<h2 id="shorthand-ambient-module-declarations" style="position:relative;"><a href="#shorthand-ambient-module-declarations" aria-label="shorthand ambient module declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Shorthand ambient module declarations</h2>
<p>If you don’t want to take the time to write out declarations before using a new module, you can now just use a shorthand declaration to get started quickly.</p>
<h4 id="declarationsdts" style="position:relative;"><a href="#declarationsdts" aria-label="declarationsdts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>declarations.d.ts</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #A31515">"hot-new-module"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>All imports from a shorthand module will have the any type.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">, { </span><span style="color: #001080">y</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"hot-new-module"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #795E26">x</span><span style="color: #000000">(</span><span style="color: #001080">y</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="wildcard-character-in-module-names" style="position:relative;"><a href="#wildcard-character-in-module-names" aria-label="wildcard character in module names permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Wildcard character in module names</h2>
<p>Importing none-code resources using module loaders extension (e.g. <a href="https://github.com/amdjs/amdjs-api/blob/master/LoaderPlugins.md">AMD</a> or <a href="https://github.com/systemjs/systemjs/blob/master/docs/module-types.md">SystemJS</a>) has not been easy before;
previously an ambient module declaration had to be defined for each resource.</p>
<p>TypeScript 2.0 supports the use of the wildcard character (<code>*</code>) to declare a “family” of module names;
this way, a declaration is only required once for an extension, and not for every resource.</p>
<h4 id="example-62" style="position:relative;"><a href="#example-62" aria-label="example 62 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #A31515">"*!text"</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">content</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #008000">// Some do it the other way around.</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #A31515">"json!*"</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">value</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> </span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Now you can import things that match <code>"*!text"</code> or <code>"json!*"</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">fileContent</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./xyz.txt!text"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">data</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"json!http://example.com/data.json"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">data</span><span style="color: #000000">, </span><span style="color: #001080">fileContent</span><span style="color: #000000">);</span></div></code></div></pre>
<p>Wildcard module names can be even more useful when migrating from an un-typed code base.
Combined with Shorthand ambient module declarations, a set of modules can be easily declared as <code>any</code>.</p>
<h4 id="example-63" style="position:relative;"><a href="#example-63" aria-label="example 63 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #A31515">"myLibrary/*"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>All imports to any module under <code>myLibrary</code> would be considered to have the type <code>any</code> by the compiler;
thus, shutting down any checking on the shapes or types of these modules.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">readFile</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"myLibrary/fileSystem/readFile"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #795E26">readFile</span><span style="color: #000000">(); </span><span style="color: #008000">// readFile is 'any'</span></div></code></div></pre>
<h2 id="support-for-umd-module-definitions" style="position:relative;"><a href="#support-for-umd-module-definitions" aria-label="support for umd module definitions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for UMD module definitions</h2>
<p>Some libraries are designed to be used in many module loaders, or with no module loading (global variables).
These are known as <a href="https://github.com/umdjs/umd">UMD</a> or <a href="http://isomorphic.net">Isomorphic</a> modules.
These libraries can be accessed through either an import or a global variable.</p>
<p>For example:</p>
<h5 id="math-libdts" style="position:relative;"><a href="#math-libdts" aria-label="math libdts permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>math-lib.d.ts</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">isPrime</span><span style="color: #000000">(x: </span><span style="color: #1C6277">number</span><span style="color: #000000">): </span><span style="color: #1C6277">boolean</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #0000FF">namespace</span><span style="color: #000000"> </span><span style="color: #1C6277">mathLib</span><span style="color: #000000">;</span></div></code></div></pre>
<p>The library can then be used as an import within modules:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">isPrime</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"math-lib"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #795E26">isPrime</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">mathLib</span><span style="color: #000000">.</span><span style="color: #795E26">isPrime</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">); </span><span style="color: #008000">// ERROR: can't use the global definition from inside a module</span></div></code></div></pre>
<p>It can also be used as a global variable, but only inside of a script.
(A script is a file with no imports or exports.)</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">mathLib</span><span style="color: #000000">.</span><span style="color: #795E26">isPrime</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="optional-class-properties" style="position:relative;"><a href="#optional-class-properties" aria-label="optional class properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Optional class properties</h2>
<p>Optional properties and methods can now be declared in classes, similar to what is already permitted in interfaces.</p>
<h4 id="example-64" style="position:relative;"><a href="#example-64" aria-label="example 64 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Bar</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">g</span><span style="color: #000000">?(): </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #008000">// Body of optional method can be omitted</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">h</span><span style="color: #000000">?() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>When compiled in <a href="/tsconfig#strictNullChecks"><code>strictNullChecks</code></a> mode, optional properties and methods automatically have <code>undefined</code> included in their type. Thus, the <code>b</code> property above is of type <code>number | undefined</code> and the <code>g</code> method above is of type <code>(() => number) | undefined</code>.
Type guards can be used to strip away the <code>undefined</code> part of the type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Bar</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000">; </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">; </span><span style="color: #008000">// number | undefined</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">f</span><span style="color: #000000">; </span><span style="color: #008000">// () =&gt; number</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">g</span><span style="color: #000000">; </span><span style="color: #008000">// (() =&gt; number) | undefined</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">f1</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">f</span><span style="color: #000000">(); </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">g1</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">g</span><span style="color: #000000"> && </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">g</span><span style="color: #000000">(); </span><span style="color: #008000">// number | undefined</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">g2</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">g</span><span style="color: #000000"> ? </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">g</span><span style="color: #000000">() : </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="private-and-protected-constructors" style="position:relative;"><a href="#private-and-protected-constructors" aria-label="private and protected constructors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Private and Protected Constructors</h2>
<p>A class constructor may be marked <code>private</code> or <code>protected</code>.
A class with private constructor cannot be instantiated outside the class body, and cannot be extended.
A class with protected constructor cannot be instantiated outside the class body, but can be extended.</p>
<h4 id="example-65" style="position:relative;"><a href="#example-65" aria-label="example 65 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Singleton</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #001080">instance</span><span style="color: #000000">: </span><span style="color: #1C6277">Singleton</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #0000FF">constructor</span><span style="color: #000000">() {}</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">static</span><span style="color: #000000"> </span><span style="color: #795E26">getInstance</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">Singleton</span><span style="color: #000000">.</span><span style="color: #001080">instance</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">Singleton</span><span style="color: #000000">.</span><span style="color: #001080">instance</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Singleton</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">Singleton</span><span style="color: #000000">.</span><span style="color: #001080">instance</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">e</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Singleton</span><span style="color: #000000">(); </span><span style="color: #008000">// Error: constructor of 'Singleton' is private.</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> = </span><span style="color: #001080">Singleton</span><span style="color: #000000">.</span><span style="color: #795E26">getInstance</span><span style="color: #000000">();</span></div></code></div></pre>
<h2 id="abstract-properties-and-accessors" style="position:relative;"><a href="#abstract-properties-and-accessors" aria-label="abstract properties and accessors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Abstract properties and accessors</h2>
<p>An abstract class can declare abstract properties and/or accessors.
Any sub class will need to declare the abstract properties or be marked as abstract.
Abstract properties cannot have an initializer.
Abstract accessors cannot have bodies.</p>
<h4 id="example-66" style="position:relative;"><a href="#example-66" aria-label="example 66 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">get</span><span style="color: #000000"> </span><span style="color: #795E26">value</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">set</span><span style="color: #000000"> </span><span style="color: #795E26">value</span><span style="color: #000000">(</span><span style="color: #001080">v</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Derived</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"derived"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="implicit-index-signatures" style="position:relative;"><a href="#implicit-index-signatures" aria-label="implicit index signatures permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implicit index signatures</h2>
<p>An object literal type is now assignable to a type with an index signature if all known properties in the object literal are assignable to that index signature. This makes it possible to pass a variable that was initialized with an object literal as parameter to a function that expects a map or dictionary:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">httpService</span><span style="color: #000000">(</span><span style="color: #001080">path</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">headers</span><span style="color: #000000">: { [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">string</span><span style="color: #000000"> }) {}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">headers</span><span style="color: #000000"> = {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"Content-Type"</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">"application/x-www-form-urlencoded"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'></div><div class='line'><span style="color: #795E26">httpService</span><span style="color: #000000">(</span><span style="color: #A31515">""</span><span style="color: #000000">, { </span><span style="color: #A31515">"Content-Type"</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">"application/x-www-form-urlencoded"</span><span style="color: #000000"> }); </span><span style="color: #008000">// Ok</span></div><div class='line'><span style="color: #795E26">httpService</span><span style="color: #000000">(</span><span style="color: #A31515">""</span><span style="color: #000000">, </span><span style="color: #001080">headers</span><span style="color: #000000">); </span><span style="color: #008000">// Now ok, previously wasn't</span></div></code></div></pre>
<h2 id="including-built-in-type-declarations-with---lib" style="position:relative;"><a href="#including-built-in-type-declarations-with---lib" aria-label="including built in type declarations with   lib permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Including built-in type declarations with <code>--lib</code></h2>
<p>Getting to ES6/ES2015 built-in API declarations were only limited to <code>target: ES6</code>.
Enter <a href="/tsconfig#lib"><code>lib</code></a>; with <a href="/tsconfig#lib"><code>lib</code></a> you can specify a list of built-in API declaration groups that you can chose to include in your project.
For instance, if you expect your runtime to have support for <code>Map</code>, <code>Set</code> and <code>Promise</code> (e.g. most evergreen browsers today), just include <code>--lib es2015.collection,es2015.promise</code>.
Similarly you can exclude declarations you do not want to include in your project, e.g. DOM if you are working on a node project using <code>--lib es5,es6</code>.</p>
<p>Here is a list of available API groups:</p>
<ul>
<li>dom</li>
<li>webworker</li>
<li>es5</li>
<li>es6 / es2015</li>
<li>es2015.core</li>
<li>es2015.collection</li>
<li>es2015.iterable</li>
<li>es2015.promise</li>
<li>es2015.proxy</li>
<li>es2015.reflect</li>
<li>es2015.generator</li>
<li>es2015.symbol</li>
<li>es2015.symbol.wellknown</li>
<li>es2016</li>
<li>es2016.array.include</li>
<li>es2017</li>
<li>es2017.object</li>
<li>es2017.sharedmemory</li>
<li>scripthost</li>
</ul>
<h4 id="example-67" style="position:relative;"><a href="#example-67" aria-label="example 67 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">bash</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc --target es5 --lib es5,es2015.promise</span></div></code></div></pre>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #A31515">"compilerOptions"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#lib'><data-lsp lsp="Specify a set of bundled library declaration files that describe the target runtime environment.">lib</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"es5"</span><span style="color: #000000">, </span><span style="color: #A31515">"es2015.promise"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="flag-unused-declarations-with---nounusedparameters-and---nounusedlocals" style="position:relative;"><a href="#flag-unused-declarations-with---nounusedparameters-and---nounusedlocals" aria-label="flag unused declarations with   nounusedparameters and   nounusedlocals permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Flag unused declarations with <code>--noUnusedParameters</code> and <code>--noUnusedLocals</code></h2>
<p>TypeScript 2.0 has two new flags to help you maintain a clean code base.
<a href="/tsconfig#noUnusedParameters"><code>noUnusedParameters</code></a> flags any unused function or method parameters errors.
<a href="/tsconfig#noUnusedLocals"><code>noUnusedLocals</code></a> flags any unused local (un-exported) declaration like variables, functions, classes, imports, etc…
Also, unused private members of a class would be flagged as errors under <a href="/tsconfig#noUnusedLocals"><code>noUnusedLocals</code></a>.</p>
<h4 id="example-68" style="position:relative;"><a href="#example-68" aria-label="example 68 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">B</span><span style="color: #000000">, { </span><span style="color: #001080">readFile</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./b"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">//     ^ Error: `B` declared but never used</span></div><div class='line'><span style="color: #795E26">readFile</span><span style="color: #000000">();</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">write</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">args</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">//                                 ^^^^  Error: 'arg' declared but never used.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Parameters declaration with names starting with <code>_</code> are exempt from the unused parameter checking.
e.g.:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">returnNull</span><span style="color: #000000">(</span><span style="color: #001080">_a</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="module-identifiers-allow-for-js-extension" style="position:relative;"><a href="#module-identifiers-allow-for-js-extension" aria-label="module identifiers allow for js extension permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Module identifiers allow for <code>.js</code> extension</h2>
<p>Before TypeScript 2.0, a module identifier was always assumed to be extension-less;
for instance, given an import as <code>import d from "./moduleA.js"</code>, the compiler looked up the definition of <code>"moduleA.js"</code> in <code>./moduleA.js.ts</code> or <code>./moduleA.js.d.ts</code>.
This made it hard to use bundling/loading tools like <a href="https://github.com/systemjs/systemjs">SystemJS</a> that expect URI’s in their module identifier.</p>
<p>With TypeScript 2.0, the compiler will look up definition of <code>"moduleA.js"</code> in <code>./moduleA.ts</code> or <code>./moduleA.d.ts</code>.</p>
<h2 id="support-target--es5-with-module-es6" style="position:relative;"><a href="#support-target--es5-with-module-es6" aria-label="support target  es5 with module es6 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support ‘target : es5’ with ‘module: es6’</h2>
<p>Previously flagged as an invalid flag combination, <code>target: es5</code> and ‘module: es6’ is now supported.
This should facilitate using ES2015-based tree shakers like <a href="https://github.com/rollup/rollup">rollup</a>.</p>
<h2 id="trailing-commas-in-function-parameter-and-argument-lists" style="position:relative;"><a href="#trailing-commas-in-function-parameter-and-argument-lists" aria-label="trailing commas in function parameter and argument lists permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Trailing commas in function parameter and argument lists</h2>
<p>Trailing comma in function parameter and argument lists are now allowed.
This is an implementation for a <a href="https://jeffmo.github.io/es-trailing-function-commas/">Stage-3 ECMAScript proposal</a> that emits down to valid ES3/ES5/ES6.</p>
<h4 id="example-69" style="position:relative;"><a href="#example-69" aria-label="example 69 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">foo</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">bar</span><span style="color: #000000">: </span><span style="color: #1C6277">Bar</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">baz</span><span style="color: #000000">: </span><span style="color: #1C6277">Baz</span><span style="color: #000000"> </span><span style="color: #008000">// trailing commas are OK in parameter lists</span></div><div class='line'><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Implementation...</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">foo</span><span style="color: #000000">(</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">bar</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">baz</span><span style="color: #000000"> </span><span style="color: #008000">// and in argument lists</span></div><div class='line'><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="new---skiplibcheck" style="position:relative;"><a href="#new---skiplibcheck" aria-label="new   skiplibcheck permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--skipLibCheck</code></h2>
<p>TypeScript 2.0 adds a new <a href="/tsconfig#skipLibCheck"><code>skipLibCheck</code></a> compiler option that causes type checking of declaration files (files with extension <code>.d.ts</code>) to be skipped.
When a program includes large declaration files, the compiler spends a lot of time type checking declarations that are already known to not contain errors, and compile times may be significantly shortened by skipping declaration file type checks.</p>
<p>Since declarations in one file can affect type checking in other files, some errors may not be detected when <a href="/tsconfig#skipLibCheck"><code>skipLibCheck</code></a> is specified.
For example, if a non-declaration file augments a type declared in a declaration file, errors may result that are only reported when the declaration file is checked.
However, in practice such situations are rare.</p>
<h2 id="allow-duplicate-identifiers-across-declarations" style="position:relative;"><a href="#allow-duplicate-identifiers-across-declarations" aria-label="allow duplicate identifiers across declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Allow duplicate identifiers across declarations</h2>
<p>This has been one common source of duplicate definition errors.
Multiple declaration files defining the same members on interfaces.</p>
<p>TypeScript 2.0 relaxes this constraint and allows duplicate identifiers across blocks, as long as they have <em>identical</em> types.</p>
<p>Within the same block duplicate definitions are still disallowed.</p>
<h4 id="example-70" style="position:relative;"><a href="#example-70" aria-label="example 70 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">stack</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">code</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">path</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">stack</span><span style="color: #000000">?: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="new---declarationdir" style="position:relative;"><a href="#new---declarationdir" aria-label="new   declarationdir permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>--declarationDir</code></h2>
<p><a href="/tsconfig#declarationDir"><code>declarationDir</code></a> allows for generating declaration files in a different location than JavaScript files.</p>
<h2 id="typescript-18" style="position:relative;"><a href="#typescript-18" aria-label="typescript 18 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.8</h2>
<h2 id="type-parameters-as-constraints" style="position:relative;"><a href="#type-parameters-as-constraints" aria-label="type parameters as constraints permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type parameters as constraints</h2>
<p>With TypeScript 1.8 it becomes possible for a type parameter constraint to reference type parameters from the same type parameter list. Previously this was an error. This capability is usually referred to as <a href="https://wikipedia.org/wiki/Bounded_quantification#F-bounded_quantification">F-Bounded Polymorphism</a>.</p>
<h5 id="example-71" style="position:relative;"><a href="#example-71" aria-label="example 71 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">assign</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">target</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">source</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">source</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">target</span><span style="color: #000000">[</span><span style="color: #001080">id</span><span style="color: #000000">] = </span><span style="color: #001080">source</span><span style="color: #000000">[</span><span style="color: #001080">id</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">target</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = { </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #001080">c:</span><span style="color: #000000"> </span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #001080">d:</span><span style="color: #000000"> </span><span style="color: #098658">4</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #795E26">assign</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, { </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #001080">d:</span><span style="color: #000000"> </span><span style="color: #098658">20</span><span style="color: #000000"> });</span></div><div class='line'><span style="color: #795E26">assign</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, { </span><span style="color: #001080">e:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000"> }); </span><span style="color: #008000">// Error</span></div></code></div></pre>
<h2 id="control-flow-analysis-errors" style="position:relative;"><a href="#control-flow-analysis-errors" aria-label="control flow analysis errors permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Control flow analysis errors</h2>
<p>TypeScript 1.8 introduces control flow analysis to help catch common errors that users tend to run into.
Read on to get more details, and check out these errors in action:</p>
<p><img src="https://cloud.githubusercontent.com/assets/8052307/5210657/c5ae0f28-7585-11e4-97d8-86169ef2a160.gif" alt="cfa"></p>
<h3 id="unreachable-code" style="position:relative;"><a href="#unreachable-code" aria-label="unreachable code permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unreachable code</h3>
<p>Statements guaranteed to not be executed at run time are now correctly flagged as unreachable code errors. For instance, statements following unconditional <code>return</code>, <code>throw</code>, <code>break</code> or <code>continue</code> statements are considered unreachable. Use <a href="/tsconfig#allowUnreachableCode"><code>allowUnreachableCode</code></a> to disable unreachable code detection and reporting.</p>
<h5 id="example-72" style="position:relative;"><a href="#example-72" aria-label="example 72 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>Here’s a simple example of an unreachable code error:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #008000">// Error: Unreachable code detected.</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>A more common error that this feature catches is adding a newline after a <code>return</code> statement:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000">; </span><span style="color: #008000">// Automatic Semicolon Insertion triggered at newline</span></div><div class='line'><span style="color: #000000">  {</span></div><div class='line'><span style="color: #000000">    x: </span><span style="color: #A31515">"string"</span><span style="color: #000000">; </span><span style="color: #008000">// Error: Unreachable code detected.</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Since JavaScript automatically terminates the <code>return</code> statement at the end of the line, the object literal becomes a block.</p>
<h3 id="unused-labels" style="position:relative;"><a href="#unused-labels" aria-label="unused labels permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unused labels</h3>
<p>Unused labels are also flagged. Just like unreachable code checks, these are turned on by default; use <a href="/tsconfig#allowUnusedLabels"><code>allowUnusedLabels</code></a> to stop reporting these errors.</p>
<h5 id="example-73" style="position:relative;"><a href="#example-73" aria-label="example 73 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #000000">loop: </span><span style="color: #AF00DB">while</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> &gt; </span><span style="color: #098658">0</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Error: Unused label.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">++;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="implicit-returns" style="position:relative;"><a href="#implicit-returns" aria-label="implicit returns permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implicit returns</h3>
<p>Functions with code paths that do not return a value in JS implicitly return <code>undefined</code>. These can now be flagged by the compiler as implicit returns. The check is turned <em>off</em> by default; use <a href="/tsconfig#noImplicitReturns"><code>noImplicitReturns</code></a> to turn it on.</p>
<h5 id="example-74" style="position:relative;"><a href="#example-74" aria-label="example 74 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Error: Not all code paths return a value.</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// implicitly returns `undefined`</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="case-clause-fall-throughs" style="position:relative;"><a href="#case-clause-fall-throughs" aria-label="case clause fall throughs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Case clause fall-throughs</h3>
<p>TypeScript can reports errors for fall-through cases in switch statement where the case clause is non-empty.
This check is turned <em>off</em> by default, and can be enabled using <a href="/tsconfig#noFallthroughCasesInSwitch"><code>noFallthroughCasesInSwitch</code></a>.</p>
<h5 id="example-75" style="position:relative;"><a href="#example-75" aria-label="example 75 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>With <a href="/tsconfig#noFallthroughCasesInSwitch"><code>noFallthroughCasesInSwitch</code></a>, this example will trigger an error:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">switch</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> % </span><span style="color: #098658">2</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">: </span><span style="color: #008000">// Error: Fallthrough case in switch.</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"even"</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"odd"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">break</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>However, in the following example, no error will be reported because the fall-through case is empty:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">switch</span><span style="color: #000000"> (</span><span style="color: #001080">x</span><span style="color: #000000"> % </span><span style="color: #098658">3</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Acceptable"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">break</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000">:</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"This is *two much*!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">break</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="stateless-function-components-in-react" style="position:relative;"><a href="#stateless-function-components-in-react" aria-label="stateless function components in react permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stateless Function Components in React</h2>
<p>TypeScript now supports <a href="https://facebook.github.io/react/docs/reusable-components.html#stateless-functions">Stateless Function components</a>.
These are lightweight components that easily compose other components:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Use parameter destructuring and defaults for easy definition of 'props' type</span></div><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">Greeter</span><span style="color: #000000"> = ({ </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"world"</span><span style="color: #000000"> }) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> &lt;</span><span style="color: #1C6277">div</span><span style="color: #000000">&gt;</span><span style="color: #001080">Hello</span><span style="color: #000000">, {</span><span style="color: #0070C1">name</span><span style="color: #000000">}!&lt;/div&gt;;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Properties get validated</span></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">example</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">Greeter</span><span style="color: #000000"> </span><span style="color: #1C6277">name</span><span style="color: #000000">=</span><span style="color: #A31515">"TypeScript 1.8"</span><span style="color: #000000"> /&gt;;</span></div></code></div></pre>
<p>For this feature and simplified props, be sure to be use the <a href="https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/react">latest version of react.d.ts</a>.</p>
<h2 id="simplified-props-type-management-in-react" style="position:relative;"><a href="#simplified-props-type-management-in-react" aria-label="simplified props type management in react permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simplified <code>props</code> type management in React</h2>
<p>In TypeScript 1.8 with the latest version of react.d.ts (see above), we’ve also greatly simplified the declaration of <code>props</code> types.</p>
<p>Specifically:</p>
<ul>
<li>You no longer need to either explicitly declare <code>ref</code> and <code>key</code> or <code>extend React.Props</code></li>
<li>The <code>ref</code> and <code>key</code> properties will appear with correct types on all components</li>
<li>The <code>ref</code> property is correctly disallowed on instances of Stateless Function components</li>
</ul>
<h2 id="augmenting-globalmodule-scope-from-modules" style="position:relative;"><a href="#augmenting-globalmodule-scope-from-modules" aria-label="augmenting globalmodule scope from modules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Augmenting global/module scope from modules</h2>
<p>Users can now declare any augmentations that they want to make, or that any other consumers already have made, to an existing module.
Module augmentations look like plain old ambient module declarations (i.e. the <code>declare module "foo" { }</code> syntax), and are directly nested either your own modules, or in another top level ambient external module.</p>
<p>Furthermore, TypeScript also has the notion of <em>global</em> augmentations of the form <code>declare global { }</code>.
This allows modules to augment global types such as <code>Array</code> if necessary.</p>
<p>The name of a module augmentation is resolved using the same set of rules as module specifiers in <code>import</code> and <code>export</code> declarations.
The declarations in a module augmentation are merged with any existing declarations the same way they would if they were declared in the same file.</p>
<p>Neither module augmentations nor global augmentations can add new items to the top level scope - they can only “patch” existing declarations.</p>
<h5 id="example-76" style="position:relative;"><a href="#example-76" aria-label="example 76 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>Here <code>map.ts</code> can declare that it will internally patch the <code>Observable</code> type from <code>observable.ts</code> and add the <code>map</code> method to it.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// observable.ts</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Observable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// ...</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// map.ts</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Observable</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./observable"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Create an augmentation for "./observable"</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #A31515">"./observable"</span><span style="color: #000000"> {</span></div><div class='line'></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Augment the 'Observable' class definition with interface merging</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Observable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #795E26">map</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #795E26">proj</span><span style="color: #000000">: (</span><span style="color: #001080">el</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">Observable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #1C6277">Observable</span><span style="color: #000000">.</span><span style="color: #001080">prototype</span><span style="color: #000000">.</span><span style="color: #001080">map</span><span style="color: #000000"> = </span><span style="color: #008000">/*...*/</span><span style="color: #000000">;</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// consumer.ts</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">Observable</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./observable"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #A31515">"./map"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">o</span><span style="color: #000000">: </span><span style="color: #1C6277">Observable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #001080">o</span><span style="color: #000000">.</span><span style="color: #795E26">map</span><span style="color: #000000">((</span><span style="color: #001080">x</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">toFixed</span><span style="color: #000000">());</span></div></code></div></pre>
<p>Similarly, the global scope can be augmented from modules using a <code>declare global</code> declarations:</p>
<h5 id="example-77" style="position:relative;"><a href="#example-77" aria-label="example 77 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Ensure this is treated as a module.</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> {};</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #001080">global</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">mapToNumbers</span><span style="color: #000000">(): </span><span style="color: #1C6277">number</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #1C6277">Array</span><span style="color: #000000">.</span><span style="color: #001080">prototype</span><span style="color: #000000">.</span><span style="color: #795E26">mapToNumbers</span><span style="color: #000000"> = </span><span style="color: #0000FF">function</span><span style="color: #000000"> () {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">/* ... */</span></div><div class='line'><span style="color: #000000">};</span></div></code></div></pre>
<h2 id="string-literal-types" style="position:relative;"><a href="#string-literal-types" aria-label="string literal types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>String literal types</h2>
<p>It’s not uncommon for an API to expect a specific set of strings for certain values.
For instance, consider a UI library that can move elements across the screen while controlling the <a href="https://wikipedia.org/wiki/Inbetweening">“easing” of the animation.</a></p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">UIElement</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">animate</span><span style="color: #000000">(</span><span style="color: #001080">options</span><span style="color: #000000">: </span><span style="color: #1C6277">AnimationOptions</span><span style="color: #000000">): </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">AnimationOptions</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">deltaX</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">deltaY</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">easing</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #008000">// Can be "ease-in", "ease-out", "ease-in-out"</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>However, this is error prone - there is nothing stopping a user from accidentally misspelling one of the valid easing values:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// No errors</span></div><div class='line'><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">UIElement</span><span style="color: #000000">().</span><span style="color: #795E26">animate</span><span style="color: #000000">({ </span><span style="color: #001080">deltaX:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">, </span><span style="color: #001080">deltaY:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">, </span><span style="color: #001080">easing:</span><span style="color: #000000"> </span><span style="color: #A31515">"ease-inout"</span><span style="color: #000000"> });</span></div></code></div></pre>
<p>With TypeScript 1.8, we’ve introduced string literal types.
These types are written the same way string literals are, but in type positions.</p>
<p>Users can now ensure that the type system will catch such errors.
Here’s our new <code>AnimationOptions</code> using string literal types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">AnimationOptions</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">deltaX</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">deltaY</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">easing</span><span style="color: #000000">: </span><span style="color: #A31515">"ease-in"</span><span style="color: #000000"> | </span><span style="color: #A31515">"ease-out"</span><span style="color: #000000"> | </span><span style="color: #A31515">"ease-in-out"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Error: Type '"ease-inout"' is not assignable to type '"ease-in" | "ease-out" | "ease-in-out"'</span></div><div class='line'><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">UIElement</span><span style="color: #000000">().</span><span style="color: #795E26">animate</span><span style="color: #000000">({ </span><span style="color: #001080">deltaX:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">, </span><span style="color: #001080">deltaY:</span><span style="color: #000000"> </span><span style="color: #098658">100</span><span style="color: #000000">, </span><span style="color: #001080">easing:</span><span style="color: #000000"> </span><span style="color: #A31515">"ease-inout"</span><span style="color: #000000"> });</span></div></code></div></pre>
<h2 id="improved-unionintersection-type-inference" style="position:relative;"><a href="#improved-unionintersection-type-inference" aria-label="improved unionintersection type inference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved union/intersection type inference</h2>
<p>TypeScript 1.8 improves type inference involving source and target sides that are both union or intersection types.
For example, when inferring from <code>string | string[]</code> to <code>string | T</code>, we reduce the types to <code>string[]</code> and <code>T</code>, thus inferring <code>string[]</code> for <code>T</code>.</p>
<h5 id="example-78" style="position:relative;"><a href="#example-78" aria-label="example 78 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Maybe</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">isDefined</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Maybe</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;): </span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> !== </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> && </span><span style="color: #001080">x</span><span style="color: #000000"> !== </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">isUndefined</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Maybe</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;): </span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> || </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #0000FF">null</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getOrElse</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Maybe</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;, </span><span style="color: #001080">defaultValue</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #795E26">isDefined</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) ? </span><span style="color: #001080">x</span><span style="color: #000000"> : </span><span style="color: #001080">defaultValue</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test1</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Maybe</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x1</span><span style="color: #000000"> = </span><span style="color: #795E26">getOrElse</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #A31515">"Undefined"</span><span style="color: #000000">); </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x2</span><span style="color: #000000"> = </span><span style="color: #795E26">isDefined</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) ? </span><span style="color: #001080">x</span><span style="color: #000000"> : </span><span style="color: #A31515">"Undefined"</span><span style="color: #000000">; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x3</span><span style="color: #000000"> = </span><span style="color: #795E26">isUndefined</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) ? </span><span style="color: #A31515">"Undefined"</span><span style="color: #000000"> : </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">test2</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Maybe</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x1</span><span style="color: #000000"> = </span><span style="color: #795E26">getOrElse</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, -</span><span style="color: #098658">1</span><span style="color: #000000">); </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x2</span><span style="color: #000000"> = </span><span style="color: #795E26">isDefined</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) ? </span><span style="color: #001080">x</span><span style="color: #000000"> : -</span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x3</span><span style="color: #000000"> = </span><span style="color: #795E26">isUndefined</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">) ? -</span><span style="color: #098658">1</span><span style="color: #000000"> : </span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="concatenate-amd-and-system-modules-with---outfile" style="position:relative;"><a href="#concatenate-amd-and-system-modules-with---outfile" aria-label="concatenate amd and system modules with   outfile permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Concatenate <code>AMD</code> and <code>System</code> modules with <code>--outFile</code></h2>
<p>Specifying <a href="/tsconfig#outFile"><code>outFile</code></a> in conjunction with <code>--module amd</code> or <code>--module system</code> will concatenate all modules in the compilation into a single output file containing multiple module closures.</p>
<p>A module name will be computed for each module based on its relative location to <a href="/tsconfig#rootDir"><code>rootDir</code></a>.</p>
<h5 id="example-79" style="position:relative;"><a href="#example-79" aria-label="example 79 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// file src/a.ts</span></div><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">B</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./lib/b"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">createA</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0070C1">B</span><span style="color: #000000">.</span><span style="color: #795E26">createB</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// file src/lib/b.ts</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">createB</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {};</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Results in:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #795E26">define</span><span style="color: #000000">(</span><span style="color: #A31515">"lib/b"</span><span style="color: #000000">, [</span><span style="color: #A31515">"require"</span><span style="color: #000000">, </span><span style="color: #A31515">"exports"</span><span style="color: #000000">], </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">require</span><span style="color: #000000">, </span><span style="color: #001080">exports</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">createB</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {};</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">createB</span><span style="color: #000000"> = </span><span style="color: #001080">createB</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">});</span></div><div class='line'><span style="color: #795E26">define</span><span style="color: #000000">(</span><span style="color: #A31515">"a"</span><span style="color: #000000">, [</span><span style="color: #A31515">"require"</span><span style="color: #000000">, </span><span style="color: #A31515">"exports"</span><span style="color: #000000">, </span><span style="color: #A31515">"lib/b"</span><span style="color: #000000">], </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">require</span><span style="color: #000000">, </span><span style="color: #001080">exports</span><span style="color: #000000">, </span><span style="color: #001080">B</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">createA</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0070C1">B</span><span style="color: #000000">.</span><span style="color: #795E26">createB</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #001080">createA</span><span style="color: #000000"> = </span><span style="color: #001080">createA</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h2 id="support-for-default-import-interop-with-systemjs" style="position:relative;"><a href="#support-for-default-import-interop-with-systemjs" aria-label="support for default import interop with systemjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>default</code> import interop with SystemJS</h2>
<p>Module loaders like SystemJS wrap CommonJS modules and expose then as a <code>default</code> ES6 import. This makes it impossible to share the definition files between the SystemJS and CommonJS implementation of the module as the module shape looks different based on the loader.</p>
<p>Setting the new compiler flag <a href="/tsconfig#allowSyntheticDefaultImports"><code>allowSyntheticDefaultImports</code></a> indicates that the module loader performs some kind of synthetic default import member creation not indicated in the imported .ts or .d.ts. The compiler will infer the existence of a <code>default</code> export that has the shape of the entire module itself.</p>
<p>System modules have this flag on by default.</p>
<h2 id="allow-captured-letconst-in-loops" style="position:relative;"><a href="#allow-captured-letconst-in-loops" aria-label="allow captured letconst in loops permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Allow captured <code>let</code>/<code>const</code> in loops</h2>
<p>Previously an error, now supported in TypeScript 1.8.
<code>let</code>/<code>const</code> declarations within loops and captured in functions are now emitted to correctly match <code>let</code>/<code>const</code> freshness semantics.</p>
<h5 id="example-80" style="position:relative;"><a href="#example-80" aria-label="example 80 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> = [];</span></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #098658">5</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">list</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #001080">list</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">f</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #795E26">f</span><span style="color: #000000">()));</span></div></code></div></pre>
<p>is compiled to:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> = [];</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #795E26">_loop_1</span><span style="color: #000000"> = </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">i</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">list</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span><span style="color: #0000FF">function</span><span style="color: #000000"> () {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  });</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #098658">5</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">_loop_1</span><span style="color: #000000">(</span><span style="color: #001080">i</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #001080">list</span><span style="color: #000000">.</span><span style="color: #795E26">forEach</span><span style="color: #000000">(</span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">f</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #795E26">f</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<p>And results in</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">cmd</div><div class='code-container'><code><div class='line'><span style="color: #098658">0</span></div><div class='line'><span style="color: #098658">1</span></div><div class='line'><span style="color: #098658">2</span></div><div class='line'><span style="color: #098658">3</span></div><div class='line'><span style="color: #098658">4</span></div></code></div></pre>
<h2 id="improved-checking-for-forin-statements" style="position:relative;"><a href="#improved-checking-for-forin-statements" aria-label="improved checking for forin statements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved checking for <code>for..in</code> statements</h2>
<p>Previously the type of a <code>for..in</code> variable is inferred to <code>any</code>; that allowed the compiler to ignore invalid uses within the <code>for..in</code> body.</p>
<p>Starting with TypeScript 1.8,:</p>
<ul>
<li>The type of a variable declared in a <code>for..in</code> statement is implicitly <code>string</code>.</li>
<li>When an object with a numeric index signature of type <code>T</code> (such as an array) is indexed by a <code>for..in</code> variable of a containing <code>for..in</code> statement for an object <em>with</em> a numeric index signature and <em>without</em> a string index signature (again such as an array), the value produced is of type <code>T</code>.</li>
</ul>
<h5 id="example-81" style="position:relative;"><a href="#example-81" aria-label="example 81 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">MyObject</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Type of x is implicitly string</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">obj</span><span style="color: #000000"> = </span><span style="color: #001080">a</span><span style="color: #000000">[</span><span style="color: #001080">x</span><span style="color: #000000">]; </span><span style="color: #008000">// Type of obj is MyObject</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="modules-are-now-emitted-with-a-use-strict-prologue" style="position:relative;"><a href="#modules-are-now-emitted-with-a-use-strict-prologue" aria-label="modules are now emitted with a use strict prologue permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Modules are now emitted with a <code>"use strict";</code> prologue</h2>
<p>Modules were always parsed in strict mode as per ES6, but for non-ES6 targets this was not respected in the generated code. Starting with TypeScript 1.8, emitted modules are always in strict mode. This shouldn’t have any visible changes in most code as TS considers most strict mode errors as errors at compile time, but it means that some things which used to silently fail at runtime in your TS code, like assigning to <code>NaN</code>, will now loudly fail. You can reference the <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Strict_mode">MDN Article</a> on strict mode for a detailed list of the differences between strict mode and non-strict mode.</p>
<h2 id="including-js-files-with---allowjs" style="position:relative;"><a href="#including-js-files-with---allowjs" aria-label="including js files with   allowjs permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Including <code>.js</code> files with <code>--allowJs</code></h2>
<p>Often there are external source files in your project that may not be authored in TypeScript.
Alternatively, you might be in the middle of converting a JS code base into TS, but still want to bundle all your JS code into a single file with the output of your new TS code.</p>
<p><code>.js</code> files are now allowed as input to <code>tsc</code>.
The TypeScript compiler checks the input <code>.js</code> files for syntax errors, and emits valid output based on the <a href="/tsconfig#target"><code>target</code></a> and <a href="/tsconfig#module"><code>module</code></a> flags.
The output can be combined with other <code>.ts</code> files as well.
Source maps are still generated for <code>.js</code> files just like with <code>.ts</code> files.</p>
<h2 id="custom-jsx-factories-using---reactnamespace" style="position:relative;"><a href="#custom-jsx-factories-using---reactnamespace" aria-label="custom jsx factories using   reactnamespace permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom JSX factories using <code>--reactNamespace</code></h2>
<p>Passing <code>--reactNamespace &#x3C;JSX factory Name></code> along with <code>--jsx react</code> allows for using a different JSX factory from the default <code>React</code>.</p>
<p>The new factory name will be used to call <code>createElement</code> and <code>__spread</code> functions.</p>
<h5 id="example-82" style="position:relative;"><a href="#example-82" aria-label="example 82 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">jsxFactory</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"jsxFactory"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">div</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">div</span><span style="color: #000000">&gt;</span><span style="color: #001080">Hello</span><span style="color: #000000"> </span><span style="color: #0070C1">JSX</span><span style="color: #000000">!&lt;/</span><span style="color: #001080">div</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<p>Compiled with:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">shell</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc --jsx react --reactNamespace jsxFactory --m commonJS</span></div></code></div></pre>
<p>Results in:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">jsxFactory_1</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">"jsxFactory"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">div</span><span style="color: #000000"> = </span><span style="color: #001080">jsxFactory_1</span><span style="color: #000000">.</span><span style="color: #001080">jsxFactory</span><span style="color: #000000">.</span><span style="color: #795E26">createElement</span><span style="color: #000000">(</span><span style="color: #A31515">"div"</span><span style="color: #000000">, </span><span style="color: #0000FF">null</span><span style="color: #000000">, </span><span style="color: #A31515">"Hello JSX!"</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="this-based-type-guards" style="position:relative;"><a href="#this-based-type-guards" aria-label="this based type guards permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>this</code>-based type guards</h2>
<p>TypeScript 1.8 extends <a href="#user-defined-type-guard-functions">user-defined type guard functions</a> to class and interface methods.</p>
<p><code>this is T</code> is now valid return type annotation for methods in classes and interfaces.
When used in a type narrowing position (e.g. <code>if</code> statement), the type of the call expression target object would be narrowed to <code>T</code>.</p>
<h5 id="example-83" style="position:relative;"><a href="#example-83" aria-label="example 83 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">FileSystemObject</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">isFile</span><span style="color: #000000">(): </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">File</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">File</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">isDirectory</span><span style="color: #000000">(): </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">Directory</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">Directory</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">isNetworked</span><span style="color: #000000">(): </span><span style="color: #0000FF">this</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">Networked</span><span style="color: #000000"> & </span><span style="color: #1C6277">this</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">networked</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">path</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #0000FF">private</span><span style="color: #000000"> </span><span style="color: #001080">networked</span><span style="color: #000000">: </span><span style="color: #1C6277">boolean</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">File</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">FileSystemObject</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">path</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">content</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">(</span><span style="color: #001080">path</span><span style="color: #000000">, </span><span style="color: #0000FF">false</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Directory</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">FileSystemObject</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">children</span><span style="color: #000000">: </span><span style="color: #1C6277">FileSystemObject</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Networked</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">host</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">fso</span><span style="color: #000000">: </span><span style="color: #1C6277">FileSystemObject</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">File</span><span style="color: #000000">(</span><span style="color: #A31515">"foo/bar.txt"</span><span style="color: #000000">, </span><span style="color: #A31515">"foo"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fso</span><span style="color: #000000">.</span><span style="color: #795E26">isFile</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">fso</span><span style="color: #000000">.</span><span style="color: #001080">content</span><span style="color: #000000">; </span><span style="color: #008000">// fso is File</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fso</span><span style="color: #000000">.</span><span style="color: #795E26">isDirectory</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">fso</span><span style="color: #000000">.</span><span style="color: #001080">children</span><span style="color: #000000">; </span><span style="color: #008000">// fso is Directory</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">else</span><span style="color: #000000"> </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fso</span><span style="color: #000000">.</span><span style="color: #795E26">isNetworked</span><span style="color: #000000">()) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">fso</span><span style="color: #000000">.</span><span style="color: #001080">host</span><span style="color: #000000">; </span><span style="color: #008000">// fso is networked</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="official-typescript-nuget-package" style="position:relative;"><a href="#official-typescript-nuget-package" aria-label="official typescript nuget package permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Official TypeScript NuGet package</h2>
<p>Starting with TypeScript 1.8, official NuGet packages are available for the TypeScript Compiler (<code>tsc.exe</code>) as well as the MSBuild integration (<code>Microsoft.TypeScript.targets</code> and <code>Microsoft.TypeScript.Tasks.dll</code>).</p>
<p>Stable packages are available here:</p>
<ul>
<li><a href="https://www.nuget.org/packages/Microsoft.TypeScript.Compiler/">Microsoft.TypeScript.Compiler</a></li>
<li><a href="https://www.nuget.org/packages/Microsoft.TypeScript.MSBuild/">Microsoft.TypeScript.MSBuild</a></li>
</ul>
<p>Also, a nightly NuGet package to match the <a href="http://blogs.msdn.com/b/typescript/archive/2015/07/27/introducing-typescript-nightlies.aspx">nightly npm package</a> is available on <a href="https://myget.org">https://myget.org</a>:</p>
<ul>
<li><a href="https://www.myget.org/gallery/typescript-preview">TypeScript-Preview</a></li>
</ul>
<h2 id="prettier-error-messages-from-tsc" style="position:relative;"><a href="#prettier-error-messages-from-tsc" aria-label="prettier error messages from tsc permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Prettier error messages from <code>tsc</code></h2>
<p>We understand that a ton of monochrome output can be a little difficult on the eyes.
Colors can help discern where a message starts and ends, and these visual clues are important when error output gets overwhelming.</p>
<p>By just passing the <a href="/tsconfig#pretty"><code>pretty</code></a> command line option, TypeScript gives more colorful output with context about where things are going wrong.</p>
<p><img src="https://raw.githubusercontent.com/wiki/Microsoft/TypeScript/images/new-in-typescript/pretty01.png" alt="Showing off pretty error messages in ConEmu"></p>
<h2 id="colorization-of-jsx-code-in-vs-2015" style="position:relative;"><a href="#colorization-of-jsx-code-in-vs-2015" aria-label="colorization of jsx code in vs 2015 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Colorization of JSX code in VS 2015</h2>
<p>With TypeScript 1.8, JSX tags are now classified and colorized in Visual Studio 2015.</p>
<p><img src="https://cloud.githubusercontent.com/assets/8052307/12271404/b875c502-b90f-11e5-93d8-c6740be354d1.png" alt="jsx"></p>
<p>The classification can be further customized by changing the font and color settings for the <code>VB XML</code> color and font settings through <code>Tools</code>-><code>Options</code>-><code>Environment</code>-><code>Fonts and Colors</code> page.</p>
<h2 id="the---project--p-flag-can-now-take-any-file-path" style="position:relative;"><a href="#the---project--p-flag-can-now-take-any-file-path" aria-label="the   project  p flag can now take any file path permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The <code>--project</code> (<code>-p</code>) flag can now take any file path</h2>
<p>The <code>--project</code> command line option originally could only take paths to a folder containing a <code>tsconfig.json</code>.
Given the different scenarios for build configurations, it made sense to allow <code>--project</code> to point to any other compatible JSON file.
For instance, a user might want to target ES2015 with CommonJS modules for Node 5, but ES5 with AMD modules for the browser.
With this new work, users can easily manage two separate build targets using <code>tsc</code> alone without having to perform hacky workarounds like placing <code>tsconfig.json</code> files in separate directories.</p>
<p>The old behavior still remains the same if given a directory - the compiler will try to find a file in the directory named <code>tsconfig.json</code>.</p>
<h2 id="allow-comments-in-tsconfigjson" style="position:relative;"><a href="#allow-comments-in-tsconfigjson" aria-label="allow comments in tsconfigjson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Allow comments in tsconfig.json</h2>
<p>It’s always nice to be able to document your configuration!
<code>tsconfig.json</code> now accepts single and multi-line comments.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #A31515">"compilerOptions"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #A31515">"target"</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">"ES2015"</span><span style="color: #000000">, </span><span style="color: #008000">// running on node v5, yaay!</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #A31515">"sourceMap"</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">   </span><span style="color: #008000">// makes debugging easier</span></div><div class='line'><span style="color: #000000">    },</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/*</span></div><div class='line'><span style="color: #008000">     * Excluded files</span></div><div class='line'><span style="color: #008000">      */</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #A31515">"exclude"</span><span style="color: #000000">: [</span></div><div class='line'><span style="color: #000000">        </span><span style="color: #A31515">"file.d.ts"</span></div><div class='line'><span style="color: #000000">    ]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="support-output-to-ipc-driven-files" style="position:relative;"><a href="#support-output-to-ipc-driven-files" aria-label="support output to ipc driven files permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support output to IPC-driven files</h2>
<p>TypeScript 1.8 allows users to use the <a href="/tsconfig#outFile"><code>outFile</code></a> argument with special file system entities like named pipes, devices, etc.</p>
<p>As an example, on many Unix-like systems, the standard output stream is accessible by the file <code>/dev/stdout</code>.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">shell</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc foo.ts --outFile /dev/stdout</span></div></code></div></pre>
<p>This can be used to pipe output between commands as well.</p>
<p>As an example, we can pipe our emitted JavaScript into a pretty printer like <a href="https://www.npmjs.com/package/pretty-js">pretty-js</a>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">shell</div><div class='code-container'><code><div class='line'><span style="color: #000000">tsc foo.ts --outFile /dev/stdout | pretty-js</span></div></code></div></pre>
<h2 id="improved-support-for-tsconfigjson-in-visual-studio-2015" style="position:relative;"><a href="#improved-support-for-tsconfigjson-in-visual-studio-2015" aria-label="improved support for tsconfigjson in visual studio 2015 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved support for <code>tsconfig.json</code> in Visual Studio 2015</h2>
<p>TypeScript 1.8 allows <code>tsconfig.json</code> files in all project types.
This includes ASP.NET v4 projects, <em>Console Application</em>, and the <em>Html Application with TypeScript</em> project types.
Further, you are no longer limited to a single <code>tsconfig.json</code> file but can add multiple, and each will be built as part of the project.
This allows you to separate the configuration for different parts of your application without having to use multiple different projects.</p>
<p><img src="https://raw.githubusercontent.com/wiki/Microsoft/TypeScript/images/new-in-typescript/tsconfig-in-vs.png" alt="Showing off tsconfig.json in Visual Studio"></p>
<p>We also disable the project properties page when you add a <code>tsconfig.json</code> file.
This means that all configuration changes have to be made in the <code>tsconfig.json</code> file itself.</p>
<h3 id="a-couple-of-limitations" style="position:relative;"><a href="#a-couple-of-limitations" aria-label="a couple of limitations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>A couple of limitations:</h3>
<ul>
<li>If you add a <code>tsconfig.json</code> file, TypeScript files that are not considered part of that context are not compiled.</li>
<li>Apache Cordova Apps still have the existing limitation of a single <code>tsconfig.json</code> file, which must be in either the root or the <code>scripts</code> folder.</li>
<li>There is no template for <code>tsconfig.json</code> in most project types.</li>
</ul>
<h2 id="typescript-17" style="position:relative;"><a href="#typescript-17" aria-label="typescript 17 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.7</h2>
<h2 id="asyncawait-support-in-es6-targets-node-v4" style="position:relative;"><a href="#asyncawait-support-in-es6-targets-node-v4" aria-label="asyncawait support in es6 targets node v4 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>async</code>/<code>await</code> support in ES6 targets (Node v4+)</h2>
<p>TypeScript now supports asynchronous functions for engines that have native support for ES6 generators, e.g. Node v4 and above.
Asynchronous functions are prefixed with the <code>async</code> keyword; <code>await</code> suspends the execution until an asynchronous function return promise is fulfilled and unwraps the value from the <code>Promise</code> returned.</p>
<h5 id="example-84" style="position:relative;"><a href="#example-84" aria-label="example 84 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>In the following example, each input element will be printed out one at a time with a 200ms delay:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #A31515">"use strict"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #008000">// printDelayed is a 'Promise&lt;void&gt;'</span></div><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">printDelayed</span><span style="color: #000000">(</span><span style="color: #001080">elements</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">element</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">elements</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">delay</span><span style="color: #000000">(</span><span style="color: #098658">200</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">element</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">delay</span><span style="color: #000000">(</span><span style="color: #001080">milliseconds</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">void</span><span style="color: #000000">&gt;((</span><span style="color: #001080">resolve</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #795E26">setTimeout</span><span style="color: #000000">(</span><span style="color: #001080">resolve</span><span style="color: #000000">, </span><span style="color: #001080">milliseconds</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  });</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">printDelayed</span><span style="color: #000000">([</span><span style="color: #A31515">"Hello"</span><span style="color: #000000">, </span><span style="color: #A31515">"beautiful"</span><span style="color: #000000">, </span><span style="color: #A31515">"asynchronous"</span><span style="color: #000000">, </span><span style="color: #A31515">"world"</span><span style="color: #000000">]).</span><span style="color: #795E26">then</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Printed every element!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<p>For more information see <a href="http://blogs.msdn.com/b/typescript/archive/2015/11/03/what-about-async-await.aspx">Async Functions</a> blog post.</p>
<h2 id="support-for---target-es6-with---module" style="position:relative;"><a href="#support-for---target-es6-with---module" aria-label="support for   target es6 with   module permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>--target ES6</code> with <code>--module</code></h2>
<p>TypeScript 1.7 adds <code>ES6</code> to the list of options available for the <a href="/tsconfig#module"><code>module</code></a> option and allows you to specify the module output when targeting <code>ES6</code>. This provides more flexibility to target exactly the features you want in specific runtimes.</p>
<h5 id="example-85" style="position:relative;"><a href="#example-85" aria-label="example 85 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#module'><data-lsp lsp="Specify what module code is generated.">module</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"amd"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#target'><data-lsp lsp="Set the JavaScript language version for emitted JavaScript and include compatible library declarations.">target</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"es6"</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="this-typing" style="position:relative;"><a href="#this-typing" aria-label="this typing permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>this</code>-typing</h2>
<p>It is a common pattern to return the current object (i.e. <code>this</code>) from a method to create <a href="https://wikipedia.org/wiki/Fluent_interface">fluent-style APIs</a>.
For instance, consider the following <code>BasicCalculator</code> module:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">BasicCalculator</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #0000FF">protected</span><span style="color: #000000"> </span><span style="color: #001080">value</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">) {}</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">currentValue</span><span style="color: #000000">(): </span><span style="color: #1C6277">number</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #001080">operand</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> += </span><span style="color: #001080">operand</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">subtract</span><span style="color: #000000">(</span><span style="color: #001080">operand</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> -= </span><span style="color: #001080">operand</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">multiply</span><span style="color: #000000">(</span><span style="color: #001080">operand</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> *= </span><span style="color: #001080">operand</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">divide</span><span style="color: #000000">(</span><span style="color: #001080">operand</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> /= </span><span style="color: #001080">operand</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>A user could express <code>2 * 5 + 1</code> as</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">calc</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./BasicCalculator"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">calc</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">).</span><span style="color: #795E26">multiply</span><span style="color: #000000">(</span><span style="color: #098658">5</span><span style="color: #000000">).</span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">).</span><span style="color: #795E26">currentValue</span><span style="color: #000000">();</span></div></code></div></pre>
<p>This often opens up very elegant ways of writing code; however, there was a problem for classes that wanted to extend from <code>BasicCalculator</code>.
Imagine a user wanted to start writing a <code>ScientificCalculator</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">BasicCalculator</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./BasicCalculator"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">ScientificCalculator</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">BasicCalculator</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">square</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> ** </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">sin</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000"> = </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">sin</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">value</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Because TypeScript used to infer the type <code>BasicCalculator</code> for each method in <code>BasicCalculator</code> that returned <code>this</code>, the type system would forget that it had <code>ScientificCalculator</code> whenever using a <code>BasicCalculator</code> method.</p>
<p>For instance:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">calc</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./ScientificCalculator"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">calc</span><span style="color: #000000">(</span><span style="color: #098658">0.5</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">  .</span><span style="color: #795E26">square</span><span style="color: #000000">()</span></div><div class='line'><span style="color: #000000">  .</span><span style="color: #795E26">divide</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">  .</span><span style="color: #795E26">sin</span><span style="color: #000000">() </span><span style="color: #008000">// Error: 'BasicCalculator' has no 'sin' method.</span></div><div class='line'><span style="color: #000000">  .</span><span style="color: #795E26">currentValue</span><span style="color: #000000">();</span></div></code></div></pre>
<p>This is no longer the case - TypeScript now infers <code>this</code> to have a special type called <code>this</code> whenever inside an instance method of a class.
The <code>this</code> type is written as so, and basically means “the type of the left side of the dot in a method call”.</p>
<p>The <code>this</code> type is also useful with intersection types in describing libraries (e.g. Ember.js) that use mixin-style patterns to describe inheritance:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">MyType</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">extend</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">other</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">this</span><span style="color: #000000"> & </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="es7-exponentiation-operator" style="position:relative;"><a href="#es7-exponentiation-operator" aria-label="es7 exponentiation operator permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ES7 exponentiation operator</h2>
<p>TypeScript 1.7 supports upcoming <a href="https://github.com/rwaldron/exponentiation-operator">ES7/ES2016 exponentiation operators</a>: <code>**</code> and <code>**=</code>. The operators will be transformed in the output to ES3/ES5 using <code>Math.pow</code>.</p>
<h5 id="example-86" style="position:relative;"><a href="#example-86" aria-label="example 86 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000"> ** </span><span style="color: #098658">3</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> **= </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000"> = -(</span><span style="color: #098658">4</span><span style="color: #000000"> ** </span><span style="color: #098658">3</span><span style="color: #000000">);</span></div></code></div></pre>
<p>Will generate the following JavaScript output:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">pow</span><span style="color: #000000">(</span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">pow</span><span style="color: #000000">(</span><span style="color: #001080">y</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">z</span><span style="color: #000000"> = -</span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">pow</span><span style="color: #000000">(</span><span style="color: #098658">4</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">);</span></div></code></div></pre>
<h2 id="improved-checking-for-destructuring-object-literal" style="position:relative;"><a href="#improved-checking-for-destructuring-object-literal" aria-label="improved checking for destructuring object literal permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved checking for destructuring object literal</h2>
<p>TypeScript 1.7 makes checking of destructuring patterns with an object literal or array literal initializers less rigid and more intuitive.</p>
<p>When an object literal is contextually typed by the implied type of an object binding pattern:</p>
<ul>
<li>Properties with default values in the object binding pattern become optional in the object literal.</li>
<li>Properties in the object binding pattern that have no match in the object literal are required to have a default value in the object binding pattern and are automatically added to the object literal type.</li>
<li>Properties in the object literal that have no match in the object binding pattern are an error.</li>
</ul>
<p>When an array literal is contextually typed by the implied type of an array binding pattern:</p>
<ul>
<li>Elements in the array binding pattern that have no match in the array literal are required to have a default value in the array binding pattern and are automatically added to the array literal type.</li>
</ul>
<h5 id="example-87" style="position:relative;"><a href="#example-87" aria-label="example 87 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Type of f1 is (arg?: { x?: number, y?: number }) =&gt; void</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f1</span><span style="color: #000000">({ </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000"> } = {}) {}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// And can be called as:</span></div><div class='line'><span style="color: #795E26">f1</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #795E26">f1</span><span style="color: #000000">({});</span></div><div class='line'><span style="color: #795E26">f1</span><span style="color: #000000">({ </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> });</span></div><div class='line'><span style="color: #795E26">f1</span><span style="color: #000000">({ </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> });</span></div><div class='line'><span style="color: #795E26">f1</span><span style="color: #000000">({ </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> });</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Type of f2 is (arg?: (x: number, y?: number) =&gt; void</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f2</span><span style="color: #000000">({ </span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000"> } = { </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">0</span><span style="color: #000000"> }) {}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">f2</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #795E26">f2</span><span style="color: #000000">({}); </span><span style="color: #008000">// Error, x not optional</span></div><div class='line'><span style="color: #795E26">f2</span><span style="color: #000000">({ </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> });</span></div><div class='line'><span style="color: #795E26">f2</span><span style="color: #000000">({ </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> }); </span><span style="color: #008000">// Error, x not optional</span></div><div class='line'><span style="color: #795E26">f2</span><span style="color: #000000">({ </span><span style="color: #001080">x:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">y:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> });</span></div></code></div></pre>
<h2 id="support-for-decorators-when-targeting-es3" style="position:relative;"><a href="#support-for-decorators-when-targeting-es3" aria-label="support for decorators when targeting es3 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for decorators when targeting ES3</h2>
<p>Decorators are now allowed when targeting ES3. TypeScript 1.7 removes the ES5-specific use of <code>reduceRight</code> from the <code>__decorate</code> helper. The changes also inline calls to <code>Object.getOwnPropertyDescriptor</code> and <code>Object.defineProperty</code> in a backwards-compatible fashion that allows for clean up of the emit for ES5 and later by removing various repetitive calls to the aforementioned <code>Object</code> methods.</p>
<h2 id="typescript-16" style="position:relative;"><a href="#typescript-16" aria-label="typescript 16 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.6</h2>
<h2 id="jsx-support" style="position:relative;"><a href="#jsx-support" aria-label="jsx support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>JSX support</h2>
<p>JSX is an embeddable XML-like syntax. It is meant to be transformed into valid JavaScript, but the semantics of that transformation are implementation-specific. JSX came to popularity with the React library but has since seen other applications. TypeScript 1.6 supports embedding, type checking, and optionally compiling JSX directly into JavaScript.</p>
<h4 id="new-tsx-file-extension-and-as-operator" style="position:relative;"><a href="#new-tsx-file-extension-and-as-operator" aria-label="new tsx file extension and as operator permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New <code>.tsx</code> file extension and <code>as</code> operator</h4>
<p>TypeScript 1.6 introduces a new <code>.tsx</code> file extension. This extension does two things: it enables JSX inside of TypeScript files, and it makes the new <code>as</code> operator the default way to cast (removing any ambiguity between JSX expressions and the TypeScript prefix cast operator). For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">any</span><span style="color: #000000">&gt;</span><span style="color: #001080">foo</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #008000">// is equivalent to:</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">foo</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #1C6277">any</span><span style="color: #000000">;</span></div></code></div></pre>
<h4 id="using-react" style="position:relative;"><a href="#using-react" aria-label="using react permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using React</h4>
<p>To use JSX-support with React you should use the <a href="https://github.com/borisyankov/DefinitelyTyped/tree/master/react">React typings</a>. These typings define the <code>JSX</code> namespace so that TypeScript can correctly check JSX expressions for React. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/// </span><span style="color: #800000">&lt;reference</span><span style="color: #008000"> </span><span style="color: #FF0000">path</span><span style="color: #000000">=</span><span style="color: #A31515">"react.d.ts"</span><span style="color: #008000"> </span><span style="color: #800000">/&gt;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Props</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">MyComponent</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">React</span><span style="color: #000000">.</span><span style="color: #1C6277">Component</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Props</span><span style="color: #000000">, {}&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">render</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> &lt;</span><span style="color: #1C6277">span</span><span style="color: #000000">&gt;{this.props.</span><span style="color: #001080">foo</span><span style="color: #000000">}&lt;/</span><span style="color: #001080">span</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #000000">&lt;</span><span style="color: #001080">MyComponent</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">=</span><span style="color: #A31515">"bar"</span><span style="color: #000000"> /&gt;; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #000000">&lt;</span><span style="color: #001080">MyComponent</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">={</span><span style="color: #098658">0</span><span style="color: #000000">} /&gt;; </span><span style="color: #008000">// error, `name` is not a number</span></div></code></div></pre>
<h4 id="using-other-jsx-frameworks" style="position:relative;"><a href="#using-other-jsx-frameworks" aria-label="using other jsx frameworks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using other JSX frameworks</h4>
<p>JSX element names and properties are validated against the <code>JSX</code> namespace. Please see the JSX wiki page for defining the <code>JSX</code> namespace for your framework.</p>
<h4 id="output-generation" style="position:relative;"><a href="#output-generation" aria-label="output generation permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Output generation</h4>
<p>TypeScript ships with two JSX modes: <code>preserve</code> and <code>react</code>.</p>
<ul>
<li>The <code>preserve</code> mode will keep JSX expressions as part of the output to be further consumed by another transform step. <em>Additionally the output will have a <code>.jsx</code> file extension.</em></li>
<li>The <code>react</code> mode will emit <code>React.createElement</code>, does not need to go through a JSX transformation before use, and the output will have a <code>.js</code> file extension.</li>
</ul>
<p>See the JSX wiki page for more information on using JSX in TypeScript.</p>
<h2 id="intersection-types" style="position:relative;"><a href="#intersection-types" aria-label="intersection types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Intersection types</h2>
<p>TypeScript 1.6 introduces intersection types, the logical complement of union types. A union type <code>A | B</code> represents an entity that is either of type <code>A</code> or type <code>B</code>, whereas an intersection type <code>A &#x26; B</code> represents an entity that is both of type <code>A</code> <em>and</em> type <code>B</code>.</p>
<h5 id="example-88" style="position:relative;"><a href="#example-88" aria-label="example 88 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">extend</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">first</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">second</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">U</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000"> = &lt;</span><span style="color: #1C6277">T</span><span style="color: #000000"> & </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;{};</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">first</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">result</span><span style="color: #000000">[</span><span style="color: #001080">id</span><span style="color: #000000">] = </span><span style="color: #001080">first</span><span style="color: #000000">[</span><span style="color: #001080">id</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000"> </span><span style="color: #0000FF">in</span><span style="color: #000000"> </span><span style="color: #001080">second</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">hasOwnProperty</span><span style="color: #000000">(</span><span style="color: #001080">id</span><span style="color: #000000">)) {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">result</span><span style="color: #000000">[</span><span style="color: #001080">id</span><span style="color: #000000">] = </span><span style="color: #001080">second</span><span style="color: #000000">[</span><span style="color: #001080">id</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #795E26">extend</span><span style="color: #000000">({ </span><span style="color: #001080">a:</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000"> }, { </span><span style="color: #001080">b:</span><span style="color: #000000"> </span><span style="color: #098658">42</span><span style="color: #000000"> });</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">n</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000">;</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">LinkedList</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> & { </span><span style="color: #001080">next</span><span style="color: #000000">: </span><span style="color: #1C6277">LinkedList</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Person</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">people</span><span style="color: #000000">: </span><span style="color: #1C6277">LinkedList</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">Person</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">people</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">people</span><span style="color: #000000">.</span><span style="color: #001080">next</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">people</span><span style="color: #000000">.</span><span style="color: #001080">next</span><span style="color: #000000">.</span><span style="color: #001080">next</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">people</span><span style="color: #000000">.</span><span style="color: #001080">next</span><span style="color: #000000">.</span><span style="color: #001080">next</span><span style="color: #000000">.</span><span style="color: #001080">next</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">;</span></div></code></div></pre>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">A</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">B</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">c</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">abc</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000"> & </span><span style="color: #1C6277">B</span><span style="color: #000000"> & </span><span style="color: #1C6277">C</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">abc</span><span style="color: #000000">.</span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">abc</span><span style="color: #000000">.</span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">abc</span><span style="color: #000000">.</span><span style="color: #001080">c</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>See <a href="https://github.com/Microsoft/TypeScript/issues/1256">issue #1256</a> for more information.</p>
<h2 id="local-type-declarations" style="position:relative;"><a href="#local-type-declarations" aria-label="local type declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local type declarations</h2>
<p>Local class, interface, enum, and type alias declarations can now appear inside function declarations. Local types are block scoped, similar to variables declared with <code>let</code> and <code>const</code>. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">true</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">5</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The inferred return type of a function may be a type declared locally within the function. It is not possible for callers of the function to reference such a local type, but it can of course be matched structurally. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Point</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getPointFactory</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">P</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0070C1">P</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">PointZero</span><span style="color: #000000"> = </span><span style="color: #795E26">getPointFactory</span><span style="color: #000000">(</span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #098658">0</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">PointOne</span><span style="color: #000000"> = </span><span style="color: #795E26">getPointFactory</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">1</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p1</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">PointZero</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p2</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">PointZero</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p3</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">PointOne</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Local types may reference enclosing type parameters and local class and interfaces may themselves be generic. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f3</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">f</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">X</span><span style="color: #000000">, </span><span style="color: #1C6277">Y</span><span style="color: #000000">&gt;(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">X</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">Y</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">y</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">    }</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000"> = </span><span style="color: #795E26">f</span><span style="color: #000000">(</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000">; </span><span style="color: #008000">// number</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #001080">v</span><span style="color: #000000">.</span><span style="color: #001080">y</span><span style="color: #000000">; </span><span style="color: #008000">// string</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="class-expressions" style="position:relative;"><a href="#class-expressions" aria-label="class expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Class expressions</h2>
<p>TypeScript 1.6 adds support for ES6 class expressions. In a class expression, the class name is optional and, if specified, is only in scope in the class expression itself. This is similar to the optional name of a function expression. It is not possible to refer to the class instance type of a class expression outside the class expression, but the type can of course be matched structurally. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">Point</span><span style="color: #000000"> = </span><span style="color: #0000FF">class</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">, </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">length</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">sqrt</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> * </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> + </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">y</span><span style="color: #000000"> * </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">y</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">};</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Point</span><span style="color: #000000">(</span><span style="color: #098658">3</span><span style="color: #000000">, </span><span style="color: #098658">4</span><span style="color: #000000">); </span><span style="color: #008000">// p has anonymous class type</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">p</span><span style="color: #000000">.</span><span style="color: #795E26">length</span><span style="color: #000000">());</span></div></code></div></pre>
<h2 id="extending-expressions" style="position:relative;"><a href="#extending-expressions" aria-label="extending expressions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extending expressions</h2>
<p>TypeScript 1.6 adds support for classes extending arbitrary expression that computes a constructor function. This means that built-in types can now be extended in class declarations.</p>
<p>The <code>extends</code> clause of a class previously required a type reference to be specified. It now accepts an expression optionally followed by a type argument list. The type of the expression must be a constructor function type with at least one construct signature that has the same number of type parameters as the number of type arguments specified in the <code>extends</code> clause. The return type of the matching construct signature(s) is the base type from which the class instance type inherits. Effectively, this allows both real classes and “class-like” expressions to be specified in the <code>extends</code> clause.</p>
<p>Some examples:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Extend built-in types</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">MyArray</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; {}</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">MyError</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Error</span><span style="color: #000000"> {}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Extend computed base class</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">ThingA</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">getGreeting</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">"Hello from A"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">ThingB</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">getGreeting</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">"Hello from B"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Greeter</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">getGreeting</span><span style="color: #000000">(): </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">GreeterConstructor</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">new</span><span style="color: #000000"> (): </span><span style="color: #1C6277">Greeter</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getGreeterBase</span><span style="color: #000000">(): </span><span style="color: #1C6277">GreeterConstructor</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &gt;= </span><span style="color: #098658">0.5</span><span style="color: #000000"> ? </span><span style="color: #001080">ThingA</span><span style="color: #000000"> : </span><span style="color: #001080">ThingB</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Test</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #795E26">getGreeterBase</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">sayHello</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">getGreeting</span><span style="color: #000000">());</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="abstract-classes-and-methods" style="position:relative;"><a href="#abstract-classes-and-methods" aria-label="abstract classes and methods permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>abstract</code> classes and methods</h2>
<p>TypeScript 1.6 adds support for <code>abstract</code> keyword for classes and their methods. An abstract class is allowed to have methods with no implementation, and cannot be constructed.</p>
<h5 id="examples" style="position:relative;"><a href="#examples" aria-label="examples permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">abstract</span><span style="color: #000000"> </span><span style="color: #795E26">getThing</span><span style="color: #000000">(): </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">getOtherThing</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Base</span><span style="color: #000000">(); </span><span style="color: #008000">// Error, 'Base' is abstract</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Error, must either be 'abstract' or implement concrete 'getThing'</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Derived1</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Derived2</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Base</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">getThing</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">foo</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">super</span><span style="color: #000000">.</span><span style="color: #795E26">getThing</span><span style="color: #000000">(); </span><span style="color: #008000">// Error: cannot invoke abstract members through 'super'</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Derived2</span><span style="color: #000000">(); </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">Base</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Derived2</span><span style="color: #000000">(); </span><span style="color: #008000">// Also OK</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #795E26">getThing</span><span style="color: #000000">(); </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000">.</span><span style="color: #795E26">getOtherThing</span><span style="color: #000000">(); </span><span style="color: #008000">// OK</span></div></code></div></pre>
<h2 id="generic-type-aliases" style="position:relative;"><a href="#generic-type-aliases" aria-label="generic type aliases permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Generic type aliases</h2>
<p>With TypeScript 1.6, type aliases can be generic. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Lazy</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">T</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">T</span><span style="color: #000000">);</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">Lazy</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #A31515">"eager"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #795E26">s</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #A31515">"lazy"</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Tuple</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">A</span><span style="color: #000000">, </span><span style="color: #1C6277">B</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">A</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">B</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Pair</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt; = </span><span style="color: #1C6277">Tuple</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;;</span></div></code></div></pre>
<h2 id="stricter-object-literal-assignment-checks" style="position:relative;"><a href="#stricter-object-literal-assignment-checks" aria-label="stricter object literal assignment checks permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stricter object literal assignment checks</h2>
<p>TypeScript 1.6 enforces stricter object literal assignment checks for the purpose of catching excess or misspelled properties. Specifically, when a fresh object literal is assigned to a variable or passed as an argument for a non-empty target type, it is an error for the object literal to specify properties that don’t exist in the target type.</p>
<h5 id="examples-1" style="position:relative;"><a href="#examples-1" aria-label="examples 1 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: { </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = { </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">baz:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> }; </span><span style="color: #008000">// Error, excess property `baz`</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000">: { </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; </span><span style="color: #001080">bar</span><span style="color: #000000">?: </span><span style="color: #1C6277">number</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #001080">y</span><span style="color: #000000"> = { </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">baz:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> }; </span><span style="color: #008000">// Error, excess or misspelled property `baz`</span></div></code></div></pre>
<p>A type can include an index signature to explicitly indicate that excess properties are permitted:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: { </span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">; [</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">any</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = { </span><span style="color: #001080">foo:</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #001080">baz:</span><span style="color: #000000"> </span><span style="color: #098658">2</span><span style="color: #000000"> }; </span><span style="color: #008000">// Ok, `baz` matched by index signature</span></div></code></div></pre>
<h2 id="es6-generators" style="position:relative;"><a href="#es6-generators" aria-label="es6 generators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ES6 generators</h2>
<p>TypeScript 1.6 adds support for generators when targeting ES6.</p>
<p>A generator function can have a return type annotation, just like a function. The annotation represents the type of the generator returned by the function. Here is an example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">(): </span><span style="color: #1C6277">Iterable</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #098658">100</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #A31515">""</span><span style="color: #000000">; </span><span style="color: #008000">// string is assignable to string</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #795E26">otherStringGenerator</span><span style="color: #000000">(); </span><span style="color: #008000">// otherStringGenerator must be iterable and element type assignable to string</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>A generator function with no type annotation can have the type annotation inferred. So in the following case, the type will be inferred from the yield statements:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function*</span><span style="color: #000000"> </span><span style="color: #795E26">g</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000"> &lt; </span><span style="color: #098658">100</span><span style="color: #000000">; </span><span style="color: #001080">i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">yield</span><span style="color: #000000"> </span><span style="color: #A31515">""</span><span style="color: #000000">; </span><span style="color: #008000">// infer string</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">yield</span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #795E26">otherStringGenerator</span><span style="color: #000000">(); </span><span style="color: #008000">// infer element type of otherStringGenerator</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="experimental-support-for-async-functions" style="position:relative;"><a href="#experimental-support-for-async-functions" aria-label="experimental support for async functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Experimental support for <code>async</code> functions</h2>
<p>TypeScript 1.6 introduces experimental support of <code>async</code> functions when targeting ES6. Async functions are expected to invoke an asynchronous operation and await its result without blocking normal execution of the program. This accomplished through the use of an ES6-compatible <code>Promise</code> implementation, and transposition of the function body into a compatible form to resume execution when the awaited asynchronous operation completes.</p>
<p>An <em>async function</em> is a function or method that has been prefixed with the <code>async</code> modifier. This modifier informs the compiler that function body transposition is required, and that the keyword <code>await</code> should be treated as a unary expression instead of an identifier. An <em>Async Function</em> must provide a return type annotation that points to a compatible <code>Promise</code> type. Return type inference can only be used if there is a globally defined, compatible <code>Promise</code> type.</p>
<h5 id="example-89" style="position:relative;"><a href="#example-89" aria-label="example 89 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">: </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; = </span><span style="color: #008000">/* ... */</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">fn</span><span style="color: #000000">(): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">; </span><span style="color: #008000">// suspend execution until 'p' is settled. 'i' has type "number"</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #001080">i</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #795E26">a</span><span style="color: #000000"> = </span><span style="color: #0000FF">async</span><span style="color: #000000"> (): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">; </span><span style="color: #008000">// suspends execution.</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #795E26">a</span><span style="color: #000000"> = </span><span style="color: #0000FF">async</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">; </span><span style="color: #008000">// suspends execution. return type is inferred as "Promise&lt;number&gt;" when compiling with --target ES6</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #795E26">fe</span><span style="color: #000000"> = </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000">(): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">; </span><span style="color: #008000">// suspend execution until 'p' is settled. 'i' has type "number"</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #001080">i</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #795E26">m</span><span style="color: #000000">(): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">; </span><span style="color: #008000">// suspend execution until 'p' is settled. 'i' has type "number"</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #001080">i</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">get</span><span style="color: #000000"> </span><span style="color: #795E26">p</span><span style="color: #000000">(): </span><span style="color: #1C6277">Promise</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">number</span><span style="color: #000000">&gt; {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">i</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">p</span><span style="color: #000000">; </span><span style="color: #008000">// suspend execution until 'p' is settled. 'i' has type "number"</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #098658">1</span><span style="color: #000000"> + </span><span style="color: #001080">i</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="nightly-builds" style="position:relative;"><a href="#nightly-builds" aria-label="nightly builds permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Nightly builds</h2>
<p>While not strictly a language change, nightly builds are now available by installing with the following command:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class='code-container'><code>npm install -g typescript@next</code></div></pre><!-- Note from shiki-twoslash: the language Shell was not set up for Shiki to use, and so there is no code highlighting --!>
<h2 id="adjustments-in-module-resolution-logic" style="position:relative;"><a href="#adjustments-in-module-resolution-logic" aria-label="adjustments in module resolution logic permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adjustments in module resolution logic</h2>
<p>Starting from release 1.6 TypeScript compiler will use different set of rules to resolve module names when targeting ‘commonjs’. These <a href="https://github.com/Microsoft/TypeScript/issues/2338">rules</a> attempted to model module lookup procedure used by Node. This effectively mean that node modules can include information about its typings and TypeScript compiler will be able to find it. User however can override module resolution rules picked by the compiler by using <a href="/tsconfig#moduleResolution"><code>moduleResolution</code></a> command line option. Possible values are:</p>
<ul>
<li>‘classic’ - module resolution rules used by pre 1.6 TypeScript compiler</li>
<li>‘node’ - node-like module resolution</li>
</ul>
<h2 id="merging-ambient-class-and-interface-declaration" style="position:relative;"><a href="#merging-ambient-class-and-interface-declaration" aria-label="merging ambient class and interface declaration permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merging ambient class and interface declaration</h2>
<p>The instance side of an ambient class declaration can be extended using an interface declaration The class constructor object is unmodified. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Foo</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">y</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">bar</span><span style="color: #000000">(</span><span style="color: #001080">foo</span><span style="color: #000000">: </span><span style="color: #1C6277">Foo</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">; </span><span style="color: #008000">// OK, declared in the class Foo</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">foo</span><span style="color: #000000">.</span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #A31515">"1"</span><span style="color: #000000">; </span><span style="color: #008000">// OK, declared in the interface Foo</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="user-defined-type-guard-functions" style="position:relative;"><a href="#user-defined-type-guard-functions" aria-label="user defined type guard functions permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User-defined type guard functions</h2>
<p>TypeScript 1.6 adds a new way to narrow a variable type inside an <code>if</code> block, in addition to <code>typeof</code> and <code>instanceof</code>. A user-defined type guard functions is one with a return type annotation of the form <code>x is T</code>, where <code>x</code> is a declared parameter in the signature, and <code>T</code> is any type. When a user-defined type guard function is invoked on a variable in an <code>if</code> block, the type of the variable will be narrowed to <code>T</code>.</p>
<h5 id="examples-2" style="position:relative;"><a href="#examples-2" aria-label="examples 2 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Examples</h5>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">isCat</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000">): </span><span style="color: #001080">a</span><span style="color: #000000"> </span><span style="color: #0000FF">is</span><span style="color: #000000"> </span><span style="color: #1C6277">Cat</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000"> === </span><span style="color: #A31515">"kitty"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">Cat</span><span style="color: #000000"> | </span><span style="color: #1C6277">Dog</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #795E26">isCat</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">)) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">meow</span><span style="color: #000000">(); </span><span style="color: #008000">// OK, x is Cat in this block</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="exclude-property-support-in-tsconfigjson" style="position:relative;"><a href="#exclude-property-support-in-tsconfigjson" aria-label="exclude property support in tsconfigjson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>exclude</code> property support in tsconfig.json</h2>
<p>A tsconfig.json file that doesn’t specify a files property (and therefore implicitly references all *.ts files in all subdirectories) can now contain an exclude property that specifies a list of files and/or directories to exclude from the compilation. The exclude property must be an array of strings that each specify a file or folder name relative to the location of the tsconfig.json file. For example:</p>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#out'><data-lsp lsp="Deprecated setting. Use `outFile` instead.">out</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"test.js"</span></div><div class='line'><span style="color: #000000">  },</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#exclude'><data-lsp lsp="Filters results from the `include` option.">exclude</data-lsp></a>"</span><span style="color: #000000">: [</span><span style="color: #A31515">"node_modules"</span><span style="color: #000000">, </span><span style="color: #A31515">"test.ts"</span><span style="color: #000000">, </span><span style="color: #A31515">"utils/t2.ts"</span><span style="color: #000000">]</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>The <code>exclude</code> list does not support wilcards. It must simply be a list of files and/or directories.</p>
<h2 id="--init-command-line-option" style="position:relative;"><a href="#--init-command-line-option" aria-label="  init command line option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--init</code> command line option</h2>
<p>Run <code>tsc --init</code> in a directory to create an initial <code>tsconfig.json</code> in this directory with preset defaults. Optionally pass command line arguments along with <code>--init</code> to be stored in your initial tsconfig.json on creation.</p>
<h2 id="typescript-15" style="position:relative;"><a href="#typescript-15" aria-label="typescript 15 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.5</h2>
<h2 id="es6-modules" style="position:relative;"><a href="#es6-modules" aria-label="es6 modules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ES6 Modules</h2>
<p>TypeScript 1.5 supports ECMAScript 6 (ES6) modules. ES6 modules are effectively TypeScript external modules with a new syntax: ES6 modules are separately loaded source files that possibly import other modules and provide a number of externally accessible exports. ES6 modules feature several new export and import declarations. It is recommended that TypeScript libraries and applications be updated to use the new syntax, but this is not a requirement. The new ES6 module syntax coexists with TypeScript’s original internal and external module constructs and the constructs can be mixed and matched at will.</p>
<h4 id="export-declarations" style="position:relative;"><a href="#export-declarations" aria-label="export declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Export Declarations</h4>
<p>In addition to the existing TypeScript support for decorating declarations with <code>export</code>, module members can also be exported using separate export declarations, optionally specifying different names for exports using <code>as</code> clauses.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">Stream</span><span style="color: #000000"> { ... }</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">writeToStream</span><span style="color: #000000">(</span><span style="color: #001080">stream</span><span style="color: #000000">: </span><span style="color: #1C6277">Stream</span><span style="color: #000000">, </span><span style="color: #001080">data</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">) { ... }</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> { </span><span style="color: #001080">Stream</span><span style="color: #000000">, </span><span style="color: #001080">writeToStream</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">write</span><span style="color: #000000"> };  </span><span style="color: #008000">// writeToStream exported as write</span></div></code></div></pre>
<p>Import declarations, as well, can optionally use <code>as</code> clauses to specify different local names for the imports. For example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> { </span><span style="color: #001080">read</span><span style="color: #000000">, </span><span style="color: #001080">write</span><span style="color: #000000">, </span><span style="color: #001080">standardOutput</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">stdout</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./inout"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #795E26">read</span><span style="color: #000000">(</span><span style="color: #001080">stdout</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #795E26">write</span><span style="color: #000000">(</span><span style="color: #001080">stdout</span><span style="color: #000000">, </span><span style="color: #001080">s</span><span style="color: #000000">);</span></div></code></div></pre>
<p>As an alternative to individual imports, a namespace import can be used to import an entire module:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">io</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./inout"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">s</span><span style="color: #000000"> = </span><span style="color: #001080">io</span><span style="color: #000000">.</span><span style="color: #795E26">read</span><span style="color: #000000">(</span><span style="color: #001080">io</span><span style="color: #000000">.</span><span style="color: #001080">standardOutput</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #001080">io</span><span style="color: #000000">.</span><span style="color: #795E26">write</span><span style="color: #000000">(</span><span style="color: #001080">io</span><span style="color: #000000">.</span><span style="color: #001080">standardOutput</span><span style="color: #000000">, </span><span style="color: #001080">s</span><span style="color: #000000">);</span></div></code></div></pre>
<h4 id="re-exporting" style="position:relative;"><a href="#re-exporting" aria-label="re exporting permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Re-exporting</h4>
<p>Using <code>from</code> clause a module can copy the exports of a given module to the current module without introducing local names.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> { </span><span style="color: #001080">read</span><span style="color: #000000">, </span><span style="color: #001080">write</span><span style="color: #000000">, </span><span style="color: #001080">standardOutput</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">stdout</span><span style="color: #000000"> } </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./inout"</span><span style="color: #000000">;</span></div></code></div></pre>
<p><code>export *</code> can be used to re-export all exports of another module. This is useful for creating modules that aggregate the exports of several other modules.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">transform</span><span style="color: #000000">(</span><span style="color: #001080">s</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">): </span><span style="color: #1C6277">string</span><span style="color: #000000"> { ... }</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./mod1"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./mod2"</span><span style="color: #000000">;</span></div></code></div></pre>
<h4 id="default-export" style="position:relative;"><a href="#default-export" aria-label="default export permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Default Export</h4>
<p>An export default declaration specifies an expression that becomes the default export of a module:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #AF00DB">default</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Greeter</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">sayHello</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"Greetings!"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Which in turn can be imported using default imports:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #001080">Greeter</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">"./greeter"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">g</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Greeter</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">g</span><span style="color: #000000">.</span><span style="color: #795E26">sayHello</span><span style="color: #000000">();</span></div></code></div></pre>
<h4 id="bare-import" style="position:relative;"><a href="#bare-import" aria-label="bare import permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Bare Import</h4>
<p>A “bare import” can be used to import a module only for its side-effects.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #A31515">"./polyfills"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>For more information about module, please see the <a href="https://github.com/Microsoft/TypeScript/issues/2242">ES6 module support spec</a>.</p>
<h2 id="destructuring-in-declarations-and-assignments" style="position:relative;"><a href="#destructuring-in-declarations-and-assignments" aria-label="destructuring in declarations and assignments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Destructuring in declarations and assignments</h2>
<p>TypeScript 1.5 adds support to ES6 destructuring declarations and assignments.</p>
<h4 id="declarations" style="position:relative;"><a href="#declarations" aria-label="declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declarations</h4>
<p>A destructuring declaration introduces one or more named variables and initializes them with values extracted from properties of an object or elements of an array.</p>
<p>For example, the following sample declares variables <code>x</code>, <code>y</code>, and <code>z</code>, and initializes them to <code>getSomeObject().x</code>, <code>getSomeObject().y</code> and <code>getSomeObject().z</code> respectively:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> { </span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">, </span><span style="color: #001080">z</span><span style="color: #000000"> } = </span><span style="color: #795E26">getSomeObject</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Destructuring declarations also works for extracting values from arrays:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> [</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">, </span><span style="color: #001080">z</span><span style="color: #000000"> = </span><span style="color: #098658">10</span><span style="color: #000000">] = </span><span style="color: #795E26">getSomeArray</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Similarly, destructuring can be used in function parameter declarations:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">drawText</span><span style="color: #000000">({ </span><span style="color: #001080">text</span><span style="color: #000000"> = </span><span style="color: #A31515">""</span><span style="color: #000000">, </span><span style="color: #001080">location</span><span style="color: #000000">: [</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">] = [</span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #098658">0</span><span style="color: #000000">], </span><span style="color: #001080">bold</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span style="color: #000000"> }) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// Draw text</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Call drawText with an object literal</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">item</span><span style="color: #000000"> = { </span><span style="color: #001080">text:</span><span style="color: #000000"> </span><span style="color: #A31515">"someText"</span><span style="color: #000000">, </span><span style="color: #001080">location:</span><span style="color: #000000"> [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">], </span><span style="color: #001080">style:</span><span style="color: #000000"> </span><span style="color: #A31515">"italics"</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #795E26">drawText</span><span style="color: #000000">(</span><span style="color: #001080">item</span><span style="color: #000000">);</span></div></code></div></pre>
<h4 id="assignments" style="position:relative;"><a href="#assignments" aria-label="assignments permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Assignments</h4>
<p>Destructuring patterns can also be used in regular assignment expressions. For instance, swapping two variables can be written as a single destructuring assignment:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">y</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">[</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">] = [</span><span style="color: #001080">y</span><span style="color: #000000">, </span><span style="color: #001080">x</span><span style="color: #000000">];</span></div></code></div></pre>
<h2 id="namespace-keyword" style="position:relative;"><a href="#namespace-keyword" aria-label="namespace keyword permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>namespace</code> keyword</h2>
<p>TypeScript used the <code>module</code> keyword to define both “internal modules” and “external modules”; this has been a bit of confusion for developers new to TypeScript. “Internal modules” are closer to what most people would call a namespace; likewise, “external modules” in JS speak really just are modules now.</p>
<blockquote>
<p>Note: Previous syntax defining internal modules are still supported.</p>
</blockquote>
<p><strong>Before</strong>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">) { ... }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><strong>After</strong>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">namespace</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">, </span><span style="color: #001080">y</span><span style="color: #000000">) { ... }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="let-and-const-support" style="position:relative;"><a href="#let-and-const-support" aria-label="let and const support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>let</code> and <code>const</code> support</h2>
<p>ES6 <code>let</code> and <code>const</code> declarations are now supported when targeting ES3 and ES5.</p>
<h4 id="const" style="position:relative;"><a href="#const" aria-label="const permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Const</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">MAX</span><span style="color: #000000"> = </span><span style="color: #098658">100</span><span style="color: #000000">;</span></div><div class='line'></div><div class='line'><span style="color: #000000">++</span><span style="color: #0070C1">MAX</span><span style="color: #000000">; </span><span style="color: #008000">// Error: The operand of an increment or decrement</span></div><div class='line'><span style="color: #008000">//        operator cannot be a constant.</span></div></code></div></pre>
<h4 id="block-scoped" style="position:relative;"><a href="#block-scoped" aria-label="block scoped permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Block scoped</h4>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">true</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #098658">4</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// use a</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #A31515">"string"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// use a</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">alert</span><span style="color: #000000">(</span><span style="color: #001080">a</span><span style="color: #000000">); </span><span style="color: #008000">// Error: a is not defined in this scope</span></div></code></div></pre>
<h2 id="forof-support" style="position:relative;"><a href="#forof-support" aria-label="forof support permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>for..of support</h2>
<p>TypeScript 1.5 adds support to ES6 for..of loops on arrays for ES3/ES5 as well as full support for Iterator interfaces when targetting ES6.</p>
<h5 id="example-90" style="position:relative;"><a href="#example-90" aria-label="example 90 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>The TypeScript compiler will transpile for..of arrays to idiomatic ES3/ES5 JavaScript when targeting those versions:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> </span><span style="color: #0000FF">of</span><span style="color: #000000"> </span><span style="color: #001080">expr</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>will be emitted as:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">for</span><span style="color: #000000"> (</span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_i</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">, </span><span style="color: #001080">_a</span><span style="color: #000000"> = </span><span style="color: #001080">expr</span><span style="color: #000000">; </span><span style="color: #001080">_i</span><span style="color: #000000"> &lt; </span><span style="color: #001080">_a</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000">; </span><span style="color: #001080">_i</span><span style="color: #000000">++) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">v</span><span style="color: #000000"> = </span><span style="color: #001080">_a</span><span style="color: #000000">[</span><span style="color: #001080">_i</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="decorators" style="position:relative;"><a href="#decorators" aria-label="decorators permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Decorators</h2>
<blockquote>
<p>TypeScript decorators are based on the <a href="https://github.com/wycats/javascript-decorators">ES7 decorator proposal</a>.</p>
</blockquote>
<p>A decorator is:</p>
<ul>
<li>an expression</li>
<li>that evaluates to a function</li>
<li>that takes the target, name, and property descriptor as arguments</li>
<li>and optionally returns a property descriptor to install on the target object</li>
</ul>
<blockquote>
<p>For more information, please see the <a href="https://github.com/Microsoft/TypeScript/issues/2249">Decorators</a> proposal.</p>
</blockquote>
<h5 id="example-91" style="position:relative;"><a href="#example-91" aria-label="example 91 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<p>Decorators <code>readonly</code> and <code>enumerable(false)</code> will be applied to the property <code>method</code> before it is installed on class <code>C</code>. This allows the decorator to change the implementation, and in this case, augment the descriptor to be writable: false and enumerable: false.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  @</span><span style="color: #001080">readonly</span></div><div class='line'><span style="color: #000000">  @</span><span style="color: #795E26">enumerable</span><span style="color: #000000">(</span><span style="color: #0000FF">false</span><span style="color: #000000">)</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">method</span><span style="color: #000000">() {}</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">readonly</span><span style="color: #000000">(</span><span style="color: #001080">target</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">, </span><span style="color: #001080">descriptor</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">descriptor</span><span style="color: #000000">.</span><span style="color: #001080">writable</span><span style="color: #000000"> = </span><span style="color: #0000FF">false</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">enumerable</span><span style="color: #000000">(</span><span style="color: #001080">value</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">target</span><span style="color: #000000">, </span><span style="color: #001080">key</span><span style="color: #000000">, </span><span style="color: #001080">descriptor</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">descriptor</span><span style="color: #000000">.</span><span style="color: #001080">enumerable</span><span style="color: #000000"> = </span><span style="color: #001080">value</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="computed-properties" style="position:relative;"><a href="#computed-properties" aria-label="computed properties permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Computed properties</h2>
<p>Initializing an object with dynamic properties can be a bit of a burden. Take the following example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NeighborMap</span><span style="color: #000000"> = { [</span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">]: </span><span style="color: #1C6277">Node</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Node</span><span style="color: #000000"> = { </span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">; </span><span style="color: #001080">neighbors</span><span style="color: #000000">: </span><span style="color: #1C6277">NeighborMap</span><span style="color: #000000"> };</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeNode</span><span style="color: #000000">(</span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">initialNeighbor</span><span style="color: #000000">: </span><span style="color: #1C6277">Node</span><span style="color: #000000">): </span><span style="color: #1C6277">Node</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">neighbors</span><span style="color: #000000">: </span><span style="color: #1C6277">NeighborMap</span><span style="color: #000000"> = {};</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">neighbors</span><span style="color: #000000">[</span><span style="color: #001080">initialNeighbor</span><span style="color: #000000">.</span><span style="color: #001080">name</span><span style="color: #000000">] = </span><span style="color: #001080">initialNeighbor</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> { </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">, </span><span style="color: #001080">neighbors:</span><span style="color: #000000"> </span><span style="color: #001080">neighbors</span><span style="color: #000000"> };</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Here we need to create a variable to hold on to the neighbor-map so that we can initialize it. With TypeScript 1.5, we can let the compiler do the heavy lifting:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">makeNode</span><span style="color: #000000">(</span><span style="color: #001080">name</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #001080">initialNeighbor</span><span style="color: #000000">: </span><span style="color: #1C6277">Node</span><span style="color: #000000">): </span><span style="color: #1C6277">Node</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">name:</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">neighbors:</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">      </span><span style="color: #001080">[initialNeighbor.name]:</span><span style="color: #000000"> </span><span style="color: #001080">initialNeighbor</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    },</span></div><div class='line'><span style="color: #000000">  };</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="support-for-umd-and-system-module-output" style="position:relative;"><a href="#support-for-umd-and-system-module-output" aria-label="support for umd and system module output permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Support for <code>UMD</code> and <code>System</code> module output</h2>
<p>In addition to <code>AMD</code> and <code>CommonJS</code> module loaders, TypeScript now supports emitting modules <code>UMD</code> (<a href="https://github.com/umdjs/umd">Universal Module Definition</a>) and <a href="https://github.com/systemjs/systemjs"><code>System</code></a> module formats.</p>
<p><strong>Usage</strong>:</p>
<blockquote>
<p>tsc —module umd</p>
</blockquote>
<p>and</p>
<blockquote>
<p>tsc —module system</p>
</blockquote>
<h2 id="unicode-codepoint-escapes-in-strings" style="position:relative;"><a href="#unicode-codepoint-escapes-in-strings" aria-label="unicode codepoint escapes in strings permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Unicode codepoint escapes in strings</h2>
<p>ES6 introduces escapes that allow users to represent a Unicode codepoint using just a single escape.</p>
<p>As an example, consider the need to escape a string that contains the character ’𠮷‘. In UTF-16/UCS2, ’𠮷’ is represented as a surrogate pair, meaning that it’s encoded using a pair of 16-bit code units of values, specifically <code>0xD842</code> and <code>0xDFB7</code>. Previously this meant that you’d have to escape the codepoint as <code>"\uD842\uDFB7"</code>. This has the major downside that it’s difficult to discern two independent characters from a surrogate pair.</p>
<p>With ES6’s codepoint escapes, you can cleanly represent that exact character in strings and template strings with a single escape: <code>"\u{20bb7}"</code>. TypeScript will emit the string in ES3/ES5 as <code>"\uD842\uDFB7"</code>.</p>
<h2 id="tagged-template-strings-in-es3es5" style="position:relative;"><a href="#tagged-template-strings-in-es3es5" aria-label="tagged template strings in es3es5 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tagged template strings in ES3/ES5</h2>
<p>In TypeScript 1.4, we added support for template strings for all targets, and tagged templates for just ES6. Thanks to some considerable work done by <a href="https://github.com/ivogabe">@ivogabe</a>, we bridged the gap for for tagged templates in ES3 and ES5.</p>
<p>When targeting ES3/ES5, the following code</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">oddRawStrings</span><span style="color: #000000">(</span><span style="color: #001080">strs</span><span style="color: #000000">: </span><span style="color: #1C6277">TemplateStringsArray</span><span style="color: #000000">, </span><span style="color: #001080">n1</span><span style="color: #000000">, </span><span style="color: #001080">n2</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">strs</span><span style="color: #000000">.</span><span style="color: #001080">raw</span><span style="color: #000000">.</span><span style="color: #795E26">filter</span><span style="color: #000000">((</span><span style="color: #001080">raw</span><span style="color: #000000">, </span><span style="color: #001080">index</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">index</span><span style="color: #000000"> % </span><span style="color: #098658">2</span><span style="color: #000000"> === </span><span style="color: #098658">1</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #795E26">oddRawStrings</span><span style="color: #A31515">`Hello </span><span style="color: #EE0000">\n</span><span style="color: #0000FF">${</span><span style="color: #098658">123</span><span style="color: #0000FF">}</span><span style="color: #A31515"> </span><span style="color: #EE0000">\t</span><span style="color: #A31515"> </span><span style="color: #0000FF">${</span><span style="color: #098658">456</span><span style="color: #0000FF">}</span><span style="color: #EE0000">\n</span><span style="color: #A31515"> world`</span><span style="color: #000000">;</span></div></code></div></pre>
<p>will be emitted as</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">oddRawStrings</span><span style="color: #000000">(</span><span style="color: #001080">strs</span><span style="color: #000000">, </span><span style="color: #001080">n1</span><span style="color: #000000">, </span><span style="color: #001080">n2</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">strs</span><span style="color: #000000">.</span><span style="color: #001080">raw</span><span style="color: #000000">.</span><span style="color: #795E26">filter</span><span style="color: #000000">(</span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">raw</span><span style="color: #000000">, </span><span style="color: #001080">index</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">index</span><span style="color: #000000"> % </span><span style="color: #098658">2</span><span style="color: #000000"> === </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  });</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #000000">(</span><span style="color: #001080">_a</span><span style="color: #000000"> = [</span><span style="color: #A31515">"Hello </span><span style="color: #EE0000">\n</span><span style="color: #A31515">"</span><span style="color: #000000">, </span><span style="color: #A31515">" </span><span style="color: #EE0000">\t</span><span style="color: #A31515"> "</span><span style="color: #000000">, </span><span style="color: #A31515">"</span><span style="color: #EE0000">\n</span><span style="color: #A31515"> world"</span><span style="color: #000000">]),</span></div><div class='line'><span style="color: #000000">  (</span><span style="color: #001080">_a</span><span style="color: #000000">.</span><span style="color: #001080">raw</span><span style="color: #000000"> = [</span><span style="color: #A31515">"Hello </span><span style="color: #EE0000">\\</span><span style="color: #A31515">n"</span><span style="color: #000000">, </span><span style="color: #A31515">" </span><span style="color: #EE0000">\\</span><span style="color: #A31515">t "</span><span style="color: #000000">, </span><span style="color: #A31515">"</span><span style="color: #EE0000">\\</span><span style="color: #A31515">n world"</span><span style="color: #000000">]),</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #795E26">oddRawStrings</span><span style="color: #000000">(</span><span style="color: #001080">_a</span><span style="color: #000000">, </span><span style="color: #098658">123</span><span style="color: #000000">, </span><span style="color: #098658">456</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">_a</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="amd-dependency-optional-names" style="position:relative;"><a href="#amd-dependency-optional-names" aria-label="amd dependency optional names permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AMD-dependency optional names</h2>
<p><code>/// &#x3C;amd-dependency path="x" /></code> informs the compiler about a non-TS module dependency that needs to be injected in the resulting module’s require call; however, there was no way to consume this module in the TS code.</p>
<p>The new <code>amd-dependency name</code> property allows passing an optional name for an amd-dependency:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">/// </span><span style="color: #800000">&lt;amd-dependency</span><span style="color: #008000"> </span><span style="color: #FF0000">path</span><span style="color: #000000">=</span><span style="color: #A31515">"legacy/moduleA"</span><span style="color: #008000"> </span><span style="color: #FF0000">name</span><span style="color: #000000">=</span><span style="color: #A31515">"moduleA"</span><span style="color: #800000">/&gt;</span></div><div class='line'><span style="color: #0000FF">declare</span><span style="color: #000000"> </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">moduleA</span><span style="color: #000000">: </span><span style="color: #1C6277">MyType</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">moduleA</span><span style="color: #000000">.</span><span style="color: #795E26">callStuff</span><span style="color: #000000">();</span></div></code></div></pre>
<p>Generated JS code:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #795E26">define</span><span style="color: #000000">([</span><span style="color: #A31515">"require"</span><span style="color: #000000">, </span><span style="color: #A31515">"exports"</span><span style="color: #000000">, </span><span style="color: #A31515">"legacy/moduleA"</span><span style="color: #000000">], </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">require</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">exports</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">moduleA</span></div><div class='line'><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">moduleA</span><span style="color: #000000">.</span><span style="color: #795E26">callStuff</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h2 id="project-support-through-tsconfigjson" style="position:relative;"><a href="#project-support-through-tsconfigjson" aria-label="project support through tsconfigjson permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Project support through <code>tsconfig.json</code></h2>
<p>Adding a <code>tsconfig.json</code> file in a directory indicates that the directory is the root of a TypeScript project. The tsconfig.json file specifies the root files and the compiler options required to compile the project. A project is compiled in one of the following ways:</p>
<ul>
<li>By invoking tsc with no input files, in which case the compiler searches for the tsconfig.json file starting in the current directory and continuing up the parent directory chain.</li>
<li>By invoking tsc with no input files and a -project (or just -p) command line option that specifies the path of a directory containing a tsconfig.json file.</li>
</ul>
<h5 id="example-92" style="position:relative;"><a href="#example-92" aria-label="example 92 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h5>
<pre class="shiki light-plus tsconfig lsp" style="background-color: #FFFFFF; color: #000000" tsconfig="true"><div class='code-container'><code><div class='line'><span style="color: #000000">{</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#compilerOptions'><data-lsp lsp="The set of compiler options for your project">compilerOptions</data-lsp></a>"</span><span style="color: #000000">: {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#module'><data-lsp lsp="Specify what module code is generated.">module</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #A31515">"commonjs"</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#noImplicitAny'><data-lsp lsp="Enable error reporting for expressions and declarations with an implied `any` type..">noImplicitAny</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0451A5">"<a aria-hidden=true tabindex="-1" href='https://www.typescriptlang.org/tsconfig#sourceMap'><data-lsp lsp="Create source map files for emitted JavaScript files.">sourceMap</data-lsp></a>"</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>See the <a href="https://github.com/Microsoft/TypeScript/wiki/tsconfig.json">tsconfig.json wiki page</a> for more details.</p>
<h2 id="--rootdir-command-line-option" style="position:relative;"><a href="#--rootdir-command-line-option" aria-label="  rootdir command line option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--rootDir</code> command line option</h2>
<p>Option <a href="/tsconfig#outDir"><code>outDir</code></a> duplicates the input hierarchy in the output. The compiler computes the root of the input files as the longest common path of all input files; and then uses that to replicate all its substructure in the output.</p>
<p>Sometimes this is not desirable, for instance inputs <code>FolderA/FolderB/1.ts</code> and <code>FolderA/FolderB/2.ts</code> would result in output structure mirroring <code>FolderA/FolderB/</code>. Now if a new file <code>FolderA/3.ts</code> is added to the input, the output structure will pop out to mirror <code>FolderA/</code>.</p>
<p><a href="/tsconfig#rootDir"><code>rootDir</code></a> specifies the input directory to be mirrored in output instead of computing it.</p>
<h2 id="--noemithelpers-command-line-option" style="position:relative;"><a href="#--noemithelpers-command-line-option" aria-label="  noemithelpers command line option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--noEmitHelpers</code> command line option</h2>
<p>The TypeScript compiler emits a few helpers like <code>__extends</code> when needed. The helpers are emitted in every file they are referenced in. If you want to consolidate all helpers in one place, or override the default behavior, use <a href="/tsconfig#noEmitHelpers"><code>noEmitHelpers</code></a> to instructs the compiler not to emit them.</p>
<h2 id="--newline-command-line-option" style="position:relative;"><a href="#--newline-command-line-option" aria-label="  newline command line option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--newLine</code> command line option</h2>
<p>By default the output new line character is <code>\r\n</code> on Windows based systems and <code>\n</code> on *nix based systems. <a href="/tsconfig#newLine"><code>newLine</code></a> command line flag allows overriding this behavior and specifying the new line character to be used in generated output files.</p>
<h2 id="--inlinesourcemap-and-inlinesources-command-line-options" style="position:relative;"><a href="#--inlinesourcemap-and-inlinesources-command-line-options" aria-label="  inlinesourcemap and inlinesources command line options permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>--inlineSourceMap</code> and <code>inlineSources</code> command line options</h2>
<p><a href="/tsconfig#inlineSourceMap"><code>inlineSourceMap</code></a> causes source map files to be written inline in the generated <code>.js</code> files instead of in a independent <code>.js.map</code> file. <a href="/tsconfig#inlineSources"><code>inlineSources</code></a> allows for additionally inlining the source <code>.ts</code> file into the</p>
<h2 id="typescript-14" style="position:relative;"><a href="#typescript-14" aria-label="typescript 14 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.4</h2>
<h2 id="union-types" style="position:relative;"><a href="#union-types" aria-label="union types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Union types</h2>
<h3 id="overview" style="position:relative;"><a href="#overview" aria-label="overview permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Overview</h3>
<p>Union types are a powerful way to express a value that can be one of several types. For example, you might have an API for running a program that takes a commandline as either a <code>string</code>, a <code>string[]</code> or a function that returns a <code>string</code>. You can now write:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">RunOptions</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">program</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">commandline</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000">[] | </span><span style="color: #1C6277">string</span><span style="color: #000000"> | (() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">string</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Assignment to union types works very intuitively — anything you could assign to one of the union type’s members is assignable to the union:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">opts</span><span style="color: #000000">: </span><span style="color: #1C6277">RunOptions</span><span style="color: #000000"> = </span><span style="color: #008000">/* ... */</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">commandline</span><span style="color: #000000"> = </span><span style="color: #A31515">'-hello world'</span><span style="color: #000000">; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">commandline</span><span style="color: #000000"> = [</span><span style="color: #A31515">'-hello'</span><span style="color: #000000">, </span><span style="color: #A31515">'world'</span><span style="color: #000000">]; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">commandline</span><span style="color: #000000"> = [</span><span style="color: #098658">42</span><span style="color: #000000">]; </span><span style="color: #008000">// Error, number is not string or string[]</span></div></code></div></pre>
<p>When reading from a union type, you can see any properties that are shared by them:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">opts</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000"> === </span><span style="color: #098658">0</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #008000">// OK, string and string[] both have 'length' property</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">"it's empty"</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Using Type Guards, you can easily work with a variable of a union type:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">formatCommandline</span><span style="color: #000000">(</span><span style="color: #001080">c</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">string</span><span style="color: #000000">[]) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">c</span><span style="color: #000000"> === </span><span style="color: #A31515">"string"</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">c</span><span style="color: #000000">.</span><span style="color: #795E26">trim</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">c</span><span style="color: #000000">.</span><span style="color: #795E26">join</span><span style="color: #000000">(</span><span style="color: #A31515">" "</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h3 id="stricter-generics" style="position:relative;"><a href="#stricter-generics" aria-label="stricter generics permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stricter Generics</h3>
<p>With union types able to represent a wide range of type scenarios, we’ve decided to improve the strictness of certain generic calls. Previously, code like this would (surprisingly) compile without error:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">equal</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">lhs</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">rhs</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">boolean</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">lhs</span><span style="color: #000000"> === </span><span style="color: #001080">rhs</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #008000">// Previously: No error</span></div><div class='line'><span style="color: #008000">// New behavior: Error, no best common type between 'string' and 'number'</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">e</span><span style="color: #000000"> = </span><span style="color: #795E26">equal</span><span style="color: #000000">(</span><span style="color: #098658">42</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">);</span></div></code></div></pre>
<p>With union types, you can now specify the desired behavior at both the function declaration site and the call site:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// 'choose' function where types must match</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">choose1</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">&gt;(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &gt; </span><span style="color: #098658">0.5</span><span style="color: #000000"> ? </span><span style="color: #001080">a</span><span style="color: #000000"> : </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">a</span><span style="color: #000000"> = </span><span style="color: #795E26">choose1</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #795E26">choose1</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000">&gt;(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">); </span><span style="color: #008000">// OK</span></div><div class='line'></div><div class='line'><span style="color: #008000">// 'choose' function where types need not match</span></div><div class='line'><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">choose2</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #1C6277">U</span><span style="color: #000000">&gt;(</span><span style="color: #001080">a</span><span style="color: #000000">: </span><span style="color: #1C6277">T</span><span style="color: #000000">, </span><span style="color: #001080">b</span><span style="color: #000000">: </span><span style="color: #1C6277">U</span><span style="color: #000000">): </span><span style="color: #1C6277">T</span><span style="color: #000000"> | </span><span style="color: #1C6277">U</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #1C6277">Math</span><span style="color: #000000">.</span><span style="color: #795E26">random</span><span style="color: #000000">() &gt; </span><span style="color: #098658">0.5</span><span style="color: #000000"> ? </span><span style="color: #001080">a</span><span style="color: #000000"> : </span><span style="color: #001080">b</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">c</span><span style="color: #000000"> = </span><span style="color: #795E26">choose2</span><span style="color: #000000">(</span><span style="color: #A31515">"bar"</span><span style="color: #000000">, </span><span style="color: #A31515">"foo"</span><span style="color: #000000">); </span><span style="color: #008000">// OK, c: string</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">d</span><span style="color: #000000"> = </span><span style="color: #795E26">choose2</span><span style="color: #000000">(</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">42</span><span style="color: #000000">); </span><span style="color: #008000">// OK, d: string|number</span></div></code></div></pre>
<h3 id="better-type-inference" style="position:relative;"><a href="#better-type-inference" aria-label="better type inference permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better Type Inference</h3>
<p>Union types also allow for better type inference in arrays and other places where you might have multiple kinds of values in a collection:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">]; </span><span style="color: #008000">// x: Array&lt;string|number&gt;</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">] = </span><span style="color: #A31515">"world"</span><span style="color: #000000">; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">] = </span><span style="color: #0000FF">false</span><span style="color: #000000">; </span><span style="color: #008000">// Error, boolean is not string or number</span></div></code></div></pre>
<h2 id="let-declarations" style="position:relative;"><a href="#let-declarations" aria-label="let declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>let</code> declarations</h2>
<p>In JavaScript, <code>var</code> declarations are “hoisted” to the top of their enclosing scope. This can result in confusing bugs:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// meant to write 'y' here</span></div><div class='line'><span style="color: #008000">/* later in the same block */</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div></code></div></pre>
<p>The new ES6 keyword <code>let</code>, now supported in TypeScript, declares a variable with more intuitive “block” semantics. A <code>let</code> variable can only be referred to after its declaration, and is scoped to the syntactic block where it is defined:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">foo</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// Error, cannot refer to x before its declaration</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #A31515">"hello"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">} </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">); </span><span style="color: #008000">// Error, x is not declared in this block</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p><code>let</code> is only available when targeting ECMAScript 6 (<code>--target ES6</code>).</p>
<h2 id="const-declarations" style="position:relative;"><a href="#const-declarations" aria-label="const declarations permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>const</code> declarations</h2>
<p>The other new ES6 declaration type supported in TypeScript is <code>const</code>. A <code>const</code> variable may not be assigned to, and must be initialized where it is declared. This is useful for declarations where you don’t want to change the value after its initialization:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">halfPi</span><span style="color: #000000"> = </span><span style="color: #1C6277">Math</span><span style="color: #000000">.PI / </span><span style="color: #098658">2</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #001080">halfPi</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">; </span><span style="color: #008000">// Error, can't assign to a `const`</span></div></code></div></pre>
<p><code>const</code> is only available when targeting ECMAScript 6 (<code>--target ES6</code>).</p>
<h2 id="template-strings" style="position:relative;"><a href="#template-strings" aria-label="template strings permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Template strings</h2>
<p>TypeScript now supports ES6 template strings. These are an easy way to embed arbitrary expressions in strings:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"TypeScript"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">greeting</span><span style="color: #000000"> = </span><span style="color: #A31515">`Hello, </span><span style="color: #0000FF">${</span><span style="color: #001080">name</span><span style="color: #0000FF">}</span><span style="color: #A31515">! Your name has </span><span style="color: #0000FF">${</span><span style="color: #001080">name</span><span style="color: #000000FF">.</span><span style="color: #001080">length</span><span style="color: #0000FF">}</span><span style="color: #A31515"> characters`</span><span style="color: #000000">;</span></div></code></div></pre>
<p>When compiling to pre-ES6 targets, the string is decomposed:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">name</span><span style="color: #000000"> = </span><span style="color: #A31515">"TypeScript!"</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">greeting</span><span style="color: #000000"> =</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #A31515">"Hello, "</span><span style="color: #000000"> + </span><span style="color: #001080">name</span><span style="color: #000000"> + </span><span style="color: #A31515">"! Your name has "</span><span style="color: #000000"> + </span><span style="color: #001080">name</span><span style="color: #000000">.</span><span style="color: #001080">length</span><span style="color: #000000"> + </span><span style="color: #A31515">" characters"</span><span style="color: #000000">;</span></div></code></div></pre>
<h2 id="type-guards" style="position:relative;"><a href="#type-guards" aria-label="type guards permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type Guards</h2>
<p>A common pattern in JavaScript is to use <code>typeof</code> or <code>instanceof</code> to examine the type of an expression at runtime. TypeScript now understands these conditions and will change type inference accordingly when used in an <code>if</code> block.</p>
<p>Using <code>typeof</code> to test a variable:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">any</span><span style="color: #000000"> = </span><span style="color: #008000">/* ... */</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">'string'</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">subtr</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">)); </span><span style="color: #008000">// Error, 'subtr' does not exist on 'string'</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #008000">// x is still any here</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #795E26">unknown</span><span style="color: #000000">(); </span><span style="color: #008000">// OK</span></div></code></div></pre>
<p>Using <code>typeof</code> with union types and <code>else</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">HTMLElement</span><span style="color: #000000"> = </span><span style="color: #008000">/* ... */</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000">(</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> === </span><span style="color: #A31515">'string'</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// x is string here, as shown above</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// x is HTMLElement here</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">.</span><span style="color: #001080">innerHTML</span><span style="color: #000000">);</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<p>Using <code>instanceof</code> with classes and union types:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Dog</span><span style="color: #000000"> { </span><span style="color: #795E26">woof</span><span style="color: #000000">() { } }</span></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Cat</span><span style="color: #000000"> { </span><span style="color: #795E26">meow</span><span style="color: #000000">() { } }</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">pet</span><span style="color: #000000">: </span><span style="color: #1C6277">Dog</span><span style="color: #000000">|</span><span style="color: #1C6277">Cat</span><span style="color: #000000"> = </span><span style="color: #008000">/* ... */</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">pet</span><span style="color: #000000"> </span><span style="color: #0000FF">instanceof</span><span style="color: #000000"> </span><span style="color: #1C6277">Dog</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">pet</span><span style="color: #000000">.</span><span style="color: #795E26">woof</span><span style="color: #000000">(); </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">pet</span><span style="color: #000000">.</span><span style="color: #795E26">woof</span><span style="color: #000000">(); </span><span style="color: #008000">// Error</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre>
<h2 id="type-aliases" style="position:relative;"><a href="#type-aliases" aria-label="type aliases permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Type Aliases</h2>
<p>You can now define an <em>alias</em> for a type using the <code>type</code> keyword:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">PrimitiveArray</span><span style="color: #000000"> = </span><span style="color: #1C6277">Array</span><span style="color: #000000">&lt;</span><span style="color: #1C6277">string</span><span style="color: #000000"> | </span><span style="color: #1C6277">number</span><span style="color: #000000"> | </span><span style="color: #1C6277">boolean</span><span style="color: #000000">&gt;;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">MyNumber</span><span style="color: #000000"> = </span><span style="color: #1C6277">number</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">NgScope</span><span style="color: #000000"> = </span><span style="color: #1C6277">ng</span><span style="color: #000000">.</span><span style="color: #1C6277">IScope</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #0000FF">type</span><span style="color: #000000"> </span><span style="color: #1C6277">Callback</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #1C6277">void</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Type aliases are exactly the same as their original types; they are simply alternative names.</p>
<h2 id="const-enum-completely-inlined-enums" style="position:relative;"><a href="#const-enum-completely-inlined-enums" aria-label="const enum completely inlined enums permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>const enum</code> (completely inlined enums)</h2>
<p>Enums are very useful, but some programs don’t actually need the generated code and would benefit from simply inlining all instances of enum members with their numeric equivalents. The new <code>const enum</code> declaration works just like a regular <code>enum</code> for type safety, but erases completely at compile time.</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #1C6277">Suit</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Clubs</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Diamonds</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Hearts</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Spades</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">d</span><span style="color: #000000"> = </span><span style="color: #001080">Suit</span><span style="color: #000000">.</span><span style="color: #001080">Diamonds</span><span style="color: #000000">;</span></div></code></div></pre>
<p>Compiles to exactly:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">d</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">;</span></div></code></div></pre>
<p>TypeScript will also now compute enum values when possible:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">enum</span><span style="color: #000000"> </span><span style="color: #1C6277">MyFlags</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">None</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Neat</span><span style="color: #000000"> = </span><span style="color: #098658">1</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Cool</span><span style="color: #000000"> = </span><span style="color: #098658">2</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Awesome</span><span style="color: #000000"> = </span><span style="color: #098658">4</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0070C1">Best</span><span style="color: #000000"> = </span><span style="color: #001080">Neat</span><span style="color: #000000"> | </span><span style="color: #001080">Cool</span><span style="color: #000000"> | </span><span style="color: #001080">Awesome</span><span style="color: #000000">,</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">b</span><span style="color: #000000"> = </span><span style="color: #001080">MyFlags</span><span style="color: #000000">.</span><span style="color: #001080">Best</span><span style="color: #000000">; </span><span style="color: #008000">// emits var b = 7;</span></div></code></div></pre>
<h2 id="-noemitonerror-commandline-option" style="position:relative;"><a href="#-noemitonerror-commandline-option" aria-label=" noemitonerror commandline option permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>-noEmitOnError</code> commandline option</h2>
<p>The default behavior for the TypeScript compiler is to still emit .js files if there were type errors (for example, an attempt to assign a <code>string</code> to a <code>number</code>). This can be undesirable on build servers or other scenarios where only output from a “clean” build is desired. The new flag <a href="/tsconfig#noEmitOnError"><code>noEmitOnError</code></a> prevents the compiler from emitting .js code if there were any errors.</p>
<p>This is now the default for MSBuild projects; this allows MSBuild incremental build to work as expected, as outputs are only generated on clean builds.</p>
<h2 id="amd-module-names" style="position:relative;"><a href="#amd-module-names" aria-label="amd module names permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>AMD Module names</h2>
<p>By default AMD modules are generated anonymous. This can lead to problems when other tools are used to process the resulting modules like a bundler (e.g. <code>r.js</code>).</p>
<p>The new <code>amd-module name</code> tag allows passing an optional module name to the compiler:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">//// [amdModule.ts]</span></div><div class='line'><span style="color: #008000">///</span><span style="color: #800000">&lt;amd-module</span><span style="color: #008000"> </span><span style="color: #FF0000">name</span><span style="color: #000000">=</span><span style="color: #A31515">'NamedModule'</span><span style="color: #800000">/&gt;</span></div><div class='line'><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">C</span><span style="color: #000000"> {}</span></div></code></div></pre>
<p>Will result in assigning the name <code>NamedModule</code> to the module as part of calling the AMD <code>define</code>:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">js</div><div class='code-container'><code><div class='line'><span style="color: #008000">//// [amdModule.js]</span></div><div class='line'><span style="color: #795E26">define</span><span style="color: #000000">(</span><span style="color: #A31515">"NamedModule"</span><span style="color: #000000">, [</span><span style="color: #A31515">"require"</span><span style="color: #000000">, </span><span style="color: #A31515">"exports"</span><span style="color: #000000">], </span><span style="color: #0000FF">function</span><span style="color: #000000"> (</span><span style="color: #001080">require</span><span style="color: #000000">, </span><span style="color: #001080">exports</span><span style="color: #000000">) {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000"> = (</span><span style="color: #0000FF">function</span><span style="color: #000000"> () {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">C</span><span style="color: #000000">() {}</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0070C1">C</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">  })();</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #1C6277">exports</span><span style="color: #000000">.</span><span style="color: #0070C1">C</span><span style="color: #000000"> = </span><span style="color: #0070C1">C</span><span style="color: #000000">;</span></div><div class='line'><span style="color: #000000">});</span></div></code></div></pre>
<h2 id="typescript-13" style="position:relative;"><a href="#typescript-13" aria-label="typescript 13 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.3</h2>
<h2 id="protected" style="position:relative;"><a href="#protected" aria-label="protected permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protected</h2>
<p>The new <code>protected</code> modifier in classes works like it does in familiar languages like C++, C#, and Java. A <code>protected</code> member of a class is visible only inside subclasses of the class in which it is declared:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">Thing</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">protected</span><span style="color: #000000"> </span><span style="color: #795E26">doSomething</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/* ... */</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'></div><div class='line'><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">MyThing</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">Thing</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">myMethod</span><span style="color: #000000">() {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// OK, can access protected member from subclass</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">doSomething</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">t</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">MyThing</span><span style="color: #000000">();</span></div><div class='line'><span style="color: #001080">t</span><span style="color: #000000">.</span><span style="color: #795E26">doSomething</span><span style="color: #000000">(); </span><span style="color: #008000">// Error, cannot call protected member from outside class</span></div></code></div></pre>
<h2 id="tuple-types" style="position:relative;"><a href="#tuple-types" aria-label="tuple types permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tuple types</h2>
<p>Tuple types express an array where the type of certain elements is known, but need not be the same. For example, you may want to represent an array with a <code>string</code> at position 0 and a <code>number</code> at position 1:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #008000">// Declare a tuple type</span></div><div class='line'><span style="color: #0000FF">var</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: [</span><span style="color: #1C6277">string</span><span style="color: #000000">, </span><span style="color: #1C6277">number</span><span style="color: #000000">];</span></div><div class='line'><span style="color: #008000">// Initialize it</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = [</span><span style="color: #A31515">"hello"</span><span style="color: #000000">, </span><span style="color: #098658">10</span><span style="color: #000000">]; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #008000">// Initialize it incorrectly</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000"> = [</span><span style="color: #098658">10</span><span style="color: #000000">, </span><span style="color: #A31515">"hello"</span><span style="color: #000000">]; </span><span style="color: #008000">// Error</span></div></code></div></pre>
<p>When accessing an element with a known index, the correct type is retrieved:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">0</span><span style="color: #000000">].</span><span style="color: #795E26">substr</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">)); </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">1</span><span style="color: #000000">].</span><span style="color: #795E26">substr</span><span style="color: #000000">(</span><span style="color: #098658">1</span><span style="color: #000000">)); </span><span style="color: #008000">// Error, 'number' does not have 'substr'</span></div></code></div></pre>
<p>Note that in TypeScript 1.4, when accessing an element outside the set of known indices, a union type is used instead:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">3</span><span style="color: #000000">] = </span><span style="color: #A31515">"world"</span><span style="color: #000000">; </span><span style="color: #008000">// OK</span></div><div class='line'><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">5</span><span style="color: #000000">].</span><span style="color: #795E26">toString</span><span style="color: #000000">()); </span><span style="color: #008000">// OK, 'string' and 'number' both have toString</span></div><div class='line'><span style="color: #001080">x</span><span style="color: #000000">[</span><span style="color: #098658">6</span><span style="color: #000000">] = </span><span style="color: #0000FF">true</span><span style="color: #000000">; </span><span style="color: #008000">// Error, boolean isn't number or string</span></div></code></div></pre>
<h2 id="typescript-11" style="position:relative;"><a href="#typescript-11" aria-label="typescript 11 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TypeScript 1.1</h2>
<h2 id="performance-improvements" style="position:relative;"><a href="#performance-improvements" aria-label="performance improvements permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Performance Improvements</h2>
<p>The 1.1 compiler is typically around 4x faster than any previous release. See <a href="http://blogs.msdn.com/b/typescript/archive/2014/10/06/announcing-typescript-1-1-ctp.aspx">this blog post for some impressive charts.</a></p>
<h2 id="better-module-visibility-rules" style="position:relative;"><a href="#better-module-visibility-rules" aria-label="better module visibility rules permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Better Module Visibility Rules</h2>
<p>TypeScript now only strictly enforces the visibility of types in modules if the <a href="/tsconfig#declaration"><code>declaration</code></a> flag is provided. This is very useful for Angular scenarios, for example:</p>
<pre class="shiki light-plus" style="background-color: #FFFFFF; color: #000000"><div class="language-id">ts</div><div class='code-container'><code><div class='line'><span style="color: #0000FF">module</span><span style="color: #000000"> </span><span style="color: #1C6277">MyControllers</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #1C6277">ZooScope</span><span style="color: #000000"> </span><span style="color: #0000FF">extends</span><span style="color: #000000"> </span><span style="color: #1C6277">ng</span><span style="color: #000000">.</span><span style="color: #1C6277">IScope</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #001080">animals</span><span style="color: #000000">: </span><span style="color: #1C6277">Animal</span><span style="color: #000000">[];</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">  </span><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #1C6277">ZooController</span><span style="color: #000000"> {</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// Used to be an error (cannot expose ZooScope), but now is only</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">// an error when trying to generate .d.ts files</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #0000FF">constructor</span><span style="color: #000000">(</span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">$scope</span><span style="color: #000000">: </span><span style="color: #1C6277">ZooScope</span><span style="color: #000000">) {}</span></div><div class='line'><span style="color: #000000">    </span><span style="color: #008000">/* more code */</span></div><div class='line'><span style="color: #000000">  }</span></div><div class='line'><span style="color: #000000">}</span></div></code></div></pre></div></div><aside class="handbook-toc"><nav class=""><div id="like-dislike-subnav"><h5>Is this page helpful?</h5><div><button title="Like this page" id="like-button"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 2.29429C10.3913 1.31699 11.6841 0.866721 12.4829 1.70385C12.6455 1.87427 12.8081 2.05843 12.9176 2.22265C13.2379 2.70316 13.3725 3.33595 13.4218 3.95232C13.4721 4.58045 13.438 5.25457 13.3738 5.86484C13.3093 6.47746 13.2129 7.03959 13.1328 7.44777C13.1294 7.46547 13.1259 7.48288 13.1225 7.5H14.006C15.8777 7.5 17.2924 9.19514 16.9576 11.0367L16.2737 14.7984C15.8017 17.3943 13.2078 19.0291 10.6622 18.3348L5.06251 16.8076C4.14894 16.5585 3.45455 15.8145 3.26885 14.886L2.91581 13.1208C2.63809 11.7322 3.69991 10.5624 4.82905 10.1161C5.15163 9.98861 5.44337 9.82679 5.66974 9.62597C7.37583 8.11245 7.99442 6.90287 9.05406 4.77695C9.4084 4.06605 9.77205 3.10054 10.052 2.29429ZM12.0165 7.87862L12.0169 7.87707L12.0187 7.86973L12.0262 7.83863C12.0328 7.81079 12.0426 7.76903 12.0549 7.71494C12.0793 7.60669 12.1135 7.4493 12.1515 7.25536C12.2277 6.86666 12.3188 6.33504 12.3793 5.76016C12.4401 5.18293 12.4685 4.5758 12.425 4.03206C12.3806 3.47655 12.2652 3.04684 12.0855 2.77735C12.0264 2.6887 11.9138 2.55604 11.7594 2.39421C11.5605 2.18576 11.1314 2.23428 10.9967 2.62228C10.7141 3.43609 10.3334 4.45194 9.94904 5.22305C8.88216 7.36349 8.19326 8.72408 6.33336 10.374C5.99304 10.6759 5.58878 10.8911 5.19665 11.0461C4.31631 11.3941 3.75035 12.1945 3.89639 12.9247L4.24943 14.6899C4.36085 15.247 4.77748 15.6934 5.32562 15.8428L10.9254 17.3701C12.9052 17.91 14.9227 16.6385 15.2898 14.6195L15.9738 10.8578C16.197 9.63009 15.2538 8.5 14.006 8.5H12.5015C12.3476 8.5 12.2022 8.42906 12.1074 8.30771C12.0127 8.18638 11.9792 8.02796 12.0165 7.87862C12.0165 7.87858 12.0165 7.87866 12.0165 7.87862Z"></path></svg> <!-- -->Yes</button><button title="Dislike this page" id="dislike-button"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7773C13.2379 17.2968 13.3725 16.664 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970948 10.6622 1.66518L5.06251 3.19238C4.14894 3.44154 3.45455 4.18546 3.26885 5.11401L2.91581 6.87918C2.63809 8.26779 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.223C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5234 12.2652 16.9532 12.0855 17.2226C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31012C4.36085 4.753 4.77748 4.30664 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38052L15.9738 9.14222C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z"></path></svg> <!-- -->No</button></div></div></nav></aside></article><div class="whitespace-tight raised" style="padding:0"><div class="row justify-between small-columns"><div class="bottom-section-content"><p>The TypeScript docs are an open source project. Help us improve these pages <a href="https://github.com/microsoft/TypeScript-Website/blob/v2/packages/documentation/copy/en/release-notes/Overview.md">by sending a Pull Request</a> ❤</p></div><div class="hide-small vertical-line" style="margin-top:1.5rem"></div><div class="bottom-section-content">Contributors to this page:<br/><div><div class="circle-bg">OT<img id="https://avatars.githubusercontent.com/u/49038?s=100&amp;u=0b9ac5bf42a8ea2543a05191e150e0213456744e&amp;v=4" src="https://avatars.githubusercontent.com/u/49038?s=100&amp;u=0b9ac5bf42a8ea2543a05191e150e0213456744e&amp;v=4" alt="Orta Therox  (80)"/></div><div class="circle-bg">TH<img id="047f4b15e8c0dc1d17e1740c100c31cd" src="https://gravatar.com/avatar/047f4b15e8c0dc1d17e1740c100c31cd?s=32&amp;&amp;d=blank" alt="Tyrone Hwang  (1)"/></div><div class="circle-bg">IO<img id="a836f92994cdbfc0e28239e52180c777" src="https://gravatar.com/avatar/a836f92994cdbfc0e28239e52180c777?s=32&amp;&amp;d=blank" alt="Iván Ovejero  (1)"/></div><div class="circle-bg">JB<img id="960dbdfd730d53c6ea7ff4df072abe1c" src="https://gravatar.com/avatar/960dbdfd730d53c6ea7ff4df072abe1c?s=32&amp;&amp;d=blank" alt="Jack Bates  (1)"/></div><div class="circle-bg">DC<img id="361b803f5605919d0e6952fad7f92eac" src="https://gravatar.com/avatar/361b803f5605919d0e6952fad7f92eac?s=32&amp;&amp;d=blank" alt="David Cho-Lerat  (1)"/></div><div class="circle-bg">11<!-- -->+</div></div></div><div class="hide-small vertical-line" style="margin-top:1.5rem"></div><div class="bottom-section-content"><p>Last updated: Aug 01, 2022<br/><br/><span id="page-loaded-time"> </span></p></div></div></div></div></section><div id="quickTipPopup" class="inline-popup popup-fade-in" style="opacity:0"><div class="inline-popup-container"><a class="inline-popup-extract"><div></div></a></div></div></main><footer id="site-footer" role="contentinfo"><section id="customize"><article><h3>Customize</h3><label><p>Site Colours<!-- -->:</p><div class="switch-wrap"><select name="colours"><option selected="" value="system">System</option><option value="force-light">Always Light</option><option value="force-dark">Always Dark</option></select></div></label><label><p>Code Font<!-- -->:</p><div class="switch-wrap"><select name="font"><option selected="" value="cascadia">Cascadia</option><option value="cascadia-ligatures">Cascadia (ligatures)</option><option value="consolas">Consolas</option><option value="dank-mono">Dank Mono</option><option value="fira-code">Fira Code</option><option value="jetbrains-mono">JetBrains Mono</option><option value="open-dyslexic">OpenDyslexic</option><option value="sf-mono">SF Mono</option><option value="source-code-pro">Source Code Pro</option></select></div></label></article></section><section id="popular"><h3>Popular Documentation Pages</h3><ul><li><a href="/docs/handbook/2/everyday-types.html">Everyday Types</a><p>All of the common types in TypeScript</p></li><li><a href="/docs/handbook/2/types-from-types.html">Creating Types from Types</a><p>Techniques to make more elegant types</p></li><li><a href="/docs/handbook/2/functions.html">More on Functions</a><p>How to provide types to functions in JavaScript</p></li><li><a href="/docs/handbook/2/objects.html">More on Objects</a><p>How to provide a type shape to JavaScript objects</p></li><li><a href="/docs/handbook/2/narrowing.html">Narrowing</a><p>How TypeScript infers types based on runtime behavior</p></li><li><a href="/docs/handbook/variable-declarations.html">Variable Declarations</a><p>How to create and type JavaScript variables</p></li><li><a href="/docs/handbook/typescript-in-5-minutes.html">TypeScript in 5 minutes</a><p>An overview of building a TypeScript web app</p></li><li><a href="/tsconfig">TSConfig Options</a><p>All the configuration options for a project</p></li><li><a href="/docs/handbook/2/classes.html">Classes</a><p>How to provide types to JavaScript ES6 classes</p></li></ul></section><section id="community"><article id="logos"><svg fill="none" height="26" viewBox="0 0 26 26" width="26" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m.975 0h24.05c.5385 0 .975.436522.975.975v24.05c0 .5385-.4365.975-.975.975h-24.05c-.538478 0-.975-.4365-.975-.975v-24.05c0-.538478.436522-.975.975-.975zm13.4782 13.8324v-2.1324h-9.2532v2.1324h3.30357v9.4946h2.62983v-9.4946zm1.0485 9.2439c.4241.2162.9257.3784 1.5048.4865.579.1081 1.1893.1622 1.8309.1622.6253 0 1.2193-.0595 1.782-.1784.5628-.1189 1.0562-.3149 1.4803-.5879s.7598-.6297 1.0072-1.0703.3711-.9852.3711-1.6339c0-.4703-.0707-.8824-.212-1.2365-.1414-.3541-.3453-.669-.6117-.9447s-.5859-.523-.9583-.7419c-.3725-.2189-.7925-.4257-1.2601-.6203-.3425-.1406-.6497-.2771-.9216-.4095-.2718-.1324-.5029-.2676-.6932-.4054-.1903-.1379-.3371-.2838-.4404-.4379-.1033-.154-.155-.3284-.155-.523 0-.1784.0463-.3392.1387-.4824.0924-.1433.2229-.2663.3915-.369.1685-.1027.3751-.1824.6198-.2392.2447-.0567.5165-.0851.8156-.0851.2174 0 .4472.0162.6891.0486.242.0325.4853.0825.7299.15.2447.0676.4826.1527.7137.2555.2311.1027.4445.2216.6402.3567v-2.4244c-.3969-.1514-.8305-.2636-1.3008-.3365-.4704-.073-1.01-.1095-1.6189-.1095-.6199 0-1.2071.0662-1.7617.1987-.5546.1324-1.0425.3392-1.4639.6203s-.7544.6392-.9991 1.0743c-.2447.4352-.367.9555-.367 1.5609 0 .7731.2243 1.4326.6729 1.9785.4485.546 1.1295 1.0082 2.043 1.3866.3588.146.6932.2892 1.0031.4298.3099.1405.5777.2865.8033.4378.2257.1514.4037.3162.5342.4946s.1958.3811.1958.6082c0 .1676-.0408.323-.1224.4662-.0815.1433-.2052.2676-.371.373-.1659.1054-.3725.1879-.6199.2473-.2474.0595-.5369.0892-.8686.0892-.5654 0-1.1254-.0986-1.68-.2959s-1.0684-.4933-1.5415-.8879z" fill="#fff" fill-rule="evenodd"></path></svg><svg class="typescript-long" fill="none" height="25" viewBox="0 0 105 25" width="105" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m52.8777 17.6304v-1.4159c1.2926.8186 2.6019 1.228 3.9281 1.228 1.41 0 2.4802-.2903 3.2104-.8709s1.0953-1.393 1.0953-2.4372c0-.9189-.2455-1.6519-.7365-2.1991-.4735-.5276-1.4796-1.2397-3.0184-2.13631l-.1732-.10038c-1.8297-1.06092-2.988-1.94849-3.4748-2.66273-.4868-.71425-.7302-1.53916-.7302-2.47478 0-1.26976.4952-2.34737 1.4856-3.23287.9904-.88549 2.3124-1.32823 3.9659-1.32823 1.0743 0 2.1486.179602 3.223.538812v1.303168c-1.0576-.47616-2.1865-.71423-3.3867-.71423-1.2254 0-2.197.30908-2.9146.92725-.7176.61818-1.0764 1.40341-1.0764 2.35574 0 .9189.2455 1.64984.7365 2.19283.491.543 1.5506 1.28229 3.1789 2.2179 1.6871.95233 2.8097 1.79813 3.3678 2.53743.5582.7393.8373 1.5893.8373 2.55 0 1.3783-.4805 2.5019-1.4416 3.3707-.961.8687-2.3186 1.3031-4.0728 1.3031-.6211 0-1.3366-.096-2.1466-.2882-.8099-.1921-1.4289-.4135-1.857-.6641zm-44.74534-14.7957h5.16264v-2.532528h-13.295v2.532528h5.15008v15.4459h2.98228zm9.92154 17.5014 5.8166-14.89726h-2.9461l-3.223 9.35466c-.0764.2868-.1363.5202-.1798.7005l-.0468.2024h-.0629c-.0672-.2867-.1206-.5105-.1604-.6715l-.0663-.2565-3.0719-9.32956h-3.2356l5.1241 12.81566-.8687 2.1067c-.5372 1.07-1.3513 1.6051-2.4425 1.6051-.3777 0-.7973-.0753-1.259-.2258v2.4202c.4113.1087.9233.163 1.536.163 2.1823 0 3.8777-1.3292 5.0863-3.9876zm10.5978-3.9583h-.0503v7.7948h-2.918v-18.73516h2.918v2.25574h.0503c.9978-1.70435 2.4567-2.55651 4.3769-2.55651 1.635 0 2.9095.57229 3.8235 1.71687.9139 1.14459 1.3709 2.68182 1.3709 4.61176 0 2.1388-.5157 3.8515-1.547 5.1381s-2.44 1.9299-4.226 1.9299c-1.6434 0-2.9095-.7185-3.7983-2.1555zm-.0978-3.4018v-1.583c0-1.0968.3163-2.0109.9488-2.74216.6325-.73125 1.4681-1.09688 2.5069-1.09688.9802 0 1.7572.35524 2.331 1.06572.5739.71049.8608 1.69312.8608 2.94792 0 1.4957-.3078 2.6611-.9236 3.4963-.6157.8351-1.4639 1.2527-2.5446 1.2527-.9215 0-1.6818-.3241-2.2808-.9723-.599-.6481-.8985-1.4376-.8985-2.3683zm22.813-.3261h-8.703c.0332 1.1874.3969 2.103 1.091 2.7469s1.6479.9658 2.8615.9658c1.3632 0 2.6142-.4097 3.753-1.2292v2.3455c-1.1637.7359-2.7015 1.1038-4.6133 1.1038-1.8786 0-3.352-.5832-4.4201-1.7497s-1.6022-2.8075-1.6022-4.9231c0-1.99856.5881-3.62703 1.7643-4.88552 1.1762-1.25848 2.6371-1.88771 4.3827-1.88771s3.0963.56443 4.0522 1.6933 1.4339 2.69672 1.4339 4.70363zm-3.4528-4.52311c.4806.58334.7251 1.39958.7334 2.44871h-5.8921c.1326-.99038.4869-1.79193 1.0628-2.40464.576-.61272 1.2783-.91907 2.107-.91907.8453 0 1.5082.29166 1.9889.875zm21.8704 10.45591c1.3315 0 2.4776-.2921 3.4383-.8764v-1.2018c-.9607.6844-2.0899 1.0266-3.3878 1.0266-1.4157 0-2.5555-.505-3.4193-1.5149s-1.2957-2.3453-1.2957-4.0063c0-1.7193.4719-3.11943 1.4158-4.2003.9438-1.08086 2.1742-1.62128 3.6911-1.62128 1.104 0 2.1195.28377 3.0465.85133v-1.30204c-.927-.40063-1.8835-.60094-2.8695-.60094-1.9046 0-3.4636.64893-4.6771 1.9468-1.2136 1.29787-1.8203 2.96503-1.8203 5.00153 0 1.9364.5393 3.5034 1.618 4.7012 1.0787 1.1977 2.4987 1.7965 4.26 1.7965zm11.0428-11.9856c-.3837-.27698-.8341-.41547-1.3512-.41547-1.0093 0-1.8559.52458-2.5399 1.57375-.684 1.04916-1.026 2.53892-1.026 4.46942v6.0558h-1.126v-12.89213h1.126v2.85791h.0501c.2919-.98202.7548-1.7458 1.3888-2.29136.6339-.54557 1.3679-.81835 2.202-.81835.4755 0 .9009.07554 1.2762.22662zm1.8042-4.61517c.1955.18952.4208.28427.6759.28427.2721 0 .5059-.09906.7014-.29719.1956-.19812.2934-.43501.2934-.71067 0-.292879-.0999-.525459-.2997-.697743s-.4315-.258425-.6951-.258425c-.2466 0-.4698.088294-.6696.264885-.1998.176592-.2997.407018-.2997.691283 0 .29289.0978.53408.2934.72359zm.0088 16.29867v-12.84176h1.2086v12.84176zm5.0798-2.2859h.0501c.9181 1.7283 2.337 2.5924 4.2566 2.5924 1.7194 0 3.1028-.6617 4.1502-1.985 1.0475-1.3234 1.5712-3.0579 1.5712-5.2036 0-1.92865-.4569-3.45443-1.3709-4.5774-.9139-1.12296-2.1846-1.68443-3.8121-1.68443-1.0266 0-1.9677.25673-2.8232.77021-.8555.51347-1.5127 1.24192-1.9718 2.18538h-.0501v-2.6425h-1.1517v18.72284h1.1517zm.0569-4.7728v1.6133c0 1.284.4088 2.3867 1.2264 3.308s1.8923 1.382 3.2241 1.382c1.3233 0 2.398-.5607 3.2241-1.6822.826-1.1214 1.239-2.5951 1.239-4.421 0-1.60088-.3793-2.87236-1.1379-3.81453-.7586-.94216-1.7701-1.41324-3.0344-1.41324-1.5088 0-2.6762.50026-3.5023 1.50079-.826 1.00053-1.239 2.17613-1.239 3.52688zm15.542 7.3608c.523 0 1.083-.1417 1.681-.4252v-1.0754c-.548.3084-1.058.4627-1.532.4627-.664 0-1.135-.198-1.413-.594s-.417-1.0359-.417-1.9196v-8.45368h3.362v-1.05046h-3.362v-3.71411c-.183.06669-.373.12922-.573.18758-.199.06669-.39.13339-.572.20009v3.32644h-2.2916v1.05046h2.2916v8.60378c0 2.2676.942 3.4014 2.826 3.4014z" fill="#fff" fill-rule="evenodd"></path></svg><p>Made with ♥ in Redmond, Boston, SF &amp; Dublin</p><a href=""><img id="microsoft-logo" width="92" height="19" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAAmCAYAAAB3X1H0AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAApYSURBVHgB7VwJsBXFFb1PFCSIBHGJRg0hkagJoayoX4KGUEncIJRJKospU4SkTEXLfS+13MpCccMFRcUCF9xwKUXFHdFyQ6RcUBE3QPTrB76CiAIC4zl2j++++2d7/81Xa/6cqvPndU9335meO9237+35EuSHqQLgeFCQH34rJUo0gA2kRIkCo1TwEoVGqeAlCo1SwUsUGhtKiRLfccDZsCkOfwC3A7uCi8FHK5XKorS6pYLnADyArXHYCXwenf6JlMgF6Ffq57HgKWBPc/oI8LK0Ngqj4OgMvtk3gX3Mqc/BYVC8QOoA2vspDrdEnJqMti5W5f6NwwRxfbkE6X1w/gUpkQeowP+XBlCkEbwbOATcPOLcn8A7pT4cCf4qIn9G+APKvBEOp0u1H7cAzwL/KCUaAvp2EA7/NdnN4OviBrH1EXU2w+Dykc7rLCbKoVKHgnubb/8MRbt4amwsJfLAIeBGKj0FPBoK3Izn00PcgMZnxUHlQHHPqy+4o26ksyh4Ezpie3TOuxnL7wP+OK0Q2luFds/BzzHibMT54JlSIg/8zqTHULn5A8eVOKxE33MknwNu5cussI0U2U2oF3ubgP/IUgmdVhE3elR81oqk8ujs8TgMFvdSNCH9pJTIA1ub9OvSDhRZwZeBLSrNPTK9MtTbFfyNSr+WVgFKPQd8CFwiJfJCxaTXSjtQZBOFXpOHwH/59ABwL/DelHqHS9WuXg6+AjbFCgmCbcTNECHe91NoXHn2+a/FvUhbeFmLvZxHUHetKkszSduhC3B+DfK74/cI8Ac+7+4IORt4GbuJW3hTLmc1joT0IX8mKfCzGRfanKE4ojK9FHwRnI421qXU39HXZR/RZma/LAQfjhoMIu5Xoz/OrzF5vUz5LijTXzcpQX74VncTomxPcImquxAcYtp7IKWNbcEPVfk7wFNMGxeYOreb83+JabsXOApsCeJB2YNVnafVubXgIPYJuExXMnI2Af8Hzk+Q8wl4deAWaHF9sRP4bEIbc8EuEfU2BPcF5yTUXQ3eE9Qqo73fPLCqyCYKR5uZUmu7DQ2cfzsOw6S6YCEulRy8IpD5MxxuByeCWyYUpezeuqo5z3ZuEzdyRcn5IQ53gVeJ8yjEgQvig8EZqDMgoh26W9l3TQlt9Iiox7wrwGngLxLqMmYxHJyOOn/WTUjOKJqCW7vtC/A6lWbHHpRQ/xD1+w3wGWnrBqwLeIB8Qeii/L09Bb4nzjRZKtkeLiN6m8fI4XXeKm29Dwx0MfD0PGjNgp3BG1F3M9MOA1c6csj1DJX2fnBewrUyBsAXRz8Hmlz0dMwCPzDl+UJOgMykl6Eh0C5rkXwQei1W5thmvYjq+CvBM8T7TYG/okPP1rbuVxWDgKPVQJV1hbd3pUFcIk6RQvCloyKejvbf8bKpEHuIC0trgVpRqHicfVp8m4+LG8lDhaarcrAqz4DHNeBpkLPay6G9egJ4qlRnpgE+fYxPN3k5IWaDjM62hhl+FhypyjCPwa0jVNYqcDJ4UljX3+ffwIvE2eUEXy6aS7yPfcUNQsRSqUU/cX2nwbrTpRq9/lDcmqPmwvrkxB6+vY1zbDPzIjhoa4O/60cjnhuv8mn/jYioP1mV+RjcweePDmqR2QbH737gOnP+NP+go+6ha+AWkGH6KVP3C3D/iHpbBrVrB+L4GBmVwNnoGq1gX39+pDl3paT3Pe3uB0298Qnl9/P3EmI9ONSUsega0U4fc9/v2zJ5mijhana9fPdwg1TdTOyoUVrJArd6H6bKP4BR501pHDSHdB+/LS5gETktcMYAP5d4TMH5aRH5HP312oEzw0SJlkHZk/y1hOBIGJoJraYK1y39JRkcXfdSad7DWXGFcQ00dZ7SWeCe0gHgCPmq5INHxD1QjmBjJR9w2psljYNtzBU3HRN7g9uC4XZLLni+73/zBZ0g+WCISd8cmgvtxF0x+QNN+jltUljgHEdP2uU/Udm/FOdCZV8xuBXa4FRuelPYJ+NRd0FEk3QHdlfpuSj3gSSD+qL7J+0laheo4FtJPtjUH7vk2GYPyQH+gdKzMM5nfU/cy3hO4BaBf1fF6XV5TBqEnyF+ZLJnSvvBkTcukGSjfq9IOuwM1Zd/0Fd0Y9J7dLJU1wD07NB2Pwrn+BKcgHJ6BrDbGhZKOl4y6W2kA9CZvujhZp0FKj3SK+Eu4CCVP67erbUx4ODR3eSlBlcSwJllTcy5bia9StJhZxK93uF+Gi48l5syNO/o1uOIfqSyi+19xl2nxmcJ8nNDp1FwHzl7WGXRp8wp8j9S7QeWSYt0ZgVfEhvp6ymNIe7Fs8qa5GuPK/Nx+IMzHjhanEeFnhjr0aCrkmZoOPPZyG2W++xt0q3SAehs32SONukDpHZb7NQsn0FlgXdDLjbZu0vHoNmks/iVdzbpNntucA/zQPq1uYika1K7Vjn7cbHOkfc9U7V/kO4B282k35YOQKdScL9Auk9l8WuR0PYLvQt54jmTpnuum2RHJWO52Sa9B+T8PK5w4EL0u6osmjSx6wP02wrwKGm7I5OKz304DORos4TfTu6ZIJ8L+uEm+2lpHHSz1mR0xq/qtftMKxsXZnl0sgZ9yLrHObVPCnzMwILuOLCfzpJsoILrve50+40J3H5pK4MvDX35eoPYo+JHcJzfARwYI+c1c00MvHBUp1tyuspnv16AdranwhlSPgNCegbhovQJqR+rpXZWYf/WyCx6qD4K7MjmiPxJOS0uqxdTqbyMw/Umm1+fPO6DLQMCFww6ALxcnG9YP/hMIzjk0BQ6W2qVj379qWj3cHAXKi04StwM9k9Vjos9RnbD+AU9IjMDF/g6ENwucBvFuAPyfHNNdDGv9HXPkNqFI3ch0ht1ojhbni5a2uw3gzoIxWsem+TWTLjvT6Xt+oCDyu5e3mFF3k34dSQzouyZRg7Lxu3xaHck05/vDb4YZMdwVVdHMr/aTZhw/93AKUF9oPv0YNPO3hnrLg+c0uu6J/nrrAfjYu7HomtMuYsS2i70bsIkXCu1rrRpGA2WSgcA7dI7wa0BHfqljw8g0SN0ecYq3DtE3/Y1Uj84ch4HmdakO4/5ku3jBEY7L/XlG8G5Eh8fKNwHDwxehBE0ekPiQuLzA7fHosmXmZjQJu3LGSptV/tvmfOLIuRxhqBLkl4bfq3PKVRvw6VCcJfeheJ2MIZgtDFcvNHlmPg/VzhlQw7t22vFbdyiTB0E4r3yu1H+ew3++4t5Ec0wkknF50tJW1zb6tzoxW2/Y8ONYkY+TZWLAzebUz7/WQ+jpdqsoTl1h7gF/ewEs9AG2yK3gNA8gzxuVaCHbD+puihpLs3ixpu87M57IGwEmmOE8AbJB0PR5gwpGPx0ywfP6C9Hw3dS9qA0IoseE/q8+YIsSvraKKJuxdelkrei7jKpE4H7TJCeKrbV3J426pBFi4QenHVe1vryP1t9C+CmKnF7Y74JWZy+2/WtqB9dW6SB7c9og9HQ5fINwM8gNdsEyn++WaLQKBW8RKFRKniJQqNU8BKFRqngJQqNLwEZWErzngOVuwAAAABJRU5ErkJggg==" alt="Microsoft Logo"/></a><p>© 2012-<!-- -->2022<!-- --> Microsoft<br/><a href="https://go.microsoft.com/fwlink/?LinkId=521839" title="Microsoft Privacy Policy">Privacy</a></p></article><article id="using-typescript"><h3>Using TypeScript</h3><ul><li><a href="/docs/home">Get Started</a></li><li><a href="/download">Download</a></li><li><a href="/community">Community</a></li><li><a to="/play/" href="/play/">Playground</a></li><li><a href="/tsconfig">TSConfig Ref</a></li><li><a href="/why-create-typescript">Why TypeScript</a></li><li><a href="/branding">Design</a></li><li id="popover-trigger" class="popover-container"><a href="/play/#show-examples" aria-haspopup="true" id="popover-trigger-anchor"><span style="display:none" class="link-prefix footer-icon"></span>Code Samples</a><div id="playground-samples-popover" aria-label="Code Samples Submenu" tabindex="-1"><div class="examples"><div role="tablist"><button role="tab" class="section-name button " aria-selected="false">JavaScript</button><button role="tab" class="section-name button  selected" aria-selected="true">TypeScript</button></div><div class="section-content button-javascript" style="display:none" role="tabpanel"><p style="width:100%">See how TypeScript improves day to day working with JavaScript with minimal additional syntax.</p><div class="section-list"><h4>JavaScript Essentials</h4><ol><li><a class="example-link" title="Open the example: Hello World" href="/play/?target=1&amp;q=83#example/hello-world">Hello World</a><div class="example-indicator" data-id="hello-world" data-hash="004f7574a06b960af23fb5e836cb0d1c"></div></li><li><a class="example-link" title="Open the example: Objects and Arrays" href="/play/?strict=false&amp;q=350#example/objects-and-arrays">Objects and Arrays</a><div class="example-indicator" data-id="objects-and-arrays" data-hash="c69e8b70dda681d3392a560224c0264a"></div></li><li><a class="example-link" title="Open the example: Functions" href="/play/?noImplicitAny=false&amp;q=365#example/functions">Functions</a><div class="example-indicator" data-id="functions" data-hash="ae890345afc3df359caafe86c2b84dde"></div></li><li><a class="example-link" title="Open the example: Code Flow" href="/play/?strictNullChecks=true&amp;q=255#example/code-flow">Code Flow</a><div class="example-indicator" data-id="code-flow" data-hash="9ae5b97b721d9c0ba93af3bd1ee7d31b"></div></li></ol></div><div class="section-list"><h4>Functions with JavaScript</h4><ol><li><a class="example-link" title="Open the example: Generic Functions" href="/play/?q=363#example/generic-functions">Generic Functions</a><div class="example-indicator" data-id="generic-functions" data-hash="93285a3d5f3fd2dcc99ae08ed1566570"></div></li><li><a class="example-link" title="Open the example: Typing Functions" href="/play/?q=101#example/typing-functions">Typing Functions</a><div class="example-indicator" data-id="typing-functions" data-hash="1fcf279cc44359488c1080d4c89a21c7"></div></li><li><a class="example-link" title="Open the example: Function Chaining" href="/play/?esModuleInterop=true&amp;q=109#example/function-chaining">Function Chaining</a><div class="example-indicator" data-id="function-chaining" data-hash="6f9f8928643732da713f73e4b5c33a44"></div></li></ol></div><div class="section-list"><h4>Working With Classes</h4><ol><li><a class="example-link" title="Open the example: Classes 101" href="/play/?q=409#example/classes-101">Classes 101</a><div class="example-indicator" data-id="classes-101" data-hash="f8fb270601471de56c437ed3a08771fd"></div></li><li><a class="example-link" title="Open the example: This" href="/play/?q=315#example/this">This</a><div class="example-indicator" data-id="this" data-hash="591560f285cca99ba2fbabe023d39b1d"></div></li><li><a class="example-link" title="Open the example: Generic Classes" href="/play/?q=77#example/generic-classes">Generic Classes</a><div class="example-indicator" data-id="generic-classes" data-hash="fc4bdd9cb8eb5f55b4f2139adb0c73d5"></div></li><li><a class="example-link" title="Open the example: Mixins" href="/play/?q=452#example/mixins">Mixins</a><div class="example-indicator" data-id="mixins" data-hash="9585388ab95b974dbcd87d1f1a82e712"></div></li></ol></div><div class="section-list"><h4>Modern JavaScript</h4><ol><li><a class="example-link" title="Open the example: Async Await" href="/play/?q=57#example/async-await">Async Await</a><div class="example-indicator" data-id="async-await" data-hash="1566feca03a4b78acde37b0938744bfb"></div></li><li><a class="example-link" title="Open the example: Immutability" href="/play/?q=277#example/immutability">Immutability</a><div class="example-indicator" data-id="immutability" data-hash="3d4a9eb8140b978d5a2038b229ed7358"></div></li><li><a class="example-link" title="Open the example: Import Export" href="/play/?q=345#example/import-export">Import Export</a><div class="example-indicator" data-id="import-export" data-hash="ed9c473c3170e3d302be0dc25a166d94"></div></li><li><a class="example-link" title="Open the example: JSDoc Support" href="/play/?useJavaScript=trueq=65#example/jsdoc-support">JSDoc Support</a><div class="example-indicator" data-id="jsdoc-support" data-hash="6d49c5c5529742c4e79cd356aa20da28"></div></li></ol></div><div class="section-list"><h4>External APIs</h4><ol><li><a class="example-link" title="Open the example: TypeScript with Web" href="/play/?useJavaScript=trueq=472#example/typescript-with-web">TypeScript with Web</a><div class="example-indicator" data-id="typescript-with-web" data-hash="e143e59b2b7c9e033269136cf35b9114"></div></li><li><a class="example-link" title="Open the example: TypeScript with React" href="/play/?jsx=2&amp;esModuleInterop=true&amp;q=390#example/typescript-with-react">TypeScript with React</a><div class="example-indicator" data-id="typescript-with-react" data-hash="00f1fd1347cdb0c43d05ac7c26436b65"></div></li><li><a class="example-link" title="Open the example: TypeScript with Deno" href="/play/?q=301#example/typescript-with-deno">TypeScript with Deno</a><div class="example-indicator" data-id="typescript-with-deno" data-hash="a96b99b656118ea0e5934b6d5928d684"></div></li><li><a class="example-link" title="Open the example: TypeScript with Node" href="/play/?useJavaScript=trueq=140#example/typescript-with-node">TypeScript with Node</a><div class="example-indicator" data-id="typescript-with-node" data-hash="f5d6d0ca77d36946973d45a6d26cd55e"></div></li><li><a class="example-link" title="Open the example: TypeScript with WebGL" href="/play/?useJavaScript=trueq=330#example/typescript-with-webgl">TypeScript with WebGL</a><div class="example-indicator" data-id="typescript-with-webgl" data-hash="f7b964a6f0211592d843943a016b67aa"></div></li></ol></div><div class="section-list"><h4>Helping with JavaScript</h4><ol><li><a class="example-link" title="Open the example: Quick Fixes" href="/play/?q=459#example/quick-fixes">Quick Fixes</a><div class="example-indicator" data-id="quick-fixes" data-hash="6a3b23a7a0b59f35a275a22ac3c26caa"></div></li><li><a class="example-link" title="Open the example: Errors" href="/play/?q=262#example/errors">Errors</a><div class="example-indicator" data-id="errors" data-hash="a8002c1590daaa3e8de9a64bb700fab6"></div></li></ol></div></div><div class="section-content button-typescript" role="tabpanel"><p style="width:100%">Explore how TypeScript extends JavaScript to add more safety and tooling.</p><div class="section-list"><h4>Primitives</h4><ol><li><a class="example-link" title="Open the example: Any" href="/play/?q=161#example/any">Any</a><div class="example-indicator" data-id="any" data-hash="59efed43e47eac17963ab07b009916ed"></div></li><li><a class="example-link" title="Open the example: Literals" href="/play/?q=253#example/literals">Literals</a><div class="example-indicator" data-id="literals" data-hash="91d762e45e60180c395e9538613e1f8a"></div></li><li><a class="example-link" title="Open the example: Union and Intersection Types" href="/play/?q=496#example/union-and-intersection-types">Union and Intersection Types</a><div class="example-indicator" data-id="union-and-intersection-types" data-hash="8131575408d4a26d9471c2bdd71fb633"></div></li><li><a class="example-link" title="Open the example: Unknown and Never" href="/play/?q=207#example/unknown-and-never">Unknown and Never</a><div class="example-indicator" data-id="unknown-and-never" data-hash="93996587b00d20782ee730895f8ccbeb"></div></li></ol></div><div class="section-list"><h4>Type Primitives</h4><ol><li><a class="example-link" title="Open the example: Tuples" href="/play/?q=428#example/tuples">Tuples</a><div class="example-indicator" data-id="tuples" data-hash="fb853ccfd91dcecf492b498942ef2897"></div></li><li><a class="example-link" title="Open the example: Built-in Utility Types" href="/play/?strictNullChecks=true&amp;q=126#example/built-in-utility-types">Built-in Utility Types</a><div class="example-indicator" data-id="built-in-utility-types" data-hash="697cdcc79d2ec793c46849ad5386f5d4"></div></li><li><a class="example-link" title="Open the example: Nullable Types" href="/play/?strictNullChecks=false&amp;q=409#example/nullable-types">Nullable Types</a><div class="example-indicator" data-id="nullable-types" data-hash="36427128912498b79311954366020493"></div></li></ol></div><div class="section-list"><h4>Meta-Types</h4><ol><li><a class="example-link" title="Open the example: Conditional Types" href="/play/?q=55#example/conditional-types">Conditional Types</a><div class="example-indicator" data-id="conditional-types" data-hash="f3bfbde0451ddb85c69834417e1d2bb7"></div></li><li><a class="example-link" title="Open the example: Discriminate Types" href="/play/?q=338#example/discriminate-types">Discriminate Types</a><div class="example-indicator" data-id="discriminate-types" data-hash="fbe0e8e877b3493476684bb25d3fe647"></div></li><li><a class="example-link" title="Open the example: Indexed Types" href="/play/?q=234#example/indexed-types">Indexed Types</a><div class="example-indicator" data-id="indexed-types" data-hash="b24f590997a688a0ad23c72559e1dc81"></div></li><li><a class="example-link" title="Open the example: Mapped Types" href="/play/?q=454#example/mapped-types">Mapped Types</a><div class="example-indicator" data-id="mapped-types" data-hash="92a920ec0ed84d6aaf0156b5c14eb5c0"></div></li></ol></div><div class="section-list"><h4>Language</h4><ol><li><a class="example-link" title="Open the example: Soundness" href="/play/?strictFunctionTypes=false&amp;q=70#example/soundness">Soundness</a><div class="example-indicator" data-id="soundness" data-hash="a0d223482c2c720af6527143102483a1"></div></li><li><a class="example-link" title="Open the example: Structural Typing" href="/play/?q=347#example/structural-typing">Structural Typing</a><div class="example-indicator" data-id="structural-typing" data-hash="f06d1c57e5e20267c18ad9c9a9543061"></div></li><li><a class="example-link" title="Open the example: Type Guards" href="/play/?q=99#example/type-guards">Type Guards</a><div class="example-indicator" data-id="type-guards" data-hash="ae79c6c3ddb40933f33fcdea82267e1a"></div></li><li><a class="example-link" title="Open the example: Type Widening and Narrowing" href="/play/?q=221#example/type-widening-and-narrowing">Type Widening and Narrowing</a><div class="example-indicator" data-id="type-widening-and-narrowing" data-hash="11d2f4b0e4029906aefc31649152bcc6"></div></li></ol></div><div class="section-list"><h4>Language Extensions</h4><ol><li><a class="example-link" title="Open the example: Enums" href="/play/?q=246#example/enums">Enums</a><div class="example-indicator" data-id="enums" data-hash="3f9d750a80f2e4a837a325e5a7c5d0c8"></div></li><li><a class="example-link" title="Open the example: Nominal Typing" href="/play/?q=467#example/nominal-typing">Nominal Typing</a><div class="example-indicator" data-id="nominal-typing" data-hash="4e0fb97c0e99f9d0c2c5746a80be2621"></div></li><li><a class="example-link" title="Open the example: Types vs Interfaces" href="/play/?q=111#example/types-vs-interfaces">Types vs Interfaces</a><div class="example-indicator" data-id="types-vs-interfaces" data-hash="0ad4d11b7ff81f93c103c255f29ae752"></div></li></ol></div></div></div><div class="arrow-down"></div></div></li></ul></article><article id="community-links"><h3>Community</h3><ul><li><a style="position:relative" href="/community">Get Help</a></li><li><a style="position:relative" href="https://devblogs.microsoft.com/typescript/">Blog</a></li><li><a style="position:relative" href="https://github.com/microsoft/TypeScript/#readme"><span class="link-prefix"><svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m6.03927.165405c-3.27055 0-5.922909 2.652005-5.922909 5.923645 0 2.61709 1.697089 4.83705 4.050909 5.62035.29636.0546.40436-.1284.40436-.2854 0-.1408-.00509-.5131-.008-1.0073-1.64763.3578-1.99527-.7942-1.99527-.7942-.26946-.68436-.65782-.86654-.65782-.86654-.53782-.36727.04073-.36001.04073-.36001.59454.04182.90727.61055.90727.61055.52836.90509 1.38655.64364 1.724.492.05382-.38254.20691-.64363.376-.79163-1.31527-.14946-2.69818-.65782-2.69818-2.92764 0-.64654.23091-1.17564.60982-1.58946-.06109-.14981-.26437-.75236.05818-1.56763 0 0 .49709-.15927 1.62872.60727.47237-.13163.97928-.19709 1.48291-.19964.50328.00255 1.00982.06801 1.48291.19964 1.13091-.76654 1.62727-.60727 1.62727-.60727.32328.81527.12001 1.41782.05928 1.56763.37964.41382.60873.94292.60873 1.58946 0 2.27564-1.38509 2.77636-2.70437 2.92291.21237.18291.40182.54436.40182 1.09672 0 .79204-.00727 1.43094-.00727 1.62514 0 .1585.10691.3429.40727.2851 2.35197-.7851 4.04767-3.00369 4.04767-5.62005 0-3.27164-2.6524-5.923645-5.92403-5.923645z" fill="#fffffe" fill-rule="evenodd"></path></svg></span>GitHub Repo</a></li><li><a style="position:relative" href="https://discord.gg/typescript"><span class="link-prefix"><svg fill="none" height="10" viewBox="0 0 11 10" width="11" xmlns="http://www.w3.org/2000/svg"><path d="m9.05511 0h-7.11021c-.59959 0-1.087753.46-1.087753 1.03v6.76c0 .57.488163 1.03 1.087753 1.03h6.01715l-.28123-.925.67918.595.64205.56 1.14085.95v-8.97c0-.57-.4882-1.03-1.08779-1.03zm-2.04817 6.53s-.19102-.215-.3502-.405c.6951-.185.96041-.595.96041-.595-.21755.135-.42449.23-.61021.295-.2653.105-.52.175-.76938.215-.50939.09-.97633.065-1.37429-.005-.30245-.055-.56245-.135-.78-.215-.12204-.045-.25469-.1-.38735-.17-.01592-.01-.03183-.015-.04775-.025-.01061-.005-.01592-.01-.02123-.015-.09551-.05-.14857-.085-.14857-.085s.2547.4.92857.59c-.15918.19-.35551.415-.35551.415-1.17265-.035-1.61836-.76-1.61836-.76 0-1.61.76408-2.915.76408-2.915.76408-.54 1.49102-.525 1.49102-.525l.05306.06c-.9551.26-1.39551.655-1.39551.655s.11673-.06.31306-.145c.56776-.235 1.01878-.3 1.20449-.315.03184-.005.05837-.01.0902-.01.32368-.04.6898-.05 1.07184-.01.50408.055 1.04531.195 1.59714.48 0 0-.41918-.375-1.32122-.635l.07428-.08s.72694-.015 1.49103.525c0 0 .76408 1.305.76408 2.915 0 0-.45102.725-1.62368.76z" fill="#fff"></path></svg></span>Community Chat</a></li><li><a style="position:relative" href="https://twitter.com/TypeScript"><span class="link-prefix"><svg fill="none" height="10" viewBox="0 0 13 10" width="13" xmlns="http://www.w3.org/2000/svg"><path d="m4.58519 10c4.62962 0 7.16291-3.83919 7.16291-7.16289 0-.10801 0-.21602-.0049-.32403.4909-.35348.918-.80024 1.2568-1.30591-.4517.20128-.9377.33384-1.4483.39766.5204-.30929.9181-.805148 1.1095-1.394284-.486.289658-1.026.495856-1.6004.608773-.4615-.490946-1.11448-.7953322-1.83617-.7953322-1.38938 0-2.51856 1.1291732-2.51856 2.5185532 0 .19638.02455.38785.06383.57441-2.09143-.1031-3.94721-1.10954-5.1893-2.631474-.21602.373119-.33876.805154-.33876 1.266644 0 .87388.44677 1.64467 1.11936 2.09634-.41239-.01473-.80024-.12765-1.13899-.31421v.03437c0 1.21754.86897 2.23871 2.01778 2.46946-.2111.05891-.43203.08837-.66277.08837-.16202 0-.31912-.01473-.47131-.04419.31911 1.00153 1.25191 1.72813 2.35163 1.74777-.86406.67751-1.94906 1.08008-3.12733 1.08008-.20128 0-.402571-.00982-.59895-.03436 1.10954.70696 2.43509 1.12425 3.85393 1.12425z" fill="#fff"></path></svg></span>@TypeScript</a></li><li><a style="position:relative" href="https://stackoverflow.com/questions/tagged/typescript"><span class="link-prefix"><svg fill="none" height="16" viewBox="0 0 12 16" width="12" xmlns="http://www.w3.org/2000/svg"><path d="m.375 15.1875v-6h1.09375l-.03125 4.8125h7.1875v-4.78125h1.125v5.96875zm1.75-3.1563h5.625v1.1876h-5.625zm.03125-.9374.09375-1.2188 5.65625.5312-.125 1.2188zm.28125-2.4688.34375-1.1875 5.46875 1.53125-.34375 1.18745zm1.03125-2.90625.625-1.0625 4.84375 2.9375-.65625 1.0625zm2.40625-2.9375 1-.71875 3.3125 4.625-1 .71875zm3.625-1.78125 1.1875-.1875.9375 5.59375-1.2188.1875z" fill="#fff"></path></svg></span>Stack Overflow</a></li><li><a style="position:relative" href="https://github.com/microsoft/TypeScript-Website"><span class="link-prefix"><svg fill="none" height="12" viewBox="0 0 12 12" width="12" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="m6.03927.165405c-3.27055 0-5.922909 2.652005-5.922909 5.923645 0 2.61709 1.697089 4.83705 4.050909 5.62035.29636.0546.40436-.1284.40436-.2854 0-.1408-.00509-.5131-.008-1.0073-1.64763.3578-1.99527-.7942-1.99527-.7942-.26946-.68436-.65782-.86654-.65782-.86654-.53782-.36727.04073-.36001.04073-.36001.59454.04182.90727.61055.90727.61055.52836.90509 1.38655.64364 1.724.492.05382-.38254.20691-.64363.376-.79163-1.31527-.14946-2.69818-.65782-2.69818-2.92764 0-.64654.23091-1.17564.60982-1.58946-.06109-.14981-.26437-.75236.05818-1.56763 0 0 .49709-.15927 1.62872.60727.47237-.13163.97928-.19709 1.48291-.19964.50328.00255 1.00982.06801 1.48291.19964 1.13091-.76654 1.62727-.60727 1.62727-.60727.32328.81527.12001 1.41782.05928 1.56763.37964.41382.60873.94292.60873 1.58946 0 2.27564-1.38509 2.77636-2.70437 2.92291.21237.18291.40182.54436.40182 1.09672 0 .79204-.00727 1.43094-.00727 1.62514 0 .1585.10691.3429.40727.2851 2.35197-.7851 4.04767-3.00369 4.04767-5.62005 0-3.27164-2.6524-5.923645-5.92403-5.923645z" fill="#fffffe" fill-rule="evenodd"></path></svg></span>Web Repo</a></li></ul></article></section></footer><div class="page-popup" id="language-recommendation" style="display:none"><p id="language-recommendation-p">MSG</p><div><button class="first" id="language-recommendation-open"></button><button id="language-recommendation-no-more"></button></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/docs/handbook/release-notes/overview.html";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-813ebee181afe7c0db1a.js"],"app":["/app-20c8180fcdcce256ed84.js"],"component---src-pages-branding-tsx":["/component---src-pages-branding-tsx-fcf9b3211ee81b97c78f.js"],"component---src-pages-dev-bug-workbench-tsx":["/component---src-pages-dev-bug-workbench-tsx-bb95a1e241537d443f55.js"],"component---src-pages-dev-playground-plugins-tsx":["/component---src-pages-dev-playground-plugins-tsx-416795800ae4687f7f82.js"],"component---src-pages-dev-sandbox-tsx":["/component---src-pages-dev-sandbox-tsx-d7ea5276f191a72d3cf5.js"],"component---src-pages-dev-twoslash-tsx":["/component---src-pages-dev-twoslash-tsx-037d6d820e63d4f553bc.js"],"component---src-pages-dev-typescript-vfs-tsx":["/component---src-pages-dev-typescript-vfs-tsx-a6f2511c1df8436f4545.js"],"component---src-templates-documentation-tsx":["/component---src-templates-documentation-tsx-eca476b99748f6719550.js"],"component---src-templates-glossary-tsx":["/component---src-templates-glossary-tsx-e4ef5189635918689bcb.js"],"component---src-templates-pages-cheatsheets-tsx":["/component---src-templates-pages-cheatsheets-tsx-33a75a1f51fb34a59a61.js"],"component---src-templates-pages-community-tsx":["/component---src-templates-pages-community-tsx-f1916732053a4ffd4730.js"],"component---src-templates-pages-docs-bootstrap-tsx":["/component---src-templates-pages-docs-bootstrap-tsx-cd092d410e37915808b4.js"],"component---src-templates-pages-docs-handbook-index-tsx":["/component---src-templates-pages-docs-handbook-index-tsx-b905322dde18298a7b69.js"],"component---src-templates-pages-docs-index-tsx":["/component---src-templates-pages-docs-index-tsx-a141e9cb548811665774.js"],"component---src-templates-pages-download-tsx":["/component---src-templates-pages-download-tsx-e1aa53fe26723eb787e0.js"],"component---src-templates-pages-dt-index-tsx":["/component---src-templates-pages-dt-index-tsx-00c8d32a3434f212c4f0.js"],"component---src-templates-pages-dt-search-tsx":["/component---src-templates-pages-dt-search-tsx-a2071d6186baa485ee43.js"],"component---src-templates-pages-empty-tsx":["/component---src-templates-pages-empty-tsx-7602eb80cf5e2041e880.js"],"component---src-templates-pages-index-tsx":["/component---src-templates-pages-index-tsx-fe435dafe30e625174ef.js"],"component---src-templates-pages-tools-tsx":["/component---src-templates-pages-tools-tsx-f4f5474c1cbfb900b32c.js"],"component---src-templates-pages-why-create-typescript-tsx":["/component---src-templates-pages-why-create-typescript-tsx-bf58861d1ab983b57248.js"],"component---src-templates-play-example-tsx":["/component---src-templates-play-example-tsx-e22080f6f661e224f78d.js"],"component---src-templates-play-tsx":["/component---src-templates-play-tsx-3b5871a570d11dfc1208.js"],"component---src-templates-playground-handbook-tsx":["/component---src-templates-playground-handbook-tsx-d6893e22d4b7b81ad0b2.js"],"component---src-templates-tsconfig-option-one-page-tsx":["/component---src-templates-tsconfig-option-one-page-tsx-9566a418989b3ff4b98a.js"],"component---src-templates-tsconfig-reference-tsx":["/component---src-templates-tsconfig-reference-tsx-23eafdc0f49a9a36db68.js"]};/*]]>*/</script><script src="/polyfill-813ebee181afe7c0db1a.js" nomodule=""></script><script src="/component---src-templates-documentation-tsx-eca476b99748f6719550.js" async=""></script><script src="/183c9096950fb71588bafdbe7cf620580aa8ae09-cf408be6dfca9d86be22.js" async=""></script><script src="/5cdb9a1faef7e97fcc6849d7148df5c633719a46-1fdbcd888937ad650ed7.js" async=""></script><script src="/28b1c059e7c205a6d05b694b6e39ba5800dfd976-52db51740532ecd0447c.js" async=""></script><script src="/commons-396fac08efb475b6d85a.js" async=""></script><script src="/app-20c8180fcdcce256ed84.js" async=""></script><script src="/framework-b8146448489de1f5eca3.js" async=""></script><script src="/webpack-runtime-382a80b19bc26b994491.js" async=""></script></body></html>